{"config":{"lang":["ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83c\udfe0 Home Assistant Audit &amp; Configuration Framework","text":"<p>\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0440\u0435\u0434\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0434\u043b\u044f Home Assistant \u0441 AI-\u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u043e\u043c \u0447\u0435\u0440\u0435\u0437 Cursor IDE</p>"},{"location":"#_1","title":"\u2728 \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li> <p> AI-\u0410\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442</p> <p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043f\u0440\u044f\u043c\u043e \u0438\u0437 Cursor \u0447\u0435\u0440\u0435\u0437 Model Context Protocol (MCP)</p> </li> <li> <p> Real-time \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</p> <p>\u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 Samba - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u043e</p> </li> <li> <p> \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</p> <p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u0443\u0442\u0435\u0447\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445, SSH \u043a\u043b\u044e\u0447\u0438, \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043f\u0435\u0440\u0435\u0434 \u043a\u043e\u043c\u043c\u0438\u0442\u0430\u043c\u0438</p> </li> <li> <p> \u0410\u0443\u0434\u0438\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u044b</p> <p>\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0441 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u043c\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0438\u043b\u0438\u0443\u043c\u0430 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432</p> </li> <li> <p> \u0411\u044d\u043a\u0430\u043f\u044b</p> <p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0431\u044d\u043a\u0430\u043f\u044b \u043f\u0435\u0440\u0435\u0434 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\u0438, \u0431\u044b\u0441\u0442\u0440\u043e\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435</p> </li> <li> <p> \u0412\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</p> <p>Git-\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 \u0437\u0430\u0449\u0438\u0442\u043e\u0439 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445</p> </li> </ul>"},{"location":"#_2","title":"\ud83d\ude80 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":"<pre><code># 1. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 (\u043e\u0434\u0438\u043d \u0440\u0430\u0437)\n./scripts/setup.sh\n\n# 2. \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e (\u0432\u0441\u0451 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0434\u0435\u0441\u044c!)\n./ha\n</code></pre> <p>\u0412\u043e\u0442 \u0438 \u0432\u0441\u0451! \u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0433\u043e\u0442\u043e\u0432\u0430 \u043a \u0440\u0430\u0431\u043e\u0442\u0435.</p>"},{"location":"#_3","title":"\ud83d\udcca \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u044b","text":"<pre><code>graph TB\n    A[Cursor IDE + AI] --&gt;|MCP Protocol| B[Home Assistant Server]\n    A --&gt;|Samba Mount| C[Configuration Files]\n    A --&gt;|SSH| D[Shell Access]\n\n    B --&gt; E[\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430]\n    E --&gt; E1[\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435&lt;br/&gt;15 \u0437\u043e\u043d]\n    E --&gt; E2[\u041a\u0430\u043c\u0435\u0440\u044b&lt;br/&gt;\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438]\n    E --&gt; E3[\u041c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u0438]\n    E --&gt; E4[\u0421\u0435\u0442\u044c&lt;br/&gt;Mikrotik]\n\n    A --&gt; F[\u0410\u0443\u0434\u0438\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u0430]\n    F --&gt; F1[\u0410\u043d\u0430\u043b\u0438\u0437 \u0434\u0430\u043d\u043d\u044b\u0445]\n    F --&gt; F2[\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438]\n    F --&gt; F3[\u041e\u0442\u0447\u0451\u0442\u044b]\n\n    style A fill:#2196F3\n    style B fill:#4CAF50\n    style E fill:#FF9800\n    style F fill:#9C27B0</code></pre>"},{"location":"#_4","title":"\ud83c\udfaf \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":""},{"location":"#1-ha","title":"1. \u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e <code>./ha</code>","text":"<p>\u0412\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u043e\u0434\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435:</p> <ul> <li>\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0440\u0435\u0436\u0438\u043c\u0430 (\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439/\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439/\u0441\u043c\u0435\u0448\u0430\u043d\u043d\u044b\u0439)</li> <li>\ud83d\udd0c \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438</li> <li>\ud83d\udd0d \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430</li> <li>\ud83d\ude80 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0435 \u0440\u0430\u0437\u0432\u0451\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435</li> <li>\ud83d\udcbe \u0411\u044d\u043a\u0430\u043f\u044b \u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435</li> <li>\ud83d\udd2c \u0410\u0443\u0434\u0438\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u044b</li> </ul>"},{"location":"#2","title":"2. \u0410\u0443\u0434\u0438\u0442 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430","text":"<p>\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 \u043e\u0442 \u043a\u043e\u043d\u0441\u0438\u043b\u0438\u0443\u043c\u0430 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432:</p> <ul> <li>\ud83c\udf21\ufe0f \u041a\u043b\u0438\u043c\u0430\u0442-\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c - \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</li> <li>\ud83d\udd12 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c - \u043a\u0430\u043c\u0435\u0440\u044b, \u0434\u0430\u0442\u0447\u0438\u043a\u0438, \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f</li> <li>\ud83d\udce1 \u0421\u0435\u0442\u044c - \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0440\u043e\u0443\u0442\u0435\u0440\u043e\u0432 \u0438 \u0442\u043e\u0447\u0435\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>\u26a1 \u042d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u043a\u0430 - \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438</li> <li>\ud83c\udf9b\ufe0f \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f - \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432</li> <li>\ud83d\udcca \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 - \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0437\u0434\u043e\u0440\u043e\u0432\u044c\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430:</p> <pre><code>\u2705 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b: 65% \u2192 \u041f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b: 90%\n\u26a0\ufe0f \u041d\u0430\u0439\u0434\u0435\u043d\u043e 70+ unavailable \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\n\ud83d\udca1 \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f: \u0434\u043e 25% \u043f\u0440\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435\n</code></pre>"},{"location":"#3","title":"3. \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0435 \u0440\u0430\u0437\u0432\u0451\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435","text":"<p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 workflow:</p> <ol> <li>\u2705 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u044d\u043a\u0430\u043f\u0430</li> <li>\u2705 \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f YAML</li> <li>\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 HA</li> <li>\u2705 \u041a\u043e\u043c\u043c\u0438\u0442 \u0432 Git</li> <li>\u2705 \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a HA</li> <li>\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438</li> </ol>"},{"location":"#_5","title":"\ud83d\udcda \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","text":"<ul> <li> <p> \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442</p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0438 \u043f\u0435\u0440\u0432\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0437\u0430 5 \u043c\u0438\u043d\u0443\u0442</p> </li> <li> <p> \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430</p> <p>\u041f\u043e\u0448\u0430\u0433\u043e\u0432\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c\u0438 \u0434\u043b\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</p> </li> <li> <p> \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u043a\u043e\u043c\u0430\u043d\u0434</p> <p>\u0412\u0441\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0441\u043a\u0440\u0438\u043f\u0442\u044b \u0438 \u0438\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b</p> </li> <li> <p> \u041f\u0435\u0440\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u0442</p> <p>\u041a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0430\u0443\u0434\u0438\u0442 \u0438 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b</p> </li> </ul>"},{"location":"#_6","title":"\ud83d\udee1\ufe0f \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0412\u0441\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b:</p> <ul> <li>\u2705 <code>config.yml</code> - \u0432\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 (\u0432 <code>.gitignore</code>)</li> <li>\u2705 <code>.cursor/mcp.json</code> - MCP \u0442\u043e\u043a\u0435\u043d (\u0432 <code>.gitignore</code>)</li> <li>\u2705 <code>.ssh/</code> - SSH \u043a\u043b\u044e\u0447\u0438 (\u0432 <code>.gitignore</code>)</li> <li>\u2705 <code>audits/</code> - \u043e\u0442\u0447\u0451\u0442\u044b \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 (\u0432 <code>.gitignore</code>)</li> </ul> <p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430:</p> <pre><code>./scripts/check_security.sh  # \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0435\u0440\u0435\u0434 \u043a\u043e\u043c\u043c\u0438\u0442\u043e\u043c\n</code></pre>"},{"location":"#_7","title":"\ud83c\udf1f \u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"#_8","title":"\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f","text":"<pre><code>automation:\n  - alias: \"\u041f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u0430\u044f \u043a\u0440\u0438\u0432\u0430\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f\"\n    trigger:\n      - platform: state\n        entity_id: sensor.outdoor_temperature\n    action:\n      - service: climate.set_temperature\n        data:\n          temperature: &gt;\n            {% set outdoor = states('sensor.outdoor_temperature')|float %}\n            {{ 25 - (outdoor * 0.5) }}\n</code></pre>"},{"location":"#_9","title":"\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438","text":"<pre><code>automation:\n  - alias: \"\u0422\u0440\u0435\u0432\u043e\u0433\u0430: \u0427\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u0430 \u043f\u0435\u0440\u0438\u043c\u0435\u0442\u0440\u0435\"\n    trigger:\n      - platform: state\n        entity_id: binary_sensor.street_ptz_smart_motion_human\n        to: \"on\"\n    condition:\n      - condition: time\n        after: \"22:00:00\"\n        before: \"06:00:00\"\n    action:\n      - service: notify.telegram\n        data:\n          message: \"\u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u0432\u043e\u0437\u043b\u0435 \u0434\u043e\u043c\u0430!\"\n</code></pre>"},{"location":"#_10","title":"\ud83d\udcac \u0421\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e","text":"<ul> <li>\ud83d\udc1b \u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435</li> <li>\ud83d\udca1 \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u0435</li> <li>\u2b50 \u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0437\u0432\u0435\u0437\u0434\u0443 \u043d\u0430 GitHub</li> </ul>"},{"location":"#_11","title":"\ud83d\udcc4 \u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f","text":"<p>MIT License - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e!</p> <p>\u0421\u043e\u0432\u0435\u0442</p> <p>\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441 \u0411\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0442\u0430, \u0437\u0430\u0442\u0435\u043c \u043f\u0440\u043e\u0432\u0435\u0434\u0438\u0442\u0435 \u041f\u0435\u0440\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u0442 \u0447\u0442\u043e\u0431\u044b \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0432\u0430\u0448\u0435\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b!</p>"},{"location":"analyzers/","title":"\ud83d\udcca \u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u044b \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 Home Assistant","text":"<p>\u041d\u0430\u0431\u043e\u0440 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u0433\u043b\u0443\u0431\u043e\u043a\u043e\u0433\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 Home Assistant.</p>"},{"location":"analyzers/#_1","title":"\ud83c\udfaf \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"analyzers/#dependencypy","title":"\ud83d\udd78\ufe0f \u0413\u0440\u0430\u0444 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 (<code>dependency.py</code>)","text":"<p>\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0441\u0432\u044f\u0437\u0438 \u043c\u0435\u0436\u0434\u0443 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044f\u043c\u0438 \u0432 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p> <p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442:</p> <ul> <li>\ud83d\udd0d \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432\u0441\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0438 \u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\ud83d\udd17 \u0421\u0442\u0440\u043e\u0438\u0442 \u0433\u0440\u0430\u0444 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> <li>\ud83d\uddd1\ufe0f \u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0438\u0432\u0430\u0435\u0442 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 (orphaned)</li> <li>\u26a0\ufe0f \u0414\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u0443\u0435\u0442 \u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438</li> <li>\ud83d\udca5 \u041e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u0442 impact \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:</p> <pre><code># \u0427\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e\n./ha \u2192 12) \ud83d\udd78\ufe0f \u0413\u0440\u0430\u0444 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439\n\n# \u041d\u0430\u043f\u0440\u044f\u043c\u0443\u044e\npython3 scripts/analyzers/dependency.py config\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430:</p> <pre><code>\ud83d\udcca \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430:\n   \u0412\u0441\u0435\u0433\u043e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439:   245\n   \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439:     42\n   \u0421\u043a\u0440\u0438\u043f\u0442\u043e\u0432:          18\n\n\ud83d\udd34 \u041d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 (15):\n   \u2022 sensor.unused_temperature\n   \u2022 binary_sensor.old_motion\n   ...\n\n\ud83d\udd1d \u0422\u043e\u043f-10 \u0441\u0430\u043c\u044b\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445:\n   12x \u2022 sensor.outdoor_temperature\n    8x \u2022 person.home\n    7x \u2022 sun.sun\n</code></pre>"},{"location":"analyzers/#complexitypy","title":"\ud83d\udcc8 \u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 (<code>complexity.py</code>)","text":"<p>\u041e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u0442 maintainability \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438 \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430.</p> <p>\u041c\u0435\u0442\u0440\u0438\u043a\u0438:</p> <ul> <li>\ud83d\udd22 Cyclomatic complexity \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439</li> <li>\ud83d\udccf \u0414\u043b\u0438\u043d\u0430 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432</li> <li>\ud83c\udf32 \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439</li> <li>\ud83d\udcca \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439/\u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u0432</li> <li>\ud83d\udd01 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 choose/repeat</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:</p> <pre><code># \u0427\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e\n./ha \u2192 13) \ud83d\udcc8 \u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438\n\n# \u041d\u0430\u043f\u0440\u044f\u043c\u0443\u044e\npython3 scripts/analyzers/complexity.py config\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430:</p> <pre><code>\ud83d\udcca \u041c\u0435\u0442\u0440\u0438\u043a\u0438:\n   \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439:     42\n   \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c: 12.3\n   \u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c: 5\n\n\ud83d\udd34 \u041a\u0420\u0418\u0422\u0418\u0427\u0415\u0421\u041a\u0418\u0415 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b (2):\n   automation.complex_heating (complexity: 45)\n      - \u0413\u043b\u0443\u0431\u043e\u043a\u0430\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0439 (7)\n      - \u0414\u043b\u0438\u043d\u043d\u044b\u0439 \u0448\u0430\u0431\u043b\u043e\u043d (350 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)\n      - \u041c\u043d\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 (12)\n\n\ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438:\n   \u2022 \u0420\u0430\u0437\u0431\u0438\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 \u043f\u043e\u0434\u0441\u043a\u0440\u0438\u043f\u0442\u044b\n   \u2022 \u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0432 template sensors\n   \u2022 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c scripts \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439\n</code></pre>"},{"location":"analyzers/#diffpy","title":"\ud83d\udd04 \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 (<code>diff.py</code>)","text":"<p>\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0447\u0442\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u043c\u0435\u0436\u0434\u0443 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p> <p>\u0427\u0442\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442:</p> <ul> <li>\u2705 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438</li> <li>\ud83d\udd34 \u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 (\u0441 \u043e\u0446\u0435\u043d\u043a\u043e\u0439 \u0440\u0438\u0441\u043a\u0430!)</li> <li>\ud83d\udd04 \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u26a0\ufe0f Impact analysis</li> <li>\ud83c\udfaf \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0440\u0438\u0441\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:</p> <pre><code># \u0427\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e (\u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0435\u0442 HEAD~1 \u0441 HEAD)\n./ha \u2192 14) \ud83d\udd04 \u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\n\n# \u041d\u0430\u043f\u0440\u044f\u043c\u0443\u044e (\u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0438\u0442\u044b)\npython3 scripts/analyzers/diff.py config abc123 xyz789\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430:</p> <pre><code>\ud83d\udcca \u0412\u0441\u0435\u0433\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439: 12\n\ud83c\udfaf \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0440\u0438\u0441\u043a\u0430: HIGH (score: 35)\n\n\u2705 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439: 3\n\ud83d\udd34 \u0423\u0434\u0430\u043b\u0435\u043d\u043e \u0441\u0435\u043d\u0441\u043e\u0440\u043e\u0432: 2\n   \u2022 sensor.old_temperature\n   \u2022 sensor.unused_motion\n\n\u26a0\ufe0f \u041f\u0420\u0415\u0414\u0423\u041f\u0420\u0415\u0416\u0414\u0415\u041d\u0418\u042f:\n   \u26a0\ufe0f \u0423\u0434\u0430\u043b\u0435\u043d\u043e 2 \u0441\u0435\u043d\u0441\u043e\u0440\u043e\u0432 - \u043c\u043e\u0436\u0435\u0442 \u0441\u043b\u043e\u043c\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438!\n   \u26a0\ufe0f \u0411\u043e\u043b\u044c\u0448\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 (12)\n\n\ud83d\udca1 \u0420\u0415\u041a\u041e\u041c\u0415\u041d\u0414\u0410\u0426\u0418\u0418:\n   \u2022 \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u044d\u043a\u0430\u043f \u043f\u0435\u0440\u0435\u0434 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435\u043c\n   \u2022 \u041f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043d\u0430 dev-\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0438\n   \u2022 \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439\n</code></pre>"},{"location":"analyzers/#_2","title":"\ud83d\ude80 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":""},{"location":"analyzers/#_3","title":"\u0427\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e","text":"<p>\u0421\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431:</p> <pre><code>./ha\n</code></pre> <p>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440:</p> <ul> <li>12 - \u0413\u0440\u0430\u0444 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> <li>13 - \u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438</li> <li>14 - \u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"analyzers/#_4","title":"\u041f\u0440\u044f\u043c\u043e\u0439 \u0437\u0430\u043f\u0443\u0441\u043a","text":"<pre><code># \u0413\u0440\u0430\u0444 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439\npython3 scripts/analyzers/dependency.py config\n\n# \u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438\npython3 scripts/analyzers/complexity.py config\n\n# \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0432\u0435\u0440\u0441\u0438\u0439\npython3 scripts/analyzers/diff.py config HEAD~1 HEAD\n</code></pre>"},{"location":"analyzers/#_5","title":"\ud83d\udcda \u0414\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e","text":""},{"location":"analyzers/#_6","title":"\u0413\u0440\u0430\u0444 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439","text":""},{"location":"analyzers/#_7","title":"\u0410\u043d\u0430\u043b\u0438\u0437 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438","text":"<pre><code>from scripts.analyzers.dependency import DependencyAnalyzer\n\nanalyzer = DependencyAnalyzer('config/')\nanalyzer.analyze()\n\n# Impact analysis \u0434\u043b\u044f \u0441\u0435\u043d\u0441\u043e\u0440\u0430\nimpact = analyzer.analyze_impact('sensor.living_room_temp')\nprint(f\"Severity: {impact['severity']}\")\nprint(f\"Used in {impact['direct_usage']} places\")\n</code></pre>"},{"location":"analyzers/#mermaid","title":"\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f Mermaid \u0434\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u044b","text":"<pre><code># \u0413\u0440\u0430\u0444 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438\nmermaid = analyzer.generate_mermaid_graph('sensor.temperature', depth=2)\nprint(mermaid)\n\n# \u0422\u043e\u043f-10 \u0441\u0430\u043c\u044b\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445\nmermaid = analyzer.generate_mermaid_graph()\nprint(mermaid)\n</code></pre>"},{"location":"analyzers/#_8","title":"\u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"analyzers/#_9","title":"\u041f\u043e\u0440\u043e\u0433\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f","text":"<ul> <li>0-10: \u2705 \u041d\u0438\u0437\u043a\u0430\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c - \u0445\u043e\u0440\u043e\u0448\u043e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f</li> <li>10-20: \ud83d\udfe1 \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c - \u043f\u0440\u0438\u0435\u043c\u043b\u0435\u043c\u043e</li> <li>20-30: \ud83d\udfe0 \u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c - \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433</li> <li>30+: \ud83d\udd34 \u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c - \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u0438\u0435</li> </ul>"},{"location":"analyzers/#_10","title":"\u0427\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c","text":"<ol> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u0432 (&gt;3) - \u043a\u0430\u0436\u0434\u044b\u0439 +2</li> <li>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 (&gt;3) - \u043a\u0430\u0436\u0434\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c +5</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 (&gt;5) - \u043a\u0430\u0436\u0434\u043e\u0435 +2</li> <li>\u0414\u043b\u0438\u043d\u043d\u044b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u044b (&gt;200 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432) - +5</li> <li>\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432 \u0448\u0430\u0431\u043b\u043e\u043d\u0430\u0445 (&gt;2) - \u043a\u0430\u0436\u0434\u043e\u0435 +2</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 choose - \u043a\u0430\u0436\u0434\u043e\u0435 +5</li> <li>\u0411\u043e\u043b\u044c\u0448\u043e\u0439 \u043e\u0431\u044a\u0435\u043c \u043a\u043e\u0434\u0430 (&gt;100 \u0441\u0442\u0440\u043e\u043a) - +1 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0435 10 \u0441\u0442\u0440\u043e\u043a</li> </ol>"},{"location":"analyzers/#_11","title":"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":""},{"location":"analyzers/#_12","title":"\u041e\u0446\u0435\u043d\u043a\u0430 \u0440\u0438\u0441\u043a\u0430","text":"<p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u0442 \u0440\u0438\u0441\u043a \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439:</p> <ul> <li>\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u043d\u0441\u043e\u0440\u043e\u0432: +10 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 (\u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0440\u0438\u0441\u043a!)</li> <li>\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439: +5 \u0437\u0430 \u043a\u0430\u0436\u0434\u0443\u044e</li> <li>\u0411\u043e\u043b\u044c\u0448\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 (&gt;20): +10</li> </ul> <p>\u0423\u0440\u043e\u0432\u043d\u0438 \u0440\u0438\u0441\u043a\u0430:</p> <ul> <li>low (0-5): \u2705 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e</li> <li>medium (5-20): \ud83d\udfe1 \u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f</li> <li>high (20-50): \ud83d\udfe0 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0431\u044d\u043a\u0430\u043f</li> <li>critical (50+): \ud83d\udd34 \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u0431\u044d\u043a\u0430\u043f \u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> </ul>"},{"location":"analyzers/#workflow","title":"\ud83d\udd27 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0432 workflow","text":""},{"location":"analyzers/#pre-deploy","title":"Pre-deploy \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 <code>scripts/deploy.sh</code>:</p> <pre><code># \u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043f\u0435\u0440\u0435\u0434 \u0434\u0435\u043f\u043b\u043e\u0435\u043c\npython3 scripts/analyzers/complexity.py config\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\npython3 scripts/analyzers/diff.py config HEAD~1 HEAD\n\nread -p \"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435? (y/n) \" -n 1 -r\nif [[ ! $REPLY =~ ^[Yy]$ ]]; then\n    exit 1\nfi\n</code></pre>"},{"location":"analyzers/#git-pre-commit-hook","title":"Git pre-commit hook","text":"<pre><code># .git/hooks/pre-commit\n#!/bin/bash\n\n# \u0410\u043d\u0430\u043b\u0438\u0437 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\npython3 scripts/analyzers/diff.py config HEAD HEAD 2&gt;&amp;1 | grep -q \"CRITICAL\"\n\nif [ $? -eq 0 ]; then\n    echo \"\ud83d\udd34 \u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u044b!\"\n    echo \"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f review \u043f\u0435\u0440\u0435\u0434 \u043a\u043e\u043c\u043c\u0438\u0442\u043e\u043c\"\n    exit 1\nfi\n</code></pre>"},{"location":"analyzers/#best-practices","title":"\ud83c\udfaf Best Practices","text":""},{"location":"analyzers/#1","title":"1. \u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437","text":"<p>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0439\u0442\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u044b:</p> <ul> <li>\u2705 \u041f\u0435\u0440\u0435\u0434 \u043a\u0430\u0436\u0434\u044b\u043c \u0434\u0435\u043f\u043b\u043e\u0435\u043c</li> <li>\u2705 \u041f\u043e\u0441\u043b\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u044b\u0445 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439</li> <li>\u2705 \u0415\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430</li> </ul>"},{"location":"analyzers/#2","title":"2. \u0426\u0435\u043b\u0435\u0432\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438","text":"<p>\u0421\u0442\u0440\u0435\u043c\u0438\u0442\u0435\u0441\u044c \u043a:</p> <ul> <li>\ud83d\udcca \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c &lt; 15</li> <li>\ud83d\udd1d \u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439 \u0441 complexity &gt; 30</li> <li>\ud83d\uddd1\ufe0f \u041d\u0435\u0442 orphaned entities</li> <li>\u26a0\ufe0f \u041d\u0435\u0442 \u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> </ul>"},{"location":"analyzers/#3","title":"3. \u0420\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433","text":"<p>\u0415\u0441\u043b\u0438 complexity &gt; 20:</p> <ol> <li>\u0420\u0430\u0437\u0431\u0438\u0442\u044c \u043d\u0430 \u043f\u043e\u0434\u0441\u043a\u0440\u0438\u043f\u0442\u044b</li> <li>\u0412\u044b\u043d\u0435\u0441\u0442\u0438 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0432 sensors</li> <li>\u0423\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c helpers (input_*)</li> </ol>"},{"location":"analyzers/#4","title":"4. \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","text":"<p>\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438:</p> <pre><code># \u0421\u043b\u043e\u0436\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f \u0441 \u043f\u043e\u0433\u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u0435\u0439\n# Complexity: 25 (\u0440\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433 \u0432 TODO)\nautomation:\n  - alias: \"Advanced Heating Control\"\n    description: |\n      \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435\u043c \u0441 \u0443\u0447\u0435\u0442\u043e\u043c:\n      - \u041f\u0440\u043e\u0433\u043d\u043e\u0437\u0430 \u043f\u043e\u0433\u043e\u0434\u044b\n      - \u0412\u0440\u0435\u043c\u0435\u043d\u0438 \u043f\u0440\u0438\u0445\u043e\u0434\u0430 \u0434\u043e\u043c\u043e\u0439\n      - \u0422\u0435\u043a\u0443\u0449\u0435\u0439 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b\n    ...\n</code></pre>"},{"location":"analyzers/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"analyzers/#file-not-found","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \"File not found\"","text":"<pre><code># \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e config/ \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\n./ha \u2192 2) \u0421\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0438\n\n# \u0418\u043b\u0438 \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u043e\u043b\u043d\u044b\u0439 \u043f\u0443\u0442\u044c\npython3 scripts/analyzers/dependency.py /mnt/hassio\n</code></pre>"},{"location":"analyzers/#yaml-parse-error","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \"YAML parse error\"","text":"<pre><code># \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 YAML\n./ha \u2192 9) \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c YAML\n\n# \u0417\u0430\u0442\u0435\u043c \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0439\u0442\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u044b\n</code></pre>"},{"location":"analyzers/#git-not-found-diff","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \"Git not found\" (\u0434\u043b\u044f diff)","text":"<p>\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 <code>diff.py</code> \u0442\u0440\u0435\u0431\u0443\u0435\u0442 git \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439:</p> <pre><code>cd config/\ngit init\ngit add .\ngit commit -m \"Initial commit\"\n</code></pre>"},{"location":"analyzers/#todo-roadmap","title":"\ud83d\udcdd TODO / Roadmap","text":"<p>\u041f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438:</p> <ul> <li>[ ] \ud83e\udd16 AI-powered \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>[ ] \ud83d\udcca \u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u043c\u0435\u0442\u0440\u0438\u043a \u0432 Grafana</li> <li>[ ] \ud83e\uddea \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439</li> <li>[ ] \ud83d\udd0d \u0414\u0435\u0442\u0435\u043a\u0446\u0438\u044f code smells</li> <li>[ ] \ud83d\udcc8 \u0418\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0442\u0440\u0435\u043d\u0434\u044b \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438</li> <li>[ ] \ud83d\udd17 Integration \u0441 Home Assistant API</li> <li>[ ] \ud83d\udcda \u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0438\u0437 \u043a\u043e\u0434\u0430</li> </ul>"},{"location":"analyzers/#contributing","title":"\ud83e\udd1d Contributing","text":"<p>\u041d\u0430\u0448\u043b\u0438 \u0431\u0430\u0433? \u0415\u0441\u0442\u044c \u0438\u0434\u0435\u044f \u0434\u043b\u044f \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u044f?</p> <ol> <li>Fork \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f</li> <li>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 feature branch</li> <li>Commit \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> <li>Push \u0432 branch</li> <li>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 Pull Request</li> </ol>"},{"location":"analyzers/#_13","title":"\ud83d\udcc4 \u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f","text":"<p>MIT License - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e!</p>"},{"location":"analyzers/#_14","title":"\ud83d\ude4f \u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0421\u043f\u0430\u0441\u0438\u0431\u043e community Home Assistant \u0437\u0430 \u0432\u0434\u043e\u0445\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0438 \u0438\u0434\u0435\u0438!</p> <p>\u041f\u043e\u043b\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f: https://gfermoto.github.io/HASSio_Cursor</p>"},{"location":"examples/energy/","title":"\u26a1 \u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u042d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u0435","text":"<p>\u0413\u043e\u0442\u043e\u0432\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438</p>"},{"location":"examples/energy/#1","title":"1. \u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u0443\u0445\u043e\u0434\u0435","text":"<pre><code>automation:\n  - alias: \"\u0423\u0448\u043b\u0438 \u0438\u0437 \u0434\u043e\u043c\u0430\"\n    trigger:\n      - platform: state\n        entity_id: group.family\n        to: \"not_home\"\n        for: \"00:05:00\"\n    action:\n      - service: light.turn_off\n        entity_id: all\n      - service: climate.set_temperature\n        data:\n          entity_id: all\n          temperature: 18\n      - service: switch.turn_off\n        entity_id:\n          - switch.socket_1\n          - switch.socket_2\n</code></pre>"},{"location":"examples/energy/#2","title":"2. \u041d\u043e\u0447\u043d\u043e\u0439 \u0440\u0435\u0436\u0438\u043c","text":"<pre><code>automation:\n  - alias: \"\u041d\u043e\u0447\u043d\u043e\u0439 \u0440\u0435\u0436\u0438\u043c\"\n    trigger:\n      - platform: time\n        at: \"23:30:00\"\n    action:\n      - service: climate.set_temperature\n        data:\n          entity_id: all\n          temperature: 19\n      - service: light.turn_off\n        entity_id: all\n</code></pre>"},{"location":"examples/energy/#3","title":"3. \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f","text":"<pre><code>sensor:\n  - platform: template\n    sensors:\n      daily_energy_cost:\n        friendly_name: \"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u044d\u043d\u0435\u0440\u0433\u0438\u0438 \u0441\u0435\u0433\u043e\u0434\u043d\u044f\"\n        unit_of_measurement: \"\u20bd\"\n        value_template: &gt;\n          {{ states('sensor.daily_energy')|float * 5.0 }}\n</code></pre>"},{"location":"examples/heating/","title":"\ud83c\udf21\ufe0f \u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f","text":"<p>\u0413\u043e\u0442\u043e\u0432\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438 \u0434\u043b\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</p>"},{"location":"examples/heating/#1","title":"1. \u041f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435","text":"<pre><code>automation:\n  - alias: \"\u041f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u0430\u044f \u043a\u0440\u0438\u0432\u0430\u044f\"\n    trigger:\n      - platform: numeric_state\n        entity_id: sensor.outdoor_temperature\n        below: 15\n      - platform: time_pattern\n        hours: \"/2\"\n    action:\n      - service: climate.set_temperature\n        target:\n          entity_id: climate.warming_floor_smart\n        data:\n          temperature: &gt;\n            {{ 25 - (states('sensor.outdoor_temperature')|float * 0.5) }}\n</code></pre>"},{"location":"examples/heating/#2","title":"2. \u041d\u043e\u0447\u043d\u043e\u0435 \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u0435","text":"<pre><code>automation:\n  - alias: \"\u041d\u043e\u0447\u044c: \u0421\u043d\u0438\u0436\u0435\u043d\u0438\u0435\"\n    trigger:\n      - platform: time\n        at: \"23:00:00\"\n    action:\n      - service: climate.set_temperature\n        data:\n          entity_id: all\n          temperature: 18\n</code></pre>"},{"location":"examples/heating/#3","title":"3. \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432\u0430","text":"<pre><code>automation:\n  - alias: \"\u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432\u0430\"\n    trigger:\n      - platform: numeric_state\n        entity_id: sensor.wthermostat_temperature_floor\n        above: 28\n    action:\n      - service: climate.turn_off\n        entity_id: climate.wthermostat\n</code></pre> <p>\u041f\u043e\u043b\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e: \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</p>"},{"location":"examples/security/","title":"\ud83d\udd12 \u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0413\u043e\u0442\u043e\u0432\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438</p>"},{"location":"examples/security/#1","title":"1. \u0423\u043c\u043d\u043e\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435","text":"<pre><code>automation:\n  - alias: \"\u0427\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u043e\u0447\u044c\u044e\"\n    trigger:\n      - platform: state\n        entity_id: binary_sensor.motion\n        to: \"on\"\n    condition:\n      - condition: time\n        after: \"22:00:00\"\n        before: \"06:00:00\"\n    action:\n      - service: notify.telegram\n        data:\n          message: \"\u0414\u0432\u0438\u0436\u0435\u043d\u0438\u0435!\"\n          data:\n            photo:\n              - url: \"http://ha:8123/api/camera_proxy/camera.street\"\n</code></pre>"},{"location":"examples/security/#2","title":"2. \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0432\u0435\u0442","text":"<pre><code>automation:\n  - alias: \"\u0421\u0432\u0435\u0442 \u043f\u0440\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0438\"\n    trigger:\n      - platform: state\n        entity_id: binary_sensor.doorbell_pir\n        to: \"on\"\n    action:\n      - service: light.turn_on\n        entity_id: light.entrance\n      - delay: \"00:03:00\"\n      - service: light.turn_off\n        entity_id: light.entrance\n</code></pre> <p>\u041f\u043e\u043b\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e: \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430</p>"},{"location":"examples/esphome/","title":"\ud83d\udce1 ESPHome Examples","text":"<p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 ESPHome \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0430\u0442\u0447\u0438\u043a\u043e\u0432 \u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432.</p>"},{"location":"examples/esphome/#_1","title":"\ud83d\udcc1 \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432","text":""},{"location":"examples/esphome/#ld2450-hlk-ld2450","title":"\ud83c\udfaf LD2450 - \u0420\u0430\u0434\u0430\u0440 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f HLK-LD2450","text":"<p>\u041c\u0438\u043b\u043b\u0438\u043c\u0435\u0442\u0440\u043e\u0432\u044b\u0439 \u0432\u043e\u043b\u043d\u043e\u0432\u043e\u0439 \u0440\u0430\u0434\u0430\u0440 \u0434\u043b\u044f \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439: - \u2705 6 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0437\u043e\u043d \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f - \u2705 3 \u0437\u043e\u043d\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (\u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043b\u043e\u0436\u043d\u044b\u0445 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0439) - \u2705 \u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0434\u043e 3 \u0446\u0435\u043b\u0435\u0439 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e - \u2705 \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 (\u0443\u0433\u043b\u044b, \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435, \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c) - \u2705 \u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f Plotly</p> <p>\u0421\u0442\u0430\u0442\u0443\u0441: \u2705 Production Ready (\u0441 \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f\u043c\u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438)</p> <p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f: - \u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0435\u0437\u044e\u043c\u0435 - \u0414\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0439 changelog - \u0410\u0443\u0434\u0438\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 - \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432</p> <p>\u0424\u0430\u0439\u043b\u044b: - <code>LD2450.yaml</code> - \u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f ESPHome - <code>zone.h</code> - \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 - <code>Plotly Graph.txt</code> - \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u043b\u044f Home Assistant - <code>secrets.yaml.example</code> - \u043f\u0440\u0438\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0441 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\u043c\u0438</p> <p>\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a: 53l3cu5/ESP32_LD2450</p>"},{"location":"examples/esphome/#_2","title":"\ud83d\ude80 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":""},{"location":"examples/esphome/#1","title":"1. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442","text":"<pre><code>cd LD2450/\n</code></pre>"},{"location":"examples/esphome/#2","title":"2. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u044b","text":"<pre><code>cp secrets.yaml.example secrets.yaml\nnano secrets.yaml  # \u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0441\u0432\u043e\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438\n</code></pre>"},{"location":"examples/esphome/#3","title":"3. \u0421\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0439\u0442\u0435","text":"<pre><code>esphome compile LD2450.yaml\n</code></pre>"},{"location":"examples/esphome/#4-esp32","title":"4. \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043d\u0430 ESP32","text":"<pre><code>esphome upload LD2450.yaml\n</code></pre>"},{"location":"examples/esphome/#_3","title":"\ud83d\udcda \u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","text":""},{"location":"examples/esphome/#_4","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ul> <li>ESPHome 2023.12.0 \u0438\u043b\u0438 \u043d\u043e\u0432\u0435\u0435</li> <li>Home Assistant 2023.12.0 \u0438\u043b\u0438 \u043d\u043e\u0432\u0435\u0435 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)</li> <li>ESP32 (\u0434\u043b\u044f LD2450)</li> </ul>"},{"location":"examples/esphome/#_5","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0430","text":"<p>\u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442: - <code>*.yaml</code> - \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f ESPHome - <code>secrets.yaml.example</code> - \u043f\u0440\u0438\u043c\u0435\u0440 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 - <code>README*.md</code> - \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f - <code>.gitignore</code> - \u0437\u0430\u0449\u0438\u0442\u0430 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 - \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b (\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438, \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0438 \u0442.\u0434.)</p>"},{"location":"examples/esphome/#_6","title":"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u26a0\ufe0f \u0412\u0410\u0416\u041d\u041e: - \u0412\u0441\u0435\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>secrets.yaml</code> \u0434\u043b\u044f \u043f\u0430\u0440\u043e\u043b\u0435\u0439 \u0438 \u043a\u043b\u044e\u0447\u0435\u0439 - \u041d\u0435 \u043a\u043e\u043c\u043c\u0438\u0442\u044c\u0442\u0435 <code>secrets.yaml</code> \u0432 git - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u043e\u043b\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430</p>"},{"location":"examples/esphome/#_7","title":"\ud83e\udd1d \u0412\u043a\u043b\u0430\u0434","text":"<p>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0441\u0432\u043e\u0438 \u043f\u0440\u0438\u043c\u0435\u0440\u044b: 1. \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043f\u043e\u0434\u043f\u0430\u043f\u043a\u0443 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0430 2. \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e 3. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u044d\u0442\u043e\u0442 README 4. \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 Pull Request</p>"},{"location":"examples/esphome/#_8","title":"\ud83d\udcc4 \u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f","text":"<p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \"\u043a\u0430\u043a \u0435\u0441\u0442\u044c\" \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0446\u0435\u043b\u0435\u0439. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043b\u0438\u0446\u0435\u043d\u0437\u0438\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432.</p> <p>\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435: 14 \u043e\u043a\u0442\u044f\u0431\u0440\u044f 2025</p>"},{"location":"examples/esphome/LD2450/","title":"\ud83d\udce1 LD2450 Millimeter Wave Radar - ESPHome","text":"<p>\u0413\u043e\u0442\u043e\u0432\u0430\u044f \u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043c\u0438\u043b\u043b\u0438\u043c\u0435\u0442\u0440\u043e\u0432\u043e\u0433\u043e \u0432\u043e\u043b\u043d\u043e\u0432\u043e\u0433\u043e \u0440\u0430\u0434\u0430\u0440\u0430 HLK-LD2450 \u0441 \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043f\u043e \u0437\u043e\u043d\u0430\u043c \u0438 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0435\u0439.</p> <p>\u0412\u0435\u0440\u0441\u0438\u044f: 2.2 (\u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u0430\u044f) \u041e\u0441\u043d\u043e\u0432\u0430\u043d\u043e \u043d\u0430: 53l3cu5/ESP32_LD2450 \u0421\u0442\u0430\u0442\u0443\u0441: \u2705 Production Ready</p>"},{"location":"examples/esphome/LD2450/#_1","title":"\ud83d\udccb \u041e\u0433\u043b\u0430\u0432\u043b\u0435\u043d\u0438\u0435","text":"<ol> <li>\u0421\u043e\u0441\u0442\u0430\u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0430</li> <li>\u0410\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u044c</li> <li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438</li> <li>\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0437\u043e\u043d</li> <li>Plotly \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f</li> <li>\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</li> </ol>"},{"location":"examples/esphome/LD2450/#_2","title":"\ud83d\udce6 \u0421\u043e\u0441\u0442\u0430\u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0430","text":""},{"location":"examples/esphome/LD2450/#_3","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b","text":""},{"location":"examples/esphome/LD2450/#ld2450yaml-esphome","title":"<code>LD2450.yaml</code> - \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f ESPHome","text":"<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: \u0413\u043b\u0430\u0432\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0434\u043b\u044f ESP32 \u0441 \u0440\u0430\u0434\u0430\u0440\u043e\u043c LD2450.</p> <p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442: - \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 ESP32 (WiFi, OTA, API) - \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e UART \u0434\u043b\u044f \u0441\u0432\u044f\u0437\u0438 \u0441 \u0440\u0430\u0434\u0430\u0440\u043e\u043c (256000 baud) - 6 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0437\u043e\u043d \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f - 3 \u0437\u043e\u043d\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (\u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043b\u043e\u0436\u043d\u044b\u0445 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0439) - \u0421\u0435\u043d\u0441\u043e\u0440\u044b \u0434\u043b\u044f 3 \u0446\u0435\u043b\u0435\u0439 (\u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b, \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c, \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435) - \u0422\u0430\u0439\u043c\u0430\u0443\u0442\u044b \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b - \u0420\u0435\u0436\u0438\u043c \"Target must leave\" \u0434\u043b\u044f \u0437\u043e\u043d\u044b 1 - \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0443\u0433\u043b\u043e\u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 (0-90\u00b0)</p> <p>\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b: <pre><code># UART \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f (256000 baud - \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0435 LD2450)\nuart:\n  tx_pin: GPIO17  # TX \u2192 RX \u0440\u0430\u0434\u0430\u0440\u0430\n  rx_pin: GPIO16  # RX \u2190 TX \u0440\u0430\u0434\u0430\u0440\u0430\n  baud_rate: 256000\n\n# \u0418\u043d\u0434\u0438\u043a\u0430\u0446\u0438\u044f (\u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0441\u0438\u043d\u0438\u0439 LED \u043d\u0430 GPIO2)\nblue_led_pin: GPIO2  # \u0413\u043e\u0440\u0438\u0442 \u043a\u043e\u0433\u0434\u0430 \u0440\u0430\u0434\u0430\u0440 \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u0443\u0435\u0442 \u0446\u0435\u043b\u0438\n                     # \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u0441 inverted: true\n\n# \u0421\u0435\u043a\u0440\u0435\u0442\u044b \u0432\u044b\u043d\u0435\u0441\u0435\u043d\u044b \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0444\u0430\u0439\u043b\nwifi_ssid: !secret wifi_ssid\napi_encryption_key: !secret api_encryption_key\n</code></pre></p> <p>\u0418\u043d\u0434\u0438\u043a\u0430\u0446\u0438\u044f \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434\u043e\u043c: - \u26ab \u041d\u0435 \u0433\u043e\u0440\u0438\u0442 - \u043d\u0435\u0442 \u0446\u0435\u043b\u0435\u0439 (\u0440\u0430\u0434\u0430\u0440 \u043d\u0435 \u0432\u0438\u0434\u0438\u0442 \u043d\u0438\u043a\u043e\u0433\u043e) - \ud83d\udc99 \u041c\u0438\u0433\u0430\u0435\u0442 (500ms) - \u0435\u0441\u0442\u044c \u0434\u0432\u0438\u0436\u0443\u0449\u0430\u044f\u0441\u044f \u0446\u0435\u043b\u044c (speed \u2260 0) - \ud83d\udd35 \u0413\u043e\u0440\u0438\u0442 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e - \u0446\u0435\u043b\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u043d\u0430 (\u0447\u0435\u043b\u043e\u0432\u0435\u043a \u0441\u0442\u043e\u0438\u0442, speed = 0) - \u041f\u0438\u043d: GPIO2 (\u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0441\u0438\u043d\u0438\u0439 LED \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u043f\u043b\u0430\u0442 ESP32) - \u0418\u043d\u0432\u0435\u0440\u0441\u0438\u044f: <code>inverted: true</code> - \u0434\u043b\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043e strapping pin - \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0437\u043e\u043d\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (\u0446\u0435\u043b\u0438 \u0432 Zout \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u044e\u0442\u0441\u044f) - \u041c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0438\u043d \u0432 <code>substitutions: blue_led_pin</code></p>"},{"location":"examples/esphome/LD2450/#zoneh-","title":"<code>zone.h</code> - \u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439","text":"<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: C++ \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0446\u0435\u043b\u0435\u0439 \u0432 \u0437\u043e\u043d\u0430\u0445.</p> <p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442: - \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b <code>Position</code> \u0438 <code>Zone</code> - \u0424\u0443\u043d\u043a\u0446\u0438\u044e <code>check_targets_in_zone()</code> - \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u043e\u0447\u043a\u0438 \u0432 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u043c \u0447\u0435\u0442\u044b\u0440\u0451\u0445\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u0435 - \u0424\u0443\u043d\u043a\u0446\u0438\u044e <code>safe_acos()</code> - \u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 NaN \u0432 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f\u0445 - \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u0443\u0433\u043b\u043e\u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0434\u0430\u0442\u0447\u0438\u043a\u0430 - \u0417\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u043d\u043e\u043b\u044c</p> <p>\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043c\u0435\u0442\u043e\u0434 \u0441\u0443\u043c\u043c\u044b \u0443\u0433\u043b\u043e\u0432 (angle sum method) \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0442\u043e\u0447\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0447\u0435\u0442\u044b\u0440\u0451\u0445\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u0430 \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u043f\u043e\u0432\u043e\u0440\u043e\u0442\u0430 \u0437\u043e\u043d\u044b.</p> <p>\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438: <pre><code>// \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 acos (\u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 domain error)\ninline float safe_acos(float x);\n\n// \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0446\u0435\u043b\u0438 \u0432 \u0437\u043e\u043d\u0435 \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u0443\u0433\u043b\u0430 \u0434\u0430\u0442\u0447\u0438\u043a\u0430\nbool check_targets_in_zone(struct Zone &amp;z, struct Position &amp;t, float angle);\n</code></pre></p>"},{"location":"examples/esphome/LD2450/#plotly-graphtxt-","title":"<code>Plotly Graph.txt</code> - \u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f HACS Plotly Graph Card - \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0440\u0430\u0434\u0430\u0440\u0430.</p> <p>\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442: - 3 \u0446\u0435\u043b\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 (Person1, Person2, Person3) - 6 \u0437\u043e\u043d \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441 \u0446\u0432\u0435\u0442\u043e\u0432\u043e\u0439 \u0438\u043d\u0434\u0438\u043a\u0430\u0446\u0438\u0435\u0439 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 - 3 \u0437\u043e\u043d\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (\u043f\u0443\u043d\u043a\u0442\u0438\u0440\u043d\u044b\u0435 \u043b\u0438\u043d\u0438\u0438) - \u041e\u0431\u043b\u0430\u0441\u0442\u044c \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f \u0434\u0430\u0442\u0447\u0438\u043a\u0430 (Coverage) - \u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0446\u0432\u0435\u0442\u0430 \u0437\u043e\u043d \u043f\u0440\u0438 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0438</p> <p>\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438: - \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u043d\u0430\u044f \u0441\u0435\u0442\u043a\u0430 8\u00d78 \u043c\u0435\u0442\u0440\u043e\u0432 - \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0436\u0434\u044b\u0435 2 \u0441\u0435\u043a\u0443\u043d\u0434\u044b - \u0423\u0447\u0451\u0442 \u0443\u0433\u043b\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0434\u0430\u0442\u0447\u0438\u043a\u0430 - \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</p> <p>\u0424\u043e\u0440\u043c\u0430\u0442: YAML \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f Lovelace Dashboard</p>"},{"location":"examples/esphome/LD2450/#secretsyamlexample-","title":"<code>secrets.yaml.example</code> - \u0428\u0430\u0431\u043b\u043e\u043d \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432","text":"<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: \u041f\u0440\u0438\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0441 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</p> <p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043b\u044f: <pre><code>wifi_ssid: \"MyHomeWiFi\"              # \u0418\u043c\u044f WiFi \u0441\u0435\u0442\u0438\nwifi_password: \"MyWiFiPassword\"      # \u041f\u0430\u0440\u043e\u043b\u044c WiFi\nota_password: \"secureOTA123\"         # \u041f\u0430\u0440\u043e\u043b\u044c OTA \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439\nhotspot_password: \"fallback123\"      # \u041f\u0430\u0440\u043e\u043b\u044c \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430\napi_encryption_key: \"GENERATE_KEY\"   # API \u043a\u043b\u044e\u0447 \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n</code></pre></p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435: \u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0432 <code>secrets.yaml</code> \u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0441\u0432\u043e\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</p> <p>\u26a0\ufe0f \u0412\u0410\u0416\u041d\u041e: \u0424\u0430\u0439\u043b <code>secrets.yaml</code> \u0437\u0430\u0449\u0438\u0449\u0451\u043d <code>.gitignore</code> \u0438 \u043d\u0435 \u043f\u043e\u043f\u0430\u0434\u0451\u0442 \u0432 git!</p>"},{"location":"examples/esphome/LD2450/#_4","title":"\u0412\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b","text":"<ul> <li><code>.gitignore</code> - \u0417\u0430\u0449\u0438\u0442\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u043e\u0442 \u043f\u043e\u043f\u0430\u0434\u0430\u043d\u0438\u044f \u0432 git</li> <li><code>CHANGELOG_LD2450_FIXES.md</code> - \u0414\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0451\u0442 \u043e \u0432\u0441\u0435\u0445 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f\u0445</li> <li><code>SECURITY_AUDIT.md</code> - \u0410\u0443\u0434\u0438\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430</li> <li><code>\u041a\u0420\u0410\u0422\u041a\u041e\u0415_\u0420\u0415\u0417\u042e\u041c\u0415.md</code> - \u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439</li> </ul>"},{"location":"examples/esphome/LD2450/#_5","title":"\ud83d\udd0c \u0410\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u044c","text":""},{"location":"examples/esphome/LD2450/#hlk-ld2450","title":"\u0414\u0430\u0442\u0447\u0438\u043a HLK-LD2450","text":"<p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c: Hi-Link Electronics \u0422\u0438\u043f: \u041c\u0438\u043b\u043b\u0438\u043c\u0435\u0442\u0440\u043e\u0432\u044b\u0439 \u0432\u043e\u043b\u043d\u043e\u0432\u043e\u0439 \u0440\u0430\u0434\u0430\u0440 (mmWave) \u0427\u0430\u0441\u0442\u043e\u0442\u0430: 24 GHz \u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441: UART (256000 baud)</p>"},{"location":"examples/esphome/LD2450/#_6","title":"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438","text":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u041d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u044f 5V DC \u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u043a\u0430 ~200-500 mA \u0414\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u044f 0.5 - 8 \u043c\u0435\u0442\u0440\u043e\u0432 \u0423\u0433\u043e\u043b \u043e\u0431\u0437\u043e\u0440\u0430 (\u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c) \u00b160\u00b0 (120\u00b0 \u0432\u0441\u0435\u0433\u043e) \u0423\u0433\u043e\u043b \u043e\u0431\u0437\u043e\u0440\u0430 (\u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c) \u00b145\u00b0 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0446\u0435\u043b\u0435\u0439 \u0414\u043e 3 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b X, Y \u0432 \u043c\u0438\u043b\u043b\u0438\u043c\u0435\u0442\u0440\u0430\u0445 \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0446\u0435\u043b\u0438 -500 \u0434\u043e +500 \u0441\u043c/\u0441 \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0440\u0430\u0431\u043e\u0442\u044b -20\u00b0C \u0434\u043e +60\u00b0C"},{"location":"examples/esphome/LD2450/#_7","title":"\u0413\u0434\u0435 \u043a\u0443\u043f\u0438\u0442\u044c","text":"<ul> <li>AliExpress: HLK-LD2450</li> <li>\u0426\u0435\u043d\u0430: ~$15-25 USD</li> <li>\u041f\u043e\u0438\u0441\u043a: \"HLK-LD2450\" \u0438\u043b\u0438 \"LD2450 radar\"</li> </ul>"},{"location":"examples/esphome/LD2450/#esp32","title":"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a ESP32","text":""},{"location":"examples/esphome/LD2450/#_8","title":"\u0421\u0445\u0435\u043c\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LD2450     \u2502           \u2502    ESP32     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524           \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502             \u2502           \u2502              \u2502\n\u2502  VCC (5V) \u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500 5V        \u2502\n\u2502  GND      \u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500 GND       \u2502\n\u2502  TX       \u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500 GPIO16 RX \u2502\n\u2502  RX       \u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500 GPIO17 TX \u2502\n\u2502             \u2502           \u2502              \u2502\n\u2502             \u2502           \u2502 GPIO2 (\ud83d\udd35)   \u2502 \u2190 \u0421\u0438\u043d\u0438\u0439 LED (\u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439)\n\u2502             \u2502           \u2502              \u2502   \u0413\u043e\u0440\u0438\u0442 \u043f\u0440\u0438 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\ud83d\udca1 GPIO2 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u0435\u043d \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c inverted: true\n</code></pre>"},{"location":"examples/esphome/LD2450/#_9","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>ESP32: - \u041b\u044e\u0431\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0441 WiFi (ESP32-WROOM, ESP32-DevKit \u0438 \u0442.\u0434.) - \u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 GPIO \u043f\u0438\u043d\u0430 (\u0434\u043b\u044f UART) - \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f: \u0441\u0442\u0430\u0431\u0438\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435 5V/1A</p> <p>\u041f\u0438\u0442\u0430\u043d\u0438\u0435: - LD2450 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u044b\u0435 5V \u0441 \u0442\u043e\u043a\u043e\u043c \u0434\u043e 500mA - \u041d\u0435 \u043f\u0438\u0442\u0430\u0439\u0442\u0435 \u043e\u0442 \u043f\u0438\u043d\u0430 3.3V ESP32! - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0432\u043d\u0435\u0448\u043d\u0438\u0439 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a 5V \u0438\u043b\u0438 \u0441\u0442\u0430\u0431\u0438\u043b\u0438\u0437\u0430\u0442\u043e\u0440</p> <p>\u041c\u043e\u043d\u0442\u0430\u0436 \u0434\u0430\u0442\u0447\u0438\u043a\u0430: - \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0439\u0442\u0435 \u043d\u0430 \u0432\u044b\u0441\u043e\u0442\u0435 1.5-2.5 \u043c\u0435\u0442\u0440\u0430 - \u041d\u0430\u043f\u0440\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443 (\u0438\u043b\u0438 \u043f\u043e\u0434 \u0443\u0433\u043b\u043e\u043c 0-45\u00b0) - \u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435 \u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0435\u0439 \u0432\u0431\u043b\u0438\u0437\u0438 \u0430\u043d\u0442\u0435\u043d\u043d\u044b - \u041d\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0439\u0442\u0435 \u0434\u0430\u0442\u0447\u0438\u043a \u043c\u0435\u0442\u0430\u043b\u043b\u043e\u043c \u0438\u043b\u0438 \u043f\u043b\u043e\u0442\u043d\u044b\u043c\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c\u0438</p>"},{"location":"examples/esphome/LD2450/#_10","title":"\ud83c\udfaf \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"examples/esphome/LD2450/#_11","title":"\u0414\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<ul> <li>\u2705 6 \u0437\u043e\u043d \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f - \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u044b\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u0438</li> <li>\u2705 3 \u0437\u043e\u043d\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f - \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0441\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432</li> <li>\u2705 3 \u0446\u0435\u043b\u0438 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e - \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0447\u0435\u043b\u043e\u0432\u0435\u043a</li> <li>\u2705 \u0420\u0435\u0436\u0438\u043c \"Target must leave\" - \u0437\u043e\u043d\u0430 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u043e\u043a\u0430 \u0446\u0435\u043b\u044c \u043d\u0435 \u0432\u044b\u0439\u0434\u0435\u0442</li> </ul>"},{"location":"examples/esphome/LD2450/#_12","title":"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u0430\u0436\u0434\u043e\u0439 \u0446\u0435\u043b\u0438","text":"<ul> <li>\ud83d\udccd \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b X, Y (\u0432 \u043c\u0438\u043b\u043b\u0438\u043c\u0435\u0442\u0440\u0430\u0445)</li> <li>\ud83d\ude80 \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f (\u043c/\u0441)</li> <li>\u27a1\ufe0f \u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (Left/Right/Middle)</li> <li>\ud83d\udd04 \u041f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 (Approaching/Moving away/Static)</li> <li>\ud83d\udcd0 \u0423\u0433\u043e\u043b \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u0430\u0442\u0447\u0438\u043a\u0430 (\u0433\u0440\u0430\u0434\u0443\u0441\u044b)</li> <li>\ud83d\udccf \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f (\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f)</li> </ul>"},{"location":"examples/esphome/LD2450/#_13","title":"\u0418\u043d\u0434\u0438\u043a\u0430\u0446\u0438\u044f","text":"<ul> <li>\ud83d\udd35 \u0421\u0438\u043d\u0438\u0439 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434 (GPIO2) - \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 ESP32 \u043f\u043b\u0430\u0442</li> <li>\u26ab \u041d\u0435 \u0433\u043e\u0440\u0438\u0442 - \u043d\u0435\u0442 \u0446\u0435\u043b\u0435\u0439</li> <li>\ud83d\udc99 \u041c\u0438\u0433\u0430\u0435\u0442 (500ms) - \u0446\u0435\u043b\u044c \u0434\u0432\u0438\u0436\u0435\u0442\u0441\u044f (\u0438\u0434\u0451\u0442, \u0431\u0435\u0436\u0438\u0442)</li> <li>\ud83d\udd35 \u0413\u043e\u0440\u0438\u0442 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e - \u0446\u0435\u043b\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u043d\u0430 (\u0441\u0442\u043e\u0438\u0442, \u0441\u0438\u0434\u0438\u0442)</li> <li>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0431\u0435\u0437 Home Assistant</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 (\u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 LED)</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 <code>inverted: true</code> \u0434\u043b\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043e strapping pin</li> </ul>"},{"location":"examples/esphome/LD2450/#_14","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","text":"<ul> <li>\u23f1\ufe0f \u0422\u0430\u0439\u043c\u0430\u0443\u0442\u044b \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b (0-600 \u0441\u0435\u043a\u0443\u043d\u0434)</li> <li>\ud83d\udcd0 \u0423\u0433\u043e\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0434\u0430\u0442\u0447\u0438\u043a\u0430 (0-90\u00b0)</li> <li>\ud83d\udd18 \u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435/\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0437\u043e\u043d \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438</li> <li>\ud83d\udcca \u0421\u0447\u0451\u0442\u0447\u0438\u043a\u0438 \u0446\u0435\u043b\u0435\u0439 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b</li> </ul>"},{"location":"examples/esphome/LD2450/#_15","title":"\ud83d\ude80 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":""},{"location":"examples/esphome/LD2450/#1","title":"1. \u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ol> <li>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0435 LD2450 \u043a ESP32 \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0441\u0445\u0435\u043c\u0435 \u0432\u044b\u0448\u0435</li> <li>\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u043f\u0438\u0442\u0430\u043d\u0438\u0438 (5V/500mA \u043c\u0438\u043d\u0438\u043c\u0443\u043c)</li> <li>\u041d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0439\u0442\u0435 \u043a \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0443 \u0434\u043e \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438</li> </ol>"},{"location":"examples/esphome/LD2450/#2","title":"2. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432","text":"<pre><code>cd LD2450/\ncp secrets.yaml.example secrets.yaml\nnano secrets.yaml\n</code></pre> <p>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0441\u0432\u043e\u0438 \u0434\u0430\u043d\u043d\u044b\u0435: <pre><code>wifi_ssid: \"YOUR_WIFI_NAME\"\nwifi_password: \"YOUR_WIFI_PASSWORD\"\nota_password: \"YOUR_OTA_PASSWORD\"       # \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432\nhotspot_password: \"YOUR_HOTSPOT_PASS\"   # \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432\napi_encryption_key: \"GENERATE_YOUR_KEY\" # \u0441\u043c. \u043d\u0438\u0436\u0435\n</code></pre></p> <p>\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f API \u043a\u043b\u044e\u0447\u0430: <pre><code>esphome encryption-key\n</code></pre></p>"},{"location":"examples/esphome/LD2450/#3","title":"3. \u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u044f","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438\nesphome config LD2450.yaml\n\n# \u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u044f\nesphome compile LD2450.yaml\n</code></pre>"},{"location":"examples/esphome/LD2450/#4-usb","title":"4. \u041f\u0435\u0440\u0432\u0430\u044f \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0430 (\u0447\u0435\u0440\u0435\u0437 USB)","text":"<pre><code># \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0435 ESP32 \u043a \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0443 \u0447\u0435\u0440\u0435\u0437 USB\nesphome upload LD2450.yaml\n\n# \u0421\u043b\u0435\u0434\u0438\u0442\u0435 \u0437\u0430 \u043b\u043e\u0433\u0430\u043c\u0438\nesphome logs LD2450.yaml\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u0438\u043d\u0435\u0433\u043e LED: - \u0412\u0441\u0442\u0430\u043d\u044c\u0442\u0435 \u043f\u0435\u0440\u0435\u0434 \u0434\u0430\u0442\u0447\u0438\u043a\u043e\u043c \u043d\u0435\u043f\u043e\u0434\u0432\u0438\u0436\u043d\u043e \u2192 \ud83d\udd35 LED \u0433\u043e\u0440\u0438\u0442 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e - \u0418\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0434 \u0434\u0430\u0442\u0447\u0438\u043a\u043e\u043c \u2192 \ud83d\udc99 LED \u043c\u0438\u0433\u0430\u0435\u0442 (500ms) - \u0412\u044b\u0439\u0434\u0438\u0442\u0435 \u0438\u0437 \u0437\u043e\u043d\u044b \u2192 \u26ab LED \u0433\u0430\u0441\u043d\u0435\u0442 - \u0415\u0441\u043b\u0438 LED \u043d\u0435 \u0440\u0435\u0430\u0433\u0438\u0440\u0443\u0435\u0442 - \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 TX/RX \u043f\u0440\u043e\u0432\u043e\u0434\u043e\u0432 - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043b\u043e\u0433\u0438: <code>esphome logs LD2450.yaml</code></p>"},{"location":"examples/esphome/LD2450/#5-ota-wifi","title":"5. \u041f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f (OTA \u043f\u043e WiFi)","text":"<pre><code>esphome upload LD2450.yaml --device ld2450.local\n</code></pre>"},{"location":"examples/esphome/LD2450/#6-home-assistant","title":"6. \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 Home Assistant","text":"<p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u0435: 1. \u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 Settings \u2192 Devices &amp; Services 2. \u041d\u0430\u0439\u0434\u0438\u0442\u0435 \"LD2450\" \u0432 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 3. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \"Configure\" 4. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 <code>api_encryption_key</code> \u0438\u0437 <code>secrets.yaml</code> 5. \u0413\u043e\u0442\u043e\u0432\u043e! \ud83c\udf89</p> <p>\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u0441\u0435\u043d\u0441\u043e\u0440\u0430\u043c\u0438 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438.</p>"},{"location":"examples/esphome/LD2450/#_16","title":"\ud83d\udd10 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432","text":""},{"location":"examples/esphome/LD2450/#_17","title":"\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 <code>secrets.yaml</code> \u0432 \u0442\u043e\u0439 \u0436\u0435 \u043f\u0430\u043f\u043a\u0435, \u0447\u0442\u043e \u0438 <code>LD2450.yaml</code>:</p> <pre><code>LD2450/\n\u251c\u2500\u2500 LD2450.yaml\n\u251c\u2500\u2500 secrets.yaml          \u2190 \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u044d\u0442\u043e\u0442 \u0444\u0430\u0439\u043b\n\u251c\u2500\u2500 secrets.yaml.example  \u2190 \u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u043e\u0442\u0441\u044e\u0434\u0430\n\u2514\u2500\u2500 zone.h\n</code></pre>"},{"location":"examples/esphome/LD2450/#secretsyaml","title":"\u0428\u0430\u0431\u043b\u043e\u043d secrets.yaml","text":"<pre><code># WiFi \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\nwifi_ssid: \"MyHomeNetwork\"\nwifi_password: \"MySecurePassword123\"\n\n# OTA \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)\nota_password: \"OTApass2024\"\n\n# Hotspot \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0430\u044f \u0441\u0435\u0442\u044c\nhotspot_password: \"Fallback2024\"\n\n# API \u043a\u043b\u044e\u0447 \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f (\u041e\u0411\u042f\u0417\u0410\u0422\u0415\u041b\u042c\u041d\u041e \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439!)\napi_encryption_key: \"wB8x3kL9mP2nQ5vT7yU1zA4cF6hJ0sD=\"\n</code></pre>"},{"location":"examples/esphome/LD2450/#api","title":"\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0433\u043e API \u043a\u043b\u044e\u0447\u0430","text":"<pre><code>esphome encryption-key\n</code></pre> <p>\u0412\u044b\u0432\u043e\u0434:</p> <pre><code># Encryption key: wB8x3kL9mP2nQ5vT7yU1zA4cF6hJ0sD=\n</code></pre> <p>\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u043a\u043b\u044e\u0447 \u0432 <code>secrets.yaml</code>.</p>"},{"location":"examples/esphome/LD2450/#_18","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u043f\u0430\u0440\u043e\u043b\u044f\u043c","text":"<ul> <li>\u2705 \u041c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432</li> <li>\u2705 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u0441\u0438\u043c\u0432\u043e\u043b\u044b</li> <li>\u2705 \u0420\u0430\u0437\u043d\u044b\u0435 \u043f\u0430\u0440\u043e\u043b\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0446\u0435\u043b\u0435\u0439</li> <li>\u274c \u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438</li> </ul>"},{"location":"examples/esphome/LD2450/#_19","title":"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u26a0\ufe0f \u0412\u0410\u0416\u041d\u041e: - <code>secrets.yaml</code> \u041d\u0415 \u043f\u043e\u043f\u0430\u0434\u0451\u0442 \u0432 git (\u0437\u0430\u0449\u0438\u0449\u0451\u043d <code>.gitignore</code>) - \u0425\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0443\u044e \u043a\u043e\u043f\u0438\u044e \u043f\u0430\u0440\u043e\u043b\u0435\u0439 \u0432 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435 - \u041d\u0435 \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u0439\u0442\u0435 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442\u044b \u0441 \u043f\u0430\u0440\u043e\u043b\u044f\u043c\u0438</p>"},{"location":"examples/esphome/LD2450/#_20","title":"\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0437\u043e\u043d","text":""},{"location":"examples/esphome/LD2450/#-","title":"\u0412\u0435\u0431-\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043e\u0440 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u043d\u043b\u0430\u0439\u043d \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0434\u043b\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0437\u043e\u043d:</p> <p>\ud83c\udf10 https://53l3cu5.github.io</p> <ol> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0437\u043e\u043d\u044b \u043c\u044b\u0448\u044c\u044e</li> <li>\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b</li> <li>\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u0435 \u0432 Home Assistant</li> </ol>"},{"location":"examples/esphome/LD2450/#home-assistant","title":"\u0420\u0443\u0447\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432 Home Assistant","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0432 HA:</p> <p>Settings \u2192 Devices \u2192 LD2450 \u2192 Configure</p>"},{"location":"examples/esphome/LD2450/#1-6","title":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b (1-6)","text":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d Zone X \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430 X (\u043b\u0435\u0432\u043e/\u043f\u0440\u0430\u0432\u043e \u043e\u0442 \u0434\u0430\u0442\u0447\u0438\u043a\u0430) -4000 \u0434\u043e 4000 \u043c\u043c Zone Y \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430 Y (\u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043e\u0442 \u0434\u0430\u0442\u0447\u0438\u043a\u0430) -500 \u0434\u043e 8000 \u043c\u043c Zone Width \u0428\u0438\u0440\u0438\u043d\u0430 \u0437\u043e\u043d\u044b 0 \u0434\u043e 8000 \u043c\u043c Zone Height \u0412\u044b\u0441\u043e\u0442\u0430 (\u0433\u043b\u0443\u0431\u0438\u043d\u0430) \u0437\u043e\u043d\u044b 0 \u0434\u043e 8000 \u043c\u043c Zone Timeout \u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f 0 \u0434\u043e 600 \u0441\u0435\u043a\u0443\u043d\u0434"},{"location":"examples/esphome/LD2450/#_21","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<p>\u0417\u043e\u043d\u0430 1 - \u0413\u043b\u0430\u0432\u043d\u0430\u044f \u043a\u043e\u043c\u043d\u0430\u0442\u0430:</p> <pre><code>Zone1 X: 0          (\u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443)\nZone1 Y: 1000       (1 \u043c\u0435\u0442\u0440 \u043e\u0442 \u0434\u0430\u0442\u0447\u0438\u043a\u0430)\nZone1 Width: 4000   (4 \u043c\u0435\u0442\u0440\u0430 \u0448\u0438\u0440\u0438\u043d\u0430)\nZone1 Height: 5000  (5 \u043c\u0435\u0442\u0440\u043e\u0432 \u0433\u043b\u0443\u0431\u0438\u043d\u0430)\nZone1 Timeout: 30   (30 \u0441\u0435\u043a \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430)\n</code></pre> <p>\u0417\u043e\u043d\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f - \u0425\u043e\u043b\u043e\u0434\u0438\u043b\u044c\u043d\u0438\u043a:</p> <pre><code>Zout1 X: 2000       (2 \u043c\u0435\u0442\u0440\u0430 \u0432\u043f\u0440\u0430\u0432\u043e)\nZout1 Y: 500        (0.5 \u043c\u0435\u0442\u0440\u0430 \u043e\u0442 \u0434\u0430\u0442\u0447\u0438\u043a\u0430)\nZout1 Width: 800    (80 \u0441\u043c \u0448\u0438\u0440\u0438\u043d\u0430)\nZout1 Height: 800   (80 \u0441\u043c \u0433\u043b\u0443\u0431\u0438\u043d\u0430)\nZout1 Enable: ON    (\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e)\n</code></pre>"},{"location":"examples/esphome/LD2450/#_22","title":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","text":"<p>Angle (\u0423\u0433\u043e\u043b \u0434\u0430\u0442\u0447\u0438\u043a\u0430): - \u0415\u0441\u043b\u0438 \u0434\u0430\u0442\u0447\u0438\u043a \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043d\u0435 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e - \u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d: 0-90\u00b0 - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0434\u043b\u044f \u0443\u0433\u043b\u043e\u0432\u043e\u0433\u043e \u043c\u043e\u043d\u0442\u0430\u0436\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u0443\u0433\u043b\u0443 \u043a\u043e\u043c\u043d\u0430\u0442\u044b)</p> <p>Target must leave Zone1: - \u0417\u043e\u043d\u0430 1 \u043e\u0441\u0442\u0430\u043d\u0435\u0442\u0441\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u043e\u043a\u0430 \u0446\u0435\u043b\u044c \u043d\u0435 \u043f\u043e\u043a\u0438\u043d\u0435\u0442 \u0435\u0451 - \u041f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0445 \u0437\u043e\u043d (\u043a\u0440\u043e\u0432\u0430\u0442\u044c, \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e) - \u041f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043b\u043e\u0436\u043d\u043e\u0435 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u0437\u0430\u043c\u0438\u0440\u0430\u043d\u0438\u0438</p> <p>Zone Enable: - \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435/\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0437\u043e\u043d - Target Enable - \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0446\u0435\u043b\u0435\u0439</p>"},{"location":"examples/esphome/LD2450/#plotly","title":"\ud83d\udcca Plotly \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f","text":""},{"location":"examples/esphome/LD2450/#plotly-graph-card","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Plotly Graph Card","text":""},{"location":"examples/esphome/LD2450/#hacs","title":"\u0427\u0435\u0440\u0435\u0437 HACS (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":"<ol> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 HACS \u0432 Home Assistant</li> <li>\u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 Frontend</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u2295 Explore &amp; Download Repositories</li> <li>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \"Plotly Graph Card\"</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Download</li> <li>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 Home Assistant</li> </ol>"},{"location":"examples/esphome/LD2450/#_23","title":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0440\u043e\u0435\u043a\u0442","text":"<p>\ud83d\udd17 https://github.com/dbuezas/lovelace-plotly-graph-card</p>"},{"location":"examples/esphome/LD2450/#_24","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438","text":"<ol> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 Dashboard \u2192 Edit \u2192 Add Card</li> <li>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 Manual \u0432\u043d\u0438\u0437\u0443</li> <li>\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u0430 <code>Plotly Graph.txt</code></li> <li>\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0432 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440</li> <li>\u0415\u0441\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438 <code>entity_name</code> \u0432 <code>LD2450.yaml</code>, \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u0435 <code>ld2450_radar</code> \u043d\u0430 \u0441\u0432\u043e\u0451</li> <li>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435</li> </ol>"},{"location":"examples/esphome/LD2450/#_25","title":"\u0427\u0442\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0435","text":""},{"location":"examples/esphome/LD2450/#person-1-3","title":"\u0426\u0435\u043b\u0438 (Person 1-3)","text":"<ul> <li>\ud83d\udd35 \u0421\u0438\u043d\u0438\u0435/\u041e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0435/\u0417\u0435\u043b\u0451\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438</li> <li>\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043b\u044e\u0434\u0435\u0439</li> <li>\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438</li> </ul>"},{"location":"examples/esphome/LD2450/#zone-1-6","title":"\u0417\u043e\u043d\u044b \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f (Zone 1-6)","text":"<ul> <li>\u0426\u0432\u0435\u0442\u043d\u044b\u0435 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u0438</li> <li>\u041f\u043e\u043b\u0443\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b\u0435: \u0437\u043e\u043d\u0430 \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u0430</li> <li>\u042f\u0440\u043a\u0438\u0435: \u043a\u0442\u043e-\u0442\u043e \u0432 \u0437\u043e\u043d\u0435</li> <li>\u0426\u0432\u0435\u0442\u0430: \u0437\u0435\u043b\u0451\u043d\u044b\u0439, \u043e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439, \u0441\u0438\u043d\u0438\u0439, \u0436\u0451\u043b\u0442\u044b\u0439, \u0442\u0451\u043c\u043d\u043e-\u0437\u0435\u043b\u0451\u043d\u044b\u0439, \u0440\u043e\u0437\u043e\u0432\u044b\u0439</li> </ul>"},{"location":"examples/esphome/LD2450/#zout-1-3","title":"\u0417\u043e\u043d\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (Zout 1-3)","text":"<ul> <li>\u041a\u0440\u0430\u0441\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u0438\u0440\u043d\u044b\u0435 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u0438</li> <li>\u0412\u0438\u0434\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u0433\u0434\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b (Zout Enable: ON)</li> <li>\u0411\u043b\u0435\u0434\u043d\u043e-\u043a\u0440\u0430\u0441\u043d\u044b\u0435: \u0437\u043e\u043d\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430, \u043f\u0443\u0441\u0442\u043e</li> <li>\u042f\u0440\u043a\u043e-\u043a\u0440\u0430\u0441\u043d\u044b\u0435: \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043e\u0431\u044a\u0435\u043a\u0442 (\u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442\u0441\u044f)</li> </ul>"},{"location":"examples/esphome/LD2450/#coverage","title":"\u041e\u0431\u043b\u0430\u0441\u0442\u044c \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f (Coverage)","text":"<ul> <li>\u0421\u0435\u0440\u0430\u044f \u043f\u0443\u043d\u043a\u0442\u0438\u0440\u043d\u0430\u044f \u043b\u0438\u043d\u0438\u044f</li> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u0443\u044e \u0437\u043e\u043d\u0443 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0434\u0430\u0442\u0447\u0438\u043a\u0430</li> <li>\u0424\u043e\u0440\u043c\u0430 \"\u0433\u0440\u0443\u0448\u0438\" - \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c ~6\u043c \u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443</li> </ul>"},{"location":"examples/esphome/LD2450/#_26","title":"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438","text":"<ul> <li>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435: \u041a\u0430\u0436\u0434\u044b\u0435 2 \u0441\u0435\u043a\u0443\u043d\u0434\u044b</li> <li>\u041c\u0430\u0441\u0448\u0442\u0430\u0431: 8\u00d78 \u043c\u0435\u0442\u0440\u043e\u0432</li> <li>\u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: \u041d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u043e\u0440\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b</li> <li>\u0410\u0432\u0442\u043e\u043f\u043e\u0434\u0441\u0442\u0440\u043e\u0439\u043a\u0430: \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0443\u0433\u043e\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0434\u0430\u0442\u0447\u0438\u043a\u0430</li> <li>\u0418\u0441\u0442\u043e\u0440\u0438\u044f: \u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0434\u043d\u044f</li> </ul>"},{"location":"examples/esphome/LD2450/#refresh_interval","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 refresh_interval","text":"<p>\u0412 \u0444\u0430\u0439\u043b\u0435 <code>Plotly Graph.txt</code> \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435: <pre><code>refresh_interval: 2  # \u0441\u0435\u043a\u0443\u043d\u0434\u044b\n</code></pre></p> <p>\u0414\u043b\u044f \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0443\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 \u0434\u043e 5-10 \u0441\u0435\u043a\u0443\u043d\u0434.</p>"},{"location":"examples/esphome/LD2450/#_27","title":"\ud83d\udd12 \u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438","text":"<p>\u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430 \u043e\u0442 \u043a\u043e\u043d\u0441\u0438\u043b\u0438\u0443\u043c\u0430 \u0438\u0437 5 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432.</p>"},{"location":"examples/esphome/LD2450/#7","title":"\u2705 \u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e (7 \u043f\u0440\u043e\u0431\u043b\u0435\u043c)","text":"# \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0411\u044b\u043b\u043e \u0421\u0442\u0430\u043b\u043e \u042d\u0444\u0444\u0435\u043a\u0442 1 TX \u043f\u0438\u043d \u043a\u0430\u043a INPUT <code>input: true</code> <code>output</code> (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) \u0414\u0430\u0442\u0447\u0438\u043a \u0442\u0435\u043f\u0435\u0440\u044c \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e 2 Buffer overflow \u041d\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 <code>if (bytes.size() &lt; 29)</code> \u041d\u0435\u0442 \u043a\u0440\u044d\u0448\u0435\u0439 ESP32 3 Array bounds \u0412\u044b\u0445\u043e\u0434 \u0437\u0430 \u0433\u0440\u0430\u043d\u0438\u0446\u044b \u043c\u0430\u0441\u0441\u0438\u0432\u0430 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0438\u043d\u0434\u0435\u043a\u0441\u0430 \u041d\u0435\u0442 segfault 4 \u0414\u0435\u043b\u0435\u043d\u0438\u0435 \u043d\u0430 \u043d\u043e\u043b\u044c \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438 d=0 <code>if (d &lt; EPSILON)</code> \u041d\u0435\u0442 NaN 5 Domain error acos() arg &gt; 1 \u0438\u043b\u0438 &lt; -1 <code>safe_acos()</code> \u041d\u0435\u0442 NaN 6 \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0446\u0435\u043b\u0438 <code>x!=0 || y&gt;0</code> <code>resolution &gt; 0</code> \u041a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 7 \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u041c\u0443\u0441\u043e\u0440 \u0432 \u043f\u0430\u043c\u044f\u0442\u0438 <code>= {}</code> \u041d\u0435\u0442 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445"},{"location":"examples/esphome/LD2450/#_28","title":"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","text":"<p>\u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b: - <code>CHANGELOG_LD2450_FIXES.md</code> - \u041f\u043e\u043b\u043d\u044b\u0439 \u043e\u0442\u0447\u0451\u0442 \u043a\u043e\u043d\u0441\u0438\u043b\u0438\u0443\u043c\u0430 - <code>SECURITY_AUDIT.md</code> - \u0410\u0443\u0434\u0438\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 - <code>\u041a\u0420\u0410\u0422\u041a\u041e\u0415_\u0420\u0415\u0417\u042e\u041c\u0415.md</code> - \u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0435\u0437\u044e\u043c\u0435</p>"},{"location":"examples/esphome/LD2450/#_29","title":"\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b \u0414\u041e \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","text":"<ul> <li>\u274c \u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 ESP32</li> <li>\u274c \u0417\u0430\u0432\u0438\u0441\u0430\u043d\u0438\u044f \u0441\u0435\u043d\u0441\u043e\u0440\u043e\u0432</li> <li>\u274c \u041b\u043e\u0436\u043d\u044b\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f \u0437\u043e\u043d</li> <li>\u274c NaN \u0432 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430\u0445</li> <li>\u274c \u0417\u043e\u043d\u044b \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043f\u0440\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0443\u0433\u043b\u0430\u0445</li> </ul>"},{"location":"examples/esphome/LD2450/#_30","title":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u041f\u041e\u0421\u041b\u0415 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","text":"<ul> <li>\u2705 \u0421\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 24/7</li> <li>\u2705 \u041a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0446\u0435\u043b\u0435\u0439</li> <li>\u2705 \u0422\u043e\u0447\u043d\u044b\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0431\u0435\u0437 NaN</li> <li>\u2705 \u0417\u043e\u043d\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043f\u0440\u0438 \u043b\u044e\u0431\u044b\u0445 \u0443\u0433\u043b\u0430\u0445</li> <li>\u2705 \u041d\u0435\u0442 \u043b\u043e\u0436\u043d\u044b\u0445 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0439</li> </ul>"},{"location":"examples/esphome/LD2450/#_31","title":"\ud83d\udcda \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","text":""},{"location":"examples/esphome/LD2450/#_32","title":"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438","text":"<ul> <li>\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442: 53l3cu5/ESP32_LD2450</li> <li>\u0412\u0434\u043e\u0445\u043d\u043e\u0432\u0435\u043d\u0438\u0435: Screek 2A Docs</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043e\u0440: https://53l3cu5.github.io</li> <li>Plotly Graph Card: GitHub</li> <li>ESPHome: esphome.io</li> </ul>"},{"location":"examples/esphome/LD2450/#_33","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ul> <li>ESPHome: 2023.12.0 \u0438\u043b\u0438 \u043d\u043e\u0432\u0435\u0435</li> <li>Home Assistant: 2023.12.0 \u0438\u043b\u0438 \u043d\u043e\u0432\u0435\u0435 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)</li> <li>ESP32: \u041b\u044e\u0431\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0441 WiFi</li> <li>HACS: \u0414\u043b\u044f Plotly Graph Card</li> </ul>"},{"location":"examples/esphome/LD2450/#_34","title":"\u0423\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c","text":"<p>\u0414\u0430\u0442\u0447\u0438\u043a \u043d\u0435 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 HA: - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 <code>api_encryption_key</code> - \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0432 <code>secrets.yaml</code> \u0438 HA - \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 ESP32 - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043b\u043e\u0433\u0438: <code>esphome logs LD2450.yaml</code></p> <p>\u041b\u043e\u0436\u043d\u044b\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f: - \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0437\u043e\u043d\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0441\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 - \u0423\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 Zone Timeout - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \"Target must leave\" \u0434\u043b\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0445 \u0437\u043e\u043d</p> <p>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 ESP32: - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435 - \u043d\u0443\u0436\u043d\u044b \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u044b\u0435 5V 500mA - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 USB \u043a\u0430\u0431\u0435\u043b\u044c \u0438\u043b\u0438 \u0432\u043d\u0435\u0448\u043d\u0438\u0439 \u0411\u041f</p> <p>\u0421\u0442\u0440\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b: - \u2705 \u042d\u0442\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0432 \u043d\u0430\u0448\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438! - \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 TX/RX \u043f\u0440\u043e\u0432\u043e\u0434\u043e\u0432</p> <p>\"Invalid packet size\" \u0432 \u043b\u043e\u0433\u0430\u0445: - \u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 ESP32 - \u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e - \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f UART - \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0430 (&lt;20 \u0441\u043c)</p>"},{"location":"examples/esphome/LD2450/#_35","title":"\ud83d\udcc4 \u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f","text":"<p>\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u043e \u043d\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0435 53l3cu5/ESP32_LD2450.</p> <p>\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438.</p>"},{"location":"examples/esphome/LD2450/#_36","title":"\ud83d\ude4f \u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>53l3cu5 - \u0437\u0430 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442</li> <li>Screek - \u0437\u0430 \u0438\u0434\u0435\u0438 \u0438 \u0432\u0434\u043e\u0445\u043d\u043e\u0432\u0435\u043d\u0438\u0435</li> <li>walberjunior - \u0437\u0430 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u044b \u0443\u0433\u043b\u043e\u0432 \u0438 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439</li> <li>\u041a\u043e\u043d\u0441\u0438\u043b\u0438\u0443\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432 - \u0437\u0430 \u0433\u043b\u0443\u0431\u043e\u043a\u0438\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 \u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f</li> <li>Hi-Link Electronics - \u0437\u0430 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u0430\u0442\u0447\u0438\u043a LD2450</li> </ul> <p>\u0412\u0435\u0440\u0441\u0438\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: 1.0 \u0414\u0430\u0442\u0430: 14 \u043e\u043a\u0442\u044f\u0431\u0440\u044f 2025 \u0421\u0442\u0430\u0442\u0443\u0441: \u2705 Production Ready</p> <p>\ud83d\udca1 \u0421\u043e\u0432\u0435\u0442: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 Plotly Graph \u0434\u043b\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0437\u043e\u043d!</p>"},{"location":"guides/first-audit/","title":"\ud83d\udd2c \u041f\u0435\u0440\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u044b","text":"<p>\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044e \u0430\u0443\u0434\u0438\u0442\u0430</p>"},{"location":"guides/first-audit/#_2","title":"\u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u0435\u043d \u0430\u0443\u0434\u0438\u0442","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0438 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043d\u0430\u043a\u0430\u043f\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b:</p> <ul> <li>\ud83d\udcc9 Unavailable \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430</li> <li>\ud83c\udf21\ufe0f \u041d\u0435\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435</li> <li>\ud83d\udd12 \u041d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043a\u0430\u043c\u0435\u0440\u044b</li> <li>\u26a1 \u041f\u0435\u0440\u0435\u0440\u0430\u0441\u0445\u043e\u0434 \u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u0430</li> </ul> <p>\u0410\u0443\u0434\u0438\u0442 \u0432\u044b\u044f\u0432\u0438\u0442 \u0432\u0441\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0438 \u0434\u0430\u0441\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438!</p>"},{"location":"guides/first-audit/#1-","title":"\u0428\u0430\u0433 1 - \u0417\u0430\u043f\u0443\u0441\u043a \u0430\u0443\u0434\u0438\u0442\u0430","text":""},{"location":"guides/first-audit/#_3","title":"\u0427\u0435\u0440\u0435\u0437 \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e","text":"<pre><code>./ha\n# \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435: 8) \ud83d\udd2c \u0417\u0430\u043f\u0443\u0441\u043a \u0430\u0443\u0434\u0438\u0442\u0430\n</code></pre>"},{"location":"guides/first-audit/#_4","title":"\u0418\u043b\u0438 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e","text":"<pre><code>./scripts/audit.sh\n</code></pre> <p>\u0421\u043a\u0440\u0438\u043f\u0442 \u0441\u043e\u0431\u0435\u0440\u0451\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 MCP \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442 \u043e\u0442\u0447\u0451\u0442 \u0432 <code>audits/audit_\u0414\u0410\u0422\u0410.md</code> (\u0444\u0430\u0439\u043b \u0441\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438)</p>"},{"location":"guides/first-audit/#2-","title":"\u0428\u0430\u0433 2 - \u0410\u043d\u0430\u043b\u0438\u0437 \u043e\u0442\u0447\u0451\u0442\u0430","text":"<p>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u0442\u0447\u0451\u0442 \u0432 Cursor:</p> <pre><code>cursor audits/audit_YYYY-MM-DD_HH-MM-SS.md  # \u043e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043e\u0442\u0447\u0451\u0442\n</code></pre> <p>\u041f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u0435 AI:</p> <p>\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u044d\u0442\u043e\u0442 \u0430\u0443\u0434\u0438\u0442 \u0438 \u0434\u0430\u0439 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438</p>"},{"location":"guides/first-audit/#3-","title":"\u0428\u0430\u0433 3 - \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b","text":""},{"location":"guides/first-audit/#unavailable","title":"\u274c Unavailable \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430","text":"<p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0441\u0435\u0442\u044c\u044e, \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u0438\u0442\u0430\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c Wi-Fi/Zigbee \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435</li> <li>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044e \u0432 HA</li> </ol>"},{"location":"guides/first-audit/#_5","title":"\ud83c\udf21\ufe0f \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0439 \u0434\u0438\u0441\u0431\u0430\u043b\u0430\u043d\u0441","text":"<p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u043a\u043e\u043d\u0442\u0443\u0440\u043e\u0432 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u2192 \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</p>"},{"location":"guides/first-audit/#_6","title":"\ud83d\udd12 \u041d\u0435\u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0435 \u043a\u0430\u043c\u0435\u0440\u044b","text":"<p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 URL, \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u2192 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</p>"},{"location":"guides/first-audit/#4-","title":"\u0428\u0430\u0433 4 - \u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","text":""},{"location":"guides/first-audit/#_7","title":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<pre><code># \u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0432 Cursor\ncursor config/\n\n# \u0412\u043d\u0435\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\n# \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\n</code></pre>"},{"location":"guides/first-audit/#_8","title":"\u0420\u0430\u0437\u0432\u0451\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>./scripts/deploy.sh\n</code></pre> <p>\u0421\u043a\u0440\u0438\u043f\u0442:</p> <ol> <li>\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441</li> <li>\ud83d\udcbe \u0421\u043e\u0437\u0434\u0430\u0441\u0442 \u0431\u044d\u043a\u0430\u043f</li> <li>\ud83d\ude80 \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442 HA</li> </ol>"},{"location":"guides/first-audit/#5-","title":"\u0428\u0430\u0433 5 - \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0430\u0443\u0434\u0438\u0442","text":"<p>\u0427\u0435\u0440\u0435\u0437 \u043d\u0435\u0434\u0435\u043b\u044e \u043f\u043e\u0441\u043b\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439:</p> <pre><code>./scripts/audit.sh\n</code></pre> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0434\u043e/\u043f\u043e\u0441\u043b\u0435!</p>"},{"location":"guides/first-audit/#_9","title":"\u0427\u0442\u043e \u0434\u0430\u043b\u044c\u0448\u0435","text":""},{"location":"guides/first-audit/#_10","title":"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0430","text":"<ul> <li>\ud83c\udf21\ufe0f \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</li> <li>\ud83d\udd12 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</li> <li>\u26a1 \u042d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u0435</li> </ul>"},{"location":"guides/first-audit/#_11","title":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430","text":"<pre><code># \u0412 automations.yaml\nautomation:\n  - alias: \"\u0415\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0430\u0443\u0434\u0438\u0442\"\n    trigger:\n      - platform: time\n        at: \"03:00:00\"\n    condition:\n      - condition: time\n        weekday:\n          - mon\n    action:\n      - service: shell_command.run_audit\n\nshell_command:\n  run_audit: \"~/HASSio/scripts/audit.sh\"\n</code></pre> <p>\u0421\u043e\u0432\u0435\u0442</p> <p>\u041f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0430\u0443\u0434\u0438\u0442 \u0440\u0430\u0437 \u0432 \u043c\u0435\u0441\u044f\u0446 \u0438\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u043a\u0440\u0443\u043f\u043d\u044b\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435!</p>"},{"location":"guides/heating-optimization/","title":"\ud83c\udf21\ufe0f \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f","text":"<p>\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</p>"},{"location":"guides/heating-optimization/#_2","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0438\u0437 \u0430\u0443\u0434\u0438\u0442\u0430</li> <li>1. \u041f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u0430\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u043a\u0430</li> <li>\u0411\u0430\u0437\u043e\u0432\u0430\u044f \u043a\u0440\u0438\u0432\u0430\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</li> <li>2. \u041d\u043e\u0447\u043d\u043e\u0435 \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b</li> <li>3. \u0411\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u0437\u043e\u043d</li> <li>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0414\u0435\u0442\u0441\u043a\u0430\u044f \u0445\u043e\u043b\u043e\u0434\u043d\u0430\u044f, \u043a\u043e\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0442\u0430</li> <li>4. \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438</li> <li>Dashboard \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f</li> <li>5. \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432\u0430</li> <li>6. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u0414\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u041f\u043e\u0441\u043b\u0435 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438</li> </ul>"},{"location":"guides/heating-optimization/#_3","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0438\u0437 \u0430\u0443\u0434\u0438\u0442\u0430","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0430\u0443\u0434\u0438\u0442\u0430 \u0447\u0430\u0441\u0442\u043e \u0432\u044b\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f:</p> <ul> <li>\u274c \u041f\u0435\u0440\u0435\u0433\u0440\u0435\u0432 \u043e\u0434\u043d\u0438\u0445 \u0437\u043e\u043d, \u043d\u0435\u0434\u043e\u0433\u0440\u0435\u0432 \u0434\u0440\u0443\u0433\u0438\u0445</li> <li>\u274c \u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u043f\u043e\u0433\u043e\u0434\u044b</li> <li>\u274c \u041d\u0435\u0442 \u043d\u043e\u0447\u043d\u043e\u0433\u043e \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b</li> <li>\u274c \u041a\u043e\u0442\u0451\u043b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0435\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e</li> </ul> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \u041f\u0435\u0440\u0435\u0440\u0430\u0441\u0445\u043e\u0434 \u0433\u0430\u0437\u0430/\u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0434\u043e 40%!</p>"},{"location":"guides/heating-optimization/#1","title":"1. \u041f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u0430\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u043a\u0430","text":""},{"location":"guides/heating-optimization/#_4","title":"\u0411\u0430\u0437\u043e\u0432\u0430\u044f \u043a\u0440\u0438\u0432\u0430\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f","text":"<pre><code># \u0412 automations.yaml\nautomation:\n  - alias: \"\u041a\u043e\u0442\u0451\u043b: \u041f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u0430\u044f \u043a\u0440\u0438\u0432\u0430\u044f\"\n    description: \u0420\u0435\u0433\u0443\u043b\u0438\u0440\u043e\u0432\u043a\u0430 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u043f\u043e\u0434\u0430\u0447\u0438 \u043f\u043e \u0443\u043b\u0438\u0446\u0435\n    trigger:\n      - platform: state\n        entity_id: sensor.outdoor_temperature\n      - platform: time_pattern\n        hours: \"/1\"  # \u041a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u0441\n    action:\n      - service: climate.set_temperature\n        target:\n          entity_id: climate.warming_floor_smart\n        data:\n          temperature: &gt;\n            {% set outdoor = states('sensor.outdoor_temperature')|float %}\n            {% if outdoor &lt; -10 %}\n              28\n            {% elif outdoor &lt; 0 %}\n              25\n            {% elif outdoor &lt; 5 %}\n              23\n            {% elif outdoor &lt; 10 %}\n              21\n            {% elif outdoor &lt; 15 %}\n              19\n            {% else %}\n              16\n            {% endif %}\n</code></pre> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f 15-20%</p>"},{"location":"guides/heating-optimization/#2","title":"2. \u041d\u043e\u0447\u043d\u043e\u0435 \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b","text":"<pre><code>automation:\n  - alias: \"\u041d\u043e\u0447\u043d\u043e\u0435 \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u0435\"\n    trigger:\n      - platform: time\n        at: \"23:00:00\"\n    action:\n      - service: climate.set_temperature\n        data:\n          entity_id:\n            - climate.bedroom_thermostat\n            - climate.living_room_thermostat\n            - climate.kitchen_thermostat\n          temperature: 18\n\n  - alias: \"\u0423\u0442\u0440\u0435\u043d\u043d\u0435\u0435 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435\"\n    trigger:\n      - platform: time\n        at: \"06:00:00\"\n    action:\n      - service: climate.set_temperature\n        data:\n          entity_id:\n            - climate.bedroom_thermostat\n          temperature: 20\n      - service: climate.set_temperature\n        data:\n          entity_id:\n            - climate.living_room_thermostat\n            - climate.kitchen_thermostat\n          temperature: 22\n</code></pre> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f 5-10% \u043d\u043e\u0447\u044c\u044e</p>"},{"location":"guides/heating-optimization/#3","title":"3. \u0411\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u0437\u043e\u043d","text":""},{"location":"guides/heating-optimization/#_5","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0414\u0435\u0442\u0441\u043a\u0430\u044f \u0445\u043e\u043b\u043e\u0434\u043d\u0430\u044f, \u043a\u043e\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0442\u0430","text":"<p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0442\u043e\u043a\u0430 \u0442\u0435\u043f\u043b\u043e\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044f</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <pre><code># 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c group \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430\ngroup:\n  all_thermostats:\n    name: \"\u0412\u0441\u0435 \u0442\u0435\u0440\u043c\u043e\u0441\u0442\u0430\u0442\u044b\"\n    entities:\n      - climate.bedroom_thermostat\n      - climate.children_thermostat\n      - climate.living_room_thermostat\n      - climate.kitchen_thermostat\n      - climate.boiler_room_thermostat\n\n# 2. Sensor \u0434\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u043e\u0442 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b\ntemplate:\n  - sensor:\n      - name: \"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0439 \u0431\u0430\u043b\u0430\u043d\u0441\"\n        state: &gt;\n          {% set temps = expand('group.all_thermostats')\n            | selectattr('state', 'in', ['heat', 'idle'])\n            | map(attribute='attributes.current_temperature')\n            | list %}\n          {% set targets = expand('group.all_thermostats')\n            | selectattr('state', 'in', ['heat', 'idle'])\n            | map(attribute='attributes.temperature')\n            | list %}\n          {% set diffs = [] %}\n          {% for i in range(temps|length) %}\n            {% set _ = diffs.append((targets[i] - temps[i])|abs) %}\n          {% endfor %}\n          {{ (diffs|sum / diffs|length)|round(1) }}\n        unit_of_measurement: \"\u00b0C\"\n\n# 3. \u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e \u0434\u0438\u0441\u0431\u0430\u043b\u0430\u043d\u0441\u0435\nautomation:\n  - alias: \"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \u043e \u0434\u0438\u0441\u0431\u0430\u043b\u0430\u043d\u0441\u0435\"\n    trigger:\n      - platform: numeric_state\n        entity_id: sensor.temperature_balance\n        above: 2.0\n        for: \"01:00:00\"\n    action:\n      - service: notify.telegram\n        data:\n          message: &gt;\n            \u0414\u0438\u0441\u0431\u0430\u043b\u0430\u043d\u0441 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440: {{ states('sensor.temperature_balance') }}\u00b0C\n            \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u044b\u0435 \u043a\u0440\u0430\u043d\u044b!\n</code></pre>"},{"location":"guides/heating-optimization/#4","title":"4. \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"guides/heating-optimization/#dashboard","title":"Dashboard \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f","text":"<pre><code># \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 Lovelace\ntype: vertical-stack\ncards:\n  - type: gauge\n    entity: sensor.heating_efficiency\n    name: \u042d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f\n    min: 0\n    max: 100\n    severity:\n      green: 70\n      yellow: 50\n      red: 0\n\n  - type: history-graph\n    entities:\n      - sensor.outdoor_temperature\n      - sensor.indoor_temperature\n      - sensor.ebusd1_bai_flowtemp_temp\n    hours_to_show: 48\n\n  - type: entities\n    title: \u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\n    entities:\n      - entity: sensor.temperature_balance\n        name: \u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0434\u0438\u0441\u0431\u0430\u043b\u0430\u043d\u0441\n</code></pre>"},{"location":"guides/heating-optimization/#5","title":"5. \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432\u0430","text":"<pre><code>automation:\n  - alias: \"\u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432\u0430 \u0442\u0451\u043f\u043b\u043e\u0433\u043e \u043f\u043e\u043b\u0430\"\n    trigger:\n      - platform: numeric_state\n        entity_id:\n          - sensor.wthermostat_3_temperature_floor\n          - sensor.wthermostat_4_temperature_floor\n          - sensor.wthermostat_5_temperature_floor\n        above: 28\n    action:\n      - service: climate.turn_off\n        target:\n          entity_id: \"{{ trigger.entity_id|replace('sensor.', 'climate.')|replace('_temperature_floor', '') }}\"\n      - service: notify.critical\n        data:\n          message: \"\u041f\u0435\u0440\u0435\u0433\u0440\u0435\u0432 \u043f\u043e\u043b\u0430! {{ trigger.to_state.name }}: {{ trigger.to_state.state }}\u00b0C\"\n\n  # \u0410\u0432\u0442\u043e\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\n  - alias: \"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432\u0430\"\n    trigger:\n      - platform: numeric_state\n        entity_id:\n          - sensor.wthermostat_3_temperature_floor\n          - sensor.wthermostat_4_temperature_floor\n          - sensor.wthermostat_5_temperature_floor\n        below: 25\n        for: \"00:10:00\"\n    action:\n      - service: climate.turn_on\n        target:\n          entity_id: \"{{ trigger.entity_id|replace('sensor.', 'climate.')|replace('_temperature_floor', '') }}\"\n</code></pre>"},{"location":"guides/heating-optimization/#6","title":"6. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438","text":""},{"location":"guides/heating-optimization/#_6","title":"\u0414\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438","text":"<ul> <li>\u274c \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: 21\u00b0C (\u0446\u0435\u043b\u044c 20\u00b0C)</li> <li>\u274c \u0414\u0438\u0441\u0431\u0430\u043b\u0430\u043d\u0441: 3.5\u00b0C</li> <li>\u274c \u042d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: 45%</li> <li>\u274c \u0420\u0430\u0441\u0445\u043e\u0434 \u0433\u0430\u0437\u0430: 100%</li> </ul>"},{"location":"guides/heating-optimization/#_7","title":"\u041f\u043e\u0441\u043b\u0435 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438","text":"<ul> <li>\u2705 \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: 20\u00b0C (\u0442\u043e\u0447\u043d\u043e!)</li> <li>\u2705 \u0414\u0438\u0441\u0431\u0430\u043b\u0430\u043d\u0441: 0.5\u00b0C</li> <li>\u2705 \u042d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: 75%</li> <li>\u2705 \u0420\u0430\u0441\u0445\u043e\u0434 \u0433\u0430\u0437\u0430: 70% (-30% \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u044f!)</li> </ul>"},{"location":"guides/heating-optimization/#-","title":"\u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438","text":"<ul> <li>[ ] \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u043f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u0430\u044f \u043a\u0440\u0438\u0432\u0430\u044f</li> <li>[ ] \u041d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e \u043d\u043e\u0447\u043d\u043e\u0435 \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u0435</li> <li>[ ] \u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u044b \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u044b\u0435 \u043a\u0440\u0430\u043d\u044b</li> <li>[ ] \u0421\u043e\u0437\u0434\u0430\u043d\u044b \u0434\u0430\u0442\u0447\u0438\u043a\u0438 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430</li> <li>[ ] \u041d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0430 \u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432\u0430</li> <li>[ ] \u041f\u0440\u043e\u0432\u0435\u0434\u0451\u043d \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0430\u0443\u0434\u0438\u0442 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0441\u044f\u0446</li> </ul> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442</p> <p>\u041f\u0440\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u0442 20-35% \u043e\u0442 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432 \u043d\u0430 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0431\u0435\u0437 \u043f\u043e\u0442\u0435\u0440\u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430!</p>"},{"location":"guides/security/","title":"\ud83d\udd12 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430","text":"<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</p>"},{"location":"guides/security/#_2","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0441\u0438\u0441\u0442\u0435\u043c\u044b</li> <li>1. \u0423\u043c\u043d\u044b\u0435 \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f</li> <li>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043b\u043e\u0436\u043d\u044b\u0445 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0439</li> <li>\u041c\u0430\u0448\u0438\u043d\u0430 \u0432\u043e \u0434\u0432\u043e\u0440\u0435</li> <li>2. \u0417\u043e\u043d\u044b \u0434\u0435\u0442\u0435\u043a\u0446\u0438\u0438</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0445 \u0437\u043e\u043d</li> <li>3. \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0441\u0432\u0435\u0449\u0435\u043d\u0438\u044f</li> <li>4. \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>\u0412\u0438\u0434\u0435\u043e\u0434\u043e\u043c\u043e\u0444\u043e\u043d \u0441 \u0443\u043c\u043d\u044b\u043c \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0435\u043c</li> <li>\u0423\u043c\u043d\u044b\u0435 \u0437\u0430\u043c\u043a\u0438</li> <li>5. \u0420\u0435\u0436\u0438\u043c\u044b \u043e\u0445\u0440\u0430\u043d\u044b</li> <li>6. \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0441\u043e\u0431\u044b\u0442\u0438\u0439</li> <li>Dashboard \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</li> <li>7. \u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438</li> <li>\u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</li> </ul>"},{"location":"guides/security/#_3","title":"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0441\u0438\u0441\u0442\u0435\u043c\u044b","text":"<p>\u0418\u0437 \u0430\u0443\u0434\u0438\u0442\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f:</p> <ul> <li>\ud83d\udcf9 \u041a\u0430\u043c\u0435\u0440\u044b (Hikvision, Dahua, \u0442\u0435\u043f\u043b\u043e\u0432\u0438\u0437\u043e\u0440\u044b)</li> <li>\ud83d\udea8 \u0414\u0430\u0442\u0447\u0438\u043a\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f (PIR, thermal)</li> <li>\ud83d\udeaa \u0414\u0430\u0442\u0447\u0438\u043a\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f (\u0434\u0432\u0435\u0440\u0438, \u043e\u043a\u043d\u0430)</li> <li>\ud83d\udd14 \u0412\u0438\u0434\u0435\u043e\u0434\u043e\u043c\u043e\u0444\u043e\u043d\u044b</li> <li>\ud83d\udd12 \u0417\u0430\u043c\u043a\u0438 (\u0443\u043c\u043d\u044b\u0435 \u0437\u0430\u043c\u043a\u0438)</li> </ul>"},{"location":"guides/security/#1","title":"1. \u0423\u043c\u043d\u044b\u0435 \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f","text":""},{"location":"guides/security/#_4","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043b\u043e\u0436\u043d\u044b\u0445 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0439","text":"<p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0442\u0438\u043f\u0443 \u043e\u0431\u044a\u0435\u043a\u0442\u0430</p> <pre><code>automation:\n  - alias: \"\u0422\u0440\u0435\u0432\u043e\u0433\u0430: \u0427\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u043e\u0447\u044c\u044e\"\n    trigger:\n      - platform: state\n        entity_id: binary_sensor.street_ptz_smart_motion_human\n        to: \"on\"\n    condition:\n      - condition: time\n        after: \"22:00:00\"\n        before: \"06:00:00\"\n      # \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0435\u0441\u043b\u0438 \u0434\u043e\u043c\u0430\n      - condition: state\n        entity_id: alarm_control_panel.home\n        state: \"armed_away\"\n    action:\n      - service: notify.telegram\n        data:\n          message: \"\u26a0\ufe0f \u0427\u0435\u043b\u043e\u0432\u0435\u043a \u0432\u043e\u0437\u043b\u0435 \u0434\u043e\u043c\u0430!\"\n          data:\n            photo:\n              - url: \"http://YOUR_HA_IP:8123/api/camera_proxy/camera.street_ptz\"\n      - service: light.turn_on\n        entity_id: light.street_lights\n        data:\n          brightness: 255\n</code></pre>"},{"location":"guides/security/#_5","title":"\u041c\u0430\u0448\u0438\u043d\u0430 \u0432\u043e \u0434\u0432\u043e\u0440\u0435","text":"<pre><code>automation:\n  - alias: \"\u0422\u0440\u0435\u0432\u043e\u0433\u0430: \u041c\u0430\u0448\u0438\u043d\u0430 \u0443 \u0432\u043e\u0440\u043e\u0442\"\n    trigger:\n      - platform: state\n        entity_id: binary_sensor.street_ptz_smart_motion_vehicle\n        to: \"on\"\n    condition:\n      - condition: state\n        entity_id: binary_sensor.gate_lock\n        state: \"off\"  # \u0412\u043e\u0440\u043e\u0442\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044b\n    action:\n      - service: notify.telegram\n        data:\n          message: \"\ud83d\ude97 \u041c\u0430\u0448\u0438\u043d\u0430 \u0443 \u0432\u043e\u0440\u043e\u0442!\"\n          data:\n            inline_keyboard:\n              - \"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432\u043e\u0440\u043e\u0442\u0430:/open_gate\"\n              - \"\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c:/ignore\"\n</code></pre>"},{"location":"guides/security/#2","title":"2. \u0417\u043e\u043d\u044b \u0434\u0435\u0442\u0435\u043a\u0446\u0438\u0438","text":""},{"location":"guides/security/#_6","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0445 \u0437\u043e\u043d","text":"<p>\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e:</p> <ul> <li>\u274c \u0412\u0441\u044f \u043a\u0430\u043c\u0435\u0440\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430 \u2192 \u043b\u043e\u0436\u043d\u044b\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0434\u0435\u0440\u0435\u0432\u044c\u044f</li> <li>\u274c \u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u0430\u044f \u0442\u0440\u0435\u0432\u043e\u0433\u0430 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435</li> </ul> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e:</p> <ul> <li>\u2705 \u0417\u043e\u043d\u0430 \u0443 \u043a\u0430\u043b\u0438\u0442\u043a\u0438</li> <li>\u2705 \u0417\u043e\u043d\u0430 \u0443 \u0432\u0445\u043e\u0434\u043d\u043e\u0439 \u0434\u0432\u0435\u0440\u0438</li> <li>\u2705 \u041f\u0435\u0440\u0438\u043c\u0435\u0442\u0440 \u0437\u0430\u0431\u043e\u0440\u0430</li> </ul> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 Hikvision:</p> <ol> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u0430\u043c\u0435\u0440\u044b \u2192 \u0414\u0435\u0442\u0435\u043a\u0446\u0438\u044f \u2192 Smart Event</li> <li>\u0412\u044b\u0431\u0440\u0430\u0442\u044c \"Intrusion Detection\" (\u0432\u0442\u043e\u0440\u0436\u0435\u043d\u0438\u0435)</li> <li>\u041d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0437\u043e\u043d\u0443 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0430</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 60-70%</li> </ol>"},{"location":"guides/security/#3","title":"3. \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0441\u0432\u0435\u0449\u0435\u043d\u0438\u044f","text":"<pre><code>automation:\n  - alias: \"\u0421\u0432\u0435\u0442 \u043f\u0440\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0438 \u043d\u043e\u0447\u044c\u044e\"\n    trigger:\n      - platform: state\n        entity_id:\n          - binary_sensor.doorbell_pir\n          - binary_sensor.garden_thermal_motion_alarm\n        to: \"on\"\n    condition:\n      - condition: sun\n        after: sunset\n        before: sunrise\n    action:\n      - service: light.turn_on\n        entity_id:\n          - light.entrance\n          - light.garden_thermal_infrared\n        data:\n          brightness: 200\n      - delay: \"00:03:00\"\n      - service: light.turn_off\n        entity_id:\n          - light.entrance\n          - light.garden_thermal_infrared\n</code></pre>"},{"location":"guides/security/#4","title":"4. \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":""},{"location":"guides/security/#_7","title":"\u0412\u0438\u0434\u0435\u043e\u0434\u043e\u043c\u043e\u0444\u043e\u043d \u0441 \u0443\u043c\u043d\u044b\u043c \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0435\u043c","text":"<pre><code>automation:\n  - alias: \"\u0414\u043e\u043c\u043e\u0444\u043e\u043d: \u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435\"\n    trigger:\n      - platform: state\n        entity_id: binary_sensor.vto2111_invite\n        to: \"on\"\n    action:\n      - service: notify.telegram\n        data:\n          message: \"\ud83d\udd14 \u0417\u0432\u043e\u043d\u043e\u043a \u0432 \u0434\u043e\u043c\u043e\u0444\u043e\u043d!\"\n          data:\n            photo:\n              - url: \"http://YOUR_HA_IP:8123/api/camera_proxy/camera.vto2111\"\n            inline_keyboard:\n              - \"\u041e\u0442\u043a\u0440\u044b\u0442\u044c:/open_door\"\n              - \"\u0413\u043e\u0432\u043e\u0440\u0438\u0442\u044c:/talk\"\n</code></pre>"},{"location":"guides/security/#_8","title":"\u0423\u043c\u043d\u044b\u0435 \u0437\u0430\u043c\u043a\u0438","text":"<pre><code>automation:\n  - alias: \"\u0410\u0432\u0442\u043e\u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0434\u0432\u0435\u0440\u0438\"\n    trigger:\n      - platform: state\n        entity_id: binary_sensor.door_sensor\n        to: \"off\"  # \u0414\u0432\u0435\u0440\u044c \u0437\u0430\u043a\u0440\u044b\u0442\u0430\n        for: \"00:00:30\"\n    condition:\n      - condition: state\n        entity_id: lock.door_lock\n        state: \"unlocked\"\n    action:\n      - service: lock.lock\n        entity_id: lock.door_lock\n</code></pre>"},{"location":"guides/security/#5","title":"5. \u0420\u0435\u0436\u0438\u043c\u044b \u043e\u0445\u0440\u0430\u043d\u044b","text":"<pre><code># \u0412 input_select.yaml\ninput_select:\n  security_mode:\n    name: \u0420\u0435\u0436\u0438\u043c \u043e\u0445\u0440\u0430\u043d\u044b\n    options:\n      - \"\u0414\u043e\u043c\u0430\"\n      - \"\u0423\u0448\u043b\u0438\"\n      - \"\u041e\u0442\u043f\u0443\u0441\u043a\"\n      - \"\u0421\u043e\u043d\"\n    initial: \"\u0414\u043e\u043c\u0430\"\n    icon: mdi:shield-home\n\n# \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u0440\u0435\u0436\u0438\u043c\u043e\u0432\nautomation:\n  - alias: \"\u0420\u0435\u0436\u0438\u043c: \u0423\u0448\u043b\u0438\"\n    trigger:\n      - platform: state\n        entity_id: group.family\n        to: \"not_home\"\n        for: \"00:05:00\"\n    action:\n      - service: input_select.select_option\n        target:\n          entity_id: input_select.security_mode\n        data:\n          option: \"\u0423\u0448\u043b\u0438\"\n      - service: alarm_control_panel.alarm_arm_away\n        entity_id: alarm_control_panel.home\n      - service: climate.set_temperature\n        data:\n          entity_id: all\n          temperature: 18\n      - service: light.turn_off\n        entity_id: all\n\n  - alias: \"\u0420\u0435\u0436\u0438\u043c: \u0412\u0435\u0440\u043d\u0443\u043b\u0438\u0441\u044c\"\n    trigger:\n      - platform: state\n        entity_id: group.family\n        to: \"home\"\n    action:\n      - service: input_select.select_option\n        target:\n          entity_id: input_select.security_mode\n        data:\n          option: \"\u0414\u043e\u043c\u0430\"\n      - service: alarm_control_panel.alarm_disarm\n        entity_id: alarm_control_panel.home\n</code></pre>"},{"location":"guides/security/#6","title":"6. \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0441\u043e\u0431\u044b\u0442\u0438\u0439","text":""},{"location":"guides/security/#dashboard","title":"Dashboard \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438","text":"<pre><code>type: vertical-stack\ncards:\n  - type: picture-entity\n    entity: camera.street_ptz\n    camera_image: camera.street_ptz\n    show_state: false\n\n  - type: horizontal-stack\n    cards:\n      - type: entity\n        entity: binary_sensor.street_ptz_smart_motion_human\n        name: \u0427\u0435\u043b\u043e\u0432\u0435\u043a\n      - type: entity\n        entity: binary_sensor.street_ptz_smart_motion_vehicle\n        name: \u041c\u0430\u0448\u0438\u043d\u0430\n\n  - type: history-graph\n    entities:\n      - binary_sensor.doorbell_pir\n      - binary_sensor.garden_thermal_motion_alarm\n      - binary_sensor.gate_lock\n    hours_to_show: 24\n\n  - type: logbook\n    entities:\n      - binary_sensor.street_ptz_smart_motion_human\n      - binary_sensor.vto2111_invite\n    hours_to_show: 24\n</code></pre>"},{"location":"guides/security/#7","title":"7. \u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438","text":"<pre><code>automation:\n  - alias: \"\u0422\u0435\u0441\u0442 \u043a\u0430\u043c\u0435\u0440 \u043a\u0430\u0436\u0434\u0443\u044e \u043d\u043e\u0447\u044c\"\n    trigger:\n      - platform: time\n        at: \"03:00:00\"\n    action:\n      - service: script.check_all_cameras\n\nscript:\n  check_all_cameras:\n    sequence:\n      - repeat:\n          for_each:\n            - camera.street_ptz\n            - camera.garden_thermal\n            - camera.vto2111\n          sequence:\n            - service: camera.snapshot\n              target:\n                entity_id: \"{{ repeat.item }}\"\n              data:\n                filename: \"/config/www/snapshots/{{ repeat.item }}_test.jpg\"\n            - delay: 1\n      - service: notify.telegram\n        data:\n          message: \"\u2705 \u0412\u0441\u0435 \u043a\u0430\u043c\u0435\u0440\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442\"\n</code></pre>"},{"location":"guides/security/#-","title":"\u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>[ ] \u041d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u0437\u043e\u043d\u044b \u0434\u0435\u0442\u0435\u043a\u0446\u0438\u0438 \u043d\u0430 \u043a\u0430\u043c\u0435\u0440\u0430\u0445</li> <li>[ ] \u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u043b\u043e\u0436\u043d\u044b\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f</li> <li>[ ] \u0423\u043c\u043d\u044b\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f (\u0442\u043e\u043b\u044c\u043a\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0435)</li> <li>[ ] \u0420\u0435\u0436\u0438\u043c\u044b \u043e\u0445\u0440\u0430\u043d\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b</li> <li>[ ] \u0415\u0441\u0442\u044c \u0441\u043d\u0438\u043c\u043a\u0438 \u0441 \u043a\u0430\u043c\u0435\u0440 \u043f\u0440\u0438 \u0442\u0440\u0435\u0432\u043e\u0433\u0435</li> <li>[ ] \u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>[ ] \u0420\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432</li> </ul> <p>\u0412\u0430\u0436\u043d\u043e</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0439\u0442\u0435 \u043a\u0430\u043c\u0435\u0440\u044b \u0438 \u0434\u0430\u0442\u0447\u0438\u043a\u0438 \u0440\u0430\u0437 \u0432 \u043c\u0435\u0441\u044f\u0446! \u041d\u0435\u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u0445\u0443\u0436\u0435 \u0435\u0451 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f.</p>"},{"location":"integrations/","title":"\ud83d\udcda n8n \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438","text":"<p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 n8n \u0441 Home Assistant.</p>"},{"location":"integrations/#ai","title":"\ud83c\udf24\ufe0f \u041c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u044f + AI \u043f\u0440\u043e\u0433\u043d\u043e\u0437","text":"<p>\u0424\u0430\u0439\u043b: README-meteostation.md</p> <p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b \u0432 Telegram: - \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u043c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u044f + \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u043e\u0433\u043e\u0434\u0430 - AI \u0430\u043d\u0430\u043b\u0438\u0437 \u0447\u0435\u0440\u0435\u0437 GigaChat - \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 (\u043e\u0434\u0435\u0436\u0434\u0430, \u0437\u043e\u043d\u0442, \u0430\u0432\u0442\u043e, \u0434\u043e\u043c, \u043e\u0433\u043e\u0440\u043e\u0434) - \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435: \u043a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c \u0432 07:00</p> <p>Workflow: <code>n8n-meteostation-ai.json</code> (\u0448\u0430\u0431\u043b\u043e\u043d) \u0438\u043b\u0438 <code>n8n-meteostation-ai.local.json</code> (\u0440\u0430\u0431\u043e\u0447\u0438\u0439)</p>"},{"location":"integrations/#100","title":"\ud83e\udd16 \u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 (100% \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e)","text":""},{"location":"integrations/#1-gigachat","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1: GigaChat (\u043e\u0431\u043b\u0430\u0447\u043d\u044b\u0439)","text":"<p>\u0424\u0430\u0439\u043b: README-voice-assistant.md</p> <p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 Home Assistant \u0447\u0435\u0440\u0435\u0437 \u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a \u0432 Telegram: - \u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b (\u0433\u043e\u043b\u043e\u0441 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u0441\u044f \u0441 OLLAMA) - GigaChat AI (\u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439) - \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0442\u043e\u043c, \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c, \u0441\u0446\u0435\u043d\u0430\u043c\u0438, \u0434\u0430\u0442\u0447\u0438\u043a\u0430\u043c\u0438 - Function calling \u0434\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f - \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 (\u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043e\u0434\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430)</p> <p>\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: \u2705 \u20bd0/\u043c\u0435\u0441\u044f\u0446 - \u0432\u0441\u0451 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e!</p> <p>\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: \u0414\u043b\u044f \u0430\u0433\u0435\u043d\u0442\u0430 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0441\u043c. Ollama \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043d\u0438\u0436\u0435.</p>"},{"location":"integrations/#2-ollama","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2: Ollama (\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439, \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439) \ud83d\udd12","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Ollama: - OLLAMA-PROXMOX-COMPLETE-GUIDE.md - \u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e GPU passthrough</p> <p>\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e: - PERSONAL-ASSISTANT-OLLAMA.md - \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 - Workflow: <code>n8n-personal-assistant-ollama.json</code> - \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430: Langchain Agent + Memory Buffer (\u043a\u0430\u043a \u0432 n8n Voice Assistant) - \u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b: \u0412\u043e\u043f\u0440\u043e\u0441\u044b \u043e \u0434\u043e\u043c\u0435 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430</p> <p>\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 AI \u043d\u0430 GPU (GTX 1050 Ti / GTX 1060): - \u2705 100% \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e - \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0411\u0415\u0417 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430 - \u2705 100% \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e - \u2705 \u041f\u0430\u043c\u044f\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433\u0430 (10 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439) - \u2705 \u041c\u043e\u0434\u0435\u043b\u044c: phi3:mini (4GB) \u0438\u043b\u0438 llama3.1:8b (6GB) - \u2705 Ubuntu VM \u0441 GPU passthrough</p> <p>\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: \u2705 \u20bd0/\u043c\u0435\u0441\u044f\u0446</p>"},{"location":"integrations/#ai-home-assistant","title":"\ud83e\udd16 AI \u0410\u0433\u0435\u043d\u0442\u044b \u0434\u043b\u044f Home Assistant","text":"<p>\u0424\u0430\u0439\u043b: n8n-ai-agents.md</p> <p>7 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 AI \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 LLM (Ollama): 1. \u0423\u043c\u043d\u044b\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 (\u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435) 2. AI \u0430\u043d\u0430\u043b\u0438\u0437 \u043a\u0430\u043c\u0435\u0440 (\u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a Frigate) 3. RAG \u043f\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f\u043c (\u043f\u043e\u0438\u0441\u043a \u043f\u043e YAML) 4. \u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 NodeRED flows 5. \u041f\u0440\u0435\u0434\u0438\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 6. \u041e\u0442\u043b\u0430\u0434\u0447\u0438\u043a \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439 7. \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f (15 \u0437\u043e\u043d)</p>"},{"location":"integrations/#ai_1","title":"\ud83e\udd35 AI \u0414\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439","text":"<p>\u0424\u0430\u0439\u043b: n8n-butler-setup.md</p> <p>\u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435 AI \u0434\u0432\u043e\u0440\u0435\u0446\u043a\u043e\u0433\u043e: - \u0413\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (Whisper STT) - \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 15 \u0437\u043e\u043d\u0430\u043c\u0438 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f - Telegram \u0431\u043e\u0442 \u0441 \u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c \u044f\u0437\u044b\u043a\u043e\u043c - NVIDIA P106-100 + Ollama</p>"},{"location":"integrations/#n8n_1","title":"\ud83d\udd17 \u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f n8n","text":"<p>\u0424\u0430\u0439\u043b: n8n-integration.md</p> <p>\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044e n8n \u043a Home Assistant: - \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 credentials - Webhook \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b - REST API \u043a\u043e\u043c\u0430\u043d\u0434\u044b - \u041f\u0440\u0438\u043c\u0435\u0440\u044b workflow - Troubleshooting</p>"},{"location":"integrations/#_1","title":"\ud83d\ude80 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":""},{"location":"integrations/#_2","title":"\u0427\u0442\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c?","text":"<p>\u0425\u043e\u0442\u0438\u0442\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c HA \u0447\u0435\u0440\u0435\u0437 Telegram \u0442\u0435\u043a\u0441\u0442\u043e\u043c? \u2b50 (100% \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e) - \u0421 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c: README-voice-assistant.md (GigaChat) - \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u0411\u0415\u0417 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430: OLLAMA-PROXMOX-COMPLETE-GUIDE.md \ud83d\udd12</p> <p>\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b \u0441 AI? \u2192 README-meteostation.md</p> <p>\u0415\u0441\u0442\u044c NVIDIA GPU \u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 AI? \ud83d\ude80 \u2192 OLLAMA-PROXMOX-COMPLETE-GUIDE.md - \u041f\u043e\u043b\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e</p> <p>\u0425\u043e\u0442\u0438\u0442\u0435 AI \u0434\u0432\u043e\u0440\u0435\u0446\u043a\u043e\u0433\u043e \u0441 \u043f\u043e\u043b\u043d\u044b\u043c \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u043c \u0434\u043e\u043c\u0430? \u2192 n8n-butler-setup.md</p> <p>\u0425\u043e\u0442\u0438\u0442\u0435 \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 AI (7 \u0430\u0433\u0435\u043d\u0442\u043e\u0432)? \u2192 n8n-ai-agents.md</p> <p>\u041f\u0440\u043e\u0441\u0442\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c n8n \u043a HA? \u2192 n8n-integration.md</p> <p>\u0412\u0441\u0435 workflow \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435/\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 LLM - \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e, \u0431\u0435\u0437 VPN! \ud83c\uddf7\ud83c\uddfa</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/","title":"Ollama \u043d\u0430 Proxmox \u0441 NVIDIA GPU - \u041f\u043e\u043b\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e","text":"<p>\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u044e Ollama \u0432 Ubuntu VM \u043d\u0430 Proxmox \u0441 GPU passthrough. \u041a\u043e\u043d\u0441\u043e\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442 community best practices \u0438 \u0433\u043b\u0443\u0431\u043e\u043a\u0438\u0435 \u0437\u043d\u0430\u043d\u0438\u044f Proxmox.</p> <p>\u0426\u0435\u043b\u0435\u0432\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f: - Proxmox VE 8.x (Debian 12 Bookworm) - NVIDIA GTX 1050 Ti (4GB VRAM) \u2192 GTX 1060 (6GB VRAM) - \u2705 \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u044b\u043c\u0438 \u043a\u0430\u0440\u0442\u0430\u043c\u0438 (P106, P104, CMP) - Ubuntu 22.04 LTS VM - Ollama \u0441 \u043c\u043e\u0434\u0435\u043b\u044f\u043c\u0438 phi3:mini / llama3.1:8b</p> <p>\u0412\u0440\u0435\u043c\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438: 40-60 \u043c\u0438\u043d\u0443\u0442 \u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c: Intermediate \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c: \u2705 Proxmox \u0445\u043e\u0441\u0442 \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u0442\u044b\u043c</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#vm-lxc","title":"\u041f\u043e\u0447\u0435\u043c\u0443 VM, \u0430 \u043d\u0435 LXC?","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 LXC: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 <code>nvidia-driver</code> \u043d\u0430 Proxmox \u0445\u043e\u0441\u0442 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442 \u0441 <code>proxmox-ve</code> metapackage: <pre><code>W: You are attempting to remove the meta-package 'proxmox-ve'!\nE: Sub-process /usr/share/proxmox-ve/pve-apt-hook returned an error code (1)\n</code></pre></p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 - VM \u0441 PCI passthrough: - \u2705 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0432 VM, \u043d\u0435 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 - \u2705 \u041d\u0435\u0442 \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u043e\u0432 \u0441 proxmox-ve - \u2705 \u041f\u043e\u043b\u043d\u0430\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u043e\u0442 Proxmox - \u2705 \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0432 Ubuntu (\u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u043b\u0435\u043c) - \u26a0\ufe0f \u0422\u0440\u0435\u0431\u0443\u0435\u0442 IOMMU/VT-d \u0432 BIOS - \u26a0\ufe0f GPU \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e\u0439 VM - \u26a0\ufe0f Overhead ~5-10% (\u043f\u0440\u0438\u0435\u043c\u043b\u0435\u043c\u043e)</p> <p>\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438: - Habr: \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u0432\u0438\u0434\u0435\u043e\u043a\u0430\u0440\u0442\u044b \u0432 Proxmox - Proxmox Wiki: PCI Passthrough - Proxmox Forum: Ollama + GPU</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#1-biosuefi","title":"\u042d\u0442\u0430\u043f 1: \u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 BIOS/UEFI (\u043d\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435)","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#11","title":"1.1 \u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<p>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438 \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 BIOS/UEFI (\u043e\u0431\u044b\u0447\u043d\u043e Del, F2, F10 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435).</p> <p>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0438 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435:</p> <p>\u0414\u043b\u044f Intel \u043c\u0430\u0442\u0435\u0440\u0438\u043d\u0441\u043a\u0438\u0445 \u043f\u043b\u0430\u0442: - Intel VT-x (Virtualization Technology) \u2192 Enabled - Intel VT-d (Virtualization Technology for Directed I/O) \u2192 Enabled - IOMMU \u2192 Enabled (\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u043e\u043f\u0446\u0438\u044f)</p> <p>\u0414\u043b\u044f AMD \u043c\u0430\u0442\u0435\u0440\u0438\u043d\u0441\u043a\u0438\u0445 \u043f\u043b\u0430\u0442: - SVM Mode (AMD-V) \u2192 Enabled - AMD-Vi (AMD IOMMU) \u2192 Enabled - IOMMU \u2192 Enabled</p> <p>\u0413\u0434\u0435 \u0438\u0441\u043a\u0430\u0442\u044c: \u041e\u0431\u044b\u0447\u043d\u043e \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u0445: - Advanced \u2192 CPU Configuration - Chipset Configuration - Virtualization Support</p> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 (F10) \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#12-bios","title":"1.2 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0442\u043e BIOS \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 Proxmox:</p> <pre><code>ssh root@&lt;PROXMOX_IP&gt;\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438\negrep -o '(vmx|svm)' /proc/cpuinfo | uniq\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0432\u044b\u0432\u0435\u0441\u0442\u0438: vmx (Intel) \u0438\u043b\u0438 svm (AMD)\n# \u0415\u0441\u043b\u0438 \u043f\u0443\u0441\u0442\u043e - VT-x/AMD-V \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0432 BIOS\n</code></pre> <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 IOMMU \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435\ndmesg | grep -e DMAR -e IOMMU\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c (Intel):\n# DMAR: IOMMU enabled\n# DMAR-IR: Enabled IRQ remapping\n\n# \u0418\u043b\u0438 (AMD):\n# AMD-Vi: Found IOMMU\n# AMD-Vi: Interrupt remapping enabled\n</code></pre> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: \u0412\u0438\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0431 IOMMU/DMAR. \u0415\u0441\u043b\u0438 \u043d\u0435\u0442 (AMD): \u042d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u043c \u044d\u0442\u0430\u043f\u0435 - IOMMU \u0431\u0443\u0434\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 GRUB (\u042d\u0442\u0430\u043f 2). \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0447\u0442\u043e\u0431\u044b <code>svm</code> \u0431\u044b\u043b \u0432\u0438\u0434\u0435\u043d.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#13-asrock","title":"1.3 \u0421\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430 \u0434\u043b\u044f ASRock \u043c\u0430\u0442\u0435\u0440\u0438\u043d\u0441\u043a\u0438\u0445 \u043f\u043b\u0430\u0442 (\u0432\u0430\u0436\u043d\u043e!)","text":"<p>\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 ASRock (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 B450M Pro4, X570 \u0438 \u0442.\u0434.) \u0438 \u0432\u044b \u043d\u0435 \u0432\u0438\u0434\u0438\u0442\u0435 \u043e\u043f\u0446\u0438\u044e IOMMU \u0432 BIOS:</p> <ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e BIOS:</li> <li>\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 BIOS \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e (\u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u043c \u044d\u043a\u0440\u0430\u043d\u0435)</li> <li> <p>\u0414\u043b\u044f B450M Pro4: \u0441\u0442\u0430\u0440\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 (P3.xx) \u043c\u043e\u0433\u0443\u0442 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c IOMMU</p> </li> <li> <p>\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 BIOS \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438:</p> </li> <li>\u0421\u043a\u0430\u0447\u0430\u0439\u0442\u0435 \u0441 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430 ASRock: https://www.asrock.com/support/</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 Instant Flash \u0432 BIOS (Tools \u2192 Instant Flash)</li> <li>\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0444\u0430\u0439\u043b .ROM \u043d\u0430 USB \u0444\u043b\u0435\u0448\u043a\u0443 FAT32</li> <li> <p>\u0412 \u043d\u043e\u0432\u044b\u0445 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 (P7.xx+) \u043e\u043f\u0446\u0438\u044f IOMMU \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f</p> </li> <li> <p>\u041f\u043e\u0441\u043b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f BIOS \u0438\u0449\u0438\u0442\u0435:</p> </li> <li><code>Advanced \u2192 AMD CBS \u2192 IOMMU \u2192 Enabled</code></li> </ol> <p>\u0418\u043b\u0438:    - <code>Advanced \u2192 AMD CBS \u2192 NBIO Common Options \u2192 IOMMU \u2192 Enabled</code></p> <ol> <li>\u0422\u0430\u043a\u0436\u0435 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435:</li> <li>SVM Mode \u2192 Enabled (\u0435\u0441\u043b\u0438 \u0435\u0449\u0435 \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e)</li> </ol> <p>\u26a0\ufe0f \u0412\u0430\u0436\u043d\u043e: \u0411\u0435\u0437 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f BIOS \u043e\u043f\u0446\u0438\u044f IOMMU \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043a\u0440\u044b\u0442\u0430 \u0434\u0430\u0436\u0435 \u043d\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u043e\u043c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0435!</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#2-proxmox-iommu","title":"\u042d\u0442\u0430\u043f 2: \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f Proxmox \u0445\u043e\u0441\u0442\u0430 \u0434\u043b\u044f IOMMU","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#21-grub","title":"2.1 \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 GRUB","text":"<pre><code># Backup \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438\ncp /etc/default/grub /etc/default/grub.backup\n\n# \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\nnano /etc/default/grub\n</code></pre> <p>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0443\u044e\u0441\u044f \u0441 <code>GRUB_CMDLINE_LINUX_DEFAULT=</code></p> <p>\u0414\u043b\u044f Intel \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043e\u0432:</p> <p>\u0411\u044b\u043b\u043e: <pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet\"\n</code></pre></p> <p>\u0421\u0442\u0430\u043d\u0435\u0442: <pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet intel_iommu=on iommu=pt\"\n</code></pre></p> <p>\u0414\u043b\u044f AMD \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043e\u0432:</p> <pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet amd_iommu=on iommu=pt\"\n</code></pre> <p>\u26a0\ufe0f \u0412\u0430\u0436\u043d\u043e \u0434\u043b\u044f AMD: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0438\u043c\u0435\u043d\u043d\u043e <code>amd_iommu=on</code>, \u0430 \u043d\u0435 <code>amd_iommu=1</code> \u0438\u043b\u0438 <code>amd_iommu=force_enable</code>. \u0412 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u044f\u0434\u0440\u0430\u0445 (6.8+) \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e <code>=on</code>. \u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u044f\u0432\u0438\u0442\u044c\u0441\u044f \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \"AMD-Vi: Unknown option - 'on'\" - \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u0435\u0433\u043e, AMD-Vi \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f.</p> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b: - <code>intel_iommu=on</code> / <code>amd_iommu=on</code> - \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 IOMMU - <code>iommu=pt</code> - passthrough mode (\u043b\u0443\u0447\u0448\u0430\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c)</p> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435: Ctrl+O, Enter, Ctrl+X</p> <p>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 GRUB:</p> <pre><code>update-grub\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0432\u044b\u0432\u0435\u0441\u0442\u0438:\n# Generating grub configuration file ...\n# Found linux image: /boot/vmlinuz-6.8.12-4-pve\n# done\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#22-vfio","title":"2.2 \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 VFIO \u043c\u043e\u0434\u0443\u043b\u0435\u0439","text":"<p>VFIO (Virtual Function I/O) - framework \u0434\u043b\u044f \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430 PCI \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0432 VM.</p> <pre><code>nano /etc/modules\n</code></pre> <p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 \u043a\u043e\u043d\u0435\u0446 \u0444\u0430\u0439\u043b\u0430:</p> <pre><code>vfio\nvfio_iommu_type1\nvfio_pci\nvfio_virqfd\n</code></pre> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435: Ctrl+O, Enter, Ctrl+X</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435 \u043c\u043e\u0434\u0443\u043b\u0435\u0439: - <code>vfio</code> - \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 framework - <code>vfio_iommu_type1</code> - IOMMU backend - <code>vfio_pci</code> - PCI device support - <code>vfio_virqfd</code> - interrupt remapping</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#23","title":"2.3 \u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":"<pre><code># \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 initramfs\nupdate-initramfs -u -k all\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0432\u044b\u0432\u0435\u0441\u0442\u0438:\n# update-initramfs: Generating /boot/initrd.img-6.8.12-4-pve\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#24","title":"2.4 \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0445\u043e\u0441\u0442\u0430","text":"<pre><code>reboot\n</code></pre> <p>\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 2-3 \u043c\u0438\u043d\u0443\u0442\u044b \u043f\u043e\u043a\u0430 Proxmox \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0441\u044f.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#25-iommu","title":"2.5 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 IOMMU \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438","text":"<pre><code>ssh root@&lt;PROXMOX_IP&gt;\n\n# 1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0442\u043e IOMMU \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\ndmesg | grep -i \"IOMMU enabled\"\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0432\u044b\u0432\u0435\u0441\u0442\u0438:\n# DMAR: IOMMU enabled (Intel)\n# \u0438\u043b\u0438\n# AMD-Vi: AMD IOMMUv2 loaded and initialized\n</code></pre> <p>\u0414\u043b\u044f AMD: \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 IVRS</p> <p>\u0415\u0441\u043b\u0438 AMD-Vi \u043d\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e BIOS \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 IVRS:</p> <pre><code>dmesg | grep -i ivrs\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0432\u044b\u0432\u0435\u0441\u0442\u0438:\n# ACPI: IVRS 0x... (\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c - BIOS \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e)\n# \u0415\u0441\u043b\u0438 \u043f\u0443\u0441\u0442\u043e - \u0432\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u0432 BIOS, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e IOMMU = Enabled\n</code></pre> <pre><code># 2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 IOMMU \u0433\u0440\u0443\u043f\u043f (\u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e!)\nls /sys/kernel/iommu_groups/ | wc -l\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 0 (\u043e\u0431\u044b\u0447\u043d\u043e 10-30 \u0433\u0440\u0443\u043f\u043f)\n# \u0415\u0441\u043b\u0438 0 - AMD-Vi \u043d\u0435 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\n</code></pre> <pre><code># 3. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 AMD-Vi \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438\ndmesg | grep -i amd-vi\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c:\n# AMD-Vi: Interrupt remapping enabled\n# AMD-Vi: Virtual APIC enabled\n# (\u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \"Unknown option\" - \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u0435\u0433\u043e)\n</code></pre> <pre><code># 4. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 VFIO \u043c\u043e\u0434\u0443\u043b\u0435\u0439\nlsmod | grep vfio\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c:\n# vfio_pci\n# vfio_iommu_type1\n# vfio\n</code></pre> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: - \u2705 IOMMU groups &gt; 0 - \u2705 AMD-Vi: Interrupt remapping enabled - \u2705 VFIO \u043c\u043e\u0434\u0443\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b</p> <p>\u0415\u0441\u043b\u0438 IOMMU groups = 0: 1. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 <code>dmesg | grep -i ivrs</code> - \u0435\u0441\u043b\u0438 \u043f\u0443\u0441\u0442\u043e, IOMMU \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0432 BIOS 2. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 <code>/proc/cmdline</code> - \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c <code>iommu=pt</code> 3. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u042d\u0442\u0430\u043f 1 (BIOS) \u0438 2.1-2.4</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#3-gpu-passthrough","title":"\u042d\u0442\u0430\u043f 3: \u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 GPU \u0434\u043b\u044f passthrough","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#31-gpu","title":"3.1 \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 GPU \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435","text":"<pre><code>lspci -nn | grep -i nvidia\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430 \u0434\u043b\u044f GTX 1050 Ti: <pre><code>01:00.0 VGA compatible controller [0300]: NVIDIA Corporation GP107 [GeForce GTX 1050 Ti] [10de:1c82] (rev a1)\n01:00.1 Audio device [0403]: NVIDIA Corporation GP107GL High Definition Audio Controller [10de:0fb9] (rev a1)\n</code></pre></p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430 \u0434\u043b\u044f P106-100 (\u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u0430\u044f \u043a\u0430\u0440\u0442\u0430): <pre><code>06:00.0 3D controller [0302]: NVIDIA Corporation GP106 [P106-100] [10de:1c07] (rev a1)\n</code></pre></p> <p>\u0417\u0430\u043f\u0438\u0448\u0438\u0442\u0435: - PCI Bus \u0430\u0434\u0440\u0435\u0441: <code>01:00.0</code> (GPU), <code>01:00.1</code> (Audio, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c) - Vendor:Device ID: <code>10de:1c82</code> (GPU), <code>10de:0fb9</code> (Audio, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c)</p> <p>\u26a0\ufe0f \u0412\u0430\u0436\u043d\u043e \u0434\u043b\u044f \u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u044b\u0445 \u043a\u0430\u0440\u0442 (P106, P104, CMP): - \u0423 \u043d\u0438\u0445 \u041d\u0415\u0422 Audio \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 (01:00.1) - \u0423 \u043d\u0438\u0445 \u041d\u0415\u0422 \u0432\u0438\u0434\u0435\u043e\u0432\u044b\u0445\u043e\u0434\u043e\u0432 (HDMI/DisplayPort) - \u042d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e - \u043e\u043d\u0438 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0434\u043b\u044f compute \u0437\u0430\u0434\u0430\u0447 (Ollama, CUDA) - \u0412 vfio.conf \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e GPU ID \u0431\u0435\u0437 Audio</p> <p>\u0412\u0430\u0436\u043d\u043e: \u0412\u0430\u0448\u0438 ID \u043c\u043e\u0433\u0443\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u043a\u0430\u0440\u0442\u044b (Asus, MSI, Gigabyte).</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#32-iommu","title":"3.2 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 IOMMU \u0433\u0440\u0443\u043f\u043f\u044b","text":"<pre><code>#!/bin/bash\nfor d in /sys/kernel/iommu_groups/*/devices/*; do\n    n=${d#*/iommu_groups/*}\n    n=${n%%/*}\n    printf 'IOMMU Group %s: ' \"$n\"\n    lspci -nns \"${d##*/}\"\ndone | grep -i nvidia\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430: <pre><code>IOMMU Group 1: 01:00.0 VGA compatible controller [0300]: NVIDIA Corporation [10de:1c82]\nIOMMU Group 1: 01:00.1 Audio device [0403]: NVIDIA Corporation [10de:0fb9]\n</code></pre></p> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: GPU (01:00.0) \u0438 Audio (01:00.1) \u0432 \u043e\u0434\u043d\u043e\u0439 IOMMU \u0433\u0440\u0443\u043f\u043f\u0435.</p> <p>\u0415\u0441\u043b\u0438 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0433\u0440\u0443\u043f\u043f\u0430\u0445: \u041c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b, \u043d\u043e \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 - \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f ACS override patch (\u0441\u043b\u043e\u0436\u043d\u043e).</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#33-blacklist-nvidia","title":"3.3 Blacklist NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u043e\u0432 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435","text":"<p>\u042d\u0442\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e - \u0445\u043e\u0441\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0437\u0430\u0445\u0432\u0430\u0442\u044b\u0432\u0430\u0442\u044c GPU, \u0442\u043e\u043b\u044c\u043a\u043e VFIO.</p> <pre><code>cat &gt; /etc/modprobe.d/blacklist-nvidia.conf &lt;&lt; 'EOF'\nblacklist nouveau\nblacklist nvidia\nblacklist nvidiafb\nEOF\n</code></pre> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435: - <code>nouveau</code> - \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0439 \u0434\u0440\u0430\u0439\u0432\u0435\u0440 NVIDIA (\u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u043c) - <code>nvidia</code> - \u043f\u0440\u043e\u043f\u0440\u0438\u0435\u0442\u0430\u0440\u043d\u044b\u0439 \u0434\u0440\u0430\u0439\u0432\u0435\u0440 (\u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u043c, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u043e\u0432\u0430\u043b) - <code>nvidiafb</code> - framebuffer driver</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#34-gpu-vfio","title":"3.4 \u041f\u0440\u0438\u0432\u044f\u0437\u043a\u0430 GPU \u043a VFIO","text":"<p>\u0414\u043b\u044f \u043e\u0431\u044b\u0447\u043d\u044b\u0445 GTX/RTX \u043a\u0430\u0440\u0442 (\u0441 Audio): <pre><code>echo \"options vfio-pci ids=10de:1c82,10de:0fb9\" &gt; /etc/modprobe.d/vfio.conf\n</code></pre></p> <p>\u0414\u043b\u044f \u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u044b\u0445 \u043a\u0430\u0440\u0442 (P106, P104, \u0431\u0435\u0437 Audio): <pre><code>echo \"options vfio-pci ids=10de:1c07\" &gt; /etc/modprobe.d/vfio.conf\n</code></pre></p> <p>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435 \u043d\u0430 \u0432\u0430\u0448\u0438 ID \u0438\u0437 \u0448\u0430\u0433\u0430 3.1: - \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0434\u0432\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 (GPU + Audio): \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u0431\u0430 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e - \u0415\u0441\u043b\u0438 \u043e\u0434\u043d\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e (\u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u0430\u044f \u043a\u0430\u0440\u0442\u0430): \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e GPU ID</p> <p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442: \u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b VFIO \u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442 \u044d\u0442\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u043e\u0432.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#35","title":"3.5 \u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":"<pre><code>update-initramfs -u -k all\nreboot\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#36-gpu-binding","title":"3.6 \u0424\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 GPU binding","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438:</p> <pre><code>ssh root@&lt;PROXMOX_IP&gt;\n\nlspci -nnk | grep -A 3 -i nvidia\n</code></pre> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0432\u044b\u0432\u043e\u0434 \u0434\u043b\u044f GTX/RTX (\u0441 Audio): <pre><code>01:00.0 VGA compatible controller [0300]: NVIDIA Corporation GP107 [GeForce GTX 1050 Ti] [10de:1c82]\n        Subsystem: Micro-Star International Co., Ltd. [MSI] [1462:8c96]\n        Kernel driver in use: vfio-pci\n        Kernel modules: nouveau\n\n01:00.1 Audio device [0403]: NVIDIA Corporation GP107GL [10de:0fb9]\n        Subsystem: Micro-Star International Co., Ltd. [MSI] [1462:8c96]\n        Kernel driver in use: vfio-pci\n</code></pre></p> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0432\u044b\u0432\u043e\u0434 \u0434\u043b\u044f \u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u044b\u0445 \u043a\u0430\u0440\u0442 (P106, P104): <pre><code>06:00.0 3D controller [0302]: NVIDIA Corporation GP106 [P106-100] [10de:1c07] (rev a1)\n        Subsystem: ASUSTeK Computer Inc. GP106 [P106-100] [1043:85fc]\n        Kernel driver in use: vfio-pci\n        Kernel modules: nvidiafb, nouveau\n</code></pre></p> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: <code>Kernel driver in use: vfio-pci</code> \u0434\u043b\u044f GPU (\u0438 Audio, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c).</p> <p>\u0415\u0441\u043b\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 <code>nouveau</code> \u0438\u043b\u0438 \u043d\u0435\u0442 driver: <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 vfio.conf\ncat /etc/modprobe.d/vfio.conf\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e \u043c\u043e\u0434\u0443\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b\nlsmod | grep vfio_pci\n\n# \u041f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 initramfs\nupdate-initramfs -u -k all\nreboot\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#4-ubuntu-server-iso","title":"\u042d\u0442\u0430\u043f 4: \u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 Ubuntu Server ISO","text":"<pre><code>cd /var/lib/vz/template/iso\n\n# Ubuntu 22.04.5 LTS (\u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f)\nwget https://releases.ubuntu.com/22.04.5/ubuntu-22.04.5-live-server-amd64.iso\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)\nwget https://releases.ubuntu.com/22.04.5/SHA256SUMS\nsha256sum -c SHA256SUMS 2&gt;&amp;1 | grep ubuntu-22.04.5-live-server-amd64.iso\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\nls -lh ubuntu-22.04.5-live-server-amd64.iso\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: ~2.5-2.7GB\n</code></pre> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: ISO \u0444\u0430\u0439\u043b \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0432 <code>/var/lib/vz/template/iso/</code></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#45","title":"\u042d\u0442\u0430\u043f 4.5: \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 (\u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e!)","text":"<p>\u041f\u0435\u0440\u0435\u0434 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435\u043c VM \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 RAM \u043d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435:</p> <pre><code>free -h\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430: <pre><code>              total        used        free      shared  buff/cache   available\nMem:           15Gi        2.0Gi        12Gi        10Mi         1.2Gi        13Gi\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#ram-vm","title":"\ud83d\udcca \u0420\u0430\u0441\u0447\u0435\u0442 RAM \u0434\u043b\u044f VM:","text":"<p>\u0424\u043e\u0440\u043c\u0443\u043b\u0430: <code>RAM \u0434\u043b\u044f VM = Total RAM \u0445\u043e\u0441\u0442\u0430 - 2GB (\u0434\u043b\u044f Proxmox) - \u0437\u0430\u043f\u0430\u0441 1GB</code></p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b: - 16GB \u0445\u043e\u0441\u0442: VM \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u0434\u043e 13GB (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f 10-12GB) - 8GB \u0445\u043e\u0441\u0442: VM \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u0434\u043e 5GB (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f 4-6GB) \u26a0\ufe0f - 32GB \u0445\u043e\u0441\u0442: VM \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u0434\u043e 29GB (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f 16-24GB)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_1","title":"\u26a0\ufe0f \u0414\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0430:","text":"<p>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0432 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0435: - RAM \u0445\u043e\u0441\u0442\u0430: 8GB \u043c\u0438\u043d\u0438\u043c\u0443\u043c - RAM VM: 8GB (\u0434\u043b\u044f \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 Ollama)</p> <p>\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043c\u0435\u043d\u044c\u0448\u0435 10GB \u043d\u0430 \u0445\u043e\u0441\u0442\u0435: - \u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u0435 RAM VM \u0434\u043e 4-6GB - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 (phi3:mini, llama3.2:3b) - \u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0438\u044f RAM \u0445\u043e\u0441\u0442\u0430</p> <p>\u041d\u0430\u0448 \u043f\u0440\u0438\u043c\u0435\u0440 (AMD Ryzen 5 2600 + 8GB): - \u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f: 7.7GB RAM \u2192 VM \u0441 6GB RAM - \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435: 16GB RAM \u2192 VM \u0441 10-12GB RAM - \u041f\u043e\u0441\u043b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f: \u0421\u043c\u043e\u0436\u0435\u043c \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u043e llama3.1:8b</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_2","title":"\ud83d\udcdd \u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:","text":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0441\u044f \u0445\u043e\u0441\u0442 \u0441 8GB RAM (\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0436\u0435\u043b\u0435\u0437\u0430). VM \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0430 \u043d\u0430 6GB RAM \u0441 \u043c\u043e\u0434\u0435\u043b\u044c\u044e phi3:mini (2.3GB). \u041f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 RAM \u0445\u043e\u0441\u0442\u0430 \u0434\u043e 16GB \u0434\u043b\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0431\u043e\u043b\u0435\u0435 \u043a\u0440\u0443\u043f\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 (llama3.1:8b, qwen2.5:7b).</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#5-vm-proxmox-web-ui","title":"\u042d\u0442\u0430\u043f 5: \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 VM \u0447\u0435\u0440\u0435\u0437 Proxmox Web UI","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#51-vm","title":"5.1 \u0417\u0430\u043f\u0443\u0441\u043a \u043c\u0430\u0441\u0442\u0435\u0440\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f VM","text":"<p>Proxmox Web UI \u2192 \u043f\u0440\u0430\u0432\u044b\u0439 \u0432\u0435\u0440\u0445\u043d\u0438\u0439 \u0443\u0433\u043e\u043b \u2192 Create VM</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#52-general-1","title":"5.2 General (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 1)","text":"<ul> <li>Node: \u0432\u0430\u0448 Proxmox node</li> <li>VM ID: <code>300</code> (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439, \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u0435 \u0435\u0433\u043e)</li> <li>Name: <code>ollama-vm</code></li> <li>Resource Pool: (\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0443\u0441\u0442\u044b\u043c)</li> <li>Start at boot: \u2705 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)</li> </ul> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Next</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#53-os-2","title":"5.3 OS (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 2)","text":"<ul> <li>Use CD/DVD disc image file (ISO)</li> <li>Storage: <code>local</code></li> <li>ISO image: <code>ubuntu-22.04.5-live-server-amd64.iso</code></li> <li>Type: <code>Linux</code></li> <li>Version: <code>6.x - 2.6 Kernel</code></li> </ul> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Next</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#54-system-3-","title":"5.4 System (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 3) - \u041a\u0420\u0418\u0422\u0418\u0427\u041d\u041e!","text":"<ul> <li>Graphic card: <code>Default</code></li> <li>Machine: <code>q35</code> \u2190 \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f PCIe passthrough</li> <li>BIOS: <code>OVMF (UEFI)</code> \u2190 \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f GPU</li> <li>Add EFI Disk: \u2705 Yes</li> <li>EFI Storage: <code>local-lvm</code></li> <li>Pre-Enroll keys: \u274c No (\u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u0435 Secure Boot)</li> <li>SCSI Controller: <code>VirtIO SCSI single</code></li> <li>Qemu Agent: \u2705 Yes (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e, \u043d\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e)</li> </ul> <p>\u041f\u043e\u0447\u0435\u043c\u0443 q35 \u0438 OVMF: - q35 - \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f machine type \u0441 PCIe support - OVMF (UEFI) - \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0433\u043e GPU passthrough - Secure Boot \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d - NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b unsigned</p> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Next</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#55-disks-4","title":"5.5 Disks (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 4)","text":"<ul> <li>Bus/Device: <code>VirtIO Block 0</code></li> <li>Storage: <code>local-lvm</code> (\u0438\u043b\u0438 \u0432\u0430\u0448\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435)</li> <li>Disk size (GiB): <code>50</code></li> <li>Cache: <code>Default (No cache)</code></li> <li>Discard: \u2705 (\u0435\u0441\u043b\u0438 SSD)</li> <li>SSD emulation: \u2705 (\u0435\u0441\u043b\u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u043d\u0430 SSD)</li> </ul> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Next</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#56-cpu-5-","title":"5.6 CPU (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 5) - \u041a\u0420\u0418\u0422\u0418\u0427\u041d\u041e!","text":"<ul> <li>Sockets: <code>1</code></li> <li>Cores: <code>4</code> (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f 4)</li> <li>Type: <code>host</code> \u2190 \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f GPU \u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438</li> <li>Extra CPU Flags: (\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0443\u0441\u0442\u044b\u043c)</li> </ul> <p>\u041f\u043e\u0447\u0435\u043c\u0443 host: - \u041f\u0440\u043e\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442 \u0432\u0441\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430 \u0445\u043e\u0441\u0442\u0430 \u0432 VM - \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f CUDA \u0438 GPU compute - \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</p> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Next</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#57-memory-6","title":"5.7 Memory (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 6)","text":"<p>\u26a0\ufe0f \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 RAM \u0445\u043e\u0441\u0442\u0430 (\u0441\u043c. \u042d\u0442\u0430\u043f 4.5):</p> <p>\u0415\u0441\u043b\u0438 RAM \u0445\u043e\u0441\u0442\u0430 &gt;= 16GB: - Memory (MiB): <code>8192</code> (8GB, \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043b\u044f Ollama) - Minimum memory (MiB): <code>8192</code></p> <p>\u0415\u0441\u043b\u0438 RAM \u0445\u043e\u0441\u0442\u0430 8-10GB: - Memory (MiB): <code>6144</code> (6GB, \u0434\u043b\u044f \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439) - Minimum memory (MiB): <code>6144</code></p> <p>\u0415\u0441\u043b\u0438 RAM \u0445\u043e\u0441\u0442\u0430 &gt;= 32GB: - Memory (MiB): <code>12288</code> (12GB, \u0434\u043b\u044f \u043a\u0440\u0443\u043f\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 8B+) - Minimum memory (MiB): <code>12288</code></p> <ul> <li>Ballooning Device: \u274c Uncheck (\u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u0438)</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: \u0412 \u043d\u0430\u0448\u0435\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 (8GB \u0445\u043e\u0441\u0442) \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f 6GB \u0434\u043b\u044f VM.</p> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Next</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#58-network-7","title":"5.8 Network (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 7)","text":"<ul> <li>Bridge: <code>vmbr0</code> (\u0432\u0430\u0448 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 bridge)</li> <li>VLAN Tag: (\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0443\u0441\u0442\u044b\u043c)</li> <li>Model: <code>VirtIO (paravirtualized)</code></li> <li>MAC address: (\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438)</li> <li>Firewall: \u2705 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)</li> </ul> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Next</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#59-confirm-8","title":"5.9 Confirm (\u0432\u043a\u043b\u0430\u0434\u043a\u0430 8)","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b: - Machine: q35 - BIOS: OVMF - CPU Type: host - Memory: 8192 MB</p> <p>\u2705 Start after created - \u0441\u043d\u0438\u043c\u0438\u0442\u0435 \u0433\u0430\u043b\u043e\u0447\u043a\u0443! (\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043c GPU \u0441\u043d\u0430\u0447\u0430\u043b\u0430)</p> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Finish</p> <p>VM \u0441\u043e\u0437\u0434\u0430\u043d\u0430, \u043d\u043e \u041d\u0415 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0439\u0442\u0435 \u0435\u0451!</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#6-gpu-vm","title":"\u042d\u0442\u0430\u043f 6: \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 GPU \u0432 VM","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#61-pci-web-ui","title":"6.1 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 PCI \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0447\u0435\u0440\u0435\u0437 Web UI","text":"<p>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 VM 300 \u2192 Hardware</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#611-gpu","title":"6.1.1 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 GPU","text":"<ol> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Add \u2192 PCI Device</li> <li>Raw Device: \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 NVIDIA GPU (01:00.0 \u0438\u043b\u0438 06:00.0)</li> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0433\u0430\u043b\u043e\u0447\u043a\u0438:</li> <li>\u2705 All Functions (\u0432\u0430\u0436\u043d\u043e - \u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442 GPU \u0438 Audio \u0432\u043c\u0435\u0441\u0442\u0435, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c Audio)</li> <li>\u2705 Primary GPU (\u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f GPU \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435)</li> <li>\u2705 PCI-Express (\u0434\u043b\u044f \u043b\u0443\u0447\u0448\u0435\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438)</li> <li>\u2705 ROM-Bar (\u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0443\u0436\u0435\u043d)</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Add</li> </ol> <p>\u26a0\ufe0f \u0412\u0430\u0436\u043d\u043e \u0434\u043b\u044f \u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u044b\u0445 \u043a\u0430\u0440\u0442 (P106, P104, CMP): - \u0423 \u043d\u0438\u0445 \u043d\u0435\u0442 Audio \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \"All Functions\" \u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e GPU - \u041d\u0415 \u0432\u043a\u043b\u044e\u0447\u0430\u0439\u0442\u0435 x-vga=1 - \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0437\u0430\u043f\u0443\u0441\u043a\u043e\u043c VM - \u0414\u043b\u044f \u043e\u0431\u044b\u0447\u043d\u044b\u0445 GTX/RTX \u043a\u0430\u0440\u0442 x-vga=1 \u043c\u043e\u0436\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 Hardware: <pre><code>PCI Device (hostpci0): 0000:01:00, All Functions\n</code></pre> \u0418\u043b\u0438 \u0434\u043b\u044f P106: <pre><code>PCI Device (hostpci0): 0000:06:00, All Functions\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#62-vm","title":"6.2 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f VM (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e, \u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":"<pre><code>nano /etc/pve/qemu-server/300.conf\n</code></pre> <p>\u26a0\ufe0f \u0412\u0430\u0436\u043d\u043e \u043f\u0440\u0438 \u0440\u0443\u0447\u043d\u043e\u043c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438: 1. Proxmox Web UI \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043b \u0441\u0442\u0440\u043e\u043a\u0443 <code>cpu: host</code> 2. \u0412\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u0435 \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e <code>cpu: host,hidden=1,flags=+pcid</code> 3. \u0423\u0434\u0430\u043b\u0438\u0442\u0435 \u0441\u0442\u0430\u0440\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 <code>cpu: host</code> (\u0431\u0435\u0437 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432) 4. \u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438</p> <p>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 <code>cpu: host</code> (\u0431\u0435\u0437 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432) \u0438 \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u0435 \u0435\u0451 \u043d\u0430:</p> <pre><code>cpu: host,hidden=1,flags=+pcid\nargs: -cpu host,kvm=off\n</code></pre> <p>\u041d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0434\u0432\u0443\u0445 \u0441\u0442\u0440\u043e\u043a cpu!</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435: - <code>hidden=1</code> - \u0441\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u043e\u0442 VM \u0447\u0442\u043e \u043e\u043d\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f (\u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b \u044d\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442) - <code>kvm=off</code> - \u0441\u043a\u0440\u044b\u0432\u0430\u0435\u0442 KVM signature (\u0434\u043b\u044f NVIDIA driver detection) - <code>+pcid</code> - Process-Context Identifiers (\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c)</p> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435: Ctrl+O, Enter, Ctrl+X</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438: <pre><code>cat /etc/pve/qemu-server/300.conf | grep \"^cpu:\"\n</code></pre></p> <p>\u0414\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0430 \u0441 cpu!</p> <p>\u0424\u0430\u0439\u043b \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a:</p> <pre><code>bootdisk: scsi0\ncores: 4\ncpu: host,hidden=1,flags=+pcid\nargs: -cpu host,kvm=off\nefidisk0: local-lvm:vm-300-disk-0,efitype=4m,size=4M\nhostpci0: 0000:01:00,pcie=1,x-vga=1\nmemory: 8192\nmeta: creation-qemu=8.1.5,ctime=1728600000\nname: ollama-vm\nnet0: virtio=XX:XX:XX:XX:XX:XX,bridge=vmbr0\nnuma: 0\nostype: l26\nscsi0: local-lvm:vm-300-disk-1,iothread=1,size=50G\nscsihw: virtio-scsi-single\nsmbios1: uuid=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\nsockets: 1\nvmgenid: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#7-ubuntu-server-vm","title":"\u042d\u0442\u0430\u043f 7: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Ubuntu Server \u0432 VM","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#71-vm","title":"7.1 \u0417\u0430\u043f\u0443\u0441\u043a VM","text":"<p>Proxmox Web UI \u2192 VM 300 \u2192 Start</p> <p>\u0417\u0430\u0442\u0435\u043c \u2192 Console (\u043e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f noVNC)</p> <p>\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 Ubuntu installer (~30 \u0441\u0435\u043a\u0443\u043d\u0434).</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#72-ubuntu-installation-wizard","title":"7.2 Ubuntu Installation Wizard","text":"<p>Language: - English (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f troubleshooting)</p> <p>Keyboard configuration: - Layout: English (US) \u0438\u043b\u0438 Russian - Variant: English (US)</p> <p>Network connections: - \u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 DHCP (\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442 IP) - \u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 IP \u0430\u0434\u0440\u0435\u0441 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 192.168.1.150)</p> <p>Configure proxy: - \u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0443\u0441\u0442\u044b\u043c</p> <p>Configure Ubuntu archive mirror: - \u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e</p> <p>Guided storage configuration: - \u2705 Use an entire disk - Disk: <code>/dev/sda</code> (50GB VirtIO disk) - \u274c Set up this disk as an LVM group (\u043c\u043e\u0436\u043d\u043e \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c, \u043d\u0435 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e)</p> <p>Storage configuration: - \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0443 - Continue (\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435)</p> <p>Profile setup: - Your name: <code>Administrator</code> - Your server's name: <code>ollama-vm</code> - Pick a username: <code>admin</code> (\u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u043e\u0435) - Choose a password: <code>&lt;\u043d\u0430\u0434\u0435\u0436\u043d\u044b\u0439_\u043f\u0430\u0440\u043e\u043b\u044c&gt;</code> - Confirm your password: <code>&lt;\u043d\u0430\u0434\u0435\u0436\u043d\u044b\u0439_\u043f\u0430\u0440\u043e\u043b\u044c&gt;</code></p> <p>Upgrade to Ubuntu Pro: - Skip for now</p> <p>SSH Setup: - \u2705 Install OpenSSH server (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e!) - \u274c Import SSH identity (\u043d\u0435 \u043d\u0443\u0436\u043d\u043e)</p> <p>Featured Server Snaps: - \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u044b\u0431\u0438\u0440\u0430\u0439\u0442\u0435 (\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u043f\u043e\u0437\u0436\u0435 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e)</p> <p>\u041d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 (~5-10 \u043c\u0438\u043d\u0443\u0442).</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#73","title":"7.3 \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u0443\u0432\u0438\u0434\u0438\u0442\u0435 \"Reboot Now\":</p> <ol> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Reboot Now</li> <li>VM \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0441\u044f</li> <li>\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c login prompt</li> </ol> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: \u0412\u0438\u0434\u0438\u0442\u0435 <code>ollama-vm login:</code></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#8-ubuntu-vm","title":"\u042d\u0442\u0430\u043f 8: \u041f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Ubuntu VM","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#81-ssh","title":"8.1 \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u043e SSH","text":"<p>\u0421 \u0432\u0430\u0448\u0435\u0439 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u044b:</p> <pre><code>ssh admin@&lt;VM_IP&gt;\n</code></pre> <p>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u043d\u0430 \u0448\u0430\u0433\u0435 7.2.</p> <p>\u0415\u0441\u043b\u0438 SSH \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442: - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 IP: \u0432 Proxmox Web UI \u2192 VM 300 \u2192 Summary \u2192 IPs - \u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043d\u0441\u043e\u043b\u044c \u0432 VM: <code>ip addr show</code></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#82","title":"8.2 \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b","text":"<pre><code>sudo apt update\nsudo apt upgrade -y\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0441\u043f\u0440\u043e\u0441\u0438\u0442 \u043e restart services - \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 Yes \u0438 OK \u0434\u043b\u044f \u0432\u0441\u0435\u0445.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#83","title":"8.3 \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0431\u0430\u0437\u043e\u0432\u044b\u0445 \u0443\u0442\u0438\u043b\u0438\u0442","text":"<pre><code>sudo apt install -y curl wget git build-essential\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#84-gpu","title":"8.4 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438 GPU","text":"<pre><code>lspci | grep -i nvidia\n</code></pre> <p>\u0414\u043e\u043b\u0436\u043d\u043e \u0432\u044b\u0432\u0435\u0441\u0442\u0438: <pre><code>00:10.0 VGA compatible controller: NVIDIA Corporation GP107 [GeForce GTX 1050 Ti]\n00:10.1 Audio device: NVIDIA Corporation GP107GL High Definition Audio Controller\n</code></pre></p> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: GPU \u0432\u0438\u0434\u0435\u043d \u0432 VM (PCI \u0430\u0434\u0440\u0435\u0441 \u0431\u0443\u0434\u0435\u0442 \u0434\u0440\u0443\u0433\u043e\u0439, \u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e).</p> <p>\u0415\u0441\u043b\u0438 GPU \u043d\u0435 \u0432\u0438\u0434\u0435\u043d: - \u0412\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u0432 Proxmox Web UI \u2192 VM 300 \u2192 Hardware - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e PCI Device \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e VM \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0430 (Shutdown) \u043f\u0435\u0440\u0435\u0434 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\u0438 \u0432 Hardware - Restart VM</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#9-nvidia-ubuntu-vm","title":"\u042d\u0442\u0430\u043f 9: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u043e\u0432 \u0432 Ubuntu VM","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#91","title":"9.1 \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u043e\u0433\u043e \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u0430","text":"<pre><code>sudo ubuntu-drivers devices\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430: <pre><code>== /sys/devices/pci0000:00/0000:00:10.0 ==\nmodalias : pci:v000010DEd00001C82sv00001462sd00008C96bc03sc00i00\nvendor   : NVIDIA Corporation\nmodel    : GP107 [GeForce GTX 1050 Ti]\ndriver   : nvidia-driver-535 - distro non-free recommended\ndriver   : nvidia-driver-545 - third-party non-free\ndriver   : nvidia-driver-470 - distro non-free\n</code></pre></p> <p>Recommended: <code>nvidia-driver-535</code> (\u0438\u043b\u0438 \u043d\u043e\u0432\u0435\u0435)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#92-nvidia","title":"9.2 \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u0430","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 A: \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)</p> <pre><code>sudo ubuntu-drivers autoinstall\n</code></pre> <p>\u042d\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442 recommended \u0432\u0435\u0440\u0441\u0438\u044e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 B: \u0420\u0443\u0447\u043d\u0430\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438</p> <pre><code>sudo apt install -y nvidia-driver-535 nvidia-utils-535\n</code></pre> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0439\u043c\u0435\u0442 3-5 \u043c\u0438\u043d\u0443\u0442 (\u0441\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f ~500MB \u043f\u0430\u043a\u0435\u0442\u043e\u0432).</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#93-vm","title":"9.3 \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 VM","text":"<pre><code>sudo reboot\n</code></pre> <p>\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 1-2 \u043c\u0438\u043d\u0443\u0442\u044b.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#94-nvidia","title":"9.4 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u0430","text":"<pre><code>ssh admin@&lt;VM_IP&gt;\n\nnvidia-smi\n</code></pre> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0432\u044b\u0432\u043e\u0434: <pre><code>Fri Oct 11 01:00:00 2025\n+-----------------------------------------------------------------------------------------+\n| NVIDIA-SMI 535.183.01             Driver Version: 535.183.01   CUDA Version: 12.2     |\n|-----------------------------------------+------------------------+----------------------+\n| GPU  Name                 Persistence-M | Bus-Id        Disp.A  | Volatile Uncorr. ECC |\n| Fan  Temp   Perf          Pwr:Usage/Cap |         Memory-Usage  | GPU-Util  Compute M. |\n|                                         |                       |               MIG M. |\n|=========================================+========================+======================|\n|   0  NVIDIA GeForce GTX 1050 Ti     Off | 00000000:00:10.0  Off |                  N/A |\n| 40%   35C    P0              N/A /  75W |      0MiB /  4096MiB  |      0%      Default |\n|                                         |                       |                  N/A |\n+-----------------------------------------+------------------------+----------------------+\n</code></pre></p> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: - \u0412\u0438\u0434\u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u044c GPU: GeForce GTX 1050 Ti - Driver Version: 535.xxx \u0438\u043b\u0438 \u043d\u043e\u0432\u0435\u0435 - CUDA Version: 12.x - Memory: 4096 MiB</p> <p>\u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \"NVIDIA-SMI has failed\": <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438\ndpkg -l | grep nvidia-driver\n\n# \u041f\u0435\u0440\u0435\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430\nsudo apt install --reinstall nvidia-driver-535\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043c\u043e\u0434\u0443\u043b\u044f\nlsmod | grep nvidia\n\n# \u0415\u0441\u043b\u0438 \u043c\u043e\u0434\u0443\u043b\u044c \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\nsudo modprobe nvidia\nnvidia-smi\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#10-ollama","title":"\u042d\u0442\u0430\u043f 10: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Ollama","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#101-ollama","title":"10.1 \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Ollama","text":"<pre><code># \u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 install script\ncurl -fsSL https://ollama.ai/install.sh | sh\n</code></pre> <p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0441\u043a\u0440\u0438\u043f\u0442: 1. \u0421\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u0442 \u0431\u0438\u043d\u0430\u0440\u043d\u0438\u043a Ollama 2. \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0432 <code>/usr/local/bin/ollama</code> 3. \u0421\u043e\u0437\u0434\u0430\u0435\u0442 systemd unit <code>/etc/systemd/system/ollama.service</code> 4. \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u0441\u0435\u0440\u0432\u0438\u0441</p> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: <pre><code>ollama --version\n# \u0412\u044b\u0432\u043e\u0434: ollama version is 0.x.x\n\nsystemctl status ollama.service\n# \u0412\u044b\u0432\u043e\u0434: active (running)\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#102-api","title":"10.2 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u0442\u0435\u0432\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a API","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e Ollama \u0441\u043b\u0443\u0448\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 127.0.0.1. \u0414\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0438\u0437 n8n \u043d\u0443\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430 0.0.0.0.</p> <p>\u26a0\ufe0f \u0412\u0430\u0436\u043d\u043e: \u0415\u0441\u043b\u0438 <code>systemctl edit</code> \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0444\u0430\u0439\u043b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438, \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0432\u0440\u0443\u0447\u043d\u0443\u044e.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#a-systemctl-edit","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 A: \u0427\u0435\u0440\u0435\u0437 systemctl edit (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f):","text":"<pre><code>sudo systemctl edit ollama.service\n</code></pre> <p>\u041e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440. \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u044d\u0442\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 (\u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c\u0438):</p> <pre><code>[Service]\nEnvironment=\"OLLAMA_HOST=0.0.0.0:11434\"\nEnvironment=\"OLLAMA_ORIGINS=*\"\nEnvironment=\"CUDA_VISIBLE_DEVICES=0\"\n</code></pre> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435: Ctrl+O, Enter, Ctrl+X</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#b-a","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 B: \u0415\u0441\u043b\u0438 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 A \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 (\u0444\u0430\u0439\u043b \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f):","text":"<pre><code>sudo mkdir -p /etc/systemd/system/ollama.service.d\nsudo nano /etc/systemd/system/ollama.service.d/override.conf\n</code></pre> <p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435: <pre><code>[Service]\nEnvironment=\"OLLAMA_HOST=0.0.0.0:11434\"\nEnvironment=\"OLLAMA_ORIGINS=*\"\nEnvironment=\"CUDA_VISIBLE_DEVICES=0\"\n</code></pre></p> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435: Ctrl+O, Enter, Ctrl+X</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0442\u043e \u0444\u0430\u0439\u043b \u0441\u043e\u0437\u0434\u0430\u043d: <pre><code>sudo cat /etc/systemd/system/ollama.service.d/override.conf\n</code></pre></p> <p>\u0414\u043e\u043b\u0436\u043d\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c 4 \u0441\u0442\u0440\u043e\u043a\u0438 \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435: - <code>OLLAMA_HOST=0.0.0.0:11434</code> - \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043d\u0430 \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 - <code>OLLAMA_ORIGINS=*</code> - \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c CORS \u0434\u043b\u044f \u043b\u044e\u0431\u044b\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 - <code>CUDA_VISIBLE_DEVICES=0</code> - \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c GPU 0</p> <p>\u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439:</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart ollama.service\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0442\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438\u0441\u044c: <pre><code>sudo ss -tlnp | grep 11434\n</code></pre></p> <p>\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: <code>*:11434</code> \u0438\u043b\u0438 <code>0.0.0.0:11434</code> (\u041d\u0415 127.0.0.1:11434)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#103-api-endpoint","title":"10.3 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 API endpoint","text":"<pre><code># \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u0432 VM\ncurl http://localhost:11434/api/tags\n\n# \u0414\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c:\n# {\"models\":[]}\n</code></pre> <p>\u0421 Proxmox \u0445\u043e\u0441\u0442\u0430 \u0438\u043b\u0438 \u0432\u0430\u0448\u0435\u0439 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u044b:</p> <pre><code>curl http://&lt;VM_IP&gt;:11434/api/tags\n\n# \u0414\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u043e\u0442 \u0436\u0435 JSON\n</code></pre> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: API \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u043d\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u0441\u0435\u0442\u0438.</p> <p>\u0415\u0441\u043b\u0438 Connection refused: <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0442\u043e \u0441\u0435\u0440\u0432\u0438\u0441 \u0441\u043b\u0443\u0448\u0430\u0435\u0442 \u043d\u0430 0.0.0.0\nsudo ss -tlnp | grep 11434\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: 0.0.0.0:11434 (\u043d\u0435 127.0.0.1)\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f\nsystemctl show ollama.service | grep Environment\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c: OLLAMA_HOST=0.0.0.0:11434\n\n# \u0415\u0441\u043b\u0438 \u043d\u0435\u0442, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0448\u0430\u0433 10.2\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#11_1","title":"\u042d\u0442\u0430\u043f 11: \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#111-vram","title":"11.1 \u0412\u044b\u0431\u043e\u0440 \u043c\u043e\u0434\u0435\u043b\u0438 \u043f\u043e VRAM","text":"<p>\u0414\u043b\u044f GTX 1050 Ti (4GB VRAM):</p> \u041c\u043e\u0434\u0435\u043b\u044c \u0420\u0430\u0437\u043c\u0435\u0440 VRAM \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432 VM \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f <code>phi3:mini</code> 2.3GB ~2.5GB 40-50 tok/s \u2705 \u041b\u0443\u0447\u0448\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 <code>llama3.2:3b</code> 2GB ~2.2GB 50-60 tok/s \u2705 \u0411\u044b\u0441\u0442\u0440\u0435\u0435 <code>qwen2.5:3b</code> 2GB ~2.2GB 40-50 tok/s \u2705 \u0425\u043e\u0440\u043e\u0448\u0430\u044f \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u0430 <code>gemma2:2b</code> 1.6GB ~1.8GB 70+ tok/s \u2705 \u0414\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u0437\u0430\u0434\u0430\u0447 <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f: <code>phi3:mini</code> - \u043e\u0442\u043b\u0438\u0447\u043d\u043e\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#112","title":"11.2 \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0438","text":"<pre><code>ollama pull phi3:mini\n</code></pre> <p>\u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438: <pre><code>pulling manifest\npulling 8c83cdcf6a98... 100% \u2595\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258f 2.3 GB\npulling ed11eda7790d... 100% \u2595\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258f  106 B\npulling ca31f59a46fb... 100% \u2595\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258f  485 B\nverifying sha256 digest\nwriting manifest\nremoving any unused layers\nsuccess\n</code></pre></p> <p>\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438: ~2-5 \u043c\u0438\u043d\u0443\u0442 (\u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430).</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#113","title":"11.3 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438","text":"<pre><code>ollama list\n</code></pre> <p>\u0412\u044b\u0432\u043e\u0434: <pre><code>NAME         ID          SIZE    MODIFIED\nphi3:mini    1a4e8c5f... 2.3 GB  2 minutes ago\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#114-gpu","title":"11.4 \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0441 GPU","text":"<pre><code>ollama run phi3:mini \"\u041f\u0440\u0438\u0432\u0435\u0442! \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044c\u0441\u044f \u043a\u0440\u0430\u0442\u043a\u043e \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 \u043a\u0430\u043a AI \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0434\u043b\u044f \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\"\n</code></pre> <p>\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0432\u0442\u043e\u0440\u043e\u0439 SSH \u0441\u0435\u0430\u043d\u0441 \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435:</p> <pre><code>watch -n 1 nvidia-smi\n</code></pre> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435: - GPU-Util \u043f\u043e\u0434\u043d\u0438\u043c\u0435\u0442\u0441\u044f \u0434\u043e 80-100% \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 - Memory-Usage \u043f\u043e\u043a\u0430\u0436\u0435\u0442 ~2500 MiB - Temperature \u043f\u043e\u0434\u043d\u0438\u043c\u0435\u0442\u0441\u044f \u0434\u043e 50-65\u00b0C</p> <p>\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0445\u0430: - \u041c\u043e\u0434\u0435\u043b\u044c \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 - GPU \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f (nvidia-smi \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443) - \u041e\u0442\u0432\u0435\u0442 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0437\u0430 3-5 \u0441\u0435\u043a\u0443\u043d\u0434</p> <p>\u0415\u0441\u043b\u0438 GPU \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f (0% utilization): <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 CUDA \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438\nnvidia-smi\n\n# \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u0441 \u044f\u0432\u043d\u044b\u043c \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c GPU\nCUDA_VISIBLE_DEVICES=0 ollama run phi3:mini \"test\"\n\n# \u0415\u0441\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 systemd (\u0443\u0436\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0438\u0437 10.2)\nsystemctl show ollama.service | grep CUDA_VISIBLE_DEVICES\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#115-api","title":"11.5 \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 API","text":"<pre><code>curl http://localhost:11434/api/generate -H \"Content-Type: application/json\" -d '{\n  \"model\": \"phi3:mini\",\n  \"prompt\": \"\u041a\u0440\u0430\u0442\u043a\u043e \u043e\u043f\u0438\u0448\u0438 \u0441\u0432\u043e\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043a\u0430\u043a AI \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u0430\",\n  \"stream\": false\n}'\n</code></pre> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u043e\u0442\u0432\u0435\u0442: <pre><code>{\n  \"model\": \"phi3:mini\",\n  \"created_at\": \"2025-10-11T01:00:00.000Z\",\n  \"response\": \"\u042f AI \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442, \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u044b\u0439 \u043f\u043e\u043c\u043e\u0433\u0430\u0442\u044c \u0441 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u0437\u0430\u0434\u0430\u0447\u0430\u043c\u0438...\",\n  \"done\": true,\n  \"total_duration\": 4500000000,\n  \"load_duration\": 500000000,\n  \"prompt_eval_duration\": 100000000,\n  \"eval_count\": 85,\n  \"eval_duration\": 2000000000\n}\n</code></pre></p> <p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: - <code>eval_count</code> / (<code>eval_duration</code> / 1e9) = tokens per second - \u0414\u043b\u044f phi3:mini \u043e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: ~40-50 tokens/sec</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#12-n8n","title":"\u042d\u0442\u0430\u043f 12: \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 n8n","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#121-workflow","title":"12.1 \u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 workflow","text":"<p>\u041d\u0430 \u0432\u0430\u0448\u0435\u0439 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u0435:</p> <pre><code>cd /home/gfer/HASSio\n# \u0424\u0430\u0439\u043b \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438\nls -lh docs/integrations/n8n-voice-assistant-ollama.json\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#122-n8n","title":"12.2 \u0418\u043c\u043f\u043e\u0440\u0442 \u0432 n8n","text":"<ol> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 n8n Web UI</li> <li>Workflows \u2192 Add workflow \u2192 Import from File</li> <li>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b <code>n8n-voice-assistant-ollama.json</code></li> <li>Workflow \u043e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f \u0441 16 nodes</li> </ol>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#123-ollama-node","title":"12.3 \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f Ollama node","text":"<p>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 node \"Ollama: Model\":</p> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b: - Base URL: <code>http://&lt;VM_IP&gt;:11434</code> (IP \u0432\u0430\u0448\u0435\u0439 Ollama VM) - Model: <code>phi3:mini</code></p> <p>\u0422\u0435\u0441\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f:</p> <pre><code># \u0421 \u043c\u0430\u0448\u0438\u043d\u044b \u0433\u0434\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 n8n\ncurl http://&lt;VM_IP&gt;:11434/api/tags\n</code></pre> <p>\u0414\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043c\u043e\u0434\u0435\u043b\u0435\u0439.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#124-home-assistant","title":"12.4 \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f Home Assistant","text":"<p>Node \"HA: Get All States\":</p> <ul> <li>URL: <code>http://&lt;HA_IP&gt;:8123/api/states</code></li> <li>Authentication: Header Auth</li> <li>Credential: \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0432 n8n:</li> <li>Type: HTTP Header Auth</li> <li>Name: <code>Authorization</code></li> <li>Value: <code>Bearer &lt;YOUR_HA_LONG_LIVED_TOKEN&gt;</code></li> </ul> <p>\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 HA \u0442\u043e\u043a\u0435\u043d\u0430: 1. Home Assistant \u2192 \u041f\u0440\u043e\u0444\u0438\u043b\u044c (\u043b\u0435\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439 \u0443\u0433\u043e\u043b) 2. Long-Lived Access Tokens \u2192 Create Token 3. Name: <code>n8n-ollama</code> 4. \u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0442\u043e\u043a\u0435\u043d</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#125-telegram","title":"12.5 \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f Telegram","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 Telegram Bot: 1. Telegram \u2192 @BotFather \u2192 <code>/newbot</code> 2. Name: <code>My Home Assistant Bot</code> 3. Username: <code>my_ha_ollama_bot</code> 4. \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 token: <code>123456:ABCdefGHI...</code></p> <p>\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0432\u0430\u0448 Telegram ID: 1. Telegram \u2192 @userinfobot \u2192 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u043b\u044e\u0431\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 2. \u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 ID</p> <p>\u0412 n8n \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 Telegram credential: - Type: Telegram API - Access Token: <code>123456:ABCdefGHI...</code></p> <p>Node \"Telegram: Trigger\": - User IDs: \u0432\u0430\u0448 Telegram ID - Credential: \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 Telegram credential</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#126-tool-workflows","title":"12.6 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 Tool workflows","text":"<p>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b AI Agent \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c 5 sub-workflows \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f Home Assistant.</p> <p>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 - Tool \"Turn On Light\":</p> <ol> <li>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 workflow: + Add workflow</li> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 node HTTP Request:</li> <li>Method: <code>POST</code></li> <li>URL: <code>http://&lt;HA_IP&gt;:8123/api/services/light/turn_on</code></li> <li>Authentication: Header Auth (\u0432\u0430\u0448 HA credential)</li> <li>Body Content Type: JSON</li> <li>Body:    <pre><code>{\n  \"entity_id\": \"={{ $json.entity_id }}\"\n}\n</code></pre></li> <li>Save workflow</li> <li>\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 ID workflow (\u0438\u0437 URL: <code>.../workflow/&lt;ID&gt;</code>)</li> <li>\u0412 \u0433\u043b\u0430\u0432\u043d\u043e\u043c workflow \u043d\u0430\u0439\u0434\u0438\u0442\u0435 node \"Tool: Turn On Light\"</li> <li>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 Workflow ID: \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 ID</li> </ol> <p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0434\u043b\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 tools: - <code>Tool: Turn Off Light</code> - POST <code>/api/services/light/turn_off</code> - <code>Tool: Set Temperature</code> - POST <code>/api/services/climate/set_temperature</code> - <code>Tool: Activate Scene</code> - POST <code>/api/services/scene/turn_on</code> - <code>Tool: Get Sensor</code> - GET <code>/api/states/{{ $json.entity_id }}</code></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#127-workflow","title":"12.7 \u0410\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u044f workflow","text":"<ol> <li>Save \u0433\u043b\u0430\u0432\u043d\u044b\u0439 workflow</li> <li>\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u0443\u0439\u0442\u0435 toggle \u0441\u043f\u0440\u0430\u0432\u0430 \u0432\u0432\u0435\u0440\u0445\u0443 (Active)</li> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 Telegram \u2192 \u043d\u0430\u0439\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435\u0433\u043e \u0431\u043e\u0442\u0430</li> <li>\u041e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435: <code>/start</code></li> </ol> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u043e\u0442\u0432\u0435\u0442: <pre><code>\ud83e\udd16 \u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 Home Assistant + Ollama\n\n*\u041a\u043e\u043c\u0430\u043d\u0434\u044b:*\n\u2022 \u0412\u043a\u043b\u044e\u0447\u0438/\u0432\u044b\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 [\u043a\u043e\u043c\u043d\u0430\u0442\u0430]\n...\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#13","title":"\u042d\u0442\u0430\u043f 13: \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#131","title":"13.1 \u041f\u0440\u043e\u0441\u0442\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430","text":"<p>\u0412 Telegram \u0431\u043e\u0442\u0443: <pre><code>\u041f\u0440\u0438\u0432\u0435\u0442!\n</code></pre></p> <p>\u0411\u043e\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 3-5 \u0441\u0435\u043a\u0443\u043d\u0434.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#132","title":"13.2 \u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f","text":"<pre><code>\u0412\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 \u043d\u0430 \u043a\u0443\u0445\u043d\u0435\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c <code>light.kitchen</code>, \u0431\u043e\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#133-gpu","title":"13.3 \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 GPU","text":"<p>\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0431\u043e\u0442\u0430:</p> <pre><code># \u0412 VM\nwatch -n 1 nvidia-smi\n</code></pre> <p>\u041d\u0430\u0431\u043b\u044e\u0434\u0430\u0439\u0442\u0435: - GPU-Util: 80-100% \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 - Memory: ~2.5GB \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f - Temperature: 45-65\u00b0C</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#134","title":"13.4 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0418\u0437\u043c\u0435\u0440\u044c\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0442\u0432\u0435\u0442\u0430: - \u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432\u043e\u043f\u0440\u043e\u0441: 2-4 \u0441\u0435\u043a\u0443\u043d\u0434\u044b - \u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0441 \u0432\u044b\u0437\u043e\u0432\u043e\u043c tool: 4-7 \u0441\u0435\u043a\u0443\u043d\u0434 - \u0421\u043b\u043e\u0436\u043d\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441: 5-8 \u0441\u0435\u043a\u0443\u043d\u0434</p> <p>\u0414\u043b\u044f GTX 1050 Ti + phi3:mini \u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_3","title":"\u041e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0438 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#snapshot-vm","title":"Snapshot VM \u043f\u0435\u0440\u0435\u0434 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\u0438","text":"<pre><code># \u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435\nqm snapshot 300 clean-phi3mini-install\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#backup-vm","title":"Backup VM","text":"<pre><code># Snapshot backup\nvzdump 300 --mode snapshot --storage local --compress zstd\n\n# Backup \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432 /var/lib/vz/dump/\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#ollama","title":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 Ollama","text":"<pre><code>ssh admin@&lt;VM_IP&gt;\n\n# \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\ncurl -fsSL https://ollama.ai/install.sh | sh\n\n# \u0420\u0435\u0441\u0442\u0430\u0440\u0442\nsudo systemctl restart ollama.service\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#gpu","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u0430\u043f\u0433\u0440\u0435\u0439\u0434\u0430 GPU","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b GTX 1050 Ti \u043d\u0430 GTX 1060 (6GB):</p> <pre><code># \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0431\u043e\u043b\u0435\u0435 \u043c\u043e\u0449\u043d\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438\nollama pull llama3.1:8b\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\nollama list\n\n# \u0422\u0435\u0441\u0442\nollama run llama3.1:8b \"\u0422\u0435\u0441\u0442 \u043d\u043e\u0432\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438\"\n\n# \u0412 n8n \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 model \u043d\u0430 \"llama3.1:8b\"\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#troubleshooting","title":"Troubleshooting","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#vm-cannot-allocate-memory","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: VM \u043d\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f - Cannot allocate memory","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: <code>QEMU exited with code 1</code>, \u0432 \u043b\u043e\u0433\u0430\u0445: <code>Cannot allocate memory (12)</code></p> <p>\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430: <pre><code># \u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435\nfree -h\n# \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 Total \u0438 Available RAM\n\ncat /etc/pve/qemu-server/&lt;VMID&gt;.conf | grep memory\n# \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043a\u043e\u043b\u044c\u043a\u043e RAM \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043e VM\n</code></pre></p> <p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: VM \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0432\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 RAM \u0447\u0435\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043d\u0430 \u0445\u043e\u0441\u0442\u0435.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <ol> <li> <p>\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u0435 RAM VM: <pre><code># \u041d\u0430 \u0445\u043e\u0441\u0442\u0435 (VM \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0430)\nqm set &lt;VMID&gt; --memory 6144  # 6GB \u0432\u043c\u0435\u0441\u0442\u043e 8GB\n</code></pre></p> </li> <li> <p>\u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 Web UI:</p> </li> <li>VM \u2192 Hardware \u2192 Memory \u2192 Edit</li> <li> <p>\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u0435 \u0434\u043e 4096-6144 MB</p> </li> <li> <p>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 VM: <pre><code>qm start &lt;VMID&gt;\n</code></pre></p> </li> </ol> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438: - 8GB \u0445\u043e\u0441\u0442: VM \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 6GB - 16GB \u0445\u043e\u0441\u0442: VM \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 12GB - 32GB \u0445\u043e\u0441\u0442: VM \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 24GB</p> <p>\u0414\u043e\u043b\u0433\u043e\u0441\u0440\u043e\u0447\u043d\u043e\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0435: \u0423\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 RAM \u043d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435 \u0434\u043e 16GB+.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#amd-vi-iommu-groups-0","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: AMD-Vi \u043d\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f (IOMMU groups = 0)","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: \u041f\u043e\u0441\u043b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 GRUB <code>ls /sys/kernel/iommu_groups/</code> \u043f\u0443\u0441\u0442\u043e\u0439, AMD-Vi \u043d\u0435 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 dmesg</p> <p>\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430: <pre><code># 1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 IVRS \u0442\u0430\u0431\u043b\u0438\u0446\u044b\ndmesg | grep -i ivrs\n# \u0415\u0441\u043b\u0438 \u043f\u0443\u0441\u0442\u043e - BIOS \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442 IOMMU \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e\n\n# 2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u044f\u0434\u0440\u0430\ncat /proc/cmdline\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: iommu=pt\n\n# 3. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u0435\u0440\u0441\u0438\u0438 BIOS\ndmidecode -s bios-version\n</code></pre></p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <ol> <li>\u0412\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u0432 BIOS:</li> <li>\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e IOMMU = Enabled (AMD CBS \u0440\u0430\u0437\u0434\u0435\u043b)</li> <li> <p>\u0414\u043b\u044f ASRock: \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 BIOS \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438</p> </li> <li> <p>\u0415\u0441\u043b\u0438 IVRS \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442, \u043d\u043e AMD-Vi \u043d\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f: <pre><code># \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c amd_iommu=on\nnano /etc/default/grub\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet amd_iommu=on iommu=pt\"\nupdate-grub\nreboot\n</code></pre>    (\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \"Unknown option\" \u043c\u043e\u0436\u043d\u043e \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0435\u0441\u043b\u0438 AMD-Vi \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f)</p> </li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430: <pre><code>dmesg | grep -i amd-vi\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: AMD-Vi: Interrupt remapping enabled\n\nls /sys/kernel/iommu_groups/ | wc -l\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c &gt; 0\n</code></pre></p> </li> </ol>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#vm-gpu","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: VM \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f GPU","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: Black screen, VM \u0437\u0430\u0432\u0438\u0441\u0430\u0435\u0442 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <ol> <li>\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0435 VM \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e (Shutdown, \u043d\u0435 Reset)</li> <li>Proxmox Web UI \u2192 VM 300 \u2192 Hardware</li> <li>\u0423\u0434\u0430\u043b\u0438\u0442\u0435 PCI Device (hostpci0)</li> <li>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 VM - \u0434\u043e\u043b\u0436\u043d\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0441\u044f</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435:    <pre><code>lspci -nnk | grep -A 3 nvidia\n# \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c: Kernel driver in use: vfio-pci\n</code></pre></li> <li>\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0435 VM</li> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 PCI Device \u0441\u043d\u043e\u0432\u0430:</li> <li>\u2705 All Functions</li> <li>\u2705 Primary GPU</li> <li>\u2705 PCI-Express</li> <li>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 VM</li> </ol>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#gpu-nvidia-smi","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: GPU \u0432\u0438\u0434\u0435\u043d, \u043d\u043e nvidia-smi \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: <code>NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver</code></p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <pre><code># 1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0442\u043e \u0434\u0440\u0430\u0439\u0432\u0435\u0440 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\ndpkg -l | grep nvidia-driver-535\n\n# 2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u044f\u0434\u0440\u0430\nlsmod | grep nvidia\n\n# 3. \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043c\u043e\u0434\u0443\u043b\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e\nsudo modprobe nvidia\n\n# 4. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\nnvidia-smi\n\n# 5. \u0415\u0441\u043b\u0438 \u043d\u0435 \u043f\u043e\u043c\u043e\u0433\u043b\u043e - \u043f\u0435\u0440\u0435\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430\nsudo apt purge nvidia-*\nsudo apt autoremove\nsudo ubuntu-drivers autoinstall\nsudo reboot\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#ollama-cpu-mode","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: Ollama \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 (CPU mode)","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: \u041e\u0442\u0432\u0435\u0442\u044b \u0437\u0430 20-30+ \u0441\u0435\u043a\u0443\u043d\u0434, nvidia-smi \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 0% GPU util</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <pre><code># 1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 CUDA\nnvidia-smi\n\n# 2. \u0422\u0435\u0441\u0442 Ollama \u0441 \u044f\u0432\u043d\u044b\u043c GPU\nCUDA_VISIBLE_DEVICES=0 ollama run phi3:mini \"test\"\n\n# \u0415\u0441\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 - \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 systemd unit:\nsudo systemctl edit ollama.service\n\n# \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435:\n# [Service]\n# Environment=\"CUDA_VISIBLE_DEVICES=0\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart ollama.service\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#out-of-memory","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: Out of Memory \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043c\u043e\u0434\u0435\u043b\u0438","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: Ollama \u043a\u0440\u0430\u0448\u0438\u0442\u0441\u044f \u043f\u0440\u0438 <code>ollama run</code>, \u043e\u0448\u0438\u0431\u043a\u0430 CUDA OOM</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <ol> <li> <p>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u043d\u044c\u0448\u0443\u044e \u043c\u043e\u0434\u0435\u043b\u044c:    <pre><code># \u0412\u043c\u0435\u0441\u0442\u043e phi3:mini \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435\nollama pull gemma2:2b\n</code></pre></p> </li> <li> <p>\u0423\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 RAM VM (\u043d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435):    <pre><code># \u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0435 VM\nqm shutdown 300\n\n# \u0423\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 \u0434\u043e 12GB\nqm set 300 --memory 12288\n\n# \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435\nqm start 300\n</code></pre></p> </li> </ol>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#ollama-127001","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: Ollama \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e \u0441\u0435\u0442\u0438 (\u0441\u043b\u0443\u0448\u0430\u0435\u0442 \u043d\u0430 127.0.0.1)","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: - \u0412 VM: <code>curl http://localhost:11434/api/tags</code> \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 - \u0421 \u0445\u043e\u0441\u0442\u0430: <code>curl http://&lt;VM_IP&gt;:11434/api/tags</code> \u2192 Connection refused - <code>sudo ss -tlnp | grep 11434</code> \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 <code>127.0.0.1:11434</code> \u0432\u043c\u0435\u0441\u0442\u043e <code>0.0.0.0:11434</code></p> <p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f <code>OLLAMA_HOST</code> \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e override.conf \u0441\u043e\u0437\u0434\u0430\u043d: <pre><code>sudo cat /etc/systemd/system/ollama.service.d/override.conf\n</code></pre></li> </ol> <p>\u0415\u0441\u043b\u0438 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435\u0442 - \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0432\u0440\u0443\u0447\u043d\u0443\u044e (\u0441\u043c. \u042d\u0442\u0430\u043f 10.2, \u0412\u0430\u0440\u0438\u0430\u043d\u0442 B)</p> <ol> <li> <p>\u0415\u0441\u043b\u0438 \u0444\u0430\u0439\u043b \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u043d\u043e \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0441\u044f: <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart ollama.service\n</code></pre></p> </li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f: <pre><code>systemctl show ollama.service | grep OLLAMA_HOST\n</code></pre></p> </li> </ol> <p>\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: <code>Environment=OLLAMA_HOST=0.0.0.0:11434</code></p> <ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e \u0442\u0435\u043f\u0435\u0440\u044c \u0441\u043b\u0443\u0448\u0430\u0435\u0442 \u043d\u0430 \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445: <pre><code>sudo ss -tlnp | grep 11434\n</code></pre></li> </ol> <p>\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: <code>*:11434</code> \u0438\u043b\u0438 <code>0.0.0.0:11434</code></p> <ol> <li>\u0415\u0441\u043b\u0438 \u0432\u0441\u0451 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 - \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0439 workaround: <pre><code>sudo systemctl stop ollama.service\nOLLAMA_HOST=0.0.0.0:11434 ollama serve\n</code></pre></li> </ol> <p>\u0415\u0441\u043b\u0438 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e - \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 systemd override, \u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0444\u0430\u0439\u043b.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441 \u0445\u043e\u0441\u0442\u0430: <pre><code># \u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435\ncurl http://&lt;VM_IP&gt;:11434/api/tags\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#code-43-device-manager-windows-vm","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: Code 43 \u0432 Device Manager (\u0435\u0441\u043b\u0438 Windows VM)","text":"<p>\u041d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e \u043a Ubuntu, \u043d\u043e \u0434\u043b\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0438: - \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 <code>args: -cpu host,kvm=off</code> \u0432 \u043a\u043e\u043d\u0444\u0438\u0433 VM - \u042d\u0442\u043e \u0441\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u043e\u0442 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u0430</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_4","title":"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438 \u043c\u0435\u0442\u0440\u0438\u043a\u0438","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#gtx-1050-ti-4gb-phi3mini-vm","title":"GTX 1050 Ti (4GB) + phi3:mini \u0432 VM","text":"<p>Measured metrics: - Cold start latency: 4-6 \u0441\u0435\u043a\u0443\u043d\u0434 - Warm latency: 2-3 \u0441\u0435\u043a\u0443\u043d\u0434\u044b - Throughput: 40-50 tokens/sec - VRAM usage: 2.4-2.6GB / 4GB - GPU utilization: 85-95% \u0432\u043e \u0432\u0440\u0435\u043c\u044f inference - Power draw: 50-70W (\u0438\u0437 75W TDP)</p> <p>\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0441 LXC: ~5-10% \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435 (\u043f\u0440\u0438\u0435\u043c\u043b\u0435\u043c\u043e \u0437\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#gtx-1060-6gb-llama318b","title":"GTX 1060 (6GB) + llama3.1:8b \u043f\u043e\u0441\u043b\u0435 \u0430\u043f\u0433\u0440\u0435\u0439\u0434\u0430","text":"<p>Expected metrics: - Cold start latency: 5-8 \u0441\u0435\u043a\u0443\u043d\u0434 - Warm latency: 2-4 \u0441\u0435\u043a\u0443\u043d\u0434\u044b - Throughput: 30-45 tokens/sec - VRAM usage: 4.8-5.2GB / 6GB - GPU utilization: 80-90%</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_5","title":"\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#cpu-pinning-vm","title":"CPU pinning \u0434\u043b\u044f VM","text":"<p>\u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435 (\u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 8+ cores):</p> <pre><code># Pin VM \u043a specific cores (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 4-7 \u043d\u0430 8-core CPU)\nqm set 300 --cpulimit 4\nnano /etc/pve/qemu-server/300.conf\n</code></pre> <p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435: <pre><code>affinity: 4-7\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#huge-pages-8b","title":"Huge pages (\u0434\u043b\u044f \u043c\u043e\u0434\u0435\u043b\u0435\u0439 8B+)","text":"<p>\u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435:</p> <pre><code># \u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c 4GB huge pages (\u0434\u043b\u044f llama3.1:8b)\nsysctl vm.nr_hugepages=2048\n\n# Persistent:\necho \"vm.nr_hugepages=2048\" &gt;&gt; /etc/sysctl.conf\n</code></pre> <p>\u0412 VM \u043a\u043e\u043d\u0444\u0438\u0433\u0435: <pre><code>hugepages: 1024\n</code></pre></p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#gpu_1","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0441 \u0434\u0432\u0443\u043c\u044f GPU","text":"<p>\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0434\u0432\u0435 \u0432\u0438\u0434\u0435\u043e\u043a\u0430\u0440\u0442\u044b (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, NVIDIA \u0434\u043b\u044f Ollama + AMD Radeon \u0434\u043b\u044f \u0445\u043e\u0441\u0442\u0430), \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#1-radeon-nvidia-vm","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1: Radeon \u0434\u043b\u044f \u0445\u043e\u0441\u0442\u0430, NVIDIA \u0434\u043b\u044f VM (\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":"<p>\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439: - NVIDIA GPU \u2192 passthrough \u0432 VM \u0434\u043b\u044f Ollama - AMD Radeon \u2192 \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0434\u043b\u044f Proxmox \u0432\u0435\u0431-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430</p> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430: - \u2705 \u0425\u043e\u0441\u0442 \u0438\u043c\u0435\u0435\u0442 \u0432\u0438\u0434\u0435\u043e-\u0432\u044b\u0432\u043e\u0434 (\u0443\u0434\u043e\u0431\u043d\u043e \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f) - \u2705 NVIDIA \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0434\u043b\u044f Ollama VM - \u2705 \u041c\u0438\u043d\u0438\u043c\u0443\u043c \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u043e\u0432 \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u043e\u0432 - \u2705 \u041f\u0440\u043e\u0441\u0442\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 - \u2705 \u041e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0435\u0442 \u0440\u0435\u0441\u0443\u0440\u0441\u044b CPU \u0445\u043e\u0441\u0442\u0430 (\u0435\u0441\u043b\u0438 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f CPU/iGPU \u0434\u043b\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u0438)</p> <p>\u041e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0445\u043e\u0441\u0442\u0430:</p> <p>\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f (\u0431\u0435\u0437 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0439 GPU \u043d\u0430 \u0445\u043e\u0441\u0442\u0435): - Proxmox \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 headless \u0440\u0435\u0436\u0438\u043c\u0435 (\u0431\u0435\u0437 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0430) - \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 - \u0418\u041b\u0418 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 iGPU/CPU \u0434\u043b\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u0438 - \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0430 CPU 2-5% - \u0418\u041b\u0418 \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0435\u0442 \u0432\u0438\u0434\u0435\u043e-\u0432\u044b\u0432\u043e\u0434\u0430 - \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043f\u0440\u0438 \u0441\u0431\u043e\u044f\u0445 \u0441\u0435\u0442\u0438</p> <p>\u0421 Radeon 7100 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435: - \u2705 \u0412\u0438\u0434\u0435\u043e-\u0432\u044b\u0432\u043e\u0434 \u0447\u0435\u0440\u0435\u0437 GPU (\u043d\u0435 \u0447\u0435\u0440\u0435\u0437 CPU) - \u2705 \u041e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0435\u0442 2-5% CPU (\u0435\u0441\u043b\u0438 \u0431\u044b\u043b iGPU \u0430\u043a\u0442\u0438\u0432\u0435\u043d) - \u2705 \u0414\u043e\u0441\u0442\u0443\u043f \u043a \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043f\u0440\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430\u0445 \u0441 \u0441\u0435\u0442\u044c\u044e (\u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e!) - \u2705 Radeon 7100 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u0442 ~10-15W (\u0441\u0442\u0430\u0440\u0430\u044f \u043a\u0430\u0440\u0442\u0430, \u043d\u0438\u0437\u043a\u043e\u0435 \u044d\u043d\u0435\u0440\u0433\u043e\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435) - \u2705 \u0414\u0440\u0430\u0439\u0432\u0435\u0440\u044b AMD \u0437\u0430\u043d\u0438\u043c\u0430\u044e\u0442 ~50-100MB RAM (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e)</p> <p>\u0420\u0435\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u044b\u0433\u043e\u0434\u0430: - CPU: -2-5% (\u0435\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0441\u044f iGPU) - RAM: +50-100MB (\u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b AMD) - \u042d\u043d\u0435\u0440\u0433\u043e\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435: +10-15W (Radeon 7100) - \u041d\u0430\u0434\u0435\u0436\u043d\u043e\u0441\u0442\u044c: \u2b06\ufe0f\u2b06\ufe0f\u2b06\ufe0f (\u0435\u0441\u0442\u044c \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043a\u043e\u043d\u0441\u043e\u043b\u0438!)</p> <p>\u0412\u044b\u0432\u043e\u0434: \u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0432\u044b\u0433\u043e\u0434\u0430 - \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u0441\u0442\u044c \u0438 \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u043e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u0430 \u043d\u0435 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432. CPU \u043e\u0441\u0432\u043e\u0431\u043e\u0434\u0438\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f iGPU.</p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430:</p> <pre><code># 1. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c ID \u043e\u0431\u0435\u0438\u0445 GPU\nlspci -nn | grep -E \"VGA|3D\"\n\n# \u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430:\n# 01:00.0 VGA [0300]: NVIDIA Corporation GP106 [P106-100] [10de:1c07]\n# 06:00.0 VGA [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Radeon 7100 [1002:515e]\n\n# 2. Blacklist \u0442\u043e\u043b\u044c\u043a\u043e NVIDIA (\u043d\u0435 \u0442\u0440\u043e\u0433\u0430\u0435\u043c AMD \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b)\ncat &gt; /etc/modprobe.d/blacklist-nvidia.conf &lt;&lt; 'EOF'\nblacklist nouveau\nblacklist nvidia\nblacklist nvidiafb\nEOF\n\n# 3. VFIO \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f NVIDIA (\u043f\u043e\u0434\u0441\u0442\u0430\u0432\u044c \u0441\u0432\u043e\u0439 ID \u0438\u0437 \u0448\u0430\u0433\u0430 1)\necho \"options vfio-pci ids=10de:1c07\" &gt; /etc/modprobe.d/vfio.conf\n\n# 4. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c AMD \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b \u043d\u0430 \u0445\u043e\u0441\u0442 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e, \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u0435\u043d \u0432\u044b\u0432\u043e\u0434)\napt update\napt install -y firmware-amd-graphics\n\n# 5. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\nupdate-initramfs -u -k all\nreboot\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438:</p> <pre><code># NVIDIA \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u0430 \u043a vfio-pci\nlspci -nnk | grep -A 3 -i nvidia\n# \u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0432\u044b\u0432\u043e\u0434:\n# Kernel driver in use: vfio-pci\n\n# AMD \u0434\u043e\u043b\u0436\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0430 \u0445\u043e\u0441\u0442\u0435\nlspci -nnk | grep -A 3 -i radeon\n# \u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0432\u044b\u0432\u043e\u0434:\n# Kernel driver in use: radeon (\u0438\u043b\u0438 amdgpu \u0434\u043b\u044f \u043d\u043e\u0432\u044b\u0445 \u043a\u0430\u0440\u0442)\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#2-vm-gpu","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2: \u0414\u0432\u0435 VM - \u043a\u0430\u0436\u0434\u0430\u044f \u0441\u043e \u0441\u0432\u043e\u0435\u0439 GPU","text":"<p>\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439: - NVIDIA GPU \u2192 VM 1 (Ollama) - AMD Radeon \u2192 VM 2 (\u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0435\u0440\u0432\u0438\u0441, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u0438\u0434\u0435\u043e-\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435)</p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430:</p> <pre><code># 1. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c ID \u043e\u0431\u0435\u0438\u0445 GPU\nlspci -nn | grep -E \"VGA|3D\"\n\n# 2. Blacklist \u043e\u0431\u0430 GPU \u043d\u0430 \u0445\u043e\u0441\u0442\u0435\ncat &gt; /etc/modprobe.d/blacklist-gpu.conf &lt;&lt; 'EOF'\nblacklist nouveau\nblacklist nvidia\nblacklist nvidiafb\nblacklist radeon\nblacklist amdgpu\nEOF\n\n# 3. VFIO \u0434\u043b\u044f \u043e\u0431\u0435\u0438\u0445 GPU (\u043f\u043e\u0434\u0441\u0442\u0430\u0432\u044c \u0441\u0432\u043e\u0438 ID \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e)\necho \"options vfio-pci ids=10de:1c07,1002:515e\" &gt; /etc/modprobe.d/vfio.conf\n\n# 4. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\nupdate-initramfs -u -k all\nreboot\n</code></pre> <p>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 GPU \u0432 VM:</p> <ul> <li>VM 1 (Ollama): \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c NVIDIA \u0447\u0435\u0440\u0435\u0437 Proxmox UI (Hardware \u2192 Add \u2192 PCI Device)</li> <li>VM 2: \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c AMD \u0447\u0435\u0440\u0435\u0437 Proxmox UI (Hardware \u2192 Add \u2192 PCI Device)</li> </ul> <p>\u0412\u0430\u0436\u043d\u043e: \u041a\u0430\u0436\u0434\u0430\u044f GPU \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e\u0439 VM \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e.</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#3-nvidia-gpu-vm","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3: \u0414\u0432\u0435 NVIDIA GPU \u0432 \u043e\u0434\u043d\u043e\u0439 VM (\u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439)","text":"<p>\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439: \u0414\u0432\u0435 NVIDIA GPU \u0432 \u043e\u0434\u043d\u043e\u0439 VM \u0434\u043b\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 (llama3.1:70b, mistral:large).</p> <p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f: - \u26a0\ufe0f \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u043c\u0438 GPU (\u043e\u0431\u0435 NVIDIA) - \u26a0\ufe0f Ollama \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 multi-GPU \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f CUDA (NVIDIA) - \u26a0\ufe0f AMD ROCm \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f Ollama (\u043d\u0430 2025 \u0433\u043e\u0434)</p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430:</p> <pre><code># 1. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c ID \u043e\u0431\u0435\u0438\u0445 NVIDIA GPU\nlspci -nn | grep -i nvidia\n\n# 2. Blacklist NVIDIA \u043d\u0430 \u0445\u043e\u0441\u0442\u0435\ncat &gt; /etc/modprobe.d/blacklist-nvidia.conf &lt;&lt; 'EOF'\nblacklist nouveau\nblacklist nvidia\nblacklist nvidiafb\nEOF\n\n# 3. VFIO \u0434\u043b\u044f \u043e\u0431\u0435\u0438\u0445 NVIDIA (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e)\necho \"options vfio-pci ids=10de:1c07,10de:1c82\" &gt; /etc/modprobe.d/vfio.conf\n\n# 4. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\nupdate-initramfs -u -k all\nreboot\n</code></pre> <p>\u0412 VM:</p> <pre><code># 1. \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u0435 GPU \u0447\u0435\u0440\u0435\u0437 Proxmox UI \u0432 \u043e\u0434\u043d\u0443 VM\n\n# 2. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b (\u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e)\n\n# 3. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u043e\u0431\u0435 GPU \u0432\u0438\u0434\u043d\u044b\nnvidia-smi\n# \u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0431\u0435 GPU\n\n# 4. Ollama \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043e\u0431\u0435 GPU \u0435\u0441\u043b\u0438:\n# - \u041c\u043e\u0434\u0435\u043b\u044c \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0430\u044f (7B+)\n# - \u0414\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e VRAM \u043d\u0430 \u043e\u0431\u0435\u0438\u0445 GPU\n# - CUDA \u0432\u0438\u0434\u0438\u0442 \u043e\u0431\u0435 GPU\n\n# \u041c\u043e\u0436\u043d\u043e \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c:\nexport CUDA_VISIBLE_DEVICES=0,1\nollama run llama3.1:8b\n</code></pre> <p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: - \u0414\u0432\u0435 GPU \u043d\u0435 \u0434\u0430\u044e\u0442 2x \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u0435 (\u043e\u0431\u044b\u0447\u043d\u043e 1.5-1.7x) - \u0417\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 batch - \u041f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043c\u043e\u0434\u0435\u043b\u0435\u0439 &gt; 8B \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#nvidia-amd","title":"\u0421\u043c\u0435\u0448\u0430\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f (NVIDIA + AMD)","text":"<p>\u26a0\ufe0f \u041d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f: - NVIDIA \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 CUDA, AMD \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 ROCm - Ollama \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 ROCm (\u0442\u043e\u043b\u044c\u043a\u043e CUDA) - \u041d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0435 GPU \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0432 \u043e\u0434\u043d\u043e\u0439 VM \u0434\u043b\u044f Ollama</p> <p>\u0415\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e: - NVIDIA \u2192 VM \u0434\u043b\u044f Ollama - AMD \u2192 \u0425\u043e\u0441\u0442 \u0438\u043b\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0430\u044f VM \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0437\u0430\u0434\u0430\u0447</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_6","title":"\u0424\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Proxmox VE Host (Debian 12 Bookworm)       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 IOMMU/VT-d: Enabled                    \u2502 \u2502\n\u2502  \u2502 VFIO modules: Loaded                   \u2502 \u2502\n\u2502  \u2502 GPU bound to: vfio-pci                 \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502              \u2193 PCI Passthrough              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 Ubuntu Server 22.04 VM (ID: 300)       \u2502 \u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\n\u2502  \u2502 \u2502 NVIDIA Driver 535+                 \u2502 \u2502 \u2502\n\u2502  \u2502 \u2502 CUDA 12.2                          \u2502 \u2502 \u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\n\u2502  \u2502 \u2502 Ollama Service                     \u2502 \u2502 \u2502\n\u2502  \u2502 \u2502 API: 0.0.0.0:11434                 \u2502 \u2502 \u2502\n\u2502  \u2502 \u2502 Model: phi3:mini (2.3GB)           \u2502 \u2502 \u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502\n\u2502  \u2502 Resources:                             \u2502 \u2502\n\u2502  \u2502 - CPU: 4 cores (type: host)            \u2502 \u2502\n\u2502  \u2502 - RAM: 8GB                             \u2502 \u2502\n\u2502  \u2502 - Disk: 50GB VirtIO                   \u2502 \u2502\n\u2502  \u2502 - GPU: GTX 1050 Ti (passthrough)       \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502 Network: vmbr0\n           \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  n8n Server                \u2502\n\u2502  HTTP: &lt;VM_IP&gt;:11434       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Langchain Agent      \u2502  \u2502\n\u2502  \u2502 - Ollama LLM         \u2502  \u2502\n\u2502  \u2502 - Memory Buffer      \u2502  \u2502\n\u2502  \u2502 - HA Tools (5)       \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Home Assistant            \u2502\n\u2502  REST API: :8123           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Telegram Bot              \u2502\n\u2502  User Interface            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_7","title":"\u0427\u0435\u043a\u043b\u0438\u0441\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438","text":"<p>\u041f\u0440\u043e\u0439\u0434\u0438\u0442\u0435\u0441\u044c \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443, \u0432\u0441\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u2705:</p> <p>Proxmox \u0445\u043e\u0441\u0442: - \u2705 IOMMU enabled \u0432 BIOS (\u0434\u043b\u044f ASRock: Advanced \u2192 AMD CBS \u2192 IOMMU) - \u2705 BIOS \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442 IVRS \u0442\u0430\u0431\u043b\u0438\u0446\u0443 (<code>dmesg | grep -i ivrs</code> \u043d\u0435 \u043f\u0443\u0441\u0442\u043e) - \u2705 GRUB \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d \u0441 <code>iommu=pt</code> (\u0434\u043b\u044f AMD: <code>amd_iommu=on</code> \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e) - \u2705 IOMMU \u0433\u0440\u0443\u043f\u043f\u044b \u0441\u043e\u0437\u0434\u0430\u043d\u044b (<code>ls /sys/kernel/iommu_groups/ | wc -l</code> &gt; 0) - \u2705 AMD-Vi \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d (<code>dmesg | grep -i amd-vi</code> \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \"Interrupt remapping enabled\") - \u2705 VFIO \u043c\u043e\u0434\u0443\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b (<code>lsmod | grep vfio</code>) - \u2705 GPU captured by vfio-pci (<code>lspci -nnk</code> \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \"Kernel driver in use: vfio-pci\") - \u2705 \u041d\u0435\u0442 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u043e\u0432 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 (<code>dpkg -l | grep nvidia</code> - \u043f\u0443\u0441\u0442\u043e)</p> <p>Ubuntu VM: - \u2705 GPU \u0432\u0438\u0434\u0435\u043d \u0432 VM (<code>lspci | grep nvidia</code>) - \u2705 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d (<code>nvidia-smi</code> \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442) - \u2705 Ollama \u0441\u0435\u0440\u0432\u0438\u0441 \u0437\u0430\u043f\u0443\u0449\u0435\u043d (<code>systemctl status ollama</code>) - \u2705 API \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d (<code>curl http://localhost:11434/api/tags</code>) - \u2705 \u041c\u043e\u0434\u0435\u043b\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430 (<code>ollama list</code>) - \u2705 GPU \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f (<code>nvidia-smi</code> \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u0440\u0438 inference)</p> <p>n8n \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f: - \u2705 Workflow \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d - \u2705 Ollama node \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d (Base URL \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439) - \u2705 HA credential \u0441\u043e\u0437\u0434\u0430\u043d - \u2705 Telegram credential \u0441\u043e\u0437\u0434\u0430\u043d - \u2705 5 Tool workflows \u0441\u043e\u0437\u0434\u0430\u043d\u044b - \u2705 Workflow \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d - \u2705 Telegram \u0431\u043e\u0442 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_8","title":"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0438","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#proxmox","title":"\u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435","text":"<pre><code># IOMMU \u0441\u0442\u0430\u0442\u0443\u0441\ndmesg | grep -i iommu\n\n# VFIO \u043c\u043e\u0434\u0443\u043b\u0438\nlsmod | grep vfio\n\n# GPU binding\nlspci -nnk | grep -A 3 nvidia\n\n# IOMMU \u0433\u0440\u0443\u043f\u043f\u044b\nfor d in /sys/kernel/iommu_groups/*/devices/*; do\n    n=${d#*/iommu_groups/*}; n=${n%%/*}\n    printf 'Group %s: ' \"$n\"\n    lspci -nns \"${d##*/}\"\ndone | sort -n -k2\n\n# \u0421\u0442\u0430\u0442\u0443\u0441 VM\nqm status 300\nqm config 300\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#ubuntu-vm","title":"\u0412 Ubuntu VM","text":"<pre><code># GPU \u043d\u0430\u043b\u0438\u0447\u0438\u0435\nlspci | grep -i nvidia\n\n# NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\nnvidia-smi\nnvidia-smi -L\n\n# CUDA \u0432\u0435\u0440\u0441\u0438\u044f\nnvcc --version  # \u0415\u0441\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d CUDA toolkit (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)\n\n# Ollama \u0441\u0435\u0440\u0432\u0438\u0441\nsystemctl status ollama.service\njournalctl -u ollama.service -n 50\n\n# Ollama \u043f\u0440\u043e\u0446\u0435\u0441\u0441\nps aux | grep ollama\n\n# \u0421\u0435\u0442\u0435\u0432\u043e\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\nss -tlnp | grep 11434\n\n# \u041c\u043e\u0434\u0435\u043b\u0438\nollama list\n\n# \u0422\u0435\u0441\u0442 API\ncurl http://localhost:11434/api/tags\n</code></pre>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_9","title":"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438 \u0438 \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0414\u0430\u043d\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043e \u043d\u0430:</p> <ul> <li> <p>Proxmox Official Documentation PCI Passthrough Wiki</p> </li> <li> <p>Habr Community (\u0440\u0443\u0441\u0441\u043a\u0438\u0439) \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u0432\u0438\u0434\u0435\u043e\u043a\u0430\u0440\u0442\u044b \u0432 Proxmox</p> </li> <li> <p>Proxmox Forum Ollama + NVIDIA GPU Passthrough Discussion</p> </li> <li> <p>Ollama Official GPU Support Documentation</p> </li> <li> <p>VFIO Documentation Linux VFIO Documentation</p> </li> </ul>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_10","title":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0448\u0430\u0433\u0438","text":"<ol> <li>\u2705 BIOS \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d (IOMMU enabled)</li> <li>\u2705 Proxmox \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d (GRUB, VFIO)</li> <li>\u2705 GPU \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a vfio-pci</li> <li>\u2705 Ubuntu VM \u0441\u043e\u0437\u0434\u0430\u043d\u0430</li> <li>\u2705 GPU \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0432 VM</li> <li>\u2705 NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b \u0432 VM</li> <li>\u2705 Ollama \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d</li> <li>\u2705 \u041c\u043e\u0434\u0435\u043b\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430</li> <li>\u2705 n8n \u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u043d</li> <li>\ud83d\udd04 \u041f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b</li> <li>\ud83d\udd04 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 HA Tools</li> <li>\ud83d\udd04 \u041f\u043e\u0441\u043b\u0435 \u0430\u043f\u0433\u0440\u0435\u0439\u0434\u0430 GPU \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 llama3.1:8b</li> </ol>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#_11","title":"\u0418\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0438 \u0440\u0435\u0448\u0435\u043d\u0438\u044f (\u0438\u0437 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043e\u043f\u044b\u0442\u0430)","text":""},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#1-asrock-iommu-bios","title":"1. \u26a0\ufe0f ASRock \u043c\u0430\u0442\u0435\u0440\u0438\u043d\u0441\u043a\u0438\u0435 \u043f\u043b\u0430\u0442\u044b: IOMMU \u0441\u043a\u0440\u044b\u0442 \u0432 \u0441\u0442\u0430\u0440\u044b\u0445 BIOS","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0412 BIOS \u0432\u0435\u0440\u0441\u0438\u0438 P3.xx \u043e\u043f\u0446\u0438\u044f IOMMU \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 BIOS \u0434\u043e P7.xx+ (\u0441\u043c. \u042d\u0442\u0430\u043f 1.3)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#2-amd-amd_iommu1","title":"2. \u26a0\ufe0f AMD \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b: \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 amd_iommu=1 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0412 \u044f\u0434\u0440\u0435 6.8+ \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>amd_iommu=1</code> \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \"Unknown option\" \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>amd_iommu=on</code> (\u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u043d\u043e \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#3-ram","title":"3. \u26a0\ufe0f \u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u043a RAM \u043d\u0430 \u0445\u043e\u0441\u0442\u0435","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: VM \u043d\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439 \"Cannot allocate memory\" \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u0435 RAM VM (\u0441\u043c. \u042d\u0442\u0430\u043f 4.5 \u0438 Troubleshooting)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#4-cpu-vm","title":"4. \u26a0\ufe0f \u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 cpu \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 VM","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u041f\u043e\u0441\u043b\u0435 \u0440\u0443\u0447\u043d\u043e\u0433\u043e \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0430\u0440\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 <code>cpu: host</code> \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0423\u0434\u0430\u043b\u0438\u0442\u0435 \u0441\u0442\u0430\u0440\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443, \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 (\u0441\u043c. \u042d\u0442\u0430\u043f 6.2)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#5-x-vga1","title":"5. \u26a0\ufe0f \u041c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u044b\u0435 \u043a\u0430\u0440\u0442\u044b: x-vga=1 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: P106/P104 \u0431\u0435\u0437 \u0432\u0438\u0434\u0435\u043e\u0432\u044b\u0445\u043e\u0434\u043e\u0432 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0441 x-vga=1 \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 x-vga=1 \u0434\u043b\u044f \u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u044b\u0445 \u043a\u0430\u0440\u0442 (\u0441\u043c. \u042d\u0442\u0430\u043f 6.1)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#6-ollama-127001","title":"6. \u26a0\ufe0f Ollama \u0441\u043b\u0443\u0448\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 127.0.0.1","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: override.conf \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0444\u0430\u0439\u043b \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 (\u0441\u043c. \u042d\u0442\u0430\u043f 10.2, \u0412\u0430\u0440\u0438\u0430\u043d\u0442 B)</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#7-efi","title":"7. \u2705 EFI \u0440\u0430\u0437\u0434\u0435\u043b \u043d\u0435 \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d (\u043d\u0435 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e)","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u0438 update-initramfs \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e - \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c /dev/sda2 \u0432 /boot/efi</p>"},{"location":"integrations/OLLAMA-PROXMOX-COMPLETE-GUIDE/#8-unknown-option-on-amd_iommu","title":"8. \u2705 \u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \"Unknown option - 'on'\" \u0434\u043b\u044f amd_iommu","text":"<p>\u041d\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: AMD-Vi \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u043d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435: \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0439\u0442\u0435, \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0439\u0442\u0435 \u043f\u043e IOMMU groups</p> <p>\u0410\u0432\u0442\u043e\u0440: AI Assistant (Proxmox DevOps Expert) \u041a\u043e\u043d\u0441\u043e\u043b\u0438\u0434\u0430\u0446\u0438\u044f: Community Best Practices + Deep Proxmox Knowledge + Real Deployment Experience</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043e \u043d\u0430: - Proxmox VE: 8.x (\u044f\u0434\u0440\u043e 6.8.12-4-pve) - Proxmox Host: 192.168.1.124 - CPU: AMD Ryzen 5 2600 Six-Core (12 threads) - \u041c\u0430\u0442\u0435\u0440\u0438\u043d\u0441\u043a\u0430\u044f \u043f\u043b\u0430\u0442\u0430: ASRock B450M Pro4 (BIOS P7.40, \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0441 P3.50) - RAM: 16GB (\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0441 8GB \u0434\u043b\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439) - GPU: NVIDIA P106-100 (\u043c\u0430\u0439\u043d\u0438\u043d\u0433\u043e\u0432\u0430\u044f \u043a\u0430\u0440\u0442\u0430, 6GB VRAM, \u0431\u0435\u0437 \u0432\u0438\u0434\u0435\u043e\u0432\u044b\u0445\u043e\u0434\u043e\u0432) - VM ID: 103 (ollama-vm) - VM IP: 192.168.1.131 - VM Resources: Ubuntu 22.04.5 LTS, 4 cores, 10GB RAM, 64GB disk - Ollama: \u0432\u0435\u0440\u0441\u0438\u044f 0.x.x \u0441 NVIDIA Driver 580.95.05, CUDA 13.0 - \u041c\u043e\u0434\u0435\u043b\u0438:   - llama3.1:8b (4.7GB) - \u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u2705   - phi3:mini (2.3GB) - \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0430\u044f - \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: llama3.1:8b ~35-45 tokens/sec \u043d\u0430 GPU - Whisper.cpp: base \u043c\u043e\u0434\u0435\u043b\u044c CUDA \u0432\u0435\u0440\u0441\u0438\u044f \u2705   - 11 \u0441\u0435\u043a \u0430\u0443\u0434\u0438\u043e \u2192 0.56 \u0441\u0435\u043a \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u0438 (19x realtime)   - API endpoint: http://192.168.1.131:9000 - \u0422\u0430\u043a\u0436\u0435 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e \u0441 NVIDIA GTX/RTX 10xx-40xx series (\u043e\u0431\u044b\u0447\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u044b)</p> <p>\u0412\u0435\u0440\u0441\u0438\u044f: 1.3 (\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 + Whisper) \u0414\u0430\u0442\u0430: \u041d\u043e\u044f\u0431\u0440\u044c 8, 2025</p> <p>\u0421\u0442\u0430\u0442\u0443\u0441: \u2705 \u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u043e \u0438 \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0412\u0440\u0435\u043c\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438: ~90 \u043c\u0438\u043d\u0443\u0442 (Ollama) + ~40 \u043c\u0438\u043d\u0443\u0442 (Whisper \u0441 CUDA) \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: - Ollama: GPU utilization 80-100% \u0432\u043e \u0432\u0440\u0435\u043c\u044f inference - Whisper: 19x realtime \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u044f \u043d\u0430 GPU (0.56 \u0441\u0435\u043a \u043d\u0430 11 \u0441\u0435\u043a \u0430\u0443\u0434\u0438\u043e) - \u041e\u0431\u0449\u0430\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430: 3-6 \u0441\u0435\u043a \u043e\u0442 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0434\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u0430</p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/","title":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e (Ollama + Home Assistant)","text":"<p>\u041e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 AI \u0430\u0433\u0435\u043d\u0442\u0430 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u043d\u0430 \u0431\u0430\u0437\u0435 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b n8n Voice Assistant. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 n8n \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438.</p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#_1","title":"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>Telegram \u2192 Agent (Memory + Ollama) \u2192 HA Tools \u2192 Telegram\n\n11 nodes (\u0432\u0441\u0435 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 n8n):\n- Telegram Trigger (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439)\n- Home Assistant node (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 n8n-nodes-base.homeAssistant)\n- Ollama Chat Model (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 @n8n/n8n-nodes-langchain.lmChatOllama)\n- Memory Buffer (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 @n8n/n8n-nodes-langchain.memoryBufferWindow)\n- Langchain Agent (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 @n8n/n8n-nodes-langchain.agent)\n- Tool Workflow (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 @n8n/n8n-nodes-langchain.toolWorkflow)\n</code></pre>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#_2","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ol> <li>Ollama VM - \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u043e OLLAMA-PROXMOX-COMPLETE-GUIDE.md</li> <li>\u041c\u043e\u0434\u0435\u043b\u044c phi3:mini \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430</li> <li>n8n \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c\u0438 @n8n/n8n-nodes-langchain \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438</li> <li>Home Assistant \u0441 API \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c</li> <li>Telegram Bot (\u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439)</li> </ol>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#_3","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":""},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#1-workflow","title":"\u0428\u0430\u0433 1: \u0418\u043c\u043f\u043e\u0440\u0442 \u0433\u043b\u0430\u0432\u043d\u043e\u0433\u043e workflow","text":"<pre><code>n8n \u2192 Workflows \u2192 Import from File\n\u2192 n8n-personal-assistant-ollama.json\n</code></pre>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#2-credentials","title":"\u0428\u0430\u0433 2: \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 credentials","text":"<p>Telegram Bot: <pre><code>n8n \u2192 Credentials \u2192 Add \u2192 Telegram API\nAccess Token: (\u043e\u0442 @BotFather)\n</code></pre></p> <p>Home Assistant: <pre><code>n8n \u2192 Credentials \u2192 Add \u2192 Home Assistant\nHost: http://HA_IP:8123\nAccess Token: (Long-Lived Token \u0438\u0437 HA)\n</code></pre></p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#3-workflow","title":"\u0428\u0430\u0433 3: \u0417\u0430\u043c\u0435\u043d\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0432 \u0433\u043b\u0430\u0432\u043d\u043e\u043c workflow","text":"<p>Node \"Ollama Model\": - Base URL: <code>http://OLLAMA_VM_IP:11434</code> - Model: <code>phi3:mini</code></p> <p>Node \"HA Get All States\": - Credential: \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 Home Assistant</p> <p>\u0412\u0441\u0435 Telegram nodes: - User ID: \u0432\u0430\u0448 Telegram ID - Credential: \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 Telegram Bot</p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#4-tool-sub-workflows","title":"\u0428\u0430\u0433 4: \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 Tool sub-workflows","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 2 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0445 workflow \u0434\u043b\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 Agent.</p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#tool-1-get-sensor-value","title":"Tool 1: Get Sensor Value","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 workflow: \"Tool: Get Sensor Value\"</p> <p>Nodes:</p> <ol> <li> <p>Start Node (\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f)</p> </li> <li> <p>Home Assistant node:</p> </li> <li>Resource: <code>State</code></li> <li>Operation: <code>Get</code></li> <li>Entity ID: <code>={{ $json.entity_id }}</code></li> <li> <p>Credential: Home Assistant</p> </li> <li> <p>Code node (\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u0430): <pre><code>const state = $input.item.json;\nconst value = state.state;\nconst unit = state.attributes.unit_of_measurement || '';\nconst name = state.attributes.friendly_name || state.entity_id;\n\nreturn [{\n  json: {\n    result: `${name}: ${value}${unit}`\n  }\n}];\n</code></pre></p> </li> </ol> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 workflow, \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0435\u0433\u043e ID \u0438\u0437 URL.</p> <p>\u0412 \u0433\u043b\u0430\u0432\u043d\u043e\u043c workflow: - Node \"Tool Get Sensor\" \u2192 <code>workflowId</code>: \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 ID</p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#tool-2-list-devices","title":"Tool 2: List Devices","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 workflow: \"Tool: List Devices\"</p> <p>Nodes:</p> <ol> <li> <p>Start Node</p> </li> <li> <p>Home Assistant node:</p> </li> <li>Resource: <code>State</code></li> <li>Operation: <code>Get All</code></li> <li> <p>Credential: Home Assistant</p> </li> <li> <p>Code node (\u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e domain): <pre><code>const domain = $json.domain || 'sensor';\nconst allStates = $input.all();\n\nconst filtered = allStates.filter(item =&gt; {\n  const entityId = item.json.entity_id;\n  return entityId.startsWith(domain + '.');\n});\n\nconst devices = filtered.map(item =&gt; ({\n  entity_id: item.json.entity_id,\n  name: item.json.attributes.friendly_name || item.json.entity_id,\n  state: item.json.state\n}));\n\nreturn [{\n  json: {\n    domain: domain,\n    count: devices.length,\n    devices: devices\n  }\n}];\n</code></pre></p> </li> </ol> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 workflow, \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 ID.</p> <p>\u0412 \u0433\u043b\u0430\u0432\u043d\u043e\u043c workflow: - Node \"Tool List Devices\" \u2192 <code>workflowId</code>: \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 ID</p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#5","title":"\u0428\u0430\u0433 5: \u0410\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u044f","text":"<ol> <li>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 workflow</li> <li>\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u0443\u0439\u0442\u0435 (toggle \u0441\u043f\u0440\u0430\u0432\u0430 \u0432\u0432\u0435\u0440\u0445\u0443)</li> <li>Telegram \u2192 \u0432\u0430\u0448 \u0431\u043e\u0442 \u2192 <code>/start</code></li> </ol>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#memory","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0441 Memory","text":"<pre><code>\u0412\u044b: \u041a\u0430\u043a\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u043e\u0439?\n\u0411\u043e\u0442: \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u043e\u0439: 22.5\u00b0C\n\n\u0412\u044b: \u0410 \u0432 \u0441\u043f\u0430\u043b\u044c\u043d\u0435?\n\u0411\u043e\u0442: \u0412 \u0441\u043f\u0430\u043b\u044c\u043d\u0435 21\u00b0C\n\n(\u0411\u043e\u0442 \u043f\u043e\u043c\u043d\u0438\u0442 \u0447\u0442\u043e \u0440\u0435\u0447\u044c \u043e \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0435!)\n\n\u0412\u044b: \u041a\u0430\u043a\u0438\u0435 \u0434\u0430\u0442\u0447\u0438\u043a\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u0438?\n\u0411\u043e\u0442: \u0414\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u043e:\n     \u2022 \u041a\u043e\u0440\u0438\u0434\u043e\u0440 - 2 \u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434\n     \u2022 \u041a\u0443\u0445\u043d\u044f - \u0430\u043a\u0442\u0438\u0432\u043d\u043e \u0441\u0435\u0439\u0447\u0430\u0441\n\n\u0412\u044b: \u0410 \u0434\u0430\u0442\u0447\u0438\u043a\u0438 \u0434\u0432\u0435\u0440\u0435\u0439?\n\u0411\u043e\u0442: \u0412\u0441\u0435 \u0434\u0432\u0435\u0440\u0438 \u0437\u0430\u043a\u0440\u044b\u0442\u044b\n\n(\u0411\u043e\u0442 \u043f\u043e\u043c\u043d\u0438\u0442 \u0447\u0442\u043e \u0440\u0435\u0447\u044c \u043e \u0434\u0430\u0442\u0447\u0438\u043a\u0430\u0445!)\n\n\u0412\u044b: /clear\n\u0411\u043e\u0442: \ud83d\uddd1\ufe0f \u041f\u0430\u043c\u044f\u0442\u044c \u043e\u0447\u0438\u0449\u0435\u043d\u0430\n\n\u0412\u044b: \u0410 \u0432 \u0441\u043f\u0430\u043b\u044c\u043d\u0435?\n\u0411\u043e\u0442: \u0423\u0442\u043e\u0447\u043d\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 - \u0447\u0442\u043e \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0437\u043d\u0430\u0442\u044c \u043e \u0441\u043f\u0430\u043b\u044c\u043d\u0435?\n\n(\u041f\u0430\u043c\u044f\u0442\u044c \u043e\u0447\u0438\u0449\u0435\u043d\u0430, \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d)\n</code></pre>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#memory_1","title":"\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 Memory","text":"<p>Memory Buffer Window node: - \u0425\u0440\u0430\u043d\u0438\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 10 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 (\u043f\u0430\u0440\u044b user-assistant) - Session key = <code>chat_id</code> (\u043a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e) - \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f \u0432 Agent \u043a\u0430\u043a \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 - <code>/clear</code> \u043e\u0447\u0438\u0449\u0430\u0435\u0442 \u043f\u0430\u043c\u044f\u0442\u044c \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e chat_id</p> <p>\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 n8n Langchain node - \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438\u0437 \u043a\u043e\u0440\u043e\u0431\u043a\u0438, \u0431\u0435\u0437 \u0440\u0443\u0447\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430!</p>"},{"location":"integrations/PERSONAL-ASSISTANT-OLLAMA/#nodes","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 nodes","text":"Node Type \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 Telegram Trigger <code>n8n-nodes-base.telegramTrigger</code> \u041f\u0440\u0438\u0435\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 Home Assistant <code>n8n-nodes-base.homeAssistant</code> HA \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 Ollama Chat Model <code>@n8n/n8n-nodes-langchain.lmChatOllama</code> LLM Memory Buffer <code>@n8n/n8n-nodes-langchain.memoryBufferWindow</code> \u041f\u0430\u043c\u044f\u0442\u044c Agent <code>@n8n/n8n-nodes-langchain.agent</code> \u0410\u0433\u0435\u043d\u0442 Tool Workflow <code>@n8n/n8n-nodes-langchain.toolWorkflow</code> \u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b Code <code>n8n-nodes-base.code</code> \u041b\u043e\u0433\u0438\u043a\u0430 If <code>n8n-nodes-base.if</code> \u0423\u0441\u043b\u043e\u0432\u0438\u044f Set <code>n8n-nodes-base.set</code> \u0414\u0430\u043d\u043d\u044b\u0435 <p>\u041d\u0438\u043a\u0430\u043a\u0438\u0445 \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u0445 \u043f\u043b\u0430\u0433\u0438\u043d\u043e\u0432 - \u0432\u0441\u0435 \u0438\u0437 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 n8n!</p> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442: Ollama \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 OLLAMA-PROXMOX-COMPLETE-GUIDE.md \u041c\u043e\u0434\u0435\u043b\u044c: phi3:mini (2.3GB \u0434\u043b\u044f GTX 1050 Ti 4GB) Nodes: 11 (\u0432\u0441\u0435 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435) \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2-4 \u0441\u0435\u043a \u043d\u0430 \u043e\u0442\u0432\u0435\u0442 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e</p>"},{"location":"integrations/QUICK-REFERENCE/","title":"\u0411\u044b\u0441\u0442\u0440\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 - Ollama + Whisper \u043d\u0430 Proxmox","text":"<p>\u0414\u0430\u0442\u0430: \u041d\u043e\u044f\u0431\u0440\u044c 8, 2025 \u0421\u0442\u0430\u0442\u0443\u0441: \u2705 Production Ready</p>"},{"location":"integrations/QUICK-REFERENCE/#_1","title":"\ud83d\udccd \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":""},{"location":"integrations/QUICK-REFERENCE/#_2","title":"\u0421\u0435\u0442\u044c","text":"<ul> <li>Proxmox Host: 192.168.1.124</li> <li>VM 103 (ollama-vm): 192.168.1.131</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#_3","title":"\u0421\u0435\u0440\u0432\u0438\u0441\u044b","text":"<ul> <li>Ollama API: http://192.168.1.131:11434</li> <li>Whisper API: http://192.168.1.131:9000</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#vm","title":"\u0420\u0435\u0441\u0443\u0440\u0441\u044b VM","text":"<ul> <li>CPU: 4 cores (AMD Ryzen 5 2600)</li> <li>RAM: 10GB</li> <li>Disk: 64GB</li> <li>GPU: NVIDIA P106-100 (6GB VRAM, passthrough)</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#ollama","title":"\ud83e\udd16 Ollama","text":""},{"location":"integrations/QUICK-REFERENCE/#_4","title":"\u041c\u043e\u0434\u0435\u043b\u0438","text":"<pre><code># \u0421\u043f\u0438\u0441\u043e\u043a \u043c\u043e\u0434\u0435\u043b\u0435\u0439\ncurl http://192.168.1.131:11434/api/tags\n\n# \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e:\n- llama3.1:8b (4.7GB) - \u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f\n- phi3:mini (2.3GB) - \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0430\u044f\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#_5","title":"\u0422\u0435\u0441\u0442","text":"<pre><code># \u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\ncurl http://192.168.1.131:11434/api/generate -d '{\n  \"model\": \"llama3.1:8b\",\n  \"prompt\": \"\u041f\u0440\u0438\u0432\u0435\u0442! \u041a\u0430\u043a \u0434\u0435\u043b\u0430?\",\n  \"stream\": false\n}'\n\n# \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 35-45 tokens/sec\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#_6","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435","text":"<pre><code># SSH \u0432 VM\nssh gfer@192.168.1.131\n\n# \u0421\u0442\u0430\u0442\u0443\u0441\nsystemctl status ollama.service\n\n# \u041b\u043e\u0433\u0438\njournalctl -u ollama.service -f\n\n# GPU \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\nwatch -n 1 nvidia-smi\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#whisper","title":"\ud83c\udfa4 Whisper","text":""},{"location":"integrations/QUICK-REFERENCE/#api-endpoints","title":"API Endpoints","text":"<pre><code># Health check\ncurl http://192.168.1.131:9000/health\n# {\"status\":\"ok\"}\n\n# \u0422\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u044f\ncurl -X POST http://192.168.1.131:9000/transcribe \\\n  -F \"audio=@file.wav\"\n# {\"text\":\"...\"}\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#_7","title":"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<ul> <li>11 \u0441\u0435\u043a \u0430\u0443\u0434\u0438\u043e \u2192 0.56 \u0441\u0435\u043a (19x realtime)</li> <li>2.2 \u0441\u0435\u043a \u0430\u0443\u0434\u0438\u043e \u2192 0.44 \u0441\u0435\u043a (5x realtime)</li> <li>CUDA: \u2705 GPU \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#_8","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435","text":"<pre><code># \u0421\u0442\u0430\u0442\u0443\u0441\nsudo systemctl status whisper-api.service\n\n# \u041b\u043e\u0433\u0438\nsudo journalctl -u whisper-api.service -f\n\n# \u0420\u0435\u0441\u0442\u0430\u0440\u0442\nsudo systemctl restart whisper-api.service\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#proxmox-vm-management","title":"\ud83d\udd27 Proxmox VM Management","text":""},{"location":"integrations/QUICK-REFERENCE/#vm-103","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 VM 103","text":"<pre><code># SSH \u0432 Proxmox\nssh root@192.168.1.124\n\n# \u0421\u0442\u0430\u0442\u0443\u0441 VM\nqm status 103\n\n# \u0421\u0442\u0430\u0440\u0442/\u0421\u0442\u043e\u043f\nqm start 103\nqm stop 103\nqm shutdown 103\n\n# \u041a\u043e\u043d\u0444\u0438\u0433\ncat /etc/pve/qemu-server/103.conf\n\n# \u041a\u043e\u043d\u0441\u043e\u043b\u044c\nqm terminal 103\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#_9","title":"\u0423\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438","text":"<pre><code># \u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c VM\nqm shutdown 103\n\n# \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c RAM (\u0432 MB)\nqm set 103 --memory 12288  # 12GB\n\n# \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\nqm start 103\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#backupsnapshot","title":"Backup/Snapshot","text":"<pre><code># \u0421\u043e\u0437\u0434\u0430\u0442\u044c snapshot\nqm snapshot 103 before-update\n\n# \u0421\u043f\u0438\u0441\u043e\u043a snapshots\nqm listsnapshot 103\n\n# \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\nqm rollback 103 before-update\n\n# Backup\nvzdump 103 --mode snapshot --storage local --compress zstd\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"integrations/QUICK-REFERENCE/#ollama_1","title":"Ollama \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442","text":"<pre><code>ssh gfer@192.168.1.131\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441\nsystemctl status ollama.service\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0440\u0442\nss -tlnp | grep 11434\n\n# \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\nsudo systemctl restart ollama.service\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c GPU\nnvidia-smi\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#whisper_1","title":"Whisper \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441\nsudo systemctl status whisper-api.service\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0440\u0442\nsudo ss -tlnp | grep 9000\n\n# \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\nsudo systemctl restart whisper-api.service\n\n# \u0422\u0435\u0441\u0442 CLI\ncd ~/whisper.cpp\n./build/bin/whisper-cli -m models/ggml-base.bin -f samples/jfk.wav\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#vm_1","title":"VM \u043d\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f","text":"<pre><code># \u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435\nssh root@192.168.1.124\n\n# \u041b\u043e\u0433\u0438 VM\nqm status 103\njournalctl -xe | grep -i \"103\"\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u0430\u043c\u044f\u0442\u044c \u0445\u043e\u0441\u0442\u0430\nfree -h\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c GPU binding\nlspci -nnk | grep -A 3 nvidia\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: Kernel driver in use: vfio-pci\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#gpu","title":"GPU \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f","text":"<pre><code># \u0412 VM\nssh gfer@192.168.1.131\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e GPU \u0432\u0438\u0434\u0435\u043d\nlspci | grep -i nvidia\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u0440\u0430\u0439\u0432\u0435\u0440\nnvidia-smi\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c Ollama \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435\nsystemctl show ollama.service | grep CUDA\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c Whisper\nldd ~/whisper.cpp/build/bin/whisper-cli | grep cuda\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#_10","title":"\ud83d\udcca \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":""},{"location":"integrations/QUICK-REFERENCE/#_11","title":"\u041e\u0431\u0449\u0430\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>Telegram Voice (10 \u0441\u0435\u043a)\n    \u2193\nWhisper API (0.5 \u0441\u0435\u043a) \u2190 GPU\n    \u2193\nllama3.1:8b (2-5 \u0441\u0435\u043a) \u2190 GPU\n    \u2193\nTelegram Response\n\n\u0418\u0442\u043e\u0433\u043e: 3-6 \u0441\u0435\u043a \ud83d\ude80\n</code></pre>"},{"location":"integrations/QUICK-REFERENCE/#_12","title":"\u041c\u0435\u0442\u0440\u0438\u043a\u0438","text":"<ul> <li>Whisper: 19x realtime \u043d\u0430 GPU</li> <li>Ollama: 35-45 tok/s \u043d\u0430 GPU</li> <li>VRAM:</li> <li>Ollama: ~5GB</li> <li>Whisper: ~1GB</li> <li>\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e: ~0GB (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c)</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#_13","title":"\ud83d\udd17 \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","text":"<ul> <li>OLLAMA-PROXMOX-COMPLETE-GUIDE.md - \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Ollama + GPU</li> <li>WHISPER-SETUP.md - \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Whisper</li> <li>n8n-personal-assistant-ollama-simple.json - n8n workflow (ready to import)</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#checklist","title":"\u2705 Checklist \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438","text":""},{"location":"integrations/QUICK-REFERENCE/#proxmox","title":"Proxmox \u0445\u043e\u0441\u0442","text":"<ul> <li>[ ] IOMMU enabled \u0432 BIOS</li> <li>[ ] GRUB \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d (<code>iommu=pt</code>)</li> <li>[ ] VFIO \u043c\u043e\u0434\u0443\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b</li> <li>[ ] GPU \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a vfio-pci</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#vm-103_1","title":"VM 103","text":"<ul> <li>[ ] Ubuntu 22.04.5 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d</li> <li>[ ] GPU \u0432\u0438\u0434\u0435\u043d \u0432 VM (<code>lspci | grep nvidia</code>)</li> <li>[ ] NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d (<code>nvidia-smi</code>)</li> <li>[ ] Ollama \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0438 \u0437\u0430\u043f\u0443\u0449\u0435\u043d</li> <li>[ ] llama3.1:8b \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d</li> <li>[ ] CUDA toolkit \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d</li> <li>[ ] Whisper.cpp \u0441\u043e\u0431\u0440\u0430\u043d \u0441 CUDA</li> <li>[ ] Whisper API \u0437\u0430\u043f\u0443\u0449\u0435\u043d</li> </ul>"},{"location":"integrations/QUICK-REFERENCE/#_14","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b","text":"<ul> <li>[ ] <code>curl http://192.168.1.131:11434/api/tags</code> \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>[ ] <code>curl http://192.168.1.131:9000/health</code> \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>[ ] GPU \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 nvidia-smi</li> <li>[ ] Whisper \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0438\u0440\u0443\u0435\u0442 \u0437\u0430 &lt; 1 \u0441\u0435\u043a</li> </ul> <p>\u0412\u0435\u0440\u0441\u0438\u044f: 1.0 \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435: \u041d\u043e\u044f\u0431\u0440\u044c 8, 2025 \u0410\u0432\u0442\u043e\u0440: AI Assistant + Community</p>"},{"location":"integrations/README-meteostation/","title":"\ud83c\udf24\ufe0f n8n Workflow: \u041c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u044f + AI \u043f\u0440\u043e\u0433\u043d\u043e\u0437","text":"<p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b \u0432 Telegram \u043d\u0430 \u0431\u0430\u0437\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u0438, \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u043e\u0433\u043e\u0434\u0430 \u0438 GigaChat AI.</p>"},{"location":"integrations/README-meteostation/#_1","title":"\ud83c\udfaf \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u2705 \u0421\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u043c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u0438 (\u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430, \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c, \u0432\u0435\u0442\u0435\u0440, \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435, \u0423\u0424, PM2.5, \u043f\u043e\u0447\u0432\u0430)</li> <li>\u2705 \u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043e\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u043e\u0433\u043e\u0434\u0430 API \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0438 \u0437\u0430\u0432\u0442\u0440\u0430</li> <li>\u2705 AI \u0430\u043d\u0430\u043b\u0438\u0437 \u0447\u0435\u0440\u0435\u0437 GigaChat \u0441 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u043d\u044b\u043c\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u043c\u0438</li> <li>\u2705 \u041a\u0440\u0430\u0441\u0438\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 Telegram \u0441 \u043a\u043b\u0438\u043a\u0430\u0431\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u0441\u044b\u043b\u043a\u0430\u043c\u0438</li> <li>\u2705 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435: \u043a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c \u0432 07:00</li> </ul>"},{"location":"integrations/README-meteostation/#_2","title":"\ud83d\udcca \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 07:00\n  \u251c\u2500\u2192 HA: \u0412\u0441\u0435 \u0434\u0430\u0442\u0447\u0438\u043a\u0438 \u2192 \u0424\u0438\u043b\u044c\u0442\u0440 \u043c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u0438 \u2192 \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c [0]\n  \u2514\u2500\u2192 \u042f\u043d\u0434\u0435\u043a\u0441: \u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u2192 \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c [1]\n           \u2193\n    \u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u2192 UUID \u2192 GigaChat: \u0422\u043e\u043a\u0435\u043d \u2192 AI: \u041f\u0440\u043e\u043c\u043f\u0442 \u2192 GigaChat: \u0410\u043d\u0430\u043b\u0438\u0437\n           \u2193\n    \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u2192 TG: \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c + HA: \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\n</code></pre> <p>13 \u0443\u0437\u043b\u043e\u0432, 2 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445, combineAll</p>"},{"location":"integrations/README-meteostation/#_3","title":"\ud83d\ude80 \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":""},{"location":"integrations/README-meteostation/#1-n8n","title":"1. \u0418\u043c\u043f\u043e\u0440\u0442 \u0432 n8n","text":"<pre><code>n8n \u2192 Import from File \u2192 n8n-meteostation-ai.json \u2192 Replace\n</code></pre>"},{"location":"integrations/README-meteostation/#2","title":"2. \u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b","text":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0413\u0434\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>YOUR_YANDEX_WEATHER_API_KEY</code> \u0423\u0437\u0435\u043b \"\u042f\u043d\u0434\u0435\u043a\u0441: \u041f\u0440\u043e\u0433\u043d\u043e\u0437\" \u0412\u0430\u0448 \u043a\u043b\u044e\u0447 \u0441 yandex.ru/pogoda/b2b <code>YOUR_LATITUDE</code> / <code>YOUR_LONGITUDE</code> \u0423\u0437\u0435\u043b \"\u042f\u043d\u0434\u0435\u043a\u0441: \u041f\u0440\u043e\u0433\u043d\u043e\u0437\" (URL) \u0412\u0430\u0448\u0438 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b <code>YOUR_GIGACHAT_AUTHORIZATION_KEY</code> \u0423\u0437\u0435\u043b \"GigaChat: \u0422\u043e\u043a\u0435\u043d\" Base64 \u043a\u043b\u044e\u0447 GigaChat <code>YOUR_TELEGRAM_CHAT_ID</code> \u0423\u0437\u0435\u043b \"TG: \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\" \u0412\u0430\u0448 Chat ID (\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0443 @userinfobot)"},{"location":"integrations/README-meteostation/#3-credentials","title":"3. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 credentials","text":"<ul> <li>Home Assistant: URL + Long-Lived Access Token</li> <li>Telegram: Bot Token \u043e\u0442 @BotFather</li> </ul>"},{"location":"integrations/README-meteostation/#4","title":"4. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0434\u0430\u0442\u0447\u0438\u043a\u0438","text":"<p>\u0412 \u0443\u0437\u043b\u0435 \"\u0424\u0438\u043b\u044c\u0442\u0440 \u043c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u0438\" \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0441\u0432\u043e\u0438:</p> <pre><code>const sensorMap = {\n  'sensor.YOUR_TEMP': 'temp',\n  'sensor.YOUR_HUMIDITY': 'humidity',\n  // ... \u0438 \u0442.\u0434.\n};\n</code></pre>"},{"location":"integrations/README-meteostation/#ai","title":"\ud83e\udd16 AI \u041f\u0440\u043e\u043c\u043f\u0442","text":""},{"location":"integrations/README-meteostation/#_4","title":"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u043c\u043f\u0442","text":"<pre><code>\"\u0422\u044b \u0441\u0438\u043d\u043e\u043f\u0442\u0438\u043a-\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u043d\u0442. \u0414\u0430\u0432\u0430\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u041f\u041e\u041b\u0415\u0417\u041d\u042b\u0415 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438:\n\u043e\u0434\u0435\u0436\u0434\u0430, \u0437\u043e\u043d\u0442, \u0430\u0432\u0442\u043e, \u0434\u043e\u043c, \u043e\u0433\u043e\u0440\u043e\u0434. \u041a\u0420\u0410\u0422\u041a\u041e. \u041c\u0430\u043a\u0441 120 \u0441\u043b\u043e\u0432. \u0411\u0435\u0437 \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e\u0441\u0442\u0435\u0439.\"\n</code></pre>"},{"location":"integrations/README-meteostation/#_5","title":"\u0424\u043e\u0440\u043c\u0430\u0442 \u043e\u0442\u0432\u0435\u0442\u0430","text":"<pre><code>\ud83d\udcca \u041f\u0420\u041e\u0413\u041d\u041e\u0417: [1 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u043e \u0441\u0435\u0433\u043e\u0434\u043d\u044f+\u0437\u0430\u0432\u0442\u0440\u0430]\n\n\ud83d\udca1 \u0420\u0415\u041a\u041e\u041c\u0415\u041d\u0414\u0410\u0426\u0418\u0418:\n\u2022 \u041e\u0434\u0435\u0436\u0434\u0430: [\u0447\u0442\u043e \u043d\u0430\u0434\u0435\u0442\u044c]\n\u2022 \u0417\u043e\u043d\u0442: [\u0431\u0440\u0430\u0442\u044c/\u043d\u0435 \u0431\u0440\u0430\u0442\u044c]\n\u2022 \u0410\u0432\u0442\u043e: [\u043f\u0440\u043e\u0433\u0440\u0435\u0432/\u0441\u0442\u0451\u043a\u043b\u0430/\u0434\u043e\u0440\u043e\u0433\u0430 - \u0435\u0441\u043b\u0438 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e]\n\u2022 \u0414\u043e\u043c: [\u043f\u0440\u043e\u0432\u0435\u0442\u0440\u0438\u0432\u0430\u043d\u0438\u0435/\u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435]\n\u2022 \u041e\u0433\u043e\u0440\u043e\u0434: [\u043f\u043e\u043b\u0438\u0432 - \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e]\n\n\u26a0\ufe0f \u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415: [\u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0436\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f]\n</code></pre>"},{"location":"integrations/README-meteostation/#_6","title":"\u041f\u0440\u0430\u0432\u0438\u043b\u043e","text":"<p>\u0415\u0441\u043b\u0438 \u043d\u0435\u0447\u0435\u0433\u043e \u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e \u043f\u0443\u043d\u043a\u0442\u0443 - \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0435\u0433\u043e. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0440\u0430\u0434\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0439 \u043d\u0435 \u043d\u0443\u0436\u043d\u044b - \u0442\u043e\u043b\u044c\u043a\u043e \u0420\u0415\u0410\u041b\u042c\u041d\u0410\u042f \u043f\u043e\u043b\u044c\u0437\u0430!</p>"},{"location":"integrations/README-meteostation/#_7","title":"\ud83d\udcf1 \u041f\u0440\u0438\u043c\u0435\u0440 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f","text":"<pre><code>\ud83c\udf24\ufe0f \u041f\u0420\u041e\u0413\u041d\u041e\u0417 \u041f\u041e\u0413\u041e\u0414\u042b \u041a\u041f \u041c\u0410\u0421\u0422\u0415\u0420\u0413\u0420\u0410\u0414\n\n\u0421\u0415\u0419\u0427\u0410\u0421:\n\ud83c\udf21\ufe0f \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: 10.6\u00b0C (\u043e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f 10.6\u00b0C)\n\ud83d\udca7 \u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: 97% \u2022 \ud83c\udf21\ufe0f\ud83d\udca6 \u0422\u043e\u0447\u043a\u0430 \u0440\u043e\u0441\u044b: 10.1\u00b0C\n\ud83c\udf2c\ufe0f \u0412\u0435\u0442\u0435\u0440: 2.9 \u043c/\u0441 \u0412 \u2022 \ud83d\udca8 \u041f\u043e\u0440\u044b\u0432\u044b: 3.5 \u043c/\u0441\n\ud83c\udf88 \u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435: 742 \u043c\u043c \u0440\u0442.\u0441\u0442.\n\u2600\ufe0f \u041e\u0441\u0430\u0434\u043a\u0438: 0 \u043c\u043c/\u0447 (\u0437\u0430 \u0434\u0435\u043d\u044c 0 \u043c\u043c)\n\u2600\ufe0f \u0423\u0424-\u0438\u043d\u0434\u0435\u043a\u0441: 0\n\ud83d\ude0a \u0412\u043e\u0437\u0434\u0443\u0445 PM2.5: 5\n\ud83c\udf31 \u041f\u043e\u0447\u0432\u0430: 60% (11.1\u00b0C)\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\ud83d\udcca \u041f\u0420\u041e\u0413\u041d\u041e\u0417:\n\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u043f\u0430\u0441\u043c\u0443\u0440\u043d\u043e +10\u00b0C. \u0417\u0430\u0432\u0442\u0440\u0430 \u0445\u043e\u043b\u043e\u0434\u043d\u0435\u0435 +4\u00b0C \u0441 \u043c\u043e\u043a\u0440\u044b\u043c \u0441\u043d\u0435\u0433\u043e\u043c.\n\n\ud83d\udca1 \u0420\u0415\u041a\u041e\u041c\u0415\u041d\u0414\u0410\u0426\u0418\u0418:\n\u2022 \u041e\u0434\u0435\u0436\u0434\u0430: \u0442\u0451\u043f\u043b\u0430\u044f \u043a\u0443\u0440\u0442\u043a\u0430, \u043d\u0435\u043f\u0440\u043e\u043c\u043e\u043a\u0430\u0435\u043c\u0430\u044f \u043e\u0431\u0443\u0432\u044c\n\u2022 \u0417\u043e\u043d\u0442: \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\n\u2022 \u0410\u0432\u0442\u043e: \u0437\u0430\u0432\u0442\u0440\u0430 \u043f\u0440\u043e\u0433\u0440\u0435\u0432 5 \u043c\u0438\u043d, \u043d\u0435\u0437\u0430\u043c\u0435\u0440\u0437\u0430\u0439\u043a\u0430\n\u2022 \u041e\u0433\u043e\u0440\u043e\u0434: \u043f\u043e\u043b\u0438\u0432 \u043d\u0435 \u043d\u0443\u0436\u0435\u043d - \u0437\u0430\u0432\u0442\u0440\u0430 \u043e\u0441\u0430\u0434\u043a\u0438\n\n\u26a0\ufe0f \u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415:\n\u041c\u043e\u043a\u0440\u044b\u0439 \u0441\u043d\u0435\u0433 - \u043d\u0430\u043a\u0440\u043e\u0439\u0442\u0435 \u0442\u0435\u043f\u043b\u043e\u043b\u044e\u0431\u0438\u0432\u044b\u0435 \u0440\u0430\u0441\u0442\u0435\u043d\u0438\u044f.\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n[\u041c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u044f](https://eyera.info) \u2022 07:00\nLLM: GigaChat | \u041f\u0440\u043e\u0433\u043d\u043e\u0437: \u042f\u043d\u0434\u0435\u043a\u0441. | AI \u0430\u0433\u0435\u043d\u0442: n8n\n</code></pre>"},{"location":"integrations/README-meteostation/#_8","title":"\ud83d\udd27 \u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0435\u0442\u0430\u043b\u0438","text":""},{"location":"integrations/README-meteostation/#api","title":"API","text":"<ul> <li>Yandex.Weather v2: <code>GET /v2/forecast</code></li> <li>GigaChat OAuth: <code>POST /api/v2/oauth</code></li> <li>GigaChat Chat: <code>POST /api/v1/chat/completions</code></li> </ul>"},{"location":"integrations/README-meteostation/#_9","title":"\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0443\u0437\u043b\u044b","text":"<ul> <li>\u042f\u043d\u0434\u0435\u043a\u0441: \u041f\u0440\u043e\u0433\u043d\u043e\u0437: REST API v2 (\u043d\u0435 GraphQL!)</li> <li>\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438: <code>combineAll</code> \u0434\u043b\u044f 2 \u0432\u0445\u043e\u0434\u043e\u0432</li> <li>\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435: \u041f\u0430\u0440\u0441\u0438\u043d\u0433 REST API, 18 \u0442\u0438\u043f\u043e\u0432 \u043f\u043e\u0433\u043e\u0434\u044b</li> <li>AI: \u041f\u0440\u043e\u043c\u043f\u0442: \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u043c\u043f\u0442 (100 \u0441\u043b\u043e\u0432 max)</li> <li>TG: \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c: <code>append_attribution: false</code> (\u0431\u0435\u0437 \u0430\u0432\u0442\u043e\u043f\u043e\u0434\u043f\u0438\u0441\u0438 n8n)</li> </ul>"},{"location":"integrations/README-meteostation/#18","title":"\u0421\u043b\u043e\u0432\u0430\u0440\u044c \u043f\u043e\u0433\u043e\u0434\u044b (18 \u0442\u0438\u043f\u043e\u0432)","text":"<pre><code>'clear', 'partly-cloudy', 'cloudy', 'overcast', 'drizzle',\n'light-rain', 'rain', 'moderate-rain', 'heavy-rain',\n'continuous-heavy-rain', 'showers', 'wet-snow', 'light-snow',\n'snow', 'snow-showers', 'hail', 'thunderstorm',\n'thunderstorm-with-rain', 'thunderstorm-with-hail'\n</code></pre>"},{"location":"integrations/README-meteostation/#_10","title":"\ud83e\uddea \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"integrations/README-meteostation/#api_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 API \u043a\u043b\u044e\u0447\u0430","text":"<pre><code>curl -X GET \"https://api.weather.yandex.ru/v2/forecast?lat=55.939302&amp;lon=36.612150\" \\\n  -H \"X-Yandex-Weather-Key: YOUR_KEY\"\n</code></pre> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: <pre><code>{\n  \"fact\": {\"temp\": 10, \"condition\": \"overcast\"},\n  \"forecasts\": [\n    {\"date\": \"2025-10-09\", \"parts\": {...}},\n    {\"date\": \"2025-10-10\", \"parts\": {\"day\": {...}, \"night\": {...}}}\n  ]\n}\n</code></pre></p>"},{"location":"integrations/README-meteostation/#workflow","title":"\u041e\u0442\u043b\u0430\u0434\u043a\u0430 workflow","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 Output \u0443\u0437\u043b\u0430 \"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435\": <pre><code>{\n  \"yandex_now\": \"10\u00b0C, \u043f\u0430\u0441\u043c\u0443\u0440\u043d\u043e\",\n  \"forecast_tomorrow_day\": \"4..4\u00b0C, \u0434\u043e\u0436\u0434\u044c \u0441\u043e \u0441\u043d\u0435\u0433\u043e\u043c\",\n  \"forecast_tomorrow_night\": \"3..4\u00b0C, \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0434\u043e\u0436\u0434\u044c\"\n}\n</code></pre></p> <p>\u0415\u0441\u043b\u0438 <code>\"\u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\"</code> - \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 \u0443\u0437\u043b\u0435 \"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438\" (\u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442 \u042f\u043d\u0434\u0435\u043a\u0441 \u043d\u0435 \u043f\u0440\u0438\u0445\u043e\u0434\u044f\u0442).</p>"},{"location":"integrations/README-meteostation/#_11","title":"\ud83d\udcc1 \u0424\u0430\u0439\u043b\u044b","text":"<ul> <li><code>n8n-meteostation-ai.local.json</code> - \u0440\u0430\u0431\u043e\u0447\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0441 \u043a\u043b\u044e\u0447\u0430\u043c\u0438 (\u043d\u0435 \u0434\u043b\u044f \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438)</li> <li><code>n8n-meteostation-ai.json</code> - \u0448\u0430\u0431\u043b\u043e\u043d \u0441 \u0437\u0430\u0433\u043b\u0443\u0448\u043a\u0430\u043c\u0438 (\u0434\u043b\u044f \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044f)</li> </ul>"},{"location":"integrations/README-meteostation/#_12","title":"\u2705 \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430","text":"<p>\u2705 REST API v2 - \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u043e\u0433\u043e\u0434\u0430 \u2705 \u041a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 AI \u043e\u0442\u0432\u0435\u0442\u044b - 100-120 \u0441\u043b\u043e\u0432, \u0431\u0435\u0437 \"\u0432\u043e\u0434\u044b\" \u2705 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 - \u043e\u0434\u0435\u0436\u0434\u0430, \u0437\u043e\u043d\u0442, \u0430\u0432\u0442\u043e, \u0434\u043e\u043c, \u043e\u0433\u043e\u0440\u043e\u0434 \u2705 \u0411\u0430\u043b\u0430\u043d\u0441 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0439 - \u043d\u0435 \u0432\u0441\u0435 5 \u043f\u0443\u043d\u043a\u0442\u043e\u0432 \u0432\u0441\u0435\u0433\u0434\u0430, \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0435 \u2705 \u041a\u043b\u0438\u043a\u0430\u0431\u0435\u043b\u044c\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 - Telegram Markdown \u2705 \u0411\u0435\u0437 \u0430\u0432\u0442\u043e\u043f\u043e\u0434\u043f\u0438\u0441\u0438 - \u0447\u0438\u0441\u0442\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435</p>"},{"location":"integrations/README-meteostation/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"integrations/README-meteostation/#_13","title":"\"\u0417\u0430\u0432\u0442\u0440\u0430 \u043f\u043e\u0433\u043e\u0434\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430\"","text":"<p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u0423\u0437\u0435\u043b \"\u042f\u043d\u0434\u0435\u043a\u0441: \u041f\u0440\u043e\u0433\u043d\u043e\u0437\" \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0451\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438\".</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: 1. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 Output \u0443\u0437\u043b\u0430 \"\u042f\u043d\u0434\u0435\u043a\u0441: \u041f\u0440\u043e\u0433\u043d\u043e\u0437\" - \u0435\u0441\u0442\u044c \u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435? 2. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 connections - \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043a \"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438\"? 3. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c <code>combineAll</code> \u043d\u0430 <code>combineByIndex</code></p>"},{"location":"integrations/README-meteostation/#forbidden-api","title":"\"Forbidden\" \u043e\u0442 \u042f\u043d\u0434\u0435\u043a\u0441 API","text":"<p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 API \u043a\u043b\u044e\u0447 \u0438\u043b\u0438 endpoint.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: - \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 <code>/v2/forecast</code>, \u0430 \u043d\u0435 <code>/graphql/query</code> - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043b\u044e\u0447: \u043e\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u043e\u0433\u043e\u0434\u0430 - \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 curl (\u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u044b\u0448\u0435)</p>"},{"location":"integrations/README-meteostation/#n8n","title":"\u0410\u0432\u0442\u043e\u043f\u043e\u0434\u043f\u0438\u0441\u044c n8n \u0432\u0441\u0451 \u0435\u0449\u0451 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f","text":"<p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 \u0443\u0437\u0435\u043b \"TG: \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\": <pre><code>\"append_attribution\": false\n</code></pre></p> <p>\u0412\u0435\u0440\u0441\u0438\u044f: 2.3 (\u0444\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f) \u0414\u0430\u0442\u0430: 2025-10-09 \u0421\u0442\u0430\u0442\u0443\u0441: \u2705 \u041f\u0420\u041e\u0414\u0410\u041a\u0428\u0415\u041d</p>"},{"location":"integrations/SECURITY-README/","title":"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","text":""},{"location":"integrations/SECURITY-README/#_2","title":"\ud83d\udd12 \u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0437\u0430\u0449\u0438\u0442\u044b","text":"<p>\u0412\u0441\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 (\u0442\u043e\u043a\u0435\u043d\u044b, \u043f\u0430\u0440\u043e\u043b\u0438, API \u043a\u043b\u044e\u0447\u0438) \u041d\u0415 \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u043e\u043f\u0430\u0434\u0430\u0442\u044c \u0432 Git!</p>"},{"location":"integrations/SECURITY-README/#_3","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0444\u0430\u0439\u043b\u043e\u0432","text":"<p>\u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e workflow/\u043a\u043e\u043d\u0444\u0438\u0433\u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 2 \u0432\u0435\u0440\u0441\u0438\u0438:</p>"},{"location":"integrations/SECURITY-README/#1-git","title":"1. \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f (\u0432 Git)","text":"<ul> <li>\u0424\u0430\u0439\u043b: <code>workflow-name.json</code></li> <li>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442: \u043f\u043b\u0435\u0439\u0441\u0445\u043e\u043b\u0434\u0435\u0440\u044b \u0432\u043c\u0435\u0441\u0442\u043e \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b:</li> <li><code>YOUR_BOT_TOKEN</code></li> <li><code>YOUR_HA_CREDENTIAL_ID</code></li> <li><code>YOUR_TELEGRAM_CHAT_ID</code></li> <li><code>YOUR_API_KEY</code></li> </ul>"},{"location":"integrations/SECURITY-README/#2-git","title":"2. \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f (\u041d\u0415 \u0432 Git)","text":"<ul> <li>\u0424\u0430\u0439\u043b: <code>workflow-name.local.json</code></li> <li>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442: \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0442\u043e\u043a\u0435\u043d\u044b \u0438 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 <code>.gitignore</code></li> </ul>"},{"location":"integrations/SECURITY-README/#_4","title":"\ud83d\udccb \u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":""},{"location":"integrations/SECURITY-README/#n8n-workflows","title":"n8n Workflows","text":"<pre><code># \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0448\u0430\u0431\u043b\u043e\u043d (\u0432 Git)\ndocs/integrations/n8n-voice-assistant-control-ollama.json\n\n# \u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f (\u041d\u0415 \u0432 Git)\ndocs/integrations/n8n-voice-assistant-control-ollama.local.json\n</code></pre>"},{"location":"integrations/SECURITY-README/#mcp","title":"MCP \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<pre><code># \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0448\u0430\u0431\u043b\u043e\u043d (\u0432 Git)\n.cursor/mcp.json\n\n# \u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f (\u041d\u0415 \u0432 Git)\n.cursor/mcp.local.json\n</code></pre>"},{"location":"integrations/SECURITY-README/#esphome","title":"ESPHome","text":"<pre><code># \u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0448\u0430\u0431\u043b\u043e\u043d (\u0432 Git)\nesphome/device.yaml\n\n# \u0427\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 (\u041d\u0415 \u0432 Git)\nesphome/secrets.yaml\n</code></pre>"},{"location":"integrations/SECURITY-README/#_5","title":"\ud83d\udee1\ufe0f \u0427\u0442\u043e \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442\u0441\u044f","text":""},{"location":"integrations/SECURITY-README/#1","title":"1. \u0422\u043e\u043a\u0435\u043d\u044b \u0438 \u043a\u043b\u044e\u0447\u0438","text":"<ul> <li>\u274c Telegram Bot Token</li> <li>\u274c Home Assistant Long-Lived Access Token</li> <li>\u274c OpenAI / GigaChat API Keys</li> <li>\u274c Yandex Weather API Key</li> <li>\u274c OAuth credentials</li> </ul>"},{"location":"integrations/SECURITY-README/#2","title":"2. \u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","text":"<ul> <li>\u274c Chat IDs (Telegram)</li> <li>\u274c IP \u0430\u0434\u0440\u0435\u0441\u0430 (\u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435/\u0432\u043d\u0435\u0448\u043d\u0438\u0435)</li> <li>\u274c \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b GPS</li> <li>\u274c \u0418\u043c\u0435\u043d\u0430 \u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043c\u0435\u0441\u0442</li> </ul>"},{"location":"integrations/SECURITY-README/#3","title":"3. \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<ul> <li>\u274c WiFi \u043f\u0430\u0440\u043e\u043b\u0438</li> <li>\u274c SSH \u043a\u043b\u044e\u0447\u0438</li> <li>\u274c SAMBA credentials</li> <li>\u274c Database passwords</li> </ul>"},{"location":"integrations/SECURITY-README/#workflow","title":"\u2705 \u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 workflow","text":""},{"location":"integrations/SECURITY-README/#_6","title":"\u041f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430","text":"<ol> <li> <p>\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0448\u0430\u0431\u043b\u043e\u043d \u0432 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439: <pre><code>cp n8n-workflow.json n8n-workflow.local.json\n</code></pre></p> </li> <li> <p>\u0417\u0430\u043c\u0435\u043d\u0438 \u043f\u043b\u0435\u0439\u0441\u0445\u043e\u043b\u0434\u0435\u0440\u044b \u043d\u0430 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 <code>.local.json</code>:</p> </li> <li><code>YOUR_BOT_TOKEN</code> \u2192 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u0431\u043e\u0442\u0430</li> <li><code>YOUR_HA_CREDENTIAL_ID</code> \u2192 ID credential \u0438\u0437 n8n</li> <li> <p><code>YOUR_TELEGRAM_CHAT_ID</code> \u2192 \u0442\u0432\u043e\u0439 chat ID</p> </li> <li> <p>\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0439 \u0432 n8n \u0444\u0430\u0439\u043b <code>.local.json</code></p> </li> <li> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439 credentials \u0432 n8n (\u043e\u043d\u0438 \u043d\u0435 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f)</p> </li> </ol>"},{"location":"integrations/SECURITY-README/#workflow_1","title":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 workflow","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u043c\u0435\u043d\u044f\u0435\u0448\u044c \u043b\u043e\u0433\u0438\u043a\u0443 workflow:</p> <ol> <li> <p>\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0439 \u0438\u0437 n8n \u2192 \u0441\u043e\u0445\u0440\u0430\u043d\u0438 \u043a\u0430\u043a <code>.local.json</code></p> </li> <li> <p>\u0421\u043e\u0437\u0434\u0430\u0439 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e: <pre><code>cp workflow.local.json workflow.json\n</code></pre></p> </li> <li> <p>\u0417\u0430\u043c\u0435\u043d\u0438 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u043f\u043b\u0435\u0439\u0441\u0445\u043e\u043b\u0434\u0435\u0440\u044b \u0432 <code>workflow.json</code>: <pre><code># \u041f\u0440\u0438\u043c\u0435\u0440 \u0441 sed\nsed -i 's/bot[0-9]*:[A-Za-z0-9_-]*/botYOUR_BOT_TOKEN/g' workflow.json\nsed -i 's/eyJ[A-Za-z0-9_-]*\\.[A-Za-z0-9_-]*\\.[A-Za-z0-9_-]*/YOUR_HA_TOKEN/g' workflow.json\n</code></pre></p> </li> <li> <p>Commit \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0444\u0430\u0439\u043b: <pre><code>git add workflow.json\ngit commit -m \"Update workflow logic\"\n</code></pre></p> </li> </ol>"},{"location":"integrations/SECURITY-README/#commit","title":"\ud83d\udd0d \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0435\u0440\u0435\u0434 commit","text":""},{"location":"integrations/SECURITY-README/#_7","title":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 pre-commit hook:</p> <pre><code># .git/hooks/pre-commit\n#!/bin/bash\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u0442\u043e\u043a\u0435\u043d\u044b\nif git diff --cached | grep -iE '(bot[0-9]{9,}:[A-Za-z0-9_-]{35}|eyJ[A-Za-z0-9_-]{100,})'; then\n    echo \"\u274c \u041e\u0428\u0418\u0411\u041a\u0410: \u041d\u0430\u0439\u0434\u0435\u043d \u0442\u043e\u043a\u0435\u043d \u0432 \u043a\u043e\u043c\u043c\u0438\u0442\u0435!\"\n    echo \"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 .local.json \u0444\u0430\u0439\u043b\u044b \u0434\u043b\u044f \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445\"\n    exit 1\nfi\n\necho \"\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430\"\nexit 0\n</code></pre>"},{"location":"integrations/SECURITY-README/#_8","title":"\u0420\u0443\u0447\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<p>\u041f\u0435\u0440\u0435\u0434 <code>git push</code>:</p> <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u043d\u0435\u0442 .local \u0444\u0430\u0439\u043b\u043e\u0432\ngit status | grep \".local\"\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 staged \u0444\u0430\u0439\u043b\u043e\u0432\ngit diff --cached | grep -iE \"(token|password|secret|key|credential)\"\n</code></pre>"},{"location":"integrations/SECURITY-README/#gitignore","title":"\ud83d\udcdd .gitignore \u043f\u0440\u0430\u0432\u0438\u043b\u0430","text":"<p>\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 (\u0432 <code>.gitignore</code>):</p> <pre><code># n8n workflows \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438\n*.local.json\n**/*.local.json\n\n# MCP \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f\n.cursor/mcp.json\n.cursor/mcp.local.json\n\n# ESPHome \u0441\u0435\u043a\u0440\u0435\u0442\u044b\n**/esphome/secrets.yaml\n\n# API \u043a\u043b\u044e\u0447\u0438\n*key*.json\n*token*.json\n*secret*.json\n\n# Credentials\n**/credentials.json\n**/*.credentials.json\n\n# Environment\n.env\n*.local\n*.local.*\n</code></pre>"},{"location":"integrations/SECURITY-README/#git","title":"\ud83d\udea8 \u0415\u0441\u043b\u0438 \u0442\u043e\u043a\u0435\u043d \u043f\u043e\u043f\u0430\u043b \u0432 Git","text":""},{"location":"integrations/SECURITY-README/#1_1","title":"1. \u041d\u0435\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u043e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0442\u043e\u043a\u0435\u043d","text":"<ul> <li>Telegram Bot: @BotFather \u2192 revoke token</li> <li>Home Assistant: Profile \u2192 Long-Lived Tokens \u2192 Delete</li> </ul>"},{"location":"integrations/SECURITY-README/#2-git_1","title":"2. \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 Git","text":"<p>\u26a0\ufe0f \u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415: \u042d\u0442\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u0448\u0435\u0442 \u0438\u0441\u0442\u043e\u0440\u0438\u044e!</p> <pre><code># \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 BFG Repo-Cleaner\ngit clone --mirror https://github.com/user/repo.git\nbfg --replace-text passwords.txt repo.git\ncd repo.git\ngit reflog expire --expire=now --all\ngit gc --prune=now --aggressive\ngit push --force\n</code></pre>"},{"location":"integrations/SECURITY-README/#3_1","title":"3. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u043e\u043a\u0435\u043d","text":"<p>\u0412\u0441\u0435\u0433\u0434\u0430 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0439 \u043d\u043e\u0432\u044b\u0435 \u0442\u043e\u043a\u0435\u043d\u044b \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0435\u0442\u0430\u0446\u0438\u0438.</p>"},{"location":"integrations/SECURITY-README/#_9","title":"\ud83d\udcda \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","text":""},{"location":"integrations/SECURITY-README/#_10","title":"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u043f\u043b\u0435\u0439\u0441\u0445\u043e\u043b\u0434\u0435\u0440\u043e\u0432","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0435 \u043f\u043b\u0435\u0439\u0441\u0445\u043e\u043b\u0434\u0435\u0440\u044b:</p> <ul> <li><code>YOUR_BOT_TOKEN</code> - Telegram Bot Token</li> <li><code>YOUR_HA_CREDENTIAL_ID</code> - Home Assistant credential ID \u0438\u0437 n8n</li> <li><code>YOUR_HA_TOKEN</code> - Home Assistant Long-Lived Access Token</li> <li><code>YOUR_TELEGRAM_CHAT_ID</code> - Telegram Chat ID</li> <li><code>YOUR_API_KEY</code> - \u041b\u044e\u0431\u043e\u0439 API \u043a\u043b\u044e\u0447</li> <li><code>YOUR_IP</code> - IP \u0430\u0434\u0440\u0435\u0441</li> <li><code>YOUR_LATITUDE</code> / <code>YOUR_LONGITUDE</code> - \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b</li> </ul>"},{"location":"integrations/SECURITY-README/#_11","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<p>\u0412 README \u043a\u0430\u0436\u0434\u043e\u0433\u043e workflow \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0439:</p> <pre><code>## \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\n\n1. \u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439 `workflow.json` \u0432 `workflow.local.json`\n2. \u0417\u0430\u043c\u0435\u043d\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043b\u0435\u0439\u0441\u0445\u043e\u043b\u0434\u0435\u0440\u044b:\n   - `YOUR_BOT_TOKEN` \u2192 \u043f\u043e\u043b\u0443\u0447\u0438 \u043e\u0442 @BotFather\n   - `YOUR_HA_TOKEN` \u2192 \u0441\u043e\u0437\u0434\u0430\u0439 \u0432 HA Profile \u2192 Long-Lived Tokens\n3. \u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0439 `workflow.local.json` \u0432 n8n\n</code></pre> <p>\u041f\u043e\u043c\u043d\u0438: \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c &gt; \u0423\u0434\u043e\u0431\u0441\u0442\u0432\u043e! \ud83d\udd12</p> <p>\u041b\u0443\u0447\u0448\u0435 \u043f\u043e\u0442\u0440\u0430\u0442\u0438\u0442\u044c 2 \u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 <code>.local</code> \u043a\u043e\u043f\u0438\u0438, \u0447\u0435\u043c \u043f\u043e\u0442\u043e\u043c \u043c\u0435\u043d\u044f\u0442\u044c \u0432\u0441\u0435 \u0442\u043e\u043a\u0435\u043d\u044b.</p>"},{"location":"integrations/WHISPER-SETUP/","title":"Whisper.cpp \u0434\u043b\u044f Ollama VM - \u0420\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0447\u0438","text":"<p>\u0414\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c\u0443 \u0433\u0430\u0439\u0434\u0443 OLLAMA-PROXMOX-COMPLETE-GUIDE.md</p> <p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f: - VM ID: 103 (ollama-vm) - VM IP: 192.168.1.131 - Proxmox Host: 192.168.1.124 - GPU: NVIDIA P106-100 (6GB VRAM)</p>"},{"location":"integrations/WHISPER-SETUP/#whisper-vm","title":"\u0417\u0430\u0447\u0435\u043c Whisper \u0432 \u0442\u043e\u0439 \u0436\u0435 VM?","text":"<p>Whisper.cpp - \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0432\u0438\u0436\u043e\u043a \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u044f \u0440\u0435\u0447\u0438 \u043e\u0442 OpenAI:</p> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0432 VM \u0441 Ollama: - \u2705 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0442\u0443 \u0436\u0435 GPU \u0434\u043b\u044f \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u0438 - \u2705 \u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e (\u0431\u0435\u0437 OpenAI API costs ~$0.006/\u043c\u0438\u043d) - \u2705 \u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c (\u0433\u043e\u043b\u043e\u0441 \u043d\u0435 \u0443\u0445\u043e\u0434\u0438\u0442 \u0432 \u043e\u0431\u043b\u0430\u043a\u043e) - \u2705 \u0411\u044b\u0441\u0442\u0440\u0435\u0435 \u0447\u0435\u043c \u043e\u0431\u043b\u0430\u0447\u043d\u044b\u0435 API (\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u043d\u0430 GPU) - \u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 n8n \u0447\u0435\u0440\u0435\u0437 REST API</p> <p>\u0420\u0435\u0441\u0443\u0440\u0441\u044b: - VRAM: ~0.5-1GB (CPU \u0432\u0435\u0440\u0441\u0438\u044f) \u0438\u043b\u0438 ~1-2GB (CUDA \u0432\u0435\u0440\u0441\u0438\u044f) - RAM: ~500MB-1GB - \u0414\u0438\u0441\u043a: ~150MB (base \u043c\u043e\u0434\u0435\u043b\u044c) - CPU: 4 \u044f\u0434\u0440\u0430 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e</p> <p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: - CPU \u0432\u0435\u0440\u0441\u0438\u044f: ~0.4x realtime (11 \u0441\u0435\u043a \u0430\u0443\u0434\u0438\u043e \u2192 4.5 \u0441\u0435\u043a \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438) - CUDA \u0432\u0435\u0440\u0441\u0438\u044f: ~19x realtime (11 \u0441\u0435\u043a \u0430\u0443\u0434\u0438\u043e \u2192 0.56 \u0441\u0435\u043a \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438) \u2705 \u041f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u043d\u0430 P106-100</p>"},{"location":"integrations/WHISPER-SETUP/#_1","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439","text":"<pre><code>ssh gfer@192.168.1.131\n\nsudo apt update\nsudo apt install -y git build-essential cmake ffmpeg python3-pip python3-venv\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#whispercpp","title":"\u041a\u043b\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u0441\u0431\u043e\u0440\u043a\u0430 Whisper.cpp","text":"<pre><code>cd ~\ngit clone https://github.com/ggerganov/whisper.cpp\ncd whisper.cpp\n\n# \u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c base (\u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u0430 \u0434\u043b\u044f \u0440\u0443\u0441\u0441\u043a\u043e\u0433\u043e \u044f\u0437\u044b\u043a\u0430)\nbash ./models/download-ggml-model.sh base\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0442\u043e \u043c\u043e\u0434\u0435\u043b\u044c \u0441\u043a\u0430\u0447\u0430\u043b\u0430\u0441\u044c\nls -lh models/ggml-base.bin\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#a-cpu","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 A: CPU \u0432\u0435\u0440\u0441\u0438\u044f (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":"<pre><code>cd ~/whisper.cpp\n\n# \u0421\u043e\u0431\u0440\u0430\u0442\u044c \u0431\u0435\u0437 CUDA\ncmake -B build\ncmake --build build --config Release -j\n\n# \u0422\u0435\u0441\u0442\n./build/bin/whisper-cli -m models/ggml-base.bin -f samples/jfk.wav\n</code></pre> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0432\u044b\u0432\u043e\u0434: <pre><code>[00:00:00.000 --&gt; 00:00:10.600] And so my fellow Americans, ask not what your country can do for you, ask what you can do for your country.\n\nwhisper_print_timings: total time = 4474.89 ms\n</code></pre></p>"},{"location":"integrations/WHISPER-SETUP/#b-cuda-gpu","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 B: CUDA \u0432\u0435\u0440\u0441\u0438\u044f (\u0434\u043b\u044f GPU \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f)","text":"<p>\u26a0\ufe0f \u0422\u0440\u0435\u0431\u0443\u0435\u0442: - 16GB+ RAM \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 (\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u044f \u043e\u0447\u0435\u043d\u044c \u043f\u0440\u043e\u0436\u043e\u0440\u043b\u0438\u0432\u0430\u044f) - CUDA toolkit \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0432 VM</p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 CUDA toolkit:</p> <pre><code># \u0421\u043a\u0430\u0447\u0430\u0442\u044c CUDA keyring\nwget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.1-1_all.deb\nsudo dpkg -i cuda-keyring_1.1-1_all.deb\n\n# \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c CUDA 12.2\nsudo apt update\nsudo apt install -y cuda-toolkit-12-2\n\n# \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 PATH\necho 'export PATH=/usr/local/cuda-12.2/bin:$PATH' &gt;&gt; ~/.bashrc\necho 'export LD_LIBRARY_PATH=/usr/local/cuda-12.2/lib64:$LD_LIBRARY_PATH' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\nnvcc --version\n</code></pre> <p>\u0421\u0431\u043e\u0440\u043a\u0430 Whisper \u0441 CUDA:</p> <pre><code>cd ~/whisper.cpp\nrm -rf build\n\nexport CUDA_HOME=/usr/local/cuda-12.2\nexport PATH=$CUDA_HOME/bin:$PATH\nexport LD_LIBRARY_PATH=$CUDA_HOME/lib64:$LD_LIBRARY_PATH\n\n# \u0421\u043e\u0431\u0440\u0430\u0442\u044c \u0411\u0415\u0417 -j (\u0438\u043d\u0430\u0447\u0435 \u0443\u0431\u044c\u0451\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0438\u0437-\u0437\u0430 \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0438 RAM)\ncmake -B build -DGGML_CUDA=ON\ncmake --build build --config Release\n\n# \u042d\u0442\u043e \u0437\u0430\u0439\u043c\u0435\u0442 20-30 \u043c\u0438\u043d\u0443\u0442\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 GPU \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438:</p> <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u0431\u0438\u043d\u0430\u0440\u043d\u0438\u043a \u043b\u0438\u043d\u043a\u0443\u0435\u0442\u0441\u044f \u0441 CUDA\nldd build/bin/whisper-cli | grep cuda\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c:\n# libcudart.so.12 =&gt; /usr/local/cuda-12.2/lib64/libcudart.so.12\n\n# \u0422\u0435\u0441\u0442 \u0441 GPU\n./build/bin/whisper-cli -m models/ggml-base.bin -f samples/jfk.wav\n\n# \u0412 \u0432\u044b\u0432\u043e\u0434\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c:\n# whisper_backend_init_gpu: device 0: NVIDIA P106-100\n# (\u0432\u043c\u0435\u0441\u0442\u043e \"device 0: CPU\")\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#rest-api-n8n","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 REST API \u0434\u043b\u044f n8n","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 Flask API \u0441\u0435\u0440\u0432\u0435\u0440:</p> <pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Flask\npip3 install flask\n\n# \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 PATH\necho 'export PATH=$HOME/.local/bin:$PATH' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n# \u0421\u043e\u0437\u0434\u0430\u0442\u044c API \u0441\u043a\u0440\u0438\u043f\u0442\nnano ~/whisper-api.py\n</code></pre> <p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u0430:</p> <pre><code>from flask import Flask, request, jsonify\nimport subprocess\nimport os\nimport tempfile\n\napp = Flask(__name__)\n\nWHISPER_PATH = \"/home/gfer/whisper.cpp/build/bin/whisper-cli\"\nMODEL_PATH = \"/home/gfer/whisper.cpp/models/ggml-base.bin\"\n\n@app.route('/transcribe', methods=['POST'])\ndef transcribe():\n    if 'audio' not in request.files:\n        return jsonify({'error': 'No audio file'}), 400\n\n    audio_file = request.files['audio']\n\n    # \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\n    with tempfile.NamedTemporaryFile(delete=False, suffix='.wav') as tmp:\n        audio_file.save(tmp.name)\n        tmp_path = tmp.name\n\n    try:\n        # \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Whisper\n        result = subprocess.run([\n            WHISPER_PATH,\n            '-m', MODEL_PATH,\n            '-f', tmp_path,\n            '--output-txt'\n        ], capture_output=True, text=True, timeout=30)\n\n        # \u041f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n        txt_file = tmp_path + '.txt'\n        if os.path.exists(txt_file):\n            with open(txt_file, 'r') as f:\n                text = f.read().strip()\n            os.remove(txt_file)\n        else:\n            text = result.stdout\n\n        os.remove(tmp_path)\n\n        return jsonify({'text': text})\n\n    except Exception as e:\n        return jsonify({'error': str(e)}), 500\n\n@app.route('/health', methods=['GET'])\ndef health():\n    return jsonify({'status': 'ok'})\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=9000)\n</code></pre> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 (Ctrl+O, Enter, Ctrl+X)</p>"},{"location":"integrations/WHISPER-SETUP/#systemd-service","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 systemd service","text":"<pre><code>sudo nano /etc/systemd/system/whisper-api.service\n</code></pre> <p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435:</p> <pre><code>[Unit]\nDescription=Whisper API Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=gfer\nWorkingDirectory=/home/gfer\nExecStart=/usr/bin/python3 /home/gfer/whisper-api.py\nRestart=always\nRestartSec=10\nEnvironment=\"PATH=/home/gfer/.local/bin:/usr/local/bin:/usr/bin\"\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>\u0410\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u044f:</p> <pre><code># \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441\nsudo systemctl daemon-reload\nsudo systemctl enable whisper-api.service\nsudo systemctl start whisper-api.service\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\nsudo systemctl status whisper-api.service\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#api","title":"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 API","text":"<pre><code># Health check\ncurl http://192.168.1.131:9000/health\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0432\u0435\u0440\u043d\u0443\u0442\u044c: {\"status\":\"ok\"}\n\n# \u0422\u0435\u0441\u0442 \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u0438 \u0441 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c\ncurl -X POST http://192.168.1.131:9000/transcribe \\\n  -F \"audio=@samples/jfk.wav\"\n\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0432\u0435\u0440\u043d\u0443\u0442\u044c JSON \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u043c\n</code></pre> <p>\u0421 Proxmox \u0445\u043e\u0441\u0442\u0430 \u0438\u043b\u0438 n8n:</p> <pre><code>curl http://192.168.1.131:9000/health\n# {\"status\":\"ok\"}\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#n8n","title":"\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 n8n","text":"<p>\u0412 n8n workflow \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 HTTP Request node:</p> <p>\u0414\u043b\u044f Telegram \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439:</p> <ol> <li>Telegram Trigger \u2192 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0435 .ogg</li> <li>Convert Audio (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e) \u2192 .ogg \u2192 .wav \u0447\u0435\u0440\u0435\u0437 ffmpeg</li> <li>HTTP Request node:</li> <li>Method: <code>POST</code></li> <li>URL: <code>http://192.168.1.131:9000/transcribe</code></li> <li>Body Content Type: <code>Form-Data</code></li> <li>Body Parameters:<ul> <li>Name: <code>audio</code></li> <li>Type: <code>File</code></li> <li>Value: <code>={{ $binary.data }}</code></li> </ul> </li> <li>Extract \u2192 <code>{{ $json.text }}</code></li> <li>Ollama \u2192 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 llama3.1:8b</li> <li>Telegram \u2192 \u043e\u0442\u0432\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e</li> </ol> <p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c (\u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 P106-100): - 10 \u0441\u0435\u043a \u0433\u043e\u043b\u043e\u0441\u0430 \u2192 0.5 \u0441\u0435\u043a \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u0438 (CUDA) \ud83d\ude80 - + 2-5 \u0441\u0435\u043a \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043e\u0442\u0432\u0435\u0442\u0430 Ollama (llama3.1:8b) - \u0418\u0442\u043e\u0433\u043e: 3-6 \u0441\u0435\u043a \u043e\u0442 \u0433\u043e\u043b\u043e\u0441\u0430 \u0434\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u0430</p> <p>CPU \u0432\u0435\u0440\u0441\u0438\u044f (\u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0431\u0440\u0430\u0442\u044c CUDA): - 10 \u0441\u0435\u043a \u0433\u043e\u043b\u043e\u0441\u0430 \u2192 4-5 \u0441\u0435\u043a \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u0438 (CPU) - + 2-5 \u0441\u0435\u043a \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043e\u0442\u0432\u0435\u0442\u0430 Ollama - \u0418\u0442\u043e\u0433\u043e: 6-10 \u0441\u0435\u043a \u043e\u0442 \u0433\u043e\u043b\u043e\u0441\u0430 \u0434\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u0430</p>"},{"location":"integrations/WHISPER-SETUP/#_2","title":"\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0438 \u043b\u043e\u0433\u0438","text":"<pre><code># \u0421\u0442\u0430\u0442\u0443\u0441 API\nsudo systemctl status whisper-api.service\n\n# \u041b\u043e\u0433\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438\nsudo journalctl -u whisper-api.service -f\n\n# \u041b\u043e\u0433\u0438 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0447\u0430\u0441\nsudo journalctl -u whisper-api.service --since \"1 hour ago\"\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432\nhtop\n# Whisper \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c ~25-50% CPU \u043f\u0440\u0438 \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u0438\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#troubleshooting","title":"Troubleshooting","text":""},{"location":"integrations/WHISPER-SETUP/#api_1","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: API \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u0441\u0435\u0440\u0432\u0438\u0441 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\nsudo systemctl status whisper-api.service\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0440\u0442\nsudo ss -tlnp | grep 9000\n\n# \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\nsudo systemctl restart whisper-api.service\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#_3","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u041c\u0435\u0434\u043b\u0435\u043d\u043d\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u044f","text":"<ul> <li>CPU \u0432\u0435\u0440\u0441\u0438\u044f: 0.4x realtime - \u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e</li> <li>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 CUDA \u0432\u0435\u0440\u0441\u0438\u0438 (\u0432 3-5 \u0440\u0430\u0437 \u0431\u044b\u0441\u0442\u0440\u0435\u0435)</li> <li>\u0418\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c tiny \u0432\u043c\u0435\u0441\u0442\u043e base (\u0431\u044b\u0441\u0442\u0440\u0435\u0435, \u043d\u043e \u0445\u0443\u0436\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e):   <pre><code>bash ./models/download-ggml-model.sh tiny\n# \u041f\u043e\u043c\u0435\u043d\u044f\u0439\u0442\u0435 MODEL_PATH \u0432 whisper-api.py \u043d\u0430 ggml-tiny.bin\n</code></pre></li> </ul>"},{"location":"integrations/WHISPER-SETUP/#cuda","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: CUDA \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e CUDA \u0441\u043e\u0431\u0440\u0430\u043b\u0430\u0441\u044c\nldd build/bin/whisper-cli | grep cuda\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c CUDA toolkit\nnvcc --version\n\n# \u041f\u0435\u0440\u0435\u0441\u043e\u0431\u0440\u0430\u0442\u044c \u044f\u0432\u043d\u043e\ncd ~/whisper.cpp\nrm -rf build\ncmake -B build -DGGML_CUDA=ON\ncmake --build build --config Release\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#out-of-memory-cuda","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: Out of Memory \u043f\u0440\u0438 CUDA \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438","text":"<ul> <li>\u041a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0439\u0442\u0435 \u0411\u0415\u0417 <code>-j</code> \u0444\u043b\u0430\u0433\u0430 (\u043f\u043e \u043e\u0434\u043d\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0443)</li> <li>\u0418\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 CPU \u0432\u0435\u0440\u0441\u0438\u044e (\u0432\u043f\u043e\u043b\u043d\u0435 \u043f\u0440\u0438\u0435\u043c\u043b\u0435\u043c\u0430)</li> <li>\u0412\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 RAM VM \u0434\u043e 12-16GB \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438:   <pre><code># \u041d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435\nqm shutdown 103\nqm set 103 --memory 16384\nqm start 103\n# \u041f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043e\u0431\u0440\u0430\u0442\u043d\u043e\nqm shutdown 103\nqm set 103 --memory 10240\nqm start 103\n</code></pre></li> </ul>"},{"location":"integrations/WHISPER-SETUP/#_4","title":"\u0418\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Proxmox VE Host (192.168.1.124)            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 GPU: NVIDIA P106-100 \u2192 vfio-pci        \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502              \u2193 PCI Passthrough              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 Ubuntu VM (103): 192.168.1.131         \u2502 \u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\n\u2502  \u2502 \u2502 GPU: P106-100 (6GB VRAM)           \u2502 \u2502 \u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\n\u2502  \u2502 \u2502 Ollama :11434                      \u2502 \u2502 \u2502\n\u2502  \u2502 \u2502 llama3.1:8b (35-45 tok/s)          \u2502 \u2502 \u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\n\u2502  \u2502 \u2502 Whisper API :9000                  \u2502 \u2502 \u2502\n\u2502  \u2502 \u2502 base model (4.5s/11s audio)        \u2502 \u2502 \u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  n8n \u2192 Telegram Bot        \u2502\n\u2502  \ud83c\udfa4 Voice \u2192 AI \u2192 HA         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u0421\u0442\u0430\u0442\u0443\u0441: \u2705 CUDA \u0432\u0435\u0440\u0441\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0431\u0440\u0430\u043d\u0430 \u0438 \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0414\u0430\u0442\u0430: \u041d\u043e\u044f\u0431\u0440\u044c 8, 2025 \u0412\u0435\u0440\u0441\u0438\u044f: 1.1</p>"},{"location":"integrations/WHISPER-SETUP/#_5","title":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f (\u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435)","text":""},{"location":"integrations/WHISPER-SETUP/#1-samplesjfkwav-11","title":"\u0422\u0435\u0441\u0442 1: \u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442 (samples/jfk.wav, 11 \u0441\u0435\u043a)","text":"<p>CUDA \u0432\u0435\u0440\u0441\u0438\u044f: <pre><code>Device 0: NVIDIA P106-100, compute capability 6.1\nwhisper_backend_init_gpu: using CUDA0 backend\n\n\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \"And so my fellow Americans ask not what your country can do for you,\n            ask what you can do for your country.\"\n\n\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c:\n- encode time: 82.01 ms\n- total time: 563.50 ms (0.56 \u0441\u0435\u043a)\n- \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c: 19x realtime \u2705\n</code></pre></p> <p>\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0441 CPU \u0432\u0435\u0440\u0441\u0438\u0435\u0439: <pre><code>- CPU: 4474.89 ms (4.5 \u0441\u0435\u043a)\n- CUDA: 563.50 ms (0.56 \u0441\u0435\u043a)\n- \u0423\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u0435: 8x \u0431\u044b\u0441\u0442\u0440\u0435\u0435 \ud83d\ude80\n</code></pre></p>"},{"location":"integrations/WHISPER-SETUP/#2-test-ruwav-22","title":"\u0422\u0435\u0441\u0442 2: \u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442 (test-ru.wav, 2.2 \u0441\u0435\u043a)","text":"<p>CUDA \u0432\u0435\u0440\u0441\u0438\u044f: <pre><code>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0435\u0441\u043d\u0435\u0442 \u043d\u0430 \u043a\u0443\u0445\u043d\u0435.\" (espeak-generated, \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f)\n\n\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c:\n- encode time: 93.91 ms\n- total time: 438.08 ms (0.44 \u0441\u0435\u043a)\n- \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c: 5x realtime \u2705\n</code></pre></p>"},{"location":"integrations/WHISPER-SETUP/#3-api-http","title":"\u0422\u0435\u0441\u0442 3: API \u0447\u0435\u0440\u0435\u0437 HTTP","text":"<pre><code>curl -X POST http://192.168.1.131:9000/transcribe -F \"audio=@samples/jfk.wav\"\n</code></pre> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: <pre><code>{\"text\":\"And so my fellow Americans ask not what your country can do for you, ask what you can do for your country.\"}\n</code></pre></p> <p>\u0412\u0440\u0435\u043c\u044f \u043e\u0442\u0432\u0435\u0442\u0430: ~1 \u0441\u0435\u043a (\u0432\u043a\u043b\u044e\u0447\u0430\u044f HTTP overhead)</p>"},{"location":"integrations/WHISPER-SETUP/#systemd-service_1","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f systemd service","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430: <pre><code>sudo systemctl status whisper-api.service\n</code></pre></p> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0439 \u0432\u044b\u0432\u043e\u0434: <pre><code>\u25cf whisper-api.service - Whisper API Server\n   Active: active (running)\n   * Running on http://192.168.1.131:9000\n</code></pre></p> <p>\u0410\u0432\u0442\u043e\u0437\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435: <pre><code>sudo systemctl enable whisper-api.service\n</code></pre></p>"},{"location":"integrations/WHISPER-SETUP/#_6","title":"\u0424\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":""},{"location":"integrations/WHISPER-SETUP/#checklist-n8n","title":"Checklist \u043f\u0435\u0440\u0435\u0434 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0435\u0439 \u0441 n8n:","text":"<ul> <li>\u2705 CUDA toolkit \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d (<code>nvcc --version</code>)</li> <li>\u2705 Whisper.cpp \u0441\u043e\u0431\u0440\u0430\u043d \u0441 CUDA (<code>ldd build/bin/whisper-cli | grep cuda</code>)</li> <li>\u2705 GPU \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f (<code>whisper_backend_init_gpu: using CUDA0</code>)</li> <li>\u2705 Flask API \u0437\u0430\u043f\u0443\u0449\u0435\u043d (<code>systemctl status whisper-api.service</code>)</li> <li>\u2705 Health check \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 (<code>curl http://192.168.1.131:9000/health</code>)</li> <li>\u2705 \u0422\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 (\u0442\u0435\u0441\u0442 \u0447\u0435\u0440\u0435\u0437 curl)</li> <li>\u2705 \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 19x realtime \u043d\u0430 GPU</li> </ul> <p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0433\u043e\u0442\u043e\u0432\u0430 \u043a production \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e! \ud83c\udf89</p>"},{"location":"integrations/WHISPER-SETUP/#home-assistant","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 Home Assistant \u0447\u0435\u0440\u0435\u0437 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"integrations/WHISPER-SETUP/#n8n-workflow-ai-tools","title":"n8n Workflow \u0441 AI Tools","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 workflow: <code>n8n-voice-assistant-control-ollama.json</code></p> <p>\u041d\u043e\u0432\u044b\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438: - \ud83c\udf9b\ufe0f \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0447\u0435\u0440\u0435\u0437 \u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b - \ud83e\udde0 AI Tools - \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0441\u0430\u043c \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442 \u043d\u0443\u0436\u043d\u044b\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 - \u2705 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 - \u0431\u043e\u0442 \u0441\u043e\u043e\u0431\u0449\u0430\u0435\u0442 \u0447\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043b</p>"},{"location":"integrations/WHISPER-SETUP/#ai-tools","title":"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 AI Tools","text":""},{"location":"integrations/WHISPER-SETUP/#1-control-device-tool-","title":"1. Control Device Tool - \u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435/\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<p>\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 (\u0441\u0432\u0435\u0442, \u0432\u044b\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u0438, \u043a\u043b\u0438\u043c\u0430\u0442):</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043a\u043e\u043c\u0430\u043d\u0434: - \ud83c\udfa4 \"\u0412\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u043e\u0439\" - \ud83c\udfa4 \"\u0412\u044b\u043a\u043b\u044e\u0447\u0438 \u043a\u043e\u043d\u0434\u0438\u0446\u0438\u043e\u043d\u0435\u0440\" - \ud83c\udfa4 \"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438 \u043b\u044e\u0441\u0442\u0440\u0443\"</p> <p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430: - <code>light.*</code> - \u043e\u0441\u0432\u0435\u0449\u0435\u043d\u0438\u0435 - <code>switch.*</code> - \u0432\u044b\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u0438/\u0440\u043e\u0437\u0435\u0442\u043a\u0438 - <code>climate.*</code> - \u043a\u043b\u0438\u043c\u0430\u0442 (on/off \u0434\u043b\u044f \u0440\u0435\u0436\u0438\u043c\u043e\u0432) - <code>fan.*</code> - \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u044b - <code>cover.*</code> - \u0436\u0430\u043b\u044e\u0437\u0438/\u0448\u0442\u043e\u0440\u044b</p>"},{"location":"integrations/WHISPER-SETUP/#2-set-device-value-tool-","title":"2. Set Device Value Tool - \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439","text":"<p>\u0418\u0437\u043c\u0435\u043d\u044f\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432:</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043a\u043e\u043c\u0430\u043d\u0434: - \ud83c\udfa4 \"\u0421\u0434\u0435\u043b\u0430\u0439 \u043f\u043e\u044f\u0440\u0447\u0435\" (brightness \u0434\u043b\u044f \u0441\u0432\u0435\u0442\u0430) - \ud83c\udfa4 \"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443 \u043d\u0430 22 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\" - \ud83c\udfa4 \"\u0420\u0435\u0436\u0438\u043c \u043e\u0431\u043e\u0433\u0440\u0435\u0432\u0430\"</p> <p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b: - <code>brightness</code> (0-255) \u0434\u043b\u044f light - <code>temperature</code> \u0434\u043b\u044f climate - <code>hvac_mode</code> \u0434\u043b\u044f climate (heat, cool, auto, off)</p>"},{"location":"integrations/WHISPER-SETUP/#3-call-service-tool-","title":"3. Call Service Tool - \u0412\u044b\u0437\u043e\u0432 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432","text":"<p>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438 \u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438:</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043a\u043e\u043c\u0430\u043d\u0434: - \ud83c\udfa4 \"\u0412\u043a\u043b\u044e\u0447\u0438 \u0440\u0435\u0436\u0438\u043c \u043a\u0438\u043d\u043e\" (scene.turn_on) - \ud83c\udfa4 \"\u0417\u0430\u043f\u0443\u0441\u0442\u0438 \u0434\u043e\u0431\u0440\u043e\u0435 \u0443\u0442\u0440\u043e\" (script.good_morning)</p>"},{"location":"integrations/WHISPER-SETUP/#workflow","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 workflow","text":""},{"location":"integrations/WHISPER-SETUP/#1-n8n","title":"1. \u0418\u043c\u043f\u043e\u0440\u0442 \u0432 n8n","text":"<pre><code># \u0424\u0430\u0439\u043b: docs/integrations/n8n-voice-assistant-control-ollama.json\n</code></pre>"},{"location":"integrations/WHISPER-SETUP/#2-credentials","title":"2. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Credentials","text":"<p>Telegram Bot Token (3 \u043d\u043e\u0434\u044b): - Telegram Trigger - Send Command Response - Send AI Response</p> <p>Home Assistant API: - Get HA States (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439)</p> <p>Home Assistant Token (\u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f): \u041d\u0443\u0436\u0435\u043d \u043d\u043e\u0432\u044b\u0439 credential \u0442\u0438\u043f\u0430 <code>HTTP Header Auth</code>: - Header Name: <code>Authorization</code> - Header Value: <code>Bearer YOUR_HA_LONG_LIVED_TOKEN</code></p> <p>\u0413\u0434\u0435 \u0432\u0437\u044f\u0442\u044c \u0442\u043e\u043a\u0435\u043d: 1. Home Assistant \u2192 Profile (\u043b\u0435\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439 \u0443\u0433\u043e\u043b) 2. \u041f\u0440\u043e\u043a\u0440\u0443\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u0437 \u0434\u043e \"Long-Lived Access Tokens\" 3. \"Create Token\" \u2192 \u043d\u0430\u0437\u0432\u0430\u0442\u044c \"n8n Voice Control\" 4. \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043a\u0435\u043d</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u043d\u043e\u0434\u0430\u0445: - Execute Control - Execute Set Value - Execute Service</p>"},{"location":"integrations/WHISPER-SETUP/#3-ai-agent","title":"3. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 AI Agent","text":"<p>\u0423\u0431\u0435\u0434\u0438\u0441\u044c \u0447\u0442\u043e \u043a AI Agent \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b: - Chat Model: Ollama Model - Memory: Memory Buffer - Tools (3 \u0448\u0442\u0443\u043a\u0438):   - Tool: Control Device   - Tool: Set Device Value   - Tool: Call Service</p>"},{"location":"integrations/WHISPER-SETUP/#_7","title":"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"integrations/WHISPER-SETUP/#1","title":"\u0422\u0435\u0441\u0442 1: \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0442\u043e\u043c","text":"<p>\ud83c\udfa4 \"\u0412\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u043e\u0439\" - \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: \u2705 \u0421\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f, \u0431\u043e\u0442 \u043e\u0442\u0432\u0435\u0442\u0438\u0442 \"\u2705 \u0412\u043a\u043b\u044e\u0447\u0438\u043b \u0441\u0432\u0435\u0442 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u043e\u0439\"</p> <p>\ud83c\udfa4 \"\u0412\u044b\u043a\u043b\u044e\u0447\u0438 \u043b\u044e\u0441\u0442\u0440\u0443\" - \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: \u2705 \u041b\u044e\u0441\u0442\u0440\u0430 \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f</p> <p>\ud83c\udfa4 \"\u0421\u0434\u0435\u043b\u0430\u0439 \u043f\u043e\u044f\u0440\u0447\u0435\" - \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: \u2705 \u042f\u0440\u043a\u043e\u0441\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u0441\u044f (\u0435\u0441\u043b\u0438 \u0441\u0432\u0435\u0442 \u0431\u044b\u043b \u0432\u043a\u043b\u044e\u0447\u0435\u043d)</p>"},{"location":"integrations/WHISPER-SETUP/#2","title":"\u0422\u0435\u0441\u0442 2: \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c","text":"<p>\ud83c\udfa4 \"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443 \u043d\u0430 22\" - \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: \u2705 \u0422\u0435\u0440\u043c\u043e\u0441\u0442\u0430\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u043d\u0430 22\u00b0C</p> <p>\ud83c\udfa4 \"\u0412\u043a\u043b\u044e\u0447\u0438 \u043e\u0431\u043e\u0433\u0440\u0435\u0432\" - \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: \u2705 \u0420\u0435\u0436\u0438\u043c HVAC \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f \u043d\u0430 heat</p>"},{"location":"integrations/WHISPER-SETUP/#3","title":"\u0422\u0435\u0441\u0442 3: \u0412\u044b\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u0438","text":"<p>\ud83c\udfa4 \"\u0412\u043a\u043b\u044e\u0447\u0438 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\" - \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: \u2705 \u0412\u044b\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u044c \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f</p> <p>\ud83c\udfa4 \"\u0412\u044b\u043a\u043b\u044e\u0447\u0438 \u0440\u043e\u0437\u0435\u0442\u043a\u0443 \u043d\u0430 \u043a\u0443\u0445\u043d\u0435\" - \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f: \u2705 \u0420\u043e\u0437\u0435\u0442\u043a\u0430 \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f</p>"},{"location":"integrations/WHISPER-SETUP/#4","title":"\u0422\u0435\u0441\u0442 4: \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0434\u0438\u0430\u043b\u043e\u0433\u0430","text":"<p>\ud83c\udfa4 \"\u0412\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 \u0432 \u0441\u043f\u0430\u043b\u044c\u043d\u0435\" - \u2705 \u041e\u0442\u0432\u0435\u0442: \"\u0412\u043a\u043b\u044e\u0447\u0438\u043b \u0441\u0432\u0435\u0442 \u0432 \u0441\u043f\u0430\u043b\u044c\u043d\u0435\"</p> <p>\ud83c\udfa4 \"\u0410 \u0441\u0434\u0435\u043b\u0430\u0439 \u043f\u043e\u0442\u0435\u043c\u043d\u0435\u0435\" - \u2705 \u041e\u0442\u0432\u0435\u0442: \"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u043b \u044f\u0440\u043a\u043e\u0441\u0442\u044c\" (\u043f\u043e\u043c\u043d\u0438\u0442 \u0447\u0442\u043e \u0440\u0435\u0447\u044c \u043e \u0441\u0432\u0435\u0442\u0435 \u0432 \u0441\u043f\u0430\u043b\u044c\u043d\u0435)</p>"},{"location":"integrations/WHISPER-SETUP/#5","title":"\u0422\u0435\u0441\u0442 5: \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b (\u0431\u0435\u0437 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f)","text":"<p>\ud83c\udfa4 \"\u041a\u0430\u043a\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430?\" - \u2705 \u041e\u0442\u0432\u0435\u0442: \"\ud83c\udf21\ufe0f \u0412 \u0434\u043e\u043c\u0435 21\u00b0C...\" (\u0442\u043e\u043b\u044c\u043a\u043e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f, Tools \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f)</p> <p>\ud83c\udfa4 \"\u0427\u0442\u043e \u0441\u0435\u0439\u0447\u0430\u0441 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e?\" - \u2705 \u041e\u0442\u0432\u0435\u0442: \"\ud83d\udca1 \u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e: \u0441\u0432\u0435\u0442 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u043e\u0439...\" (\u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f)</p>"},{"location":"integrations/WHISPER-SETUP/#troubleshooting_1","title":"Troubleshooting","text":""},{"location":"integrations/WHISPER-SETUP/#tools","title":"Tools \u043d\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: AI \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u043e\u043c, \u043d\u043e \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: 1. \u041f\u0440\u043e\u0432\u0435\u0440\u044c \u0447\u0442\u043e \u0432\u0441\u0435 3 Tool \u043d\u043e\u0434\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u043a AI Agent (\u0432\u0445\u043e\u0434 <code>Tools</code>) 2. \u0423\u0431\u0435\u0434\u0438\u0441\u044c \u0447\u0442\u043e \u0432 System Prompt \u0435\u0441\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u0440\u043e Tools 3. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0431\u043e\u043b\u0435\u0435 \u044f\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b: \"\u0432\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 \u0441 entity_id light.living_room\"</p>"},{"location":"integrations/WHISPER-SETUP/#401-unauthorized","title":"\u041e\u0448\u0438\u0431\u043a\u0430 401 Unauthorized","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: <code>Execute Control/Value/Service</code> \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 401</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: 1. \u041f\u0440\u043e\u0432\u0435\u0440\u044c \u0447\u0442\u043e credential \"Home Assistant Token\" \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e 2. \u041f\u0440\u043e\u0432\u0435\u0440\u044c \u0442\u043e\u043a\u0435\u043d \u0432 Home Assistant (Profile \u2192 Long-Lived Access Tokens) 3. \u0423\u0431\u0435\u0434\u0438\u0441\u044c \u0447\u0442\u043e \u0442\u043e\u043a\u0435\u043d \u043d\u0435 \u0438\u0441\u0442\u0451\u043a</p>"},{"location":"integrations/WHISPER-SETUP/#device-not-found","title":"Device not found","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: AI \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u0447\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: 1. \u041f\u0440\u043e\u0432\u0435\u0440\u044c \u0447\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0435\u0441\u0442\u044c \u0432 Home Assistant 2. \u041f\u0440\u043e\u0432\u0435\u0440\u044c entity_id \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 (Developer Tools \u2192 States) 3. \u0423\u0431\u0435\u0434\u0438\u0441\u044c \u0447\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\" \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 AI</p>"},{"location":"integrations/WHISPER-SETUP/#ai","title":"AI \u043d\u0435 \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: AI \u043d\u0435 \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442 \u043a\u0430\u043a\u043e\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0443\u0436\u043d\u043e</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: 1. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0431\u043e\u043b\u0435\u0435 \u044f\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b: \"\u0432\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442\" \u0432\u043c\u0435\u0441\u0442\u043e \"\u0441\u0432\u0435\u0442\" 2. \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0439 \u0438\u043c\u044f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043a\u0430\u043a \u0432 Home Assistant 3. \u041e\u0442\u043f\u0440\u0430\u0432\u044c <code>/clear</code> \u0434\u043b\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430</p>"},{"location":"integrations/WHISPER-SETUP/#_8","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432","text":"<p>\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0432 Home Assistant (\u0432\u044b\u0434\u0435\u0440\u0436\u043a\u0430):</p> <p>\u0421\u0432\u0435\u0442 (light): - <code>light.esp32cam_light</code> - Tasmota cam - <code>light.athom_ws2812b</code> - RGB \u043b\u0435\u043d\u0442\u0430 - <code>light.birdbox_infrared</code> - \u0418\u041a \u043f\u043e\u0434\u0441\u0432\u0435\u0442\u043a\u0430 \u0441\u043a\u0432\u043e\u0440\u0435\u0447\u043d\u0438\u043a\u0430</p> <p>\u0412\u044b\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u0438 (switch): - <code>switch.sonoff_100169e371_1</code> - \u041b\u044e\u0441\u0442\u0440\u044b - <code>switch.sonoff_100169e371_2</code> - \u0411\u0440\u0430 - <code>switch.sonoff_100169e371_3</code> - \u0424\u0430\u0441\u0430\u0434 - <code>switch.sonoff_10001f3363</code> - \u041a\u0443\u0445\u043d\u044f - <code>switch.sonoff_ac0800382c</code> - \u0420\u043e\u0437\u0435\u0442\u043a\u0430 - <code>switch.teplyi_pol</code> - \u0422\u0451\u043f\u043b\u044b\u0439 \u043f\u043e\u043b</p> <p>\u041a\u043b\u0438\u043c\u0430\u0442 (climate): - <code>climate.warming_floor_smart</code> - \u0423\u043c\u043d\u044b\u0439 \u0442\u0451\u043f\u043b\u044b\u0439 \u043f\u043e\u043b - <code>climate.children_termostat</code> - \u0414\u0435\u0442\u0441\u043a\u0430\u044f \u0442\u0435\u0440\u043c\u043e\u0441\u0442\u0430\u0442 - <code>climate.kitchen_termostat</code> - \u041a\u0443\u0445\u043d\u044f \u0442\u0435\u0440\u043c\u043e\u0441\u0442\u0430\u0442 - <code>climate.living_room_termostat_2</code> - \u0413\u043e\u0441\u0442\u0438\u043d\u0430\u044f \u0442\u0435\u0440\u043c\u043e\u0441\u0442\u0430\u0442 - <code>climate.bedroom_termostat_2</code> - \u0421\u043f\u0430\u043b\u044c\u043d\u044f \u0442\u0435\u0440\u043c\u043e\u0441\u0442\u0430\u0442</p> <p>\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0438 (scene): - <code>scene.tv</code> - \u0420\u0435\u0436\u0438\u043c \u0422\u0412</p>"},{"location":"integrations/WHISPER-SETUP/#_9","title":"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0422\u0438\u043f\u0438\u0447\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u044b: 1. Whisper \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0430\u0446\u0438\u044f: 0.5-1 \u0441\u0435\u043a (CUDA) 2. Home Assistant state fetch: 0.2-0.5 \u0441\u0435\u043a 3. Ollama AI Agent + Tool: 2-4 \u0441\u0435\u043a 4. \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b HA: 0.1-0.3 \u0441\u0435\u043a</p> <p>\u0418\u0442\u043e\u0433\u043e: ~3-6 \u0441\u0435\u043a\u0443\u043d\u0434 \u043e\u0442 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0434\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u2705</p>"},{"location":"integrations/WHISPER-SETUP/#_10","title":"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f: - Tools \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 (\u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 HA) - \u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c (homeassistant.restart, etc) - \u0412\u0441\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043b\u043e\u0433\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0432 n8n Executions - \u0422\u043e\u043a\u0435\u043d \u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0432 Home Assistant</p> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438: - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 Long-Lived Token \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f n8n - \u041d\u0430\u0437\u043e\u0432\u0438 \u0435\u0433\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u043e: \"n8n Voice Control\" - \u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0439 \u043b\u043e\u0433\u0438 n8n Executions - \u041f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0434\u043e\u0431\u0430\u0432\u044c whitelist \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0432 \u043f\u0440\u043e\u043c\u043f\u0442 AI</p> <p>\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0441 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u0433\u043e\u0442\u043e\u0432! \ud83c\udf89\ud83c\udf9b\ufe0f</p>"},{"location":"integrations/n8n-ai-agents/","title":"\ud83e\udd16 AI \u0410\u0433\u0435\u043d\u0442\u044b n8n \u0434\u043b\u044f Home Assistant","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u044b\u0445 AI \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 LLM (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e, \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0420\u0424).</p> <p>\ud83d\ude80 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442:</p> <ul> <li>\ud83e\udd35 \u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435 - \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430 20 \u043c\u0438\u043d\u0443\u0442</li> <li>\ud83d\udcda \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 n8n - \u043e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f</li> </ul>"},{"location":"integrations/n8n-ai-agents/#n8n-nodered-ha","title":"\ud83c\udfaf \u0417\u0430\u0447\u0435\u043c n8n \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c NodeRED \u0438 HA?","text":""},{"location":"integrations/n8n-ai-agents/#_1","title":"\u0412\u0430\u0448\u0430 \u0442\u0435\u043a\u0443\u0449\u0430\u044f \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430","text":"<p>\u0427\u0442\u043e \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442:</p> <ul> <li>\u2705 Home Assistant - \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438, \u0431\u0430\u0437\u043e\u0432\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u2705 NodeRED - \u0441\u043b\u043e\u0436\u043d\u044b\u0435 flow \u0438 \u043b\u043e\u0433\u0438\u043a\u0430</li> <li>\u2705 HA Addons - \u0431\u044d\u043a\u0430\u043f\u044b, Telegram, Samba</li> <li>\u2705 MCP (Cursor) - AI \u043f\u043e\u043c\u043e\u0449\u044c \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435</li> <li>\u2705 Frigate/DeepStack - Computer Vision \u0434\u043b\u044f \u043a\u0430\u043c\u0435\u0440</li> </ul> <p>\u0427\u0442\u043e \u041d\u0415 \u0423\u041c\u0415\u042e\u0422 HA/NodeRED/Frigate:</p> <ul> <li>\u274c \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u044f\u0437\u044b\u043a\u0430 (NLP)</li> <li>\u274c RAG (\u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0432\u0430\u0448\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f\u043c)</li> <li>\u274c \u0410\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u044b\u0435 AI \u0430\u0433\u0435\u043d\u0442\u044b \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e</li> <li>\u274c \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u0434\u0430 \u0438\u0437 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c</li> <li>\u274c AI \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u043d\u0442 \u043f\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u274c \u041f\u0440\u0435\u0434\u0438\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u0441 LLM</li> </ul>"},{"location":"integrations/n8n-ai-agents/#n8n-ai","title":"\ud83e\udd16 n8n = \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430 \u0434\u043b\u044f AI \u0430\u0433\u0435\u043d\u0442\u043e\u0432","text":"<p>\u041a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e:</p> <pre><code>NodeRED: IF-THEN \u043b\u043e\u0433\u0438\u043a\u0430\nn8n + AI: \u041f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 \u0438 \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>NodeRED:\n  IF \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 &lt; 18 THEN \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435\n\nn8n AI Agent:\n  \"\u0414\u043e\u043c\u0430 \u0445\u043e\u043b\u043e\u0434\u043d\u043e\" \u2192 AI \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442:\n    - \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443 \u0432\u0441\u0435\u0445 15 \u0437\u043e\u043d\n    - \u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043f\u043e\u0433\u043e\u0434\u0443\n    - \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0432\u0440\u0435\u043c\u044f \u0441\u0443\u0442\u043e\u043a\n    - \u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0435\n    - \u041e\u0431\u044a\u044f\u0441\u043d\u044f\u0435\u0442 WHY\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#llm","title":"\ud83c\udfd7\ufe0f \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0441 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u043c\u0438 LLM (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e + \u0420\u0424)","text":""},{"location":"integrations/n8n-ai-agents/#_2","title":"\u0412\u0430\u0448\u0430 \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Proxmox Server (\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e)                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\n\u2502  \u2502  Home Assistant \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502      n8n         \u2502               \u2502\n\u2502  \u2502  VM/Container   \u2502         \u2502   (Container)    \u2502               \u2502\n\u2502  \u2502  192.168.1.20   \u2502         \u2502  192.168.1.50    \u2502               \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2502         \u2191                            \u2191                           \u2502\n\u2502         \u2502                            \u2502                           \u2502\n\u2502         \u2502                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                 \u2502\n\u2502         \u2502                    \u2502                \u2502                 \u2502\n\u2502         \u2502              \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502         \u2502              \u2502  Ollama   \u2502   \u2502  LM Studio  \u2502          \u2502\n\u2502         \u2502              \u2502 (LLM API) \u2502   \u2502  (optional) \u2502          \u2502\n\u2502         \u2502              \u2502 :11434    \u2502   \u2502   :1234     \u2502          \u2502\n\u2502         \u2502              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502         \u2502                    \u2191                                  \u2502\n\u2502         \u2502              \u250c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510                           \u2502\n\u2502         \u2502              \u2502  \u041c\u043e\u0434\u0435\u043b\u0438:   \u2502                           \u2502\n\u2502         \u2502              \u2502  - Llama 3  \u2502                           \u2502\n\u2502         \u2502              \u2502  - Mistral \u2502                           \u2502\n\u2502         \u2502              \u2502  - LLaVA   \u2502 \u2190 Vision!                \u2502\n\u2502         \u2502              \u2502  - DeepSeek\u2502                           \u2502\n\u2502         \u2502              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                           \u2502\n\u2502         \u2193                                                        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                            \u2502\n\u2502  \u2502  Cursor (WSL)   \u2502                                            \u2502\n\u2502  \u2502  + mcp-proxy    \u2502                                            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                            \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e - \u043d\u0438\u043a\u0430\u043a\u0438\u0445 API \u043a\u043b\u044e\u0447\u0435\u0439</li> <li>\u2705 \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0420\u0424 - \u0431\u0435\u0437 VPN</li> <li>\u2705 \u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c - \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0443\u0445\u043e\u0434\u044f\u0442 \u0438\u0437 \u0434\u043e\u043c\u0430</li> <li>\u2705 \u0411\u044b\u0441\u0442\u0440\u043e - \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c</li> <li>\u2705 \u041d\u0435 \u043b\u0438\u043c\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e - \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> </ul>"},{"location":"integrations/n8n-ai-agents/#ollama-proxmox-15","title":"\u2699\ufe0f \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Ollama \u043d\u0430 Proxmox (15 \u043c\u0438\u043d\u0443\u0442)","text":""},{"location":"integrations/n8n-ai-agents/#1-docker-n8n","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1: Docker \u0432 n8n \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435","text":"<p>\u0415\u0441\u043b\u0438 n8n \u0443\u0436\u0435 \u0432 Docker:</p> <pre><code># docker-compose.yml \u0434\u043b\u044f n8n + Ollama\nversion: '3.8'\nservices:\n  n8n:\n    image: n8nio/n8n:latest\n    ports:\n      - \"5678:5678\"\n    environment:\n      - N8N_HOST=192.168.1.50\n    networks:\n      - ai-network\n\n  ollama:\n    image: ollama/ollama:latest\n    ports:\n      - \"11434:11434\"\n    volumes:\n      - ollama_data:/root/.ollama\n    networks:\n      - ai-network\n\nnetworks:\n  ai-network:\n\nvolumes:\n  ollama_data:\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#2-lxc-proxmox","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2: LXC \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043d\u0430 Proxmox","text":"<pre><code># \u041d\u0430 Proxmox \u0441\u043e\u0437\u0434\u0430\u0442\u044c LXC Ubuntu\npct create 201 local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst \\\n  --hostname ollama \\\n  --cores 4 \\\n  --memory 8192 \\\n  --net0 name=eth0,bridge=vmbr0,ip=192.168.1.51/24,gw=192.168.1.1\n\n# \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\npct start 201\n\n# \u0412\u043e\u0439\u0442\u0438\npct enter 201\n\n# \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Ollama\ncurl -fsSL https://ollama.com/install.sh | sh\n\n# \u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u0438\nollama pull llama3         # \u041e\u0431\u0449\u0438\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 (4.7GB)\nollama pull llava          # Vision \u043c\u043e\u0434\u0435\u043b\u044c (4.7GB)\nollama pull mistral        # \u0411\u044b\u0441\u0442\u0440\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c (4.1GB)\nollama pull deepseek-coder # \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u0434\u0430 (6.7GB)\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#_3","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<pre><code>curl http://192.168.1.51:11434/api/tags\n# \u0414\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043c\u043e\u0434\u0435\u043b\u0435\u0439\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#ai-1","title":"\ud83e\udd16 AI \u0410\u0433\u0435\u043d\u0442 #1: \u0423\u043c\u043d\u044b\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430","text":""},{"location":"integrations/n8n-ai-agents/#_4","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442","text":"<p>Telegram \u0431\u043e\u0442 \u0441 \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435\u043c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430:</p> <pre><code>\ud83d\udc64: \"\u0414\u043e\u043c\u0430 \u0445\u043e\u043b\u043e\u0434\u043d\u043e\"\n\n\ud83e\udd16 AI Agent (Llama 3):\n  1. \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0432\u0441\u0435\u0445 15 \u0437\u043e\u043d \u0438\u0437 HA\n  2. \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435\n  3. \u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0438\u0441\u0442\u043e\u0440\u0438\u044e\n  4. \u041f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0440\u0435\u0448\u0435\u043d\u0438\u0435\n  5. \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 HA API\n  6. \u041e\u0431\u044a\u044f\u0441\u043d\u044f\u0435\u0442 \u0447\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043b\n\n\ud83e\udd16: \"\u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u0434\u043e\u043c\u0435 \u0441\u0440\u0435\u0434\u043d\u044f\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 19.2\u00b0C (\u043d\u043e\u0440\u043c\u0430 21\u00b0C).\n     \u041d\u0430 \u0443\u043b\u0438\u0446\u0435 -5\u00b0C, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u044e \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0434\u043e 22\u00b0C\n     \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0437\u043e\u043d\u0430\u0445 (\u0433\u043e\u0441\u0442\u0438\u043d\u0430\u044f, \u043a\u0443\u0445\u043d\u044f, \u0441\u043f\u0430\u043b\u044c\u043d\u044f).\n\n     \u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0433\u0440\u0435\u0432\u0430: ~25 \u043c\u0438\u043d\u0443\u0442.\n     \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ~15 \u0440\u0443\u0431.\n\n     \u2705 \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b.\"\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow","title":"n8n Workflow","text":"<p>\u041d\u043e\u0434\u044b:</p> <ol> <li> <p>Telegram Trigger - \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</p> </li> <li> <p>AI Agent (Advanced AI node)</p> </li> <li>LLM: Ollama</li> <li>Model: llama3</li> <li>Base URL: <code>http://192.168.1.51:11434</code></li> <li>System Prompt:</li> </ol> <pre><code>\u0422\u044b \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043d\u0430 Home Assistant.\n\n\u0422\u0432\u043e\u0439 \u0434\u043e\u043c:\n- 15 \u0437\u043e\u043d \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f \u0441 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u043c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c\n- 5 \u043a\u0430\u043c\u0435\u0440 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438\n- \u041c\u0435\u0442\u0435\u043e\u0441\u0442\u0430\u043d\u0446\u0438\u044f\n- 150+ \u0443\u043c\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\n\n\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 (tools):\n- get_zone_temperature(zone_name) - \u0442\u0435\u043a\u0443\u0449\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0437\u043e\u043d\u044b\n- set_zone_temperature(zone_name, temperature) - \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443\n- get_outdoor_temperature() - \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435\n- get_all_zones_status() - \u0441\u0442\u0430\u0442\u0443\u0441 \u0432\u0441\u0435\u0445 \u0437\u043e\u043d\n- calculate_heating_cost(temp_change) - \u0440\u0430\u0441\u0447\u0435\u0442 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438\n\n\u0412\u0441\u0435\u0433\u0434\u0430:\n1. \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u043e\u043b\u0443\u0447\u0438 \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\n2. \u041e\u0431\u044a\u044f\u0441\u043d\u0438 \u0441\u0432\u043e\u0439 \u0430\u043d\u0430\u043b\u0438\u0437\n3. \u041f\u043e\u043a\u0430\u0436\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u044b (\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c, \u0432\u0440\u0435\u043c\u044f)\n4. \u0421\u043f\u0440\u043e\u0441\u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\n5. \u041f\u043e\u0441\u043b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f - \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n\n\u041e\u0442\u0432\u0435\u0447\u0430\u0439 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435, \u043a\u0440\u0430\u0442\u043a\u043e \u0438 \u043f\u043e \u0434\u0435\u043b\u0443.\n</code></pre> <ul> <li>Tools (Functions):</li> </ul> <pre><code>[\n  {\n    \"name\": \"get_all_zones_status\",\n    \"description\": \"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0432\u0441\u0435\u0445 15 \u0437\u043e\u043d \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f\",\n    \"parameters\": {\n      \"type\": \"object\",\n      \"properties\": {}\n    }\n  },\n  {\n    \"name\": \"set_zone_temperature\",\n    \"description\": \"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443 \u0432 \u0437\u043e\u043d\u0435\",\n    \"parameters\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"zone_name\": {\n          \"type\": \"string\",\n          \"description\": \"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u043e\u043d\u044b (living_room, bedroom, etc)\"\n        },\n        \"temperature\": {\n          \"type\": \"number\",\n          \"description\": \"\u0426\u0435\u043b\u0435\u0432\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 (16-26\u00b0C)\"\n        }\n      },\n      \"required\": [\"zone_name\", \"temperature\"]\n    }\n  }\n]\n</code></pre> <ol> <li>Code - Tool executor (\u0432\u044b\u0437\u043e\u0432\u044b \u0444\u0443\u043d\u043a\u0446\u0438\u0439 AI)</li> </ol> <pre><code>const toolCall = $json.tool_calls?.[0];\n\nif (!toolCall) {\n  return $input.item.json; // No tool call\n}\n\nconst toolName = toolCall.function.name;\nconst args = JSON.parse(toolCall.function.arguments);\n\n// \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e\nif (toolName === 'get_all_zones_status') {\n  // \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u0437 HA \u0432\u0441\u0435 climate entities\n  return {\n    json: {\n      tool_result: {\n        zones: [\n          { name: 'living_room', current: 21, target: 22 },\n          { name: 'bedroom', current: 19, target: 20 },\n          // ... \u0432\u0441\u0435 15 \u0437\u043e\u043d\n        ]\n      }\n    }\n  };\n} else if (toolName === 'set_zone_temperature') {\n  // \u0412\u044b\u0437\u0432\u0430\u0442\u044c HA API\n  return {\n    json: {\n      tool_result: {\n        success: true,\n        message: `\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e ${args.temperature}\u00b0C \u0434\u043b\u044f ${args.zone_name}`\n      }\n    }\n  };\n}\n</code></pre> <ol> <li> <p>Loop back to AI - \u0430\u0433\u0435\u043d\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0440\u0435\u0448\u0435\u043d\u0438\u0435</p> </li> <li> <p>Telegram - \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442</p> </li> </ol>"},{"location":"integrations/n8n-ai-agents/#ai-2-frigate","title":"\ud83e\udd16 AI \u0410\u0433\u0435\u043d\u0442 #2: \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 \u043a Frigate","text":""},{"location":"integrations/n8n-ai-agents/#_5","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442","text":"<p>\u0420\u0430\u0441\u0448\u0438\u0440\u044f\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 Frigate/DeepStack:</p> <p>Frigate \u0443\u0436\u0435 \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0442 \u043e\u0431\u044a\u0435\u043a\u0442\u044b (person, car, cat), \u043d\u043e n8n AI \u043c\u043e\u0436\u0435\u0442:</p> <ul> <li>\ud83d\udcdd \u041e\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0446\u0435\u043d\u0443: \"\u0427\u0435\u043b\u043e\u0432\u0435\u043a \u0441 \u0437\u043e\u043d\u0442\u043e\u043c \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u043a \u0434\u0432\u0435\u0440\u0438\"</li> <li>\ud83c\udfaf \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442: \"\u042d\u0442\u043e \u0432\u0430\u0448 \u0441\u043e\u0441\u0435\u0434 \u0418\u0432\u0430\u043d (\u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u043b\u0438\u0446)\"</li> <li>\ud83e\udde0 \u0420\u0435\u0448\u0435\u043d\u0438\u044f: \"\u0420\u0435\u0434\u043a\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u043d\u043e\u0447\u044c\u044e = \u0432\u0430\u0436\u043d\u043e!\"</li> <li>\ud83d\udcca \u0418\u0441\u0442\u043e\u0440\u0438\u044f: \"\u042d\u0442\u043e\u0442 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u0443\u0436\u0435 \u0431\u044b\u043b \u0432\u0447\u0435\u0440\u0430 \u0432 18:00\"</li> </ul> <pre><code>Frigate: Person detected \u2705\n  \u2193\nn8n AI (LLaVA):\n  1. \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c snapshot\n  2. \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437:\n     \"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0432 \u0442\u0435\u043c\u043d\u043e\u0439 \u043e\u0434\u0435\u0436\u0434\u0435 \u0441 \u0441\u0443\u043c\u043a\u043e\u0439, \u0441\u0442\u043e\u0438\u0442 \u0443 \u0434\u0432\u0435\u0440\u0438\"\n  3. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 (RAG)\n  4. \u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0439 \u0438\u043b\u0438 \u043d\u0435\u0442?\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow_1","title":"n8n Workflow","text":"<p>\u041d\u043e\u0434\u044b:</p> <ol> <li> <p>Webhook \u043e\u0442 Frigate - person detected + snapshot URL</p> </li> <li> <p>HTTP Request - \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435</p> </li> </ol> <pre><code>{\n  \"method\": \"GET\",\n  \"url\": \"http://192.168.1.20:8123{{ $json.snapshot_path }}\",\n  \"headers\": {\n    \"Authorization\": \"Bearer YOUR_HA_TOKEN\"\n  },\n  \"responseType\": \"arraybuffer\"\n}\n</code></pre> <ol> <li>Ollama Vision (LLaVA \u043c\u043e\u0434\u0435\u043b\u044c)</li> </ol> <pre><code>{\n  \"model\": \"llava\",\n  \"prompt\": \"\u041d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0438 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u0447\u0435\u043b\u043e\u0432\u0435\u043a (Frigate detection). \u041e\u043f\u0438\u0448\u0438 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e: \u043e\u0434\u0435\u0436\u0434\u0430, \u043f\u043e\u0437\u0430, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442, \u0435\u0441\u0442\u044c \u043b\u0438 \u0447\u0442\u043e-\u0442\u043e \u043d\u0435\u043e\u0431\u044b\u0447\u043d\u043e\u0435? \u042d\u0442\u043e \u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a (\u0441\u043e\u0441\u0435\u0434, \u043a\u0443\u0440\u044c\u0435\u0440) \u0438\u043b\u0438 \u043d\u0435\u0437\u043d\u0430\u043a\u043e\u043c\u0435\u0446? \u0412\u0440\u0435\u043c\u044f: {{ $json.time }}. \u041a\u0430\u043c\u0435\u0440\u0430: {{ $json.camera_name }}.\",\n  \"images\": [\"{{ $binary.data }}\"]\n}\n</code></pre> <ol> <li>Vector Search - \u043f\u043e\u0438\u0441\u043a \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c: \u0431\u044b\u043b \u043b\u0438 \u044d\u0442\u043e\u0442 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u0440\u0430\u043d\u044c\u0448\u0435?</li> <li>\u0415\u0441\u043b\u0438 \u0434\u0430: \"\u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0439\" (\u0441\u043e\u0441\u0435\u0434, \u043a\u0443\u0440\u044c\u0435\u0440)</li> <li> <p>\u0415\u0441\u043b\u0438 \u043d\u0435\u0442: \"\u043d\u0435\u0437\u043d\u0430\u043a\u043e\u043c\u0435\u0446\" (\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u0432\u044b\u0448\u0435!)</p> </li> <li> <p>Code - \u0410\u043d\u0430\u043b\u0438\u0437 \u043e\u0442\u0432\u0435\u0442\u0430 AI + \u0438\u0441\u0442\u043e\u0440\u0438\u044f</p> </li> </ol> <pre><code>const aiResponse = $json.response.toLowerCase();\nconst hour = new Date().getHours();\nconst isNight = hour &lt; 6 || hour &gt; 22;\nconst isKnown = $json.vector_search?.similarity &gt; 0.8; // \u0411\u044b\u043b \u0440\u0430\u043d\u044c\u0448\u0435\n\nlet priority = 'low';\nlet action = 'log_and_notify';\n\n// Frigate \u0443\u0436\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b \"person\", AI \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\nif (isNight) {\n  // \u041d\u043e\u0447\u044c\u044e \u043b\u044e\u0431\u043e\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a = \u0432\u0430\u0436\u043d\u043e\n  priority = isKnown ? 'medium' : 'critical';\n  action = isKnown ? 'notify' : 'alert_security';\n} else {\n  // \u0414\u043d\u0435\u043c: \u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0439 = \u043d\u0438\u0437\u043a\u0438\u0439, \u043d\u0435\u0437\u043d\u0430\u043a\u043e\u043c\u0435\u0446 = \u0441\u0440\u0435\u0434\u043d\u0438\u0439\n  priority = isKnown ? 'low' : 'medium';\n  action = 'log_and_notify';\n}\n\n// AI \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0438\u043b \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0434\u043e\u0437\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0438\nif (aiResponse.includes('\u0437\u0430\u0433\u043b\u044f\u0434\u044b\u0432\u0430') || aiResponse.includes('\u043f\u0440\u044f\u0447') ||\n    aiResponse.includes('\u043f\u043e\u0434\u043e\u0437\u0440\u0438\u0442\u0435\u043b')) {\n  priority = 'high';\n  action = 'alert_with_context';\n}\n\nreturn {\n  json: {\n    ai_description: aiResponse,\n    is_known_person: isKnown,\n    priority,\n    action,\n    timestamp: new Date().toISOString()\n  }\n};\n</code></pre> <ol> <li>Switch - \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043f\u043e \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0443</li> </ol> <p>Critical (\u043d\u0435\u0437\u043d\u0430\u043a\u043e\u043c\u0435\u0446 \u043d\u043e\u0447\u044c\u044e):    - Telegram: \"\ud83d\udea8 \u041d\u0415\u0417\u041d\u0410\u041a\u041e\u041c\u042b\u0419 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u0430 \u043a\u0430\u043c\u0435\u0440\u0435! (\u043d\u043e\u0447\u044c)\"    - HA: \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c alarm    - \u0417\u0430\u043f\u0438\u0441\u044c \u0432\u0438\u0434\u0435\u043e    - AI \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: \"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0432 \u0442\u0435\u043c\u043d\u043e\u0439 \u043e\u0434\u0435\u0436\u0434\u0435...\"</p> <p>High (\u043f\u043e\u0434\u043e\u0437\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435):    - Telegram: \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u0441 AI \u0430\u043d\u0430\u043b\u0438\u0437\u043e\u043c    - \u0417\u0430\u043f\u0438\u0441\u044c \u0432\u0438\u0434\u0435\u043e    - \u041b\u043e\u0433 \u0432 \u0431\u0430\u0437\u0443</p> <p>Medium (\u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0439 \u043d\u043e\u0447\u044c\u044e \u0438\u043b\u0438 \u043d\u0435\u0437\u043d\u0430\u043a\u043e\u043c\u0435\u0446 \u0434\u043d\u0435\u043c):    - Telegram: \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435    - \u041b\u043e\u0433</p> <p>Low (\u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0439 \u0434\u043d\u0435\u043c):    - \u0422\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u0433</p> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442:</p> <ul> <li>Frigate \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0442 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u2705</li> <li>AI \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0438 \u0443\u043c\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u2705</li> <li>0 \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u2705</li> <li>\u041c\u0438\u043d\u0438\u043c\u0443\u043c \u043b\u043e\u0436\u043d\u044b\u0445 \u0442\u0440\u0435\u0432\u043e\u0433 \u2705</li> </ul>"},{"location":"integrations/n8n-ai-agents/#ai-3-rag","title":"\ud83e\udde0 AI \u0410\u0433\u0435\u043d\u0442 #3: RAG \u043f\u043e \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":""},{"location":"integrations/n8n-ai-agents/#_6","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442","text":"<p>AI \u0437\u043d\u0430\u0435\u0442 \u0412\u0421\u042e \u0432\u0430\u0448\u0443 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e HA:</p> <pre><code>\ud83d\udc64: \"\u041f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0441\u0432\u0435\u0442 \u0432 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u0435 \u0432\u0435\u0447\u0435\u0440\u043e\u043c?\"\n\n\ud83e\udd16 AI RAG:\n  1. \u0418\u0449\u0435\u0442 \u0432 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0439 \u0431\u0430\u0437\u0435 \"\u0441\u0432\u0435\u0442\" + \"\u043a\u043e\u0440\u0438\u0434\u043e\u0440\"\n  2. \u041d\u0430\u0445\u043e\u0434\u0438\u0442 automation.corridor_light\n  3. \u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\n  4. \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\n  5. \u041e\u0431\u044a\u044f\u0441\u043d\u044f\u0435\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443\n\n\ud83e\udd16: \"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043b automation.corridor_light:\n\n     \u0422\u0440\u0438\u0433\u0433\u0435\u0440: binary_sensor.corridor_motion \u2705 (\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442)\n     \u0423\u0441\u043b\u043e\u0432\u0438\u0435 1: time after 18:00 \u2705 (\u0441\u0435\u0439\u0447\u0430\u0441 19:30)\n     \u0423\u0441\u043b\u043e\u0432\u0438\u0435 2: sun.state == 'below_horizon' \u274c (\u041f\u0420\u041e\u0411\u041b\u0415\u041c\u0410!)\n\n     \u0421\u0435\u0439\u0447\u0430\u0441 sun.state = 'above_horizon' (\u0441\u0432\u0435\u0442\u043b\u043e).\n     \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043d\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0442.\u043a. \u0435\u0449\u0435 \u0434\u0435\u043d\u044c.\n\n     \u0420\u0435\u0448\u0435\u043d\u0438\u044f:\n     1. \u0423\u0431\u0440\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435 sun.state\n     2. \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c sensor.illuminance &lt; 100 (\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c lux sensor)\n     3. \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430 after: '20:00:00'\n\n     \u041a\u0430\u043a\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c?\"\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow-setup-","title":"n8n Workflow (Setup - \u043e\u0434\u0438\u043d \u0440\u0430\u0437)","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0439 \u0431\u0430\u0437\u044b:</p> <ol> <li> <p>Manual Trigger (\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432\u0440\u0443\u0447\u043d\u0443\u044e)</p> </li> <li> <p>Home Assistant - \u044d\u043a\u0441\u043f\u043e\u0440\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439</p> </li> <li>Get \u0432\u0441\u0435 automations</li> <li>Get \u0432\u0441\u0435 scripts</li> <li> <p>Get \u0432\u0441\u0435 sensors</p> </li> <li> <p>Code - \u043f\u0430\u0440\u0441\u0438\u043d\u0433 \u0438 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430</p> </li> </ol> <pre><code>// \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0432 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f embeddings\nconst automations = $json.automations.map(auto =&gt; {\n  return {\n    type: 'automation',\n    id: auto.id,\n    alias: auto.alias,\n    text: `\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f: ${auto.alias}\n           ID: ${auto.id}\n           \u0422\u0440\u0438\u0433\u0433\u0435\u0440: ${JSON.stringify(auto.trigger)}\n           \u0423\u0441\u043b\u043e\u0432\u0438\u044f: ${JSON.stringify(auto.condition)}\n           \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f: ${JSON.stringify(auto.action)}`,\n    metadata: auto\n  };\n});\n\nreturn automations;\n</code></pre> <ol> <li>Embeddings (n8n AI node)</li> <li>Model: Ollama embeddings</li> <li> <p>Model name: <code>nomic-embed-text</code> (\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f!)</p> </li> <li> <p>Vector Store - Qdrant / Weaviate / \u043f\u0440\u043e\u0441\u0442\u043e\u0439 JSON</p> </li> <li>\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 embeddings</li> </ol>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow-query-","title":"n8n Workflow (Query - \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e)","text":"<p>\u041e\u0442\u0432\u0435\u0442\u044b \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b:</p> <ol> <li> <p>Telegram Trigger - \u0432\u043e\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</p> </li> <li> <p>Embeddings - \u0432\u0435\u043a\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0432\u043e\u043f\u0440\u043e\u0441\u0430</p> </li> <li> <p>Vector Search - \u043f\u043e\u0438\u0441\u043a \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439</p> </li> <li> <p>AI Agent (Ollama Llama 3)</p> </li> <li>System prompt: \"\u0422\u044b \u044d\u043a\u0441\u043f\u0435\u0440\u0442 \u043f\u043e Home Assistant. \u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0438 \u043e\u0442\u0432\u0435\u0447\u0430\u0439 \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b.\"</li> <li>Context: \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 (RAG!)</li> <li> <p>Question: \u0432\u043e\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</p> </li> <li> <p>Telegram - \u043e\u0442\u0432\u0435\u0442 \u0441 \u043a\u043e\u0434\u043e\u043c \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u043c\u0438</p> </li> </ol> <p>Use cases:</p> <ul> <li>\"\u041a\u0430\u043a\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 sensor.outdoor_temp?\"</li> <li>\"\u041f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 X?\"</li> <li>\"\u041a\u0430\u043a \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u0430\u0442\u0447\u0438\u043a?\"</li> <li>\"\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f\"</li> </ul>"},{"location":"integrations/n8n-ai-agents/#ai-4-nodered-flows","title":"\ud83c\udfa8 AI \u0410\u0433\u0435\u043d\u0442 #4: \u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 NodeRED flows","text":""},{"location":"integrations/n8n-ai-agents/#_7","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442","text":"<p>\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u2192 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 NodeRED flow:</p> <pre><code>\ud83d\udc64: \"\u0425\u043e\u0447\u0443 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044e: \u0435\u0441\u043b\u0438 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u0432 \u0432\u0430\u043d\u043d\u043e\u0439 &gt; 70%, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u044b\u0442\u044f\u0436\u043a\u0443 \u043d\u0430 30 \u043c\u0438\u043d\u0443\u0442\"\n\n\ud83e\udd16 AI Agent:\n  1. \u041f\u043e\u043d\u0438\u043c\u0430\u0435\u0442 intent\n  2. \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 entity_id (\u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c sensor.bathroom_humidity?)\n  3. \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 NodeRED flow JSON\n  4. \u0412\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\n  5. \u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0438\u043c\u043f\u043e\u0440\u0442\n\n\ud83e\udd16: \"\u0421\u043e\u0437\u0434\u0430\u043d flow \u0434\u043b\u044f NodeRED:\n\n[JSON \u043a\u043e\u0434 flow]\n\n\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:\n  \u2705 sensor.bathroom_humidity (\u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c)\n  \u26a0\ufe0f  switch.bathroom_fan (\u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!)\n\n  \u0421\u043e\u0437\u0434\u0430\u0442\u044c switch.bathroom_fan? [\u0414\u0430/\u041d\u0435\u0442]\n\n  \u0415\u0441\u043b\u0438 \u0434\u0430, \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c flow? [\u0418\u043c\u043f\u043e\u0440\u0442] [\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c] [\u041e\u0442\u043c\u0435\u043d\u0430]\"\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow_2","title":"n8n Workflow","text":"<ol> <li> <p>Telegram - \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438</p> </li> <li> <p>AI Agent (DeepSeek-Coder)</p> </li> <li>\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u043a\u043e\u0434\u0430</li> <li>System prompt: \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f NodeRED flows</li> <li> <p>Tools: \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 entity_id \u0432 HA</p> </li> <li> <p>Home Assistant - \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f entities</p> </li> <li> <p>Code - \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f NodeRED JSON</p> </li> </ol> <pre><code>// DeepSeek-Coder \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443\nconst flow = {\n  id: generateId(),\n  type: \"tab\",\n  label: \"AI Generated: Bathroom Fan\",\n  nodes: [\n    {\n      id: generateId(),\n      type: \"server-state-changed\",\n      name: \"Humidity &gt; 70%\",\n      server: \"home-assistant\",\n      entityid: \"sensor.bathroom_humidity\",\n      property: \"state\",\n      comparator: \"gt\",\n      value: \"70\"\n    },\n    {\n      id: generateId(),\n      type: \"api-call-service\",\n      name: \"Turn on fan\",\n      server: \"home-assistant\",\n      service_domain: \"switch\",\n      service: \"turn_on\",\n      data: { entity_id: \"switch.bathroom_fan\" }\n    },\n    {\n      id: generateId(),\n      type: \"delay\",\n      name: \"Wait 30 min\",\n      pauseType: \"delay\",\n      timeout: \"30\",\n      timeoutUnits: \"minutes\"\n    },\n    {\n      id: generateId(),\n      type: \"api-call-service\",\n      name: \"Turn off fan\",\n      server: \"home-assistant\",\n      service_domain: \"switch\",\n      service: \"turn_off\",\n      data: { entity_id: \"switch.bathroom_fan\" }\n    }\n  ]\n};\n\nreturn { json: { flow } };\n</code></pre> <ol> <li>Telegram - preview + \u043a\u043d\u043e\u043f\u043a\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0430</li> </ol>"},{"location":"integrations/n8n-ai-agents/#ai-5","title":"\ud83d\udcca AI \u0410\u0433\u0435\u043d\u0442 #5: \u041f\u0440\u0435\u0434\u0438\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430","text":""},{"location":"integrations/n8n-ai-agents/#_8","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442","text":"<p>AI \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 3 \u043c\u0435\u0441\u044f\u0446\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0434\u0430\u0435\u0442 \u0438\u043d\u0441\u0430\u0439\u0442\u044b:</p> <pre><code>\ud83e\udd16 AI \u0410\u043d\u0430\u043b\u0438\u0437 (\u0435\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439):\n\n\ud83d\udcca \u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0438\u043b \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b:\n\n1. \u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 vs \u041f\u043e\u0433\u043e\u0434\u0430\n   \u2022 \u041a\u043e\u0440\u0440\u0435\u043b\u044f\u0446\u0438\u044f: 0.87 (\u043e\u0447\u0435\u043d\u044c \u0441\u0438\u043b\u044c\u043d\u0430\u044f)\n   \u2022 \u041f\u0440\u0438 -10\u00b0C \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 = 4.2 \u043a\u0412\u0442 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\n   \u2022 \u041f\u0440\u0438 +10\u00b0C \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 = 0.8 \u043a\u0412\u0442\n\n   \ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f:\n      \u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u0440\u0438\u0432\u0430\u044f: target = 25 - (outdoor * 0.5)\n      \u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f: target = 24 - (outdoor * 0.6)\n      \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~180 \u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446\n\n2. \u041b\u043e\u0436\u043d\u044b\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f \u043a\u0430\u043c\u0435\u0440\u044b \"\u0412\u044a\u0435\u0437\u0434\"\n   \u2022 \u041f\u0430\u0442\u0442\u0435\u0440\u043d: \u043a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c 14:00-15:00\n   \u2022 \u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u0441\u043e\u043b\u043d\u0446\u0435 \u0441\u0432\u0435\u0442\u0438\u0442 \u043f\u0440\u044f\u043c\u043e \u0432 \u043a\u0430\u043c\u0435\u0440\u0443\n   \u2022 \u0427\u0430\u0441\u0442\u043e\u0442\u0430: 15-20 \u0440\u0430\u0437/\u0447\u0430\u0441\n\n   \ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f:\n      \u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0434\u0435\u0442\u0435\u043a\u0446\u0438\u044e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f 14:00-15:00\n      \u0418\u043b\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u043c\u0435\u0440\u0443 \u043d\u0430 15\u00b0 \u0432\u043b\u0435\u0432\u043e\n\n3. \u0410\u043d\u043e\u043c\u0430\u043b\u0438\u044f: \u042d\u043d\u0435\u0440\u0433\u043e\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u0441\u0440\u0435\u0434\u0430\u043c\n   \u2022 \u041a\u0430\u0436\u0434\u0443\u044e \u0441\u0440\u0435\u0434\u0443 +35% \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f\n   \u2022 \u0412\u0440\u0435\u043c\u044f: 10:00-14:00\n   \u2022 \u0412\u0435\u0440\u043e\u044f\u0442\u043d\u0430\u044f \u043f\u0440\u0438\u0447\u0438\u043d\u0430: \u0441\u0442\u0438\u0440\u043a\u0430 + \u0443\u0431\u043e\u0440\u043a\u0430 + \u0433\u043e\u0442\u043e\u0432\u043a\u0430\n\n   \ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f:\n      \u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0441\u0442\u0438\u0440\u043a\u0443 \u043d\u0430 \u043d\u043e\u0447\u043d\u043e\u0439 \u0442\u0430\u0440\u0438\u0444 (22:00-06:00)\n      \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~200 \u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow_3","title":"n8n Workflow","text":"<ol> <li> <p>Cron - \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e (\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 20:00)</p> </li> <li> <p>Home Assistant - \u0438\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430 90 \u0434\u043d\u0435\u0439</p> </li> <li>\u0412\u0441\u0435 climate entities</li> <li>\u0412\u0441\u0435 power sensors</li> <li> <p>\u0412\u0441\u0435 camera events</p> </li> <li> <p>Code - \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f AI</p> </li> </ol> <pre><code>// \u0410\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445\nconst data = {\n  heating_history: groupByDay($json.climate_data),\n  power_history: groupByDay($json.power_data),\n  camera_events: groupByHour($json.camera_data),\n  outdoor_temp: $json.weather_data\n};\n\n// \u0420\u0430\u0441\u0447\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043b\u044f\u0446\u0438\u0439\nconst correlation = calculateCorrelation(\n  data.outdoor_temp,\n  data.heating_history\n);\n\nreturn { json: { data, correlation } };\n</code></pre> <ol> <li>AI Agent (Llama 3 \u0438\u043b\u0438 DeepSeek)</li> <li>System prompt:</li> </ol> <pre><code>\u0422\u044b data scientist \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u0443\u043c\u043d\u044b\u0439 \u0434\u043e\u043c.\n\n\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430 90 \u0434\u043d\u0435\u0439:\n- \u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 (15 \u0437\u043e\u043d)\n- \u042d\u043d\u0435\u0440\u0433\u043e\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435\n- \u0421\u043e\u0431\u044b\u0442\u0438\u044f \u043a\u0430\u043c\u0435\u0440\n- \u041f\u043e\u0433\u043e\u0434\u0430\n\n\u041d\u0430\u0439\u0434\u0438:\n1. \u041a\u043e\u0440\u0440\u0435\u043b\u044f\u0446\u0438\u0438 \u0438 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b\n2. \u0410\u043d\u043e\u043c\u0430\u043b\u0438\u0438 \u0438 \u043d\u0435\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c\n3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438\n\n\u0414\u0430\u0439 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0441 \u0440\u0430\u0441\u0447\u0435\u0442\u043e\u043c \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438 \u0432 \u0440\u0443\u0431\u043b\u044f\u0445.\n</code></pre> <ol> <li> <p>Google Sheets - \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 insights</p> </li> <li> <p>Telegram - \u043e\u0442\u0447\u0435\u0442 \u0441 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u043c\u0438</p> </li> </ol> <p>\u0426\u0435\u043d\u043d\u043e\u0441\u0442\u044c: \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u043d\u0435\u043e\u0447\u0435\u0432\u0438\u0434\u043d\u044b\u0435 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0438 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0442 \u0434\u0435\u043d\u044c\u0433\u0438!</p>"},{"location":"integrations/n8n-ai-agents/#ai-6","title":"\ud83d\udd0d AI \u0410\u0433\u0435\u043d\u0442 #6: \u041e\u0442\u043b\u0430\u0434\u0447\u0438\u043a \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439","text":""},{"location":"integrations/n8n-ai-agents/#_9","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442","text":"<p>AI \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u043d\u0430\u0439\u0442\u0438 \u0431\u0430\u0433\u0438 \u0432 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f\u0445:</p> <pre><code>\ud83d\udc64: \"automation.heating_night \u043d\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\"\n\n\ud83e\udd16 AI Debugger:\n  1. \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u043a\u043e\u0434 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0438\u0437 HA\n  2. \u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043b\u043e\u0433\u0438\u043a\u0443\n  3. \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0432\u0441\u0435\u0445 entities\n  4. \u0421\u0438\u043c\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\n  5. \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443\n\n\ud83e\udd16: \"\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b automation.heating_night:\n\ntrigger:\n  - platform: time\n    at: '22:00:00'\n\ncondition:\n  - condition: state\n    entity_id: person.home  \u2190 \u041f\u0420\u041e\u0411\u041b\u0415\u041c\u0410!\n    state: 'home'\n\n\ud83d\udd34 \u041d\u0410\u0419\u0414\u0415\u041d\u041e:\n  \u0421\u0435\u0439\u0447\u0430\u0441 person.home = 'not_home'\n  \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043d\u0435 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0435\u0441\u043b\u0438 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u043c\u0430 \u0432 22:00\n\n\u2753 \u0412\u041e\u041f\u0420\u041e\u0421:\n  \u042d\u0442\u043e \u043d\u0430\u043c\u0435\u0440\u0435\u043d\u043d\u043e? (\u043d\u0435 \u0433\u0440\u0435\u0442\u044c \u043a\u043e\u0433\u0434\u0430 \u043d\u0438\u043a\u043e\u0433\u043e \u043d\u0435\u0442)\n  \u0418\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u0443\u0431\u0440\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435 person.home?\n\n  \u0422\u0430\u043a\u0436\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u043e:\n  \u26a0\ufe0f  \u041d\u0435\u0442 fallback \u0435\u0441\u043b\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\n     \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0442\u043e\u0440\u043e\u0439 \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 person.home \u2192 home\"\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow_4","title":"n8n Workflow","text":"<ol> <li> <p>Telegram - \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b</p> </li> <li> <p>Home Assistant - \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e</p> </li> <li>Get automation YAML</li> <li>Get \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0432\u0441\u0435\u0445 entity_id</li> <li> <p>Get execution history (\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c)</p> </li> <li> <p>AI Agent (DeepSeek-Coder)</p> </li> <li>\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442 \u043f\u043e HA YAML</li> <li>\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043b\u043e\u0433\u0438\u043a\u0443</li> <li>\u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b</li> <li> <p>\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0440\u0435\u0448\u0435\u043d\u0438\u044f</p> </li> <li> <p>Telegram - \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 + fix</p> </li> </ol>"},{"location":"integrations/n8n-ai-agents/#ai-7-15","title":"\ud83c\udfaf AI \u0410\u0433\u0435\u043d\u0442 #7: \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 15 \u0437\u043e\u043d \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f","text":""},{"location":"integrations/n8n-ai-agents/#_10","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442","text":"<p>AI \u0443\u0447\u0438\u0442\u0441\u044f \u043d\u0430 \u0432\u0430\u0448\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u0442:</p> <pre><code>AI \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442 30 \u0434\u043d\u0435\u0439 \u0434\u0430\u043d\u043d\u044b\u0445:\n  \u2022 \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b (\u043f\u043e \u0447\u0430\u0441\u0430\u043c)\n  \u2022 Outdoor temperature\n  \u2022 \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f\n  \u2022 \u041a\u043e\u043c\u0444\u043e\u0440\u0442 (\u043a\u043e\u0433\u0434\u0430 \u0436\u0430\u0440\u043a\u043e/\u0445\u043e\u043b\u043e\u0434\u043d\u043e \u043f\u043e \u043e\u0442\u0437\u044b\u0432\u0430\u043c)\n\nAI \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442:\n  \u2022 \u041a\u0430\u043a\u0438\u0435 \u0437\u043e\u043d\u044b \u043f\u0435\u0440\u0435\u043e\u0442\u0430\u043f\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f\n  \u2022 \u041a\u0430\u043a\u0438\u0435 \u043d\u0435\u0434\u043e\u0442\u0430\u043f\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f\n  \u2022 \u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u0434\u043b\u044f \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438\n  \u2022 \u041c\u043e\u0436\u043d\u043e \u043b\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0437\u043e\u043d\u044b \u043f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e\n\nAI \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442:\n  \u2022 \u041d\u043e\u0432\u044b\u0435 \u0446\u0435\u043b\u0435\u0432\u044b\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b\n  \u2022 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e \u0437\u043e\u043d\u0430\u043c\n  \u2022 \u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#n8n-workflow_5","title":"n8n Workflow","text":"<ol> <li> <p>Cron - \u0440\u0430\u0437 \u0432 \u043c\u0435\u0441\u044f\u0446</p> </li> <li> <p>Home Assistant - \u0438\u0441\u0442\u043e\u0440\u0438\u044f 30 \u0434\u043d\u0435\u0439</p> </li> <li>\u0412\u0441\u0435 climate entities (15 \u0437\u043e\u043d)</li> <li>Outdoor temperature</li> <li>Power consumption</li> <li> <p>(\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e) \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \"\u0436\u0430\u0440\u043a\u043e/\u0445\u043e\u043b\u043e\u0434\u043d\u043e\"</p> </li> <li> <p>Code - \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445</p> </li> </ol> <pre><code>const zones = [\n  'living_room', 'bedroom', 'kitchen', 'bathroom',\n  // ... \u0432\u0441\u0435 15 \u0437\u043e\u043d\n];\n\nconst analysis = zones.map(zone =&gt; {\n  const history = getZoneHistory(zone, 30); // 30 \u0434\u043d\u0435\u0439\n\n  return {\n    zone,\n    avg_temp: calculateAverage(history.temperatures),\n    avg_target: calculateAverage(history.targets),\n    time_above_target: calculatePercentage(history.above_target),\n    time_below_target: calculatePercentage(history.below_target),\n    estimated_cost: calculateCost(history.runtime, zone_size)\n  };\n});\n\nreturn { json: { zones: analysis } };\n</code></pre> <ol> <li>AI Agent (Llama 3 \u0438\u043b\u0438 Mistral)</li> <li>System prompt:</li> </ol> <pre><code>\u0422\u044b \u0438\u043d\u0436\u0435\u043d\u0435\u0440-\u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u043a \u0441 AI.\n\n\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f \u0437\u0430 30 \u0434\u043d\u0435\u0439 (15 \u0437\u043e\u043d).\n\n\u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b \u043e\u0446\u0435\u043d\u0438:\n1. \u042d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c (\u043d\u0435 \u043f\u0435\u0440\u0435\u0433\u0440\u0435\u0432/\u043d\u0435\u0434\u043e\u0433\u0440\u0435\u0432?)\n2. \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c (\u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446 \u043d\u0430 \u0437\u043e\u043d\u0443)\n3. \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f (\u043c\u043e\u0436\u043d\u043e \u043b\u0438 \u0441\u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0442\u044c?)\n\n\u0414\u0430\u0439 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438:\n- \u041d\u043e\u0432\u044b\u0435 \u0446\u0435\u043b\u0435\u0432\u044b\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b\n- \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f (\u043a\u043e\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u043d\u0438\u0436\u0430\u0442\u044c)\n- \u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u0437\u043e\u043d\n- \u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438 \u0432 \u0440\u0443\u0431\u043b\u044f\u0445\n\n\u0422\u0430\u0440\u0438\u0444: 5 \u0440\u0443\u0431/\u043a\u0412\u0442*\u0447\n</code></pre> <ol> <li>Telegram - \u043e\u0442\u0447\u0435\u0442 + \u043a\u043d\u043e\u043f\u043a\u0438</li> </ol> <pre><code>\ud83e\udd16 AI \u0410\u043d\u0430\u043b\u0438\u0437 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f (30 \u0434\u043d\u0435\u0439)\n\n\ud83d\udcb0 \u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: 4500 \u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446\n\n\ud83d\udd34 \u041f\u0435\u0440\u0435\u043e\u0442\u0430\u043f\u043b\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0437\u043e\u043d\u044b:\n  1. \u0413\u043e\u0441\u0442\u0435\u0432\u0430\u044f \u043a\u043e\u043c\u043d\u0430\u0442\u0430: 22\u00b0C (\u043d\u0438\u043a\u043e\u0433\u043e \u043d\u0435\u0442 90% \u0432\u0440\u0435\u043c\u0435\u043d\u0438)\n     \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f: \u0441\u043d\u0438\u0437\u0438\u0442\u044c \u0434\u043e 18\u00b0C\n     \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~350 \u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446\n\n  2. \u041a\u0443\u0445\u043d\u044f: 21\u00b0C (\u0434\u043d\u0435\u043c \u0436\u0430\u0440\u043a\u043e \u043e\u0442 \u0433\u043e\u0442\u043e\u0432\u043a\u0438)\n     \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f: 19\u00b0C \u0434\u043d\u0435\u043c, 21\u00b0C \u0432\u0435\u0447\u0435\u0440\u043e\u043c\n     \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~180 \u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446\n\n\ud83d\udfe1 \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f:\n  \u041d\u043e\u0447\u044c (00:00-06:00): \u0441\u043d\u0438\u0437\u0438\u0442\u044c \u043d\u0430 2\u00b0C \u0432\u0435\u0437\u0434\u0435\n  \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~400 \u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446\n\n\u2705 \u0418\u0422\u041e\u0413\u041e \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b: ~930 \u0440\u0443\u0431/\u043c\u0435\u0441\u044f\u0446 (20%)\n\n[\ud83d\udcca \u0414\u0435\u0442\u0430\u043b\u0438] [\u2705 \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u0451] [\u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c]\n</code></pre> <ol> <li>Home Assistant - \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0439 (\u0441 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435\u043c!)</li> </ol>"},{"location":"integrations/n8n-ai-agents/#ai-ollama","title":"\ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 AI \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u043b\u044f Ollama","text":""},{"location":"integrations/n8n-ai-agents/#_11","title":"\u0414\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430","text":"<p>1. Llama 3 (8B) - \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 - \u0420\u0430\u0437\u043c\u0435\u0440: 4.7 GB - RAM: 8 GB - \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c: ~20 tokens/sec - \u0414\u043b\u044f: \u043e\u0431\u0449\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b, \u0430\u043d\u0430\u043b\u0438\u0437, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438</p> <pre><code>ollama pull llama3\n</code></pre> <p>2. LLaVA - \u0430\u043d\u0430\u043b\u0438\u0437 \u043a\u0430\u043c\u0435\u0440 - \u0420\u0430\u0437\u043c\u0435\u0440: 4.7 GB - RAM: 8 GB - \u0414\u043b\u044f: \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u0445</p> <pre><code>ollama pull llava\n</code></pre> <p>3. DeepSeek-Coder (6.7B) - \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u0434\u0430 - \u0420\u0430\u0437\u043c\u0435\u0440: 3.8 GB - RAM: 8 GB - \u0414\u043b\u044f: \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f YAML, NodeRED flows</p> <pre><code>ollama pull deepseek-coder\n</code></pre> <p>4. Nomic Embed Text - embeddings \u0434\u043b\u044f RAG - \u0420\u0430\u0437\u043c\u0435\u0440: 274 MB - RAM: 1 GB - \u0414\u043b\u044f: \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u0430\u044f \u0431\u0430\u0437\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439</p> <pre><code>ollama pull nomic-embed-text\n</code></pre> <p>\u0418\u0442\u043e\u0433\u043e: ~14 GB \u043c\u0435\u0441\u0442\u0430, 8-16 GB RAM</p>"},{"location":"integrations/n8n-ai-agents/#proxmox-vm","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a Proxmox VM","text":"<p>\u041c\u0438\u043d\u0438\u043c\u0443\u043c \u0434\u043b\u044f Ollama: - CPU: 4 cores - RAM: 16 GB (\u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u043c\u043e\u0434\u0435\u043b\u0435\u0439) - Disk: 30 GB - GPU: \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e (\u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u0435 \u0432 5-10x)</p> <p>\u041c\u043e\u0436\u043d\u043e \u043d\u0430 \u0442\u043e\u043c \u0436\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0447\u0442\u043e n8n:</p> <pre><code># \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c RAM \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 n8n\npct set &lt;n8n_container_id&gt; -memory 16384\n\n# \u0418\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 LXC \u0434\u043b\u044f Ollama\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#3","title":"\ud83d\ude80 \u041f\u043b\u0430\u043d \u0432\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u044f (3 \u043d\u0435\u0434\u0435\u043b\u0438)","text":""},{"location":"integrations/n8n-ai-agents/#1","title":"\u041d\u0435\u0434\u0435\u043b\u044f 1: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<p>\u0414\u0435\u043d\u044c 1-2: Ollama - \u2705 \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Ollama \u043d\u0430 Proxmox - \u2705 \u0421\u043a\u0430\u0447\u0430\u0442\u044c 4 \u043c\u043e\u0434\u0435\u043b\u0438 - \u2705 \u041f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 curl</p> <p>\u0414\u0435\u043d\u044c 3: n8n + Ollama - \u2705 \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c credential Ollama \u0432 n8n - \u2705 \u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 workflow (\u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432\u043e\u043f\u0440\u043e\u0441-\u043e\u0442\u0432\u0435\u0442)</p> <p>\u0414\u0435\u043d\u044c 4-5: \u041f\u0435\u0440\u0432\u044b\u0439 AI \u0430\u0433\u0435\u043d\u0442 - \u2705 AI \u0410\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 (\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439 #1) - \u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 Telegram - \u2705 \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u043e\u043f\u0440\u043e\u0441\u0430\u0445</p>"},{"location":"integrations/n8n-ai-agents/#2-ai-vision-rag","title":"\u041d\u0435\u0434\u0435\u043b\u044f 2: AI Vision \u0438 RAG","text":"<p>\u0414\u0435\u043d\u044c 1-3: Vision \u0434\u043b\u044f \u043a\u0430\u043c\u0435\u0440 - \u2705 LLaVA \u043c\u043e\u0434\u0435\u043b\u044c - \u2705 Workflow \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f - \u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 HA</p> <p>\u0414\u0435\u043d\u044c 4-5: RAG \u0441\u0438\u0441\u0442\u0435\u043c\u0430 - \u2705 \u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432\u0441\u0435\u0445 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 - \u2705 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0439 \u0431\u0430\u0437\u044b - \u2705 \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432</p>"},{"location":"integrations/n8n-ai-agents/#3_1","title":"\u041d\u0435\u0434\u0435\u043b\u044f 3: \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f","text":"<p>\u0414\u0435\u043d\u044c 1-2: AI \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f - \u2705 \u0421\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 30 \u0434\u043d\u0435\u0439 - \u2705 AI \u0430\u043d\u0430\u043b\u0438\u0437 - \u2705 \u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0439</p> <p>\u0414\u0435\u043d\u044c 3-4: AI \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 - \u2705 DeepSeek-Coder setup - \u2705 \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f NodeRED flows - \u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0438\u043c\u043f\u043e\u0440\u0442</p> <p>\u0414\u0435\u043d\u044c 5: \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 - \u2705 Dashboard n8n workflows - \u2705 \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e AI \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e - \u2705 \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u043c\u043f\u0442\u043e\u0432</p>"},{"location":"integrations/n8n-ai-agents/#-3-ai","title":"\ud83c\udfaf \u0422\u041e\u041f-3 AI \u0430\u0433\u0435\u043d\u0442\u0430 \u0434\u043b\u044f \u0412\u0410\u0428\u0415\u0413\u041e \u0434\u043e\u043c\u0430","text":""},{"location":"integrations/n8n-ai-agents/#1-ai-7","title":"1. \ud83c\udf21\ufe0f AI \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f (\u0410\u0433\u0435\u043d\u0442 #7)","text":"<p>\u0417\u0430\u0447\u0435\u043c: - 15 \u0437\u043e\u043d - \u0441\u043b\u043e\u0436\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 - AI \u043d\u0430\u0439\u0434\u0435\u0442 \u043d\u0435\u043e\u0447\u0435\u0432\u0438\u0434\u043d\u044b\u0435 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b - \u0420\u0435\u0430\u043b\u044c\u043d\u0430\u044f \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u044f 15-25%</p> <p>\u041e\u043a\u0443\u043f\u0430\u0435\u043c\u043e\u0441\u0442\u044c: \u041f\u0435\u0440\u0432\u044b\u0439 \u043c\u0435\u0441\u044f\u0446!</p>"},{"location":"integrations/n8n-ai-agents/#2-ai-rag-3","title":"2. \ud83e\udde0 AI RAG \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 (\u0410\u0433\u0435\u043d\u0442 #3)","text":"<p>\u0417\u0430\u0447\u0435\u043c: - 150+ \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432, \u0441\u043b\u043e\u0436\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f - \u0417\u0430\u0431\u044b\u0432\u0430\u0435\u0442\u0435 \u0433\u0434\u0435 \u0447\u0442\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e - AI \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u043e \u043d\u0430\u0439\u0434\u0435\u0442 \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442 - \u041e\u0442\u043b\u0430\u0434\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439 \u0437\u0430 \u0441\u0435\u043a\u0443\u043d\u0434\u044b</p> <p>\u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u0438: \u0427\u0430\u0441\u044b \u2192 \u043c\u0438\u043d\u0443\u0442\u044b!</p>"},{"location":"integrations/n8n-ai-agents/#3-ai-nodered-flows-4","title":"3. \ud83c\udfa8 AI \u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 NodeRED flows (\u0410\u0433\u0435\u043d\u0442 #4)","text":"<p>\u0417\u0430\u0447\u0435\u043c: - \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u2192 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 flow - \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f entity_id - \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0438\u043c\u043f\u043e\u0440\u0442 - \u041d\u0435 \u043d\u0443\u0436\u043d\u043e \u043f\u043e\u043c\u043d\u0438\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 NodeRED</p> <p>\u0423\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438: 10x!</p>"},{"location":"integrations/n8n-ai-agents/#_12","title":"\ud83d\udcdd \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430","text":"<p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 <code>config.yml</code>:</p> <pre><code># n8n + AI Integration\nn8n:\n  enabled: true\n  # n8n \u043d\u0430 Proxmox\n  url: \"http://192.168.1.50:5678\"\n  api_key: \"\"  # \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0432 n8n\n\n  # Ollama (\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 LLM)\n  ollama:\n    enabled: true\n    url: \"http://192.168.1.51:11434\"  # \u0418\u043b\u0438 \u0442\u043e\u0442 \u0436\u0435 \u0445\u043e\u0441\u0442 \u0447\u0442\u043e n8n\n    models:\n      assistant: \"llama3\"        # \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442\n      vision: \"llava\"            # \u0410\u043d\u0430\u043b\u0438\u0437 \u043a\u0430\u043c\u0435\u0440\n      coder: \"deepseek-coder\"    # \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u0434\u0430\n      embeddings: \"nomic-embed-text\"  # RAG\n</code></pre>"},{"location":"integrations/n8n-ai-agents/#_13","title":"\ud83d\udcb0 \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e!)","text":"<p>\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435:</p> <pre><code>OpenAI GPT-4 (\u043e\u0431\u043b\u0430\u0447\u043d\u044b\u0439, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0432 \u0420\u0424):\n  \u2022 300 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432/\u043c\u0435\u0441\u044f\u0446 = ~$15-20\n  \u2022 \u041d\u0443\u0436\u0435\u043d VPN\n  \u2022 \u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0445\u043e\u0434\u044f\u0442 \u0432 \u043e\u0431\u043b\u0430\u043a\u043e\n\nOllama \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e (\u0432\u0430\u0448 \u0432\u0430\u0440\u0438\u0430\u043d\u0442):\n  \u2022 \u041d\u0435\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 = $0\n  \u2022 \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0420\u0424 \u0431\u0435\u0437 VPN\n  \u2022 \u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f \u0434\u043e\u043c\u0430\n  \u2022 \u0415\u0434\u0438\u043d\u043e\u0440\u0430\u0437\u043e\u0432\u043e: ~$0 (\u0443\u0436\u0435 \u0435\u0441\u0442\u044c Proxmox)\n</code></pre> <p>ROI: \u0411\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0441\u0442\u044c! \ud83d\ude80</p>"},{"location":"integrations/n8n-ai-agents/#_14","title":"\ud83d\udcda \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<ul> <li>Ollama \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442</li> <li>n8n AI Agents</li> <li>LLaVA Vision \u043c\u043e\u0434\u0435\u043b\u044c</li> <li>Langchain \u0432 n8n</li> </ul> <p>\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441 AI \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u0430 (#1), \u0437\u0430\u0442\u0435\u043c \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 Vision (#2) \u0438 RAG (#3)!</p>"},{"location":"integrations/n8n-butler-setup/","title":"\ud83e\udd35 AI \u0414\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439: \u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435","text":"<p>\u041f\u043e\u043b\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 AI \u0434\u0432\u043e\u0440\u0435\u0446\u043a\u043e\u0433\u043e \u0441 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u043c\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438: NVIDIA P106-100 (6GB) + Ollama + n8n.</p> <p>\ud83d\udcda \u0421\u043c. \u0442\u0430\u043a\u0436\u0435:</p> <ul> <li>\ud83e\udd16 AI \u0410\u0433\u0435\u043d\u0442\u044b n8n - \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b 7 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0441 \u043a\u043e\u0434\u043e\u043c</li> <li>\ud83d\udcda \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 n8n - \u0437\u0430\u0447\u0435\u043c n8n \u0438 \u043e\u0431\u0449\u0430\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430</li> </ul>"},{"location":"integrations/n8n-butler-setup/#_1","title":"\ud83c\udfaf \u0427\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u043c","text":""},{"location":"integrations/n8n-butler-setup/#ai_1","title":"\ud83e\udd35 AI \u0414\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439","text":"<ul> <li>Telegram \u0431\u043e\u0442 (\u0442\u0435\u043a\u0441\u0442 + \u0433\u043e\u043b\u043e\u0441)</li> <li>\u0415\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a: \"\u0414\u043e\u043c\u0430 \u0445\u043e\u043b\u043e\u0434\u043d\u043e\" \u2192 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435</li> <li>\u041f\u043e\u043d\u0438\u043c\u0430\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 15 \u0437\u043e\u043d \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"integrations/n8n-butler-setup/#_2","title":"\ud83d\udcca \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u043e\u0432","text":"<ul> <li>\u0415\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u041e\u0442\u0447\u0435\u0442\u044b \u0441 YAML \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u043c\u0438</li> <li>\u0412\u044b \u043f\u0438\u0448\u0435\u0442\u0435 \u043a\u043e\u0434 \u0432 Cursor</li> </ul>"},{"location":"integrations/n8n-butler-setup/#_3","title":"\ud83c\udf99\ufe0f \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>STT (Speech-to-Text): Whisper, \u0440\u0443\u0441\u0441\u043a\u0438\u0439</li> <li>TTS (Text-to-Speech): \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e</li> </ul>"},{"location":"integrations/n8n-butler-setup/#_4","title":"\u2705 \u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u0416\u0435\u043b\u0435\u0437\u043e:</p> <ul> <li>Proxmox \u0441\u0435\u0440\u0432\u0435\u0440</li> <li>NVIDIA P106-100 (6GB) \u0438\u043b\u0438 GTX 1060 8GB</li> <li>CPU: 4+ cores, RAM: 16+ GB</li> </ul> <p>\u0421\u043e\u0444\u0442:</p> <ul> <li>Proxmox VE 7.0+</li> <li>Home Assistant (192.168.1.20)</li> <li>n8n (Docker)</li> <li>Telegram \u0431\u043e\u0442</li> </ul>"},{"location":"integrations/n8n-butler-setup/#1-ollama-gpu","title":"\ud83d\ude80 \u0428\u0430\u0433 1: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Ollama + GPU","text":""},{"location":"integrations/n8n-butler-setup/#11-vm-proxmox","title":"1.1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c VM \u043d\u0430 Proxmox","text":"<pre><code># CLI \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043d\u0430 Proxmox \u0445\u043e\u0441\u0442\u0435\nqm create 200 --name ollama-ai --memory 8192 --cores 4\n</code></pre>"},{"location":"integrations/n8n-butler-setup/#12-ubuntu-2204","title":"1.2. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Ubuntu 22.04","text":"<p>\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Ubuntu Server 22.04 \u043d\u0430 VM 200.</p>"},{"location":"integrations/n8n-butler-setup/#13-gpu","title":"1.3. \u041f\u0440\u043e\u0431\u0440\u043e\u0441\u0438\u0442\u044c GPU","text":"<p>Proxmox Web UI: VM 200 \u2192 Hardware \u2192 Add \u2192 PCI Device \u2192 NVIDIA P106-100</p> <p>CLI:</p> <pre><code>qm set 200 -hostpci0 01:00,pcie=1\n</code></pre>"},{"location":"integrations/n8n-butler-setup/#14-nvidia","title":"1.4. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c NVIDIA \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b","text":"<p>SSH \u0432 VM:</p> <pre><code>apt update &amp;&amp; apt upgrade -y\napt install -y nvidia-driver-535\nreboot\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430:</p> <pre><code>nvidia-smi\n# \u0414\u043e\u043b\u0436\u043d\u0430 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441 P106-100\n</code></pre>"},{"location":"integrations/n8n-butler-setup/#15-ollama","title":"1.5. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Ollama","text":"<pre><code>curl -fsSL https://ollama.com/install.sh | sh\n\n# \u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0438\u0437 \u0441\u0435\u0442\u0438\nmkdir -p /etc/systemd/system/ollama.service.d\ncat &gt; /etc/systemd/system/ollama.service.d/override.conf &lt;&lt; 'EOF'\n[Service]\nEnvironment=\"OLLAMA_HOST=0.0.0.0:11434\"\nEnvironment=\"OLLAMA_KEEP_ALIVE=24h\"\nEOF\n\nsystemctl daemon-reload\nsystemctl restart ollama\n</code></pre> <p>\u0423\u0437\u043d\u0430\u0442\u044c IP: <code>hostname -I</code> (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 192.168.1.51)</p>"},{"location":"integrations/n8n-butler-setup/#2-ai","title":"\ud83e\udde0 \u0428\u0430\u0433 2: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 AI \u043c\u043e\u0434\u0435\u043b\u0435\u0439","text":"<p>SSH \u0432 Ollama VM:</p> <pre><code># Llama 3 (8B) - \u0434\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439 + \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\nollama pull llama3:8b-instruct-q4_0\n\n# Whisper - \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u043b\u043e\u0441\u0430\nollama pull whisper:base\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\nollama list\n</code></pre> <p>VRAM: ~5.2 GB (\u043e\u0431\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0432\u043b\u0435\u0437\u0443\u0442 \u0432 6GB!)</p>"},{"location":"integrations/n8n-butler-setup/#3-n8n","title":"\ud83d\udd27 \u0428\u0430\u0433 3: \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 n8n","text":""},{"location":"integrations/n8n-butler-setup/#31-n8n","title":"3.1. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 n8n","text":"<pre><code>mkdir -p /opt/n8n &amp;&amp; cd /opt/n8n\ncat &gt; docker-compose.yml &lt;&lt; 'EOF'\nversion: '3.8'\nservices:\n  n8n:\n    image: n8nio/n8n:latest\n    ports:\n      - \"5678:5678\"\n    environment:\n      - N8N_HOST=192.168.1.50\n      - GENERIC_TIMEZONE=Europe/Moscow\n    volumes:\n      - n8n_data:/home/node/.n8n\nvolumes:\n  n8n_data:\nEOF\n\ndocker-compose up -d\n</code></pre> <p>\u041e\u0442\u043a\u0440\u044b\u0442\u044c: http://192.168.1.50:5678</p>"},{"location":"integrations/n8n-butler-setup/#32-telegram","title":"3.2. \u0421\u043e\u0437\u0434\u0430\u0442\u044c Telegram \u0431\u043e\u0442\u0430","text":"<ol> <li>\u041d\u0430\u0439\u0442\u0438 \u0432 Telegram: <code>@BotFather</code></li> <li><code>/newbot</code> \u2192 \u0438\u043c\u044f \u2192 username</li> <li>\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d</li> </ol>"},{"location":"integrations/n8n-butler-setup/#33-credentials-n8n","title":"3.3. Credentials \u0432 n8n","text":"<p>Telegram: - Name: Telegram Bot - Access Token: [\u0442\u043e\u043a\u0435\u043d \u043e\u0442 BotFather]</p> <p>Home Assistant: - Host: http://192.168.1.20:8123 - Access Token: [\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0432 HA Profile \u2192 Security]</p>"},{"location":"integrations/n8n-butler-setup/#4-workflow","title":"\ud83e\udd35 \u0428\u0430\u0433 4: Workflow \u0414\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439","text":""},{"location":"integrations/n8n-butler-setup/#workflow","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 workflow","text":"<ol> <li>Telegram Trigger - \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f</li> <li>Filter - \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0438\u043b\u0438 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0435</li> <li>Whisper STT (\u0435\u0441\u043b\u0438 \u0433\u043e\u043b\u043e\u0441) - \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0442\u0435\u043a\u0441\u0442</li> <li>AI Agent (Llama 3) - \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 + \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435</li> <li>Home Assistant API - \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434</li> <li>Telegram Reply - \u043e\u0442\u0432\u0435\u0442</li> </ol>"},{"location":"integrations/n8n-butler-setup/#system-prompt-llama-3","title":"System Prompt \u0434\u043b\u044f Llama 3","text":"<pre><code>\u0422\u044b \u0434\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439 \u0443\u043c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0441 15 \u0437\u043e\u043d\u0430\u043c\u0438 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f.\n\n\u0421\u0442\u0438\u043b\u044c: \u0432\u0435\u0436\u043b\u0438\u0432\u044b\u0439, \u043a\u0440\u0430\u0442\u043a\u0438\u0439, \u043e\u0431\u044a\u044f\u0441\u043d\u044f\u0435\u0448\u044c WHY.\n\nTools:\n- get_all_zones() - \u0441\u0442\u0430\u0442\u0443\u0441 \u0437\u043e\u043d\n- set_zone_temperature(zone, temp) - \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c\n\n\u041f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435:\n1. \u041f\u043e\u043b\u0443\u0447\u0438 \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\n2. \u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439\n3. \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438 \u0440\u0435\u0448\u0435\u043d\u0438\u0435 + \u0440\u0430\u0441\u0447\u0435\u0442\u044b\n4. \u0421\u043f\u0440\u043e\u0441\u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\n\n\u041f\u0440\u0438\u043c\u0435\u0440:\n\ud83d\udc64: \u0414\u043e\u043c\u0430 \u0445\u043e\u043b\u043e\u0434\u043d\u043e\n\ud83e\udd35: \u0421\u0440\u0435\u0434\u043d\u044f\u044f 19\u00b0C (\u043d\u043e\u0440\u043c\u0430 21\u00b0C). \u041d\u0430 \u0443\u043b\u0438\u0446\u0435 -5\u00b0C.\n    \u041f\u043e\u0432\u044b\u0448\u0430\u044e \u0434\u043e 22\u00b0C \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0437\u043e\u043d\u0430\u0445.\n    \u0412\u0440\u0435\u043c\u044f ~25 \u043c\u0438\u043d, \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c ~15\u20bd. \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c?\n</code></pre> <p>\u0414\u0435\u0442\u0430\u043b\u0438 workflow \u0441\u043c. \u0432: n8n-ai-agents.md</p>"},{"location":"integrations/n8n-butler-setup/#5","title":"\ud83c\udf99\ufe0f \u0428\u0430\u0433 5: \u0413\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f","text":""},{"location":"integrations/n8n-butler-setup/#workflow-stt","title":"Workflow \u0434\u043b\u044f STT","text":"<ol> <li>Telegram Trigger (voice filter)</li> <li>Download Audio - \u0441\u043a\u0430\u0447\u0430\u0442\u044c OGG</li> <li>Whisper API - http://192.168.1.51:11434/api/generate</li> <li>Extract Text - \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442</li> <li>\u2192 \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 workflow \u0434\u0432\u043e\u0440\u0435\u0446\u043a\u043e\u0433\u043e</li> </ol> <p>\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c: ~5 \u0441\u0435\u043a \u043d\u0430 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0435 30 \u0441\u0435\u043a</p>"},{"location":"integrations/n8n-butler-setup/#6","title":"\ud83d\udcca \u0428\u0430\u0433 6: \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u043e\u0432","text":""},{"location":"integrations/n8n-butler-setup/#workflow_1","title":"Workflow","text":"<ol> <li>Cron - \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 20:00</li> <li>HA History API - \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430 7 \u0434\u043d\u0435\u0439</li> <li>Aggregate - \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u044f \u043f\u043e \u0437\u043e\u043d\u0430\u043c</li> <li>AI Analyst (Llama 3) - \u0430\u043d\u0430\u043b\u0438\u0437 + \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438</li> <li>Save Report - Markdown \u0444\u0430\u0439\u043b</li> <li>Telegram - \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435</li> </ol> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \u041e\u0442\u0447\u0435\u0442 \u0441 \u0433\u043e\u0442\u043e\u0432\u044b\u043c YAML \u043a\u043e\u0434\u043e\u043c \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439.</p>"},{"location":"integrations/n8n-butler-setup/#7-tts","title":"\ud83d\udd0a \u0428\u0430\u0433 7: TTS (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)","text":""},{"location":"integrations/n8n-butler-setup/#piper-tts","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Piper TTS","text":"<pre><code>wget https://github.com/rhasspy/piper/releases/download/v1.2.0/piper_amd64.tar.gz\ntar -xzf piper_amd64.tar.gz &amp;&amp; mv piper /usr/local/bin/\n\n# \u0420\u0443\u0441\u0441\u043a\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c\nmkdir -p /opt/piper/models &amp;&amp; cd /opt/piper/models\nwget https://huggingface.co/rhasspy/piper-voices/resolve/main/ru/ru_RU/dmitri/medium/ru_RU-dmitri-medium.onnx\n</code></pre> <p>API \u0434\u043b\u044f n8n: Flask app \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 5000</p>"},{"location":"integrations/n8n-butler-setup/#_5","title":"\u2705 \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"integrations/n8n-butler-setup/#_6","title":"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<pre><code>\ud83d\udc64: \u041f\u0440\u0438\u0432\u0435\u0442\n\ud83e\udd35: \u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435! \u042f \u0432\u0430\u0448 \u0434\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439. \u0427\u0435\u043c \u043c\u043e\u0433\u0443 \u043f\u043e\u043c\u043e\u0447\u044c?\n\n\ud83d\udc64: \u041a\u0430\u043a\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430?\n\ud83e\udd35: \u0421\u0440\u0435\u0434\u043d\u044f\u044f 20.5\u00b0C. \u0413\u043e\u0441\u0442\u0438\u043d\u0430\u044f 21\u00b0C, \u0441\u043f\u0430\u043b\u044c\u043d\u044f 20\u00b0C. \u0412\u0441\u0451 \u0432 \u043d\u043e\u0440\u043c\u0435!\n\n\ud83d\udc64: \u0414\u043e\u043c\u0430 \u0445\u043e\u043b\u043e\u0434\u043d\u043e\n\ud83e\udd35: \u0421\u0440\u0435\u0434\u043d\u044f\u044f 19\u00b0C. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0434\u043e 22\u00b0C.\n    \u0412\u0440\u0435\u043c\u044f ~25 \u043c\u0438\u043d, \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c ~15\u20bd. \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c?\n\n\ud83d\udc64: \u0414\u0430\n\ud83e\udd35: \u2705 \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b. \u041f\u0440\u043e\u0433\u0440\u0435\u0432 \u043d\u0430\u0447\u0430\u0442.\n</code></pre>"},{"location":"integrations/n8n-butler-setup/#_7","title":"\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<pre><code>\ud83c\udf99\ufe0f \"\u0414\u043e\u043c\u0430 \u0445\u043e\u043b\u043e\u0434\u043d\u043e, \u0441\u0434\u0435\u043b\u0430\u0439 \u043f\u043e\u0442\u0435\u043f\u043b\u0435\u0435\"\n   \u2193 (~5 \u0441\u0435\u043a)\n\ud83d\udcf1 \u041f\u043e\u0432\u044b\u0448\u0430\u044e \u0434\u043e 22\u00b0C \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0437\u043e\u043d\u0430\u0445. \u2705\n</code></pre>"},{"location":"integrations/n8n-butler-setup/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":"<p>Ollama \u043d\u0435 \u0432\u0438\u0434\u0438\u0442 GPU:</p> <pre><code>nvidia-smi  # GPU \u0432\u0438\u0434\u043d\u0430?\nsystemctl restart ollama\n</code></pre> <p>\u041c\u0435\u0434\u043b\u0435\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430:</p> <pre><code>nvidia-smi  # VRAM ~5GB?\nollama ps  # \u041c\u043e\u0434\u0435\u043b\u0438 \u0432 \u043f\u0430\u043c\u044f\u0442\u0438?\n</code></pre> <p>Whisper \u043d\u0435 \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0435\u0442 \u0440\u0443\u0441\u0441\u043a\u0438\u0439:</p> <pre><code>ollama rm whisper:base\nollama pull whisper:base\n</code></pre>"},{"location":"integrations/n8n-butler-setup/#-","title":"\ud83d\udccb \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u2705 P106-100 \u043f\u0440\u043e\u0431\u0440\u043e\u0448\u0435\u043d\u0430 \u0432 VM</li> <li>\u2705 nvidia-smi \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 GPU</li> <li>\u2705 Ollama \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d</li> <li>\u2705 Llama 3 + Whisper \u0441\u043a\u0430\u0447\u0430\u043d\u044b</li> <li>\u2705 n8n \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d</li> <li>\u2705 Telegram \u0431\u043e\u0442 \u0441\u043e\u0437\u0434\u0430\u043d</li> <li>\u2705 Workflows \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u0438 \u0430\u043a\u0442\u0438\u0432\u043d\u044b</li> <li>\u2705 \u0422\u0435\u0441\u0442\u044b \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u044b</li> </ul> <p>\u0413\u043e\u0442\u043e\u0432\u043e! \u0414\u0432\u043e\u0440\u0435\u0446\u043a\u0438\u0439 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442! \ud83e\udd35\u2728</p> <p>\u0414\u0435\u0442\u0430\u043b\u0438 workflow: \u0441\u043c. n8n-ai-agents.md</p> <p>\u0412\u043e\u043f\u0440\u043e\u0441\u044b: GitHub Issues</p>"},{"location":"integrations/n8n-integration/","title":"\ud83d\udd17 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f n8n \u0441 Home Assistant","text":"<p>\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044e n8n \u0434\u043b\u044f \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0445 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439 \u0438 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0439.</p> <p>\ud83c\udfaf \u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f:</p> <ul> <li>\ud83e\udd35 \u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435 - \u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442 (20 \u043c\u0438\u043d)</li> <li>\ud83e\udd16 AI \u0410\u0433\u0435\u043d\u0442\u044b n8n - \u043f\u0440\u0438\u043c\u0435\u0440\u044b 7 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0441 \u043a\u043e\u0434\u043e\u043c</li> </ul>"},{"location":"integrations/n8n-integration/#_1","title":"\ud83d\udccb \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\ud83c\udfaf \u0417\u0430\u0447\u0435\u043c n8n \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c MCP?</li> <li>\ud83c\udfd7\ufe0f \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438</li> <li>\u2699\ufe0f \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 n8n</li> <li>\ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438</li> <li>\ud83d\udd27 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b</li> <li>\ud83d\udc1b Troubleshooting</li> </ul>"},{"location":"integrations/n8n-integration/#n8n-nodered-mcp","title":"\ud83c\udfaf \u0417\u0430\u0447\u0435\u043c n8n \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c NodeRED \u0438 MCP?","text":""},{"location":"integrations/n8n-integration/#_2","title":"\u0412\u0430\u0448\u0430 \u0442\u0435\u043a\u0443\u0449\u0430\u044f \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430","text":"<p>\u0427\u0442\u043e \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442:</p> <ul> <li>\u2705 Home Assistant - \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438</li> <li>\u2705 NodeRED - \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0438 flow</li> <li>\u2705 HA Addons - \u0431\u044d\u043a\u0430\u043f\u044b, Telegram, Samba</li> <li>\u2705 MCP (Cursor) - AI \u043f\u043e\u043c\u043e\u0449\u044c \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435</li> </ul> <p>\u0417\u0430\u0447\u0435\u043c \u0435\u0449\u0435 n8n?</p> <p>\u2192 \u0422\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f AI \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0441 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u043c\u0438 LLM (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e, \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0420\u0424)!</p>"},{"location":"integrations/n8n-integration/#mcp-model-context-protocol-ai","title":"MCP (Model Context Protocol) - \u0434\u043b\u044f AI \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f","text":"<p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 MCP:</p> <ul> <li>\ud83e\udd16 AI \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0447\u0435\u0440\u0435\u0437 Cursor</li> <li>\ud83d\udcac \u0415\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a \u2192 \u043a\u043e\u043c\u0430\u043d\u0434\u044b HA</li> <li>\ud83d\udd0d \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432</li> <li>\ud83d\udcdd \u041f\u043e\u043c\u043e\u0449\u044c \u0432 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439</li> </ul> <p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f MCP:</p> <ul> <li>\u274c \u0422\u043e\u043b\u044c\u043a\u043e \u0432 Cursor IDE</li> <li>\u274c \u041d\u0435\u0442 \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430 \u0437\u0430\u0434\u0430\u0447</li> <li>\u274c \u041d\u0435\u0442 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0439 \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u043c\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438</li> <li>\u274c \u041d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u043e</li> </ul>"},{"location":"integrations/n8n-integration/#n8n-ai","title":"n8n - \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438, \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0439 \u0438 AI \u0430\u0433\u0435\u043d\u0442\u043e\u0432","text":"<p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 n8n:</p> <ul> <li>\ud83d\udd04 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u0435\u0436\u0434\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438</li> <li>\u23f0 \u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u0437\u0430\u0434\u0430\u0447 (cron)</li> <li>\ud83c\udf10 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0441 400+ \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438</li> <li>\ud83d\udcca \u0421\u043b\u043e\u0436\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\ud83d\udd01 \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 24/7 \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u043e</li> <li>\ud83e\udd16 AI Agents - \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 OpenAI, Anthropic, \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u043c\u0438 LLM</li> <li>\ud83e\udde0 Langchain - \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 AI \u0446\u0435\u043f\u043e\u0447\u0435\u043a \u0438 \u0430\u0433\u0435\u043d\u0442\u043e\u0432</li> <li>\ud83d\udcac Conversational AI - \u0447\u0430\u0442-\u0431\u043e\u0442\u044b \u0438 \u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u044b</li> </ul> <p>\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 n8n:</p> <ul> <li>\u2705 AI-powered workflows - \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u0430\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 LLM</li> <li>\u2705 \u0412\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u0435 \u0431\u0430\u0437\u044b - \u0434\u043b\u044f RAG (Retrieval-Augmented Generation)</li> <li>\u2705 Memory - \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u043e\u0432</li> <li>\u26a0\ufe0f \u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 (Docker/VPS)</li> </ul>"},{"location":"integrations/n8n-integration/#_3","title":"\ud83c\udfaf \u0418\u0434\u0435\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044f","text":"<pre><code>graph TB\n    subgraph \"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 (Cursor + MCP)\"\n        A[Cursor IDE]\n        B[MCP Protocol]\n        A --&gt; B\n    end\n\n    subgraph \"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044f (n8n)\"\n        C[n8n Workflows]\n        D[\u0412\u043d\u0435\u0448\u043d\u0438\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b]\n        C --&gt; D\n    end\n\n    subgraph \"\u0423\u043c\u043d\u044b\u0439 \u0434\u043e\u043c (Home Assistant)\"\n        E[Home Assistant]\n        F[\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430]\n        E --&gt; F\n    end\n\n    B --&gt; E\n    C --&gt; E\n    E --&gt; C\n\n    style A fill:#2196F3\n    style C fill:#FF6D5A\n    style E fill:#4CAF50</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0432\u043c\u0435\u0441\u0442\u0435:</p> <ul> <li>MCP (\u0432 Cursor) - \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438 \u043e\u0442\u043b\u0430\u0434\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 HA</li> <li>AI \u043f\u043e\u043c\u043e\u0449\u044c \u0432 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 YAML</li> <li>\u0411\u044b\u0441\u0442\u0440\u043e\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434</li> <li> <p>\u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430</p> </li> <li> <p>n8n - \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u043d \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439 \u0438 AI \u0430\u0433\u0435\u043d\u0442\u043e\u0432</p> </li> <li>\u0421\u043b\u043e\u0436\u043d\u044b\u0435 workflows \u0441 AI \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439</li> <li>\u0410\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u044b\u0435 AI \u0430\u0433\u0435\u043d\u0442\u044b</li> <li>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u043c\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438</li> <li> <p>\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 24/7 \u0431\u0435\u0437 \u0432\u0430\u0448\u0435\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u0438\u044f</p> </li> <li> <p>Home Assistant - \u043a\u0430\u043a \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u0439 hub \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432</p> </li> <li>\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435</li> <li>\u0411\u044b\u0441\u0442\u0440\u044b\u0435 \u0440\u0435\u0430\u043a\u0446\u0438\u0438</li> <li>\u041d\u0430\u0434\u0435\u0436\u043d\u043e\u0441\u0442\u044c \u0438 offline \u0440\u0430\u0431\u043e\u0442\u0430</li> </ul>"},{"location":"integrations/n8n-integration/#_4","title":"\ud83c\udfd7\ufe0f \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438","text":""},{"location":"integrations/n8n-integration/#_5","title":"\u0422\u0440\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f","text":""},{"location":"integrations/n8n-integration/#1-home-assistant-n8n-webhooks","title":"1. Home Assistant \u2192 n8n (Webhooks)","text":"<pre><code># HA automation\nautomation:\n  - alias: \"\u0422\u0440\u0438\u0433\u0433\u0435\u0440 n8n workflow\"\n    trigger:\n      - platform: state\n        entity_id: sensor.outdoor_temperature\n        to: \"below\"\n        value_template: \"{{ states('input_number.heating_threshold') }}\"\n    action:\n      - service: notify.n8n_webhook\n        data:\n          message: \"Temperature alert\"\n          temperature: \"{{ states('sensor.outdoor_temperature') }}\"\n</code></pre>"},{"location":"integrations/n8n-integration/#2-n8n-home-assistant-rest-api","title":"2. n8n \u2192 Home Assistant (REST API)","text":"<pre><code>// n8n HTTP Request node\n{\n  \"method\": \"POST\",\n  \"url\": \"http://192.168.1.20:8123/api/services/climate/set_temperature\",\n  \"headers\": {\n    \"Authorization\": \"Bearer YOUR_HA_TOKEN\",\n    \"Content-Type\": \"application/json\"\n  },\n  \"body\": {\n    \"entity_id\": \"climate.living_room\",\n    \"temperature\": 22\n  }\n}\n</code></pre>"},{"location":"integrations/n8n-integration/#3","title":"3. \u0414\u0432\u0443\u0441\u0442\u043e\u0440\u043e\u043d\u043d\u044f\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u044f","text":"<pre><code>HA Event \u2192 Webhook \u2192 n8n \u2192 \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u2192 REST API \u2192 HA Action\n</code></pre>"},{"location":"integrations/n8n-integration/#n8n","title":"\u2699\ufe0f \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 n8n","text":""},{"location":"integrations/n8n-integration/#1-home-assistant","title":"\u0428\u0430\u0433 1: \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Home Assistant","text":""},{"location":"integrations/n8n-integration/#11-long-lived-access-token","title":"1.1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c Long-Lived Access Token","text":"<ol> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 Home Assistant</li> <li>\u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c (\u043b\u0435\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439 \u0443\u0433\u043e\u043b)</li> <li>\u041f\u0440\u043e\u043a\u0440\u0443\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u0437 \u0434\u043e Long-Lived Access Tokens</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 CREATE TOKEN</li> <li>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: <code>n8n Integration</code></li> <li>\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0442\u043e\u043a\u0435\u043d (\u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f!)</li> </ol>"},{"location":"integrations/n8n-integration/#12-webhook-ha","title":"1.2. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c Webhook \u0432 HA (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)","text":"<p>\u0415\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0438\u0442\u044c n8n \u0438\u0437 HA:</p> <pre><code># configuration.yaml\nnotify:\n  - name: n8n_webhook\n    platform: rest\n    resource: \"http://192.168.1.XXX:5678/webhook/ha-trigger\"\n    method: POST_JSON\n    headers:\n      Content-Type: application/json\n    message_param_name: message\n</code></pre> <p>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435:</p> <ul> <li><code>192.168.1.XXX</code> \u043d\u0430 IP \u0432\u0430\u0448\u0435\u0433\u043e n8n \u0441\u0435\u0440\u0432\u0435\u0440\u0430</li> <li><code>ha-trigger</code> \u043d\u0430 ID \u0432\u0430\u0448\u0435\u0433\u043e webhook \u0432 n8n</li> </ul>"},{"location":"integrations/n8n-integration/#2-n8n","title":"\u0428\u0430\u0433 2: \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 n8n","text":""},{"location":"integrations/n8n-integration/#21-credential-home-assistant","title":"2.1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c Credential \u0434\u043b\u044f Home Assistant","text":"<p>\u0412 n8n:</p> <ol> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 Credentials</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Add Credential</li> <li>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 Home Assistant API</li> <li>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</li> <li>Name: <code>Home Assistant</code></li> <li>Host: <code>http://192.168.1.20:8123</code> (\u0432\u0430\u0448 HA)</li> <li>Access Token: \u0442\u043e\u043a\u0435\u043d \u0438\u0437 \u0448\u0430\u0433\u0430 1.1</li> <li>Save</li> </ol>"},{"location":"integrations/n8n-integration/#22-workflow","title":"2.2. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0439 Workflow","text":"<ol> <li>New Workflow</li> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043d\u043e\u0434\u044b:</li> <li>Webhook (\u0442\u0440\u0438\u0433\u0433\u0435\u0440)</li> <li>Home Assistant (\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435)</li> <li>Switch (\u0443\u0441\u043b\u043e\u0432\u0438\u0435)</li> <li>Home Assistant (\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435)</li> <li>Save \u2192 Activate</li> </ol>"},{"location":"integrations/n8n-integration/#3-n8n-hassio_cursor","title":"\u0428\u0430\u0433 3: \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c n8n \u0432 \u043f\u0440\u043e\u0435\u043a\u0442 HASSio_Cursor","text":""},{"location":"integrations/n8n-integration/#31-configyml","title":"3.1. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c config.yml","text":"<p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0435\u043a\u0446\u0438\u044e \u0432 <code>config.yml</code>:</p> <pre><code># n8n Integration\nn8n:\n  enabled: true\n  url_local: \"http://192.168.1.XXX:5678\"\n  url_external: \"https://n8n.yourdomain.com\"  # \u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c\n  api_key: \"your_n8n_api_key\"  # \u0418\u0437 n8n: Settings \u2192 API\n  webhooks:\n    base_url: \"http://192.168.1.XXX:5678/webhook\"\n    ha_trigger: \"ha-trigger\"  # ID webhook \u0434\u043b\u044f \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u0432 \u0438\u0437 HA\n</code></pre> <p>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435:</p> <ul> <li><code>192.168.1.XXX</code> \u043d\u0430 IP \u0432\u0430\u0448\u0435\u0433\u043e n8n</li> <li><code>your_n8n_api_key</code> \u043d\u0430 API \u043a\u043b\u044e\u0447 \u0438\u0437 n8n</li> </ul>"},{"location":"integrations/n8n-integration/#32","title":"3.2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442:</p> <pre><code>#!/bin/bash\n# scripts/check_n8n.sh\n\nsource \"$(dirname \"$0\")/lib_config.sh\"\n\necho \"\ud83d\udd0d \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a n8n...\"\necho \"\"\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438\nif curl -s -f \"$N8N_URL/healthz\" &gt; /dev/null 2&gt;&amp;1; then\n    echo \"\u2705 n8n \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d: $N8N_URL\"\nelse\n    echo \"\u274c n8n \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d: $N8N_URL\"\n    exit 1\nfi\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 API\nresponse=$(curl -s -H \"X-N8N-API-KEY: $N8N_API_KEY\" \\\n    \"$N8N_URL/api/v1/workflows\" 2&gt;/dev/null)\n\nif [ $? -eq 0 ]; then\n    workflow_count=$(echo \"$response\" | jq -r '.data | length' 2&gt;/dev/null || echo \"?\")\n    echo \"\u2705 API \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\"\n    echo \"\ud83d\udcca \u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0445 workflows: $workflow_count\"\nelse\n    echo \"\u274c API \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 (\u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 API \u043a\u043b\u044e\u0447)\"\n    exit 1\nfi\n\necho \"\"\necho \"\u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f n8n \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e!\"\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:</p> <pre><code>chmod +x scripts/check_n8n.sh\n./scripts/check_n8n.sh\n</code></pre>"},{"location":"integrations/n8n-integration/#_6","title":"\ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438","text":""},{"location":"integrations/n8n-integration/#1-15","title":"\ud83c\udf21\ufe0f 1. \u0423\u043c\u043d\u0430\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u044f (15 \u0437\u043e\u043d!)","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: HA \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u044b \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 \u043f\u043e\u0433\u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u0438.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Smart Heating Optimization\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Cron (\u043a\u0430\u0436\u0434\u044b\u0435 30 \u043c\u0438\u043d\u0443\u0442)\n  \u2193\n\u041d\u043e\u0434\u0430: HTTP Request \u2192 API \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u0430 \u043f\u043e\u0433\u043e\u0434\u044b (Gismeteo/OpenWeatherMap)\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u0420\u0430\u0441\u0447\u0435\u0442 \u043f\u043e\u0433\u043e\u0434\u043e\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0439 \u043a\u0440\u0438\u0432\u043e\u0439\n  \u0412\u0445\u043e\u0434\u043d\u044b\u0435: outdoor_temp_forecast, wind, humidity\n  \u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c: target = 25 - (outdoor * 0.5) - (wind * 0.1)\n  \u0412\u044b\u0445\u043e\u0434: temperature_targets \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b\n  \u2193\n\u041d\u043e\u0434\u0430: Loop \u0447\u0435\u0440\u0435\u0437 15 \u0437\u043e\u043d \u2192 Home Assistant API\n  climate.set_temperature \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u043e\u043d\u044b\n  \u2193\n\u041d\u043e\u0434\u0430: Telegram \u2192 \u041e\u0442\u0447\u0435\u0442 \u043e\u0431 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438\n  \"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b. \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~150 \u0440\u0443\u0431/\u0434\u0435\u043d\u044c\"\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u0421\u043b\u043e\u0436\u043d\u044b\u0435 \u0440\u0430\u0441\u0447\u0435\u0442\u044b \u0432\u043d\u0435 HA</li> <li>\u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 \u043b\u044e\u0431\u044b\u043c\u0438 API \u043f\u043e\u0433\u043e\u0434\u044b</li> <li>\u2705 \u041b\u0435\u0433\u043a\u043e \u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c</li> <li>\u2705 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430</li> </ul>"},{"location":"integrations/n8n-integration/#2","title":"\ud83d\udcf9 2. \u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u043b\u0435\u0440\u0442\u044b \u0441 \u043a\u0430\u043c\u0435\u0440","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u041c\u043d\u043e\u0433\u043e \u043b\u043e\u0436\u043d\u044b\u0445 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0439 \u043e\u0442 \u0434\u0430\u0442\u0447\u0438\u043a\u043e\u0432 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Smart Camera Alerts\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Webhook \u043e\u0442 HA (binary_sensor.motion = on)\n  \u2193\n\u041d\u043e\u0434\u0430: Home Assistant \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0447\u0430\u0441\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u0410\u043d\u0430\u043b\u0438\u0437 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u043e\u0432\n  \u0415\u0441\u043b\u0438 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0439 &gt; 10 \u0437\u0430 \u0447\u0430\u0441 \u2192 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u043b\u043e\u0436\u043d\u043e\u0435 (\u0436\u0438\u0432\u043e\u0442\u043d\u043e\u0435, \u0441\u0432\u0435\u0442)\n  \u0415\u0441\u043b\u0438 \u0440\u0435\u0434\u043a\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 + \u043d\u043e\u0447\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u2192 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 HIGH\n  \u2193\n\u041d\u043e\u0434\u0430: Switch (\u0432\u0435\u0442\u0432\u043b\u0435\u043d\u0438\u0435)\n  Case 1: \u041b\u043e\u0436\u043d\u043e\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0435 \u2192 \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\n  Case 2: \u0412\u0430\u0436\u043d\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u2192 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0430\u043b\u0435\u0440\u0442\n  Case 3: \u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u2192 \u0430\u043b\u0435\u0440\u0442 + snapshot \u043a\u0430\u043c\u0435\u0440\u044b\n  \u2193\n\u041d\u043e\u0434\u0430: Telegram \u2192 \u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u0441 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043e\u043c\n  \"\ud83d\udea8 \u0427\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u0430 \u043f\u0435\u0440\u0438\u043c\u0435\u0442\u0440\u0435 (\u0440\u0435\u0434\u043a\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435, \u043d\u043e\u0447\u044c)\"\n  + \u0424\u043e\u0442\u043e \u0441 \u043a\u0430\u043c\u0435\u0440\u044b\n  + \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430 \u0447\u0430\u0441\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u041c\u0430\u0448\u0438\u043d\u043d\u043e\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u043e\u0432</li> <li>\u2705 \u041c\u0435\u043d\u044c\u0448\u0435 \u043b\u043e\u0436\u043d\u044b\u0445 \u0442\u0440\u0435\u0432\u043e\u0433</li> <li>\u2705 \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</li> <li>\u2705 \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430</li> </ul>"},{"location":"integrations/n8n-integration/#3_1","title":"\ud83d\udcca 3. \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u0438 \u043e\u0442\u0447\u0435\u0442\u044b","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: HA \u043d\u0435 \u0443\u043c\u0435\u0435\u0442 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0440\u0430\u0441\u0438\u0432\u044b\u0435 \u043e\u0442\u0447\u0435\u0442\u044b.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Weekly Energy Report\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Cron (\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a 9:00)\n  \u2193\n\u041d\u043e\u0434\u0430: Home Assistant \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e\n  - sensor.energy_consumed\n  - sensor.heating_power\n  - sensor.lights_power\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u0420\u0430\u0441\u0447\u0435\u0442\u044b\n  - Total consumption\n  - Cost calculation (\u0442\u0430\u0440\u0438\u0444 \u0434\u0435\u043d\u044c/\u043d\u043e\u0447\u044c)\n  - Comparison \u0441 \u043f\u0440\u043e\u0448\u043b\u043e\u0439 \u043d\u0435\u0434\u0435\u043b\u0435\u0439\n  - Top-5 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0435\u0439\n  \u2193\n\u041d\u043e\u0434\u0430: Google Sheets \u2192 \u0417\u0430\u043f\u0438\u0441\u044c \u0434\u0430\u043d\u043d\u044b\u0445\n  \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430 \u0433\u043e\u0434 \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0442\u0440\u0435\u043d\u0434\u043e\u0432\n  \u2193\n\u041d\u043e\u0434\u0430: HTTP Request \u2192 Chart.js API\n  \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432\n  \u2193\n\u041d\u043e\u0434\u0430: Telegram \u2192 \u041e\u0442\u0447\u0435\u0442\n  \ud83d\udcca \u0415\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442:\n  \u26a1 \u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435: 150 \u043a\u0412\u0442*\u0447 (-12% \u043e\u0442 \u043f\u0440\u043e\u0448\u043b\u043e\u0439 \u043d\u0435\u0434\u0435\u043b\u0438)\n  \ud83d\udcb0 \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: 750 \u0440\u0443\u0431\n  \ud83d\udd1d \u0422\u043e\u043f \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c: \u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 (60%)\n  [\u0413\u0440\u0430\u0444\u0438\u043a]\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u044b</li> <li>\u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 Google Sheets/Excel</li> <li>\u2705 \u041a\u0440\u0430\u0441\u0438\u0432\u044b\u0435 \u0433\u0440\u0430\u0444\u0438\u043a\u0438</li> <li>\u2705 \u0418\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</li> </ul>"},{"location":"integrations/n8n-integration/#4","title":"\ud83d\udd04 4. \u0411\u044d\u043a\u0430\u043f\u044b \u0432 \u043e\u0431\u043b\u0430\u043a\u043e","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0431\u044d\u043a\u0430\u043f\u044b \u043d\u0435 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b \u043e\u0442 \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u044b\u0445 \u0441\u0431\u043e\u0435\u0432.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Cloud Backup Automation\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Webhook \u043e\u0442 HA (\u043f\u043e\u0441\u043b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0433\u043e backup)\n  \u2193\n\u041d\u043e\u0434\u0430: SSH \u2192 \u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0431\u044d\u043a\u0430\u043f \u0441 HA\n  scp root@192.168.1.20:/backup/latest.tar /tmp/\n  \u2193\n\u041d\u043e\u0434\u0430: Compression \u2192 \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440\n  \u0415\u0441\u043b\u0438 &gt; 500MB \u2192 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435\n  \u2193\n\u041d\u043e\u0434\u0430: Yandex Disk / Dropbox \u2192 \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\n  \u041f\u0443\u0442\u044c: /HomeAssistant/Backups/2025-10/\n  \u0418\u043c\u044f: backup-2025-10-08-12-00.tar.gz\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 Cleanup \u0441\u0442\u0430\u0440\u044b\u0445 \u0431\u044d\u043a\u0430\u043f\u043e\u0432\n  \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u044d\u043a\u0430\u043f\u044b \u0441\u0442\u0430\u0440\u0448\u0435 30 \u0434\u043d\u0435\u0439\n  \u2193\nNoda: HTTP Request \u2192 HA API\n  \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c sensor.last_cloud_backup\n  \u2193\n\u041d\u043e\u0434\u0430: Telegram \u2192 \u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435\n  \"\u2705 \u0411\u044d\u043a\u0430\u043f \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0432 \u043e\u0431\u043b\u0430\u043a\u043e (150MB, 2.3 \u0441\u0435\u043a)\"\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430</li> <li>\u2705 \u0412\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u2705 \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u043e\u0442\u0435\u0440\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u2705 \u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"integrations/n8n-integration/#5-telegram","title":"\ud83e\udd16 5. \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 Telegram \u0431\u043e\u0442","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: HA Telegram integration \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d \u0432 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044f\u0445.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Advanced Telegram Bot\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Telegram \u2192 \u041a\u043e\u043c\u0430\u043d\u0434\u044b\n  /status \u2192 \u0421\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u043c\u0430\n  /heating &lt;temp&gt; \u2192 \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443\n  /cameras \u2192 Snapshots \u0432\u0441\u0435\u0445 \u043a\u0430\u043c\u0435\u0440\n  /report \u2192 \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442\n  \u2193\n\u041d\u043e\u0434\u0430: Switch \u2192 \u0420\u043e\u0443\u0442\u0438\u043d\u0433 \u043a\u043e\u043c\u0430\u043d\u0434\n  \u2193\n\u0412\u0435\u0442\u043a\u0430 1: /status\n  Home Assistant \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\n  Function \u2192 \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n  Telegram \u2192 \u041a\u0440\u0430\u0441\u0438\u0432\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 \u0441 \u044d\u043c\u043e\u0434\u0437\u0438 \u0438 \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438\n\n\u0412\u0435\u0442\u043a\u0430 2: /heating\n  Validation \u2192 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b (16-26\u00b0C)\n  Home Assistant \u2192 \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c climate \u0434\u043b\u044f 15 \u0437\u043e\u043d\n  Telegram \u2192 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 + \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u0440\u0430\u0441\u0445\u043e\u0434\u0430\n\n\u0412\u0435\u0442\u043a\u0430 3: /cameras\n  Loop \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c snapshots \u0441\u043e \u0432\u0441\u0435\u0445 \u043a\u0430\u043c\u0435\u0440\n  Image processing \u2192 Resize/watermark\n  Telegram \u2192 \u0410\u043b\u044c\u0431\u043e\u043c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439\n\n\u0412\u0435\u0442\u043a\u0430 4: /report\n  Home Assistant \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438\n  Function \u2192 \u0410\u043d\u0430\u043b\u0438\u0437\n  Chart API \u2192 \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432\n  Telegram \u2192 \u041e\u0442\u0447\u0435\u0442 \u0441 \u0433\u0440\u0430\u0444\u0438\u043a\u0430\u043c\u0438\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u041a\u043d\u043e\u043f\u043a\u0438 \u0438 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c</li> <li>\u2705 \u0421\u043b\u043e\u0436\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430</li> <li>\u2705 \u041a\u0440\u0430\u0441\u0438\u0432\u043e\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u2705 \u0413\u0440\u0430\u0444\u0438\u043a\u0438 \u0438 \u043c\u0435\u0434\u0438\u0430</li> </ul>"},{"location":"integrations/n8n-integration/#6","title":"\ud83d\udce1 6. \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: HA \u043d\u0435 \u0443\u043c\u0435\u0435\u0442 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u043c\u043d\u043e\u0433\u0438\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b (GitHub, VPS, \u0434\u043e\u043c\u0435\u043d\u044b).</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"External Services Monitor\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Cron (\u043a\u0430\u0436\u0434\u044b\u0435 15 \u043c\u0438\u043d\u0443\u0442)\n  \u2193\n\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e:\n\n  \u0412\u0435\u0442\u043a\u0430 1: GitHub Actions\n    HTTP \u2192 GitHub API\n    \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0445 runs\n    \u0415\u0441\u043b\u0438 failed \u2192 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435\n\n  \u0412\u0435\u0442\u043a\u0430 2: SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b\n    HTTP \u2192 Check cert expiry\n    \u0415\u0441\u043b\u0438 &lt; 7 \u0434\u043d\u0435\u0439 \u2192 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435\n\n  \u0412\u0435\u0442\u043a\u0430 3: \u0412\u043d\u0435\u0448\u043d\u0438\u0435 IP\n    HTTP \u2192 myip.com\n    \u0415\u0441\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f \u2192 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c DNS\n\n  \u0412\u0435\u0442\u043a\u0430 4: VPS uptime\n    HTTP \u2192 Healthcheck endpoints\n    \u0415\u0441\u043b\u0438 down \u2192 \u0430\u043b\u0435\u0440\u0442\n  \u2193\nMerge \u2192 \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b\n  \u2193\nHome Assistant \u2192 \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c sensors\n  sensor.github_status: \"ok\"\n  sensor.ssl_expiry: 45\n  sensor.external_ip: \"1.2.3.4\"\n  \u2193\n\u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u2192 Telegram\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u0426\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433</li> <li>\u2705 \u041f\u0440\u043e\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</li> <li>\u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 HA \u0434\u0430\u0448\u0431\u043e\u0440\u0434\u043e\u043c</li> </ul>"},{"location":"integrations/n8n-integration/#7","title":"\u26a1 7. \u0423\u043c\u043d\u043e\u0435 \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u0435","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u041d\u0443\u0436\u043d\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u0440\u0438\u0444\u044b \u0434\u0435\u043d\u044c/\u043d\u043e\u0447\u044c \u0438 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Smart Power Management\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Cron (\u043a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u0441)\n  \u2193\n\u041d\u043e\u0434\u0430: Home Assistant \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435\n  sensor.total_power\n  \u2193\n\u041d\u043e\u0434\u0430: HTTP \u2192 API \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u044b\u0442\u0430 (\u0442\u0430\u0440\u0438\u0444\u044b)\n  \u0423\u0437\u043d\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0442\u0430\u0440\u0438\u0444 (\u0434\u0435\u043d\u044c/\u043d\u043e\u0447\u044c/\u043f\u0438\u043a)\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 Predictive analysis\n  \u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0447\u0430\u0441\n  \u0420\u0430\u0441\u0447\u0435\u0442 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438\n  \u2193\n\u041d\u043e\u0434\u0430: Switch \u2192 \u0420\u0435\u0448\u0435\u043d\u0438\u044f\n\n  Case 1: \u041f\u0438\u043a + \u0432\u044b\u0441\u043e\u043a\u043e\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435\n    \u2192 \u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u0435\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\n    \u2192 HA: switch.water_heater = off\n\n  Case 2: \u041d\u043e\u0447\u043d\u043e\u0439 \u0442\u0430\u0440\u0438\u0444 + \u043d\u0438\u0437\u043a\u043e\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435\n    \u2192 \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438\n    \u2192 HA: switch.dishwasher = on (\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430)\n\n  Case 3: \u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c\n    \u2192 \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c\n  \u2193\n\u041d\u043e\u0434\u0430: Home Assistant \u2192 \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c input_select.power_mode\n  \"peak\" | \"night\" | \"normal\"\n  \u2193\n\u041d\u043e\u0434\u0430: Google Sheets \u2192 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n  Timestamp, consumption, tariff, cost, actions\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f 15-30% \u043d\u0430 \u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u0435</li> <li>\u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435</li> <li>\u2705 \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u0438 \u043e\u0442\u0447\u0435\u0442\u044b</li> </ul>"},{"location":"integrations/n8n-integration/#8","title":"\ud83d\udd14 8. \u0410\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u044f \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439 \u043e\u0442 HA (\u0441\u043f\u0430\u043c).</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Smart Notification Aggregator\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Webhook \u043e\u0442 HA (\u043b\u044e\u0431\u043e\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435)\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u0411\u0443\u0444\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u044f\n  \u0421\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 5 \u043c\u0438\u043d\u0443\u0442\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430\n  \u041f\u043e \u0442\u0438\u043f\u0443: \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0435, \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f, \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f\n  \u041f\u043e \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0443: \u043a\u0430\u043c\u0435\u0440\u044b, \u0434\u0430\u0442\u0447\u0438\u043a\u0438, \u0441\u0438\u0441\u0442\u0435\u043c\u0430\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0437\u0430\u0446\u0438\u044f\n  \u041a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0435: \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0440\u0430\u0437\u0443\n  \u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f: \u0431\u0430\u0442\u0447 \u0440\u0430\u0437 \u0432 \u0447\u0430\u0441\n  \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: \u0431\u0430\u0442\u0447 \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c\n  \u2193\n\u041d\u043e\u0434\u0430: Switch \u2192 \u041f\u043e \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0443\n\n  Critical:\n    Telegram \u2192 Instant push\n    + Phone call (\u0435\u0441\u043b\u0438 \u043d\u043e\u0447\u044c)\n\n  Warning:\n    Telegram \u2192 \u0411\u0430\u0442\u0447 \u0447\u0435\u0440\u0435\u0437 \u0447\u0430\u0441\n\n  Info:\n    Telegram \u2192 Daily digest\n  \u2193\n\u041d\u043e\u0434\u0430: Database \u2192 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n  \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0432\u0441\u0435\u0445 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u041d\u0435\u0442 \u0441\u043f\u0430\u043c\u0430</li> <li>\u2705 \u0412\u0430\u0436\u043d\u043e\u0435 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u043e</li> <li>\u2705 \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0438 \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430</li> <li>\u2705 \u0418\u0441\u0442\u043e\u0440\u0438\u044f</li> </ul>"},{"location":"integrations/n8n-integration/#9","title":"\ud83d\udd10 9. \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u041d\u0443\u0436\u043d\u043e \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043e\u0437\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Security Monitoring\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Webhook \u043e\u0442 HA\n  - \u041d\u0435\u0443\u0434\u0430\u0447\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0432\u0445\u043e\u0434\u0430\n  - \u041d\u043e\u0432\u043e\u0435 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e\n  - \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u0410\u043d\u0430\u043b\u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430\n  - \u0412\u0440\u0435\u043c\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u044f\n  - IP \u0430\u0434\u0440\u0435\u0441\n  - \u0427\u0430\u0441\u0442\u043e\u0442\u0430 (\u0435\u0441\u0442\u044c \u043b\u0438 \u043f\u0430\u0442\u0442\u0435\u0440\u043d \u0430\u0442\u0430\u043a\u0438?)\n  \u2193\n\u041d\u043e\u0434\u0430: Database \u2192 \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c blacklist\n  \u0418\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0435 \u0432\u0440\u0435\u0434\u043e\u043d\u043e\u0441\u043d\u044b\u0435 IP\n  \u2193\n\u041d\u043e\u0434\u0430: Switch \u2192 \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0443\u0433\u0440\u043e\u0437\u044b\n\n  High:\n    \u2192 MikroTik API: \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c IP\n    \u2192 HA: \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u0442\u0440\u0435\u0432\u043e\u0433\u0438\n    \u2192 Telegram: \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0439 \u0430\u043b\u0435\u0440\u0442\n    \u2192 Email: \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442\n\n  Medium:\n    \u2192 Telegram: \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435\n    \u2192 Log \u0432 \u0431\u0430\u0437\u0443\n\n  Low:\n    \u2192 \u0422\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n  \u2193\n\u041d\u043e\u0434\u0430: Google Sheets \u2192 Security Log\n  \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u043e\u0432\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u041f\u0440\u043e\u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0437\u0430\u0449\u0438\u0442\u0430</li> <li>\u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430</li> <li>\u2705 \u0414\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> </ul>"},{"location":"integrations/n8n-integration/#10-iot","title":"\ud83c\udf10 10. \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 IoT \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430\u043c\u0438","text":"<p>Use case: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043d\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430\u0445 (Tuya, Xiaomi, Zigbee).</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 n8n:</p> <pre><code>n8n Workflow: \"Multi-Platform Sync\"\n\n\u0422\u0440\u0438\u0433\u0433\u0435\u0440: Cron (\u043a\u0430\u0436\u0434\u044b\u0435 5 \u043c\u0438\u043d\u0443\u0442)\n  \u2193\n\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e:\n\n  Tuya Cloud API \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\n  Xiaomi Cloud API \u2192 \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\n  MQTT \u2192 Zigbee2MQTT \u0434\u0430\u043d\u043d\u044b\u0435\n  \u2193\nMerge \u2192 \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c\n  \u2193\n\u041d\u043e\u0434\u0430: Function \u2192 \u041d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445\n  \u041f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043a \u0435\u0434\u0438\u043d\u043e\u043c\u0443 \u0444\u043e\u0440\u043c\u0430\u0442\u0443\n  \u2193\n\u041d\u043e\u0434\u0430: Home Assistant \u2192 \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c MQTT sensors\n  \u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0432 HA MQTT\n  \u2193\n\u041d\u043e\u0434\u0430: Database \u2192 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n  \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439 \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 \u0415\u0434\u0438\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f</li> <li>\u2705 \u041d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0442 \u043e\u0431\u043b\u0430\u043a\u043e\u0432</li> <li>\u2705 \u0418\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0431\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul>"},{"location":"integrations/n8n-integration/#_7","title":"\ud83d\udd27 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b","text":""},{"location":"integrations/n8n-integration/#1-webhook-ha","title":"\u041f\u0440\u0438\u043c\u0435\u0440 1: Webhook \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0438\u0437 HA","text":"<p>HA Automation:</p> <pre><code>automation:\n  - alias: \"\u041d\u0438\u0437\u043a\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u2192 n8n\"\n    trigger:\n      - platform: numeric_state\n        entity_id: sensor.outdoor_temperature\n        below: 0\n    action:\n      - service: rest_command.n8n_heating_alert\n        data:\n          temperature: \"{{ states('sensor.outdoor_temperature') }}\"\n          forecast: \"{{ state_attr('weather.home', 'forecast') }}\"\n</code></pre> <p>HA Configuration:</p> <pre><code>rest_command:\n  n8n_heating_alert:\n    url: \"http://192.168.1.XXX:5678/webhook/heating-alert\"\n    method: POST\n    content_type: \"application/json\"\n    payload: &gt;\n      {\n        \"temperature\": {{ temperature }},\n        \"forecast\": {{ forecast }},\n        \"timestamp\": \"{{ now().isoformat() }}\"\n      }\n</code></pre>"},{"location":"integrations/n8n-integration/#2-n8n-ha","title":"\u041f\u0440\u0438\u043c\u0435\u0440 2: n8n \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 HA","text":"<p>n8n HTTP Request node:</p> <pre><code>{\n  \"method\": \"POST\",\n  \"url\": \"http://192.168.1.20:8123/api/services/light/turn_on\",\n  \"authentication\": \"genericCredentialType\",\n  \"genericAuthType\": \"httpHeaderAuth\",\n  \"httpHeaderAuth\": {\n    \"name\": \"Authorization\",\n    \"value\": \"Bearer YOUR_HA_TOKEN\"\n  },\n  \"bodyParameters\": {\n    \"entity_id\": \"light.living_room\",\n    \"brightness\": 255,\n    \"rgb_color\": [255, 0, 0]\n  }\n}\n</code></pre>"},{"location":"integrations/n8n-integration/#3-ha","title":"\u041f\u0440\u0438\u043c\u0435\u0440 3: \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 HA","text":"<p>n8n Home Assistant node:</p> <pre><code>{\n  \"operation\": \"getState\",\n  \"entityId\": \"sensor.outdoor_temperature\",\n  \"credentials\": \"Home Assistant\"\n}\n</code></pre> <p>\u0412\u044b\u0432\u043e\u0434:</p> <pre><code>{\n  \"state\": \"5.2\",\n  \"attributes\": {\n    \"unit_of_measurement\": \"\u00b0C\",\n    \"friendly_name\": \"Outdoor Temperature\"\n  }\n}\n</code></pre>"},{"location":"integrations/n8n-integration/#_8","title":"\ud83c\udfaf \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0435","text":""},{"location":"integrations/n8n-integration/#home-assistant","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0432 Home Assistant","text":"<p>\u2705 \u041f\u0440\u043e\u0441\u0442\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438: - \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0432\u0435\u0442 \u043f\u0440\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0438 - \u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0448\u0442\u043e\u0440\u044b \u043d\u0430 \u0437\u0430\u043a\u0430\u0442\u0435 - \u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u0438/\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f</p> <p>\u2705 \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f: - \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 - \u0411\u044b\u0441\u0442\u0440\u044b\u0435 \u0440\u0435\u0430\u043a\u0446\u0438\u0438 - \u041a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</p>"},{"location":"integrations/n8n-integration/#n8n_1","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0432 n8n","text":"<p>\u2705 \u0421\u043b\u043e\u0436\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430: - \u0420\u0430\u0441\u0447\u0435\u0442\u044b \u0438 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u044b - \u041c\u0430\u0448\u0438\u043d\u043d\u043e\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 - \u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</p> <p>\u2705 \u0412\u043d\u0435\u0448\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438: - API \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 - \u041e\u0431\u043b\u0430\u0447\u043d\u044b\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b - \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 (\u0433\u0440\u0430\u0444\u0438\u043a\u0438, \u043e\u0442\u0447\u0435\u0442\u044b)</p> <p>\u2705 \u0414\u043e\u043b\u0433\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: - \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 - \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043e\u0442\u0447\u0435\u0442\u043e\u0432 - \u0411\u044d\u043a\u0430\u043f\u044b</p>"},{"location":"integrations/n8n-integration/#mcp-cursor","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 MCP (Cursor)","text":"<p>\u2705 \u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430: - \u041d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0439 - \u041e\u0442\u043b\u0430\u0434\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 - \u0411\u044b\u0441\u0442\u0440\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c</p> <p>\u2705 AI-\u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442: - \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u0434\u0430 - \u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f - \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438</p>"},{"location":"integrations/n8n-integration/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"integrations/n8n-integration/#1-5","title":"1. \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 (5 \u043c\u0438\u043d\u0443\u0442)","text":"<pre><code># 1. \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 config.yml\nnano config.yml\n\n# 2. \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u043a\u0440\u0438\u043f\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\nnano scripts/check_n8n.sh\nchmod +x scripts/check_n8n.sh\n\n# 3. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\n./scripts/check_n8n.sh\n</code></pre>"},{"location":"integrations/n8n-integration/#2-workflow-10","title":"2. \u041f\u0435\u0440\u0432\u044b\u0439 workflow (10 \u043c\u0438\u043d\u0443\u0442)","text":"<ol> <li>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 n8n</li> <li>Create new workflow: \"HA Status Check\"</li> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043d\u043e\u0434\u044b:</li> <li>Webhook (\u0442\u0440\u0438\u0433\u0433\u0435\u0440)</li> <li>Home Assistant \u2192 Get States</li> <li>Telegram \u2192 Send message</li> <li>Activate workflow</li> <li>\u041f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0438\u0437 HA</li> </ol>"},{"location":"integrations/n8n-integration/#3_2","title":"3. \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","text":"<p>\u041f\u043e\u043b\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0432:</p> <ul> <li>n8n Documentation</li> <li>Home Assistant REST API</li> <li>Webhook Automation</li> </ul>"},{"location":"integrations/n8n-integration/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"integrations/n8n-integration/#n8n-ha","title":"n8n \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a HA","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 1: \u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c HA</p> <pre><code>curl -I http://192.168.1.20:8123\n# \u0414\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c 200 OK\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 2: Long-Lived Token</p> <pre><code>curl -H \"Authorization: Bearer YOUR_TOKEN\" \\\n     http://192.168.1.20:8123/api/\n# \u0414\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c JSON \u0441 message: \"API running\"\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 3: CORS (\u0435\u0441\u043b\u0438 n8n \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u043c \u0445\u043e\u0441\u0442\u0435)</p> <p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 HA <code>configuration.yaml</code>:</p> <pre><code>http:\n  cors_allowed_origins:\n    - \"http://192.168.1.XXX:5678\"  # IP \u0432\u0430\u0448\u0435\u0433\u043e n8n\n</code></pre>"},{"location":"integrations/n8n-integration/#ha-webhook-n8n","title":"HA \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 webhook \u043e\u0442 n8n","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 1: Webhook URL</p> <p>n8n webhook \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c:</p> <pre><code>http://192.168.1.20:8123/api/webhook/YOUR_WEBHOOK_ID\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 2: Automation \u0432 HA</p> <pre><code>automation:\n  - alias: \"Test n8n webhook\"\n    trigger:\n      - platform: webhook\n        webhook_id: \"n8n_test\"  # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u044d\u0442\u043e\u0442 ID \u0432 n8n\n    action:\n      - service: notify.telegram\n        data:\n          message: \"Webhook from n8n received!\"\n</code></pre>"},{"location":"integrations/n8n-integration/#workflows","title":"\u041c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 workflows","text":"<p>\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f:</p> <ol> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 IP (\u043d\u0435 \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442)</li> <li>\u041a\u0435\u0448\u0438\u0440\u0443\u0439\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 batching</li> <li>Async \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0433\u0434\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e</li> </ol>"},{"location":"integrations/n8n-integration/#_9","title":"\ud83d\udcda \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<ul> <li>n8n \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f</li> <li>n8n Home Assistant node</li> <li>Home Assistant REST API</li> <li>Community workflows</li> </ul>"},{"location":"integrations/n8n-integration/#_10","title":"\ud83d\udca1 \u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0448\u0430\u0433\u0438","text":"<ol> <li>\u2705 \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0431\u0430\u0437\u043e\u0432\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 (webhook)</li> <li>\u2705 \u0421\u043e\u0437\u0434\u0430\u0442\u044c 2-3 \u043f\u0440\u043e\u0441\u0442\u044b\u0445 workflow</li> <li>\u2705 \u041f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044e</li> <li>\u2705 \u041f\u043e\u0441\u0442\u0435\u043f\u0435\u043d\u043d\u043e \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u0443\u044e \u043b\u043e\u0433\u0438\u043a\u0443 \u0432 n8n</li> <li>\u2705 \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0438 workflows</li> </ol> <p>\u0421\u043e\u0432\u0435\u0442: \u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441 \u043f\u0440\u043e\u0441\u0442\u043e\u0433\u043e (webhook \u0442\u0440\u0438\u0433\u0433\u0435\u0440), \u0437\u0430\u0442\u0435\u043c \u043f\u043e\u0441\u0442\u0435\u043f\u0435\u043d\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c!</p>"},{"location":"reference/COMMANDS/","title":"\ud83d\udcbb \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u043a\u043e\u043c\u0430\u043d\u0434","text":"<p>\u0412\u0441\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0438 \u0441\u043a\u0440\u0438\u043f\u0442\u044b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 Home Assistant.</p>"},{"location":"reference/COMMANDS/#_2","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\ud83d\udd27 \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0441\u043a\u0440\u0438\u043f\u0442\u044b</li> <li>setup.sh</li> <li>mount.sh</li> <li>check.sh</li> <li>\ud83d\udce6 \u0421\u043a\u0440\u0438\u043f\u0442\u044b \u0432 scripts/</li> <li>scripts/setup_samba.sh</li> <li>scripts/deploy.sh</li> <li>scripts/backup.sh</li> <li>scripts/restore.sh</li> <li>scripts/view_logs.sh</li> <li>\ud83d\udd10 SSH \u043a\u043e\u043c\u0430\u043d\u0434\u044b</li> <li>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435</li> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0431\u0435\u0437 \u0432\u0445\u043e\u0434\u0430</li> <li>\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b HA</li> <li>\ud83d\udcc1 SAMBA \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> <li>\u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430</li> <li>\ud83d\udcdd YAML \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 HA</li> <li>\ud83d\uddc2\ufe0f Git \u043a\u043e\u043c\u0430\u043d\u0434\u044b</li> <li>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f (\u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438)</li> <li>\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u041e\u0442\u043a\u0430\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> <li>\ud83e\udd16 MCP \u043a\u043e\u043c\u0430\u043d\u0434\u044b (\u0447\u0435\u0440\u0435\u0437 AI \u0432 Cursor)</li> <li>\ud83d\udee0\ufe0f \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0430\u043b\u0438\u0430\u0441\u044b</li> <li>\ud83d\udcca \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430</li> <li>\u0411\u044b\u0441\u0442\u0440\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430</li> <li>\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430</li> <li>\ud83d\udd04 \u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432</li> <li>\u0421 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439</li> <li>\u0421 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440</li> <li>\ud83d\udcc8 \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432</li> <li>\u041b\u043e\u0433\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438</li> <li>\ud83c\udfaf \u0411\u044b\u0441\u0442\u0440\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430</li> </ul>"},{"location":"reference/COMMANDS/#_3","title":"\ud83d\udd27 \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0441\u043a\u0440\u0438\u043f\u0442\u044b","text":""},{"location":"reference/COMMANDS/#setupsh","title":"setup.sh","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0432\u0441\u0435\u0445 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 (\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0440\u0430\u0437).</p> <pre><code>./setup.sh\n</code></pre> <p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442:</p> <ul> <li>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b</li> <li>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 Python \u043f\u0430\u043a\u0435\u0442\u044b</li> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 SSH \u043a\u043b\u044e\u0447</li> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438</li> </ul>"},{"location":"reference/COMMANDS/#mountsh","title":"mount.sh","text":"<p>\u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u043e\u0432 Home Assistant \u0447\u0435\u0440\u0435\u0437 SAMBA.</p> <pre><code>./mount.sh\n</code></pre> <p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442:</p> <ul> <li>\u041c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442 <code>//your-server/config</code> \u0432 <code>/mnt/hassio</code></li> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0441\u0438\u043c\u0432\u043e\u043b\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0441\u0441\u044b\u043b\u043a\u0443 <code>config/</code> \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0435</li> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435</li> </ul> <p>\u0420\u0430\u0437\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c:</p> <pre><code>sudo umount /mnt/hassio\n</code></pre>"},{"location":"reference/COMMANDS/#checksh","title":"check.sh","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f.</p> <pre><code>./check.sh\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442:</p> <ul> <li>SSH \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435</li> <li>SAMBA \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u0414\u043e\u0441\u0442\u0443\u043f \u043a configuration.yaml</li> <li>MCP \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e</li> </ul>"},{"location":"reference/COMMANDS/#scripts","title":"\ud83d\udce6 \u0421\u043a\u0440\u0438\u043f\u0442\u044b \u0432 scripts/","text":""},{"location":"reference/COMMANDS/#scriptssetup_sambash","title":"scripts/setup_samba.sh","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0441 SAMBA credentials.</p> <pre><code>./scripts/setup_samba.sh\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442: <code>.samba-credentials</code> \u0441 username/password</p>"},{"location":"reference/COMMANDS/#scriptsdeploysh","title":"scripts/deploy.sh","text":"<p>\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.</p> <pre><code>./scripts/deploy.sh\n</code></pre> <p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 (\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438):</p> <ol> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0431\u044d\u043a\u0430\u043f</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 YAML \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441</li> <li>\u0412\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e HA</li> <li>\u041a\u043e\u043c\u043c\u0438\u0442\u0438\u0442 \u0432 Git</li> <li>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 Home Assistant</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0447\u0442\u043e \u0432\u0441\u0451 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b\u043e\u0441\u044c</li> </ol>"},{"location":"reference/COMMANDS/#scriptsbackupsh","title":"scripts/backup.sh","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0439 \u043a\u043e\u043f\u0438\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p> <pre><code>./scripts/backup.sh\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442: <code>backups/config_YYYYMMDD_HHMMSS.tar.gz</code> \u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435: 7 \u0434\u043d\u0435\u0439 (\u0441\u0442\u0430\u0440\u044b\u0435 \u0443\u0434\u0430\u043b\u044f\u044e\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438)</p>"},{"location":"reference/COMMANDS/#scriptsrestoresh","title":"scripts/restore.sh","text":"<p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u0437 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0439 \u043a\u043e\u043f\u0438\u0438.</p> <pre><code>./scripts/restore.sh\n</code></pre> <p>\u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e:</p> <ol> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0431\u044d\u043a\u0430\u043f\u043e\u0432</li> <li>\u041f\u0440\u043e\u0441\u0438\u0442 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u043e\u043c\u0435\u0440</li> <li>\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435</li> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0431\u044d\u043a\u0430\u043f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438</li> <li>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f</li> </ol>"},{"location":"reference/COMMANDS/#scriptsview_logssh","title":"scripts/view_logs.sh","text":"<p>\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043b\u043e\u0433\u043e\u0432 Home Assistant.</p> <pre><code>./scripts/view_logs.sh\n</code></pre> <p>\u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e:</p> <ol> <li>\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 50 \u0441\u0442\u0440\u043e\u043a</li> <li>\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 100 \u0441\u0442\u0440\u043e\u043a</li> <li>\u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0448\u0438\u0431\u043a\u0438 (ERROR)</li> <li>\u0422\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f (WARNING)</li> <li>\u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 (tail -f)</li> <li>\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u0435\u043a\u0441\u0442\u0443</li> </ol>"},{"location":"reference/COMMANDS/#ssh","title":"\ud83d\udd10 SSH \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"reference/COMMANDS/#_4","title":"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<pre><code>ssh -F .ssh/config hassio\n</code></pre>"},{"location":"reference/COMMANDS/#_5","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0431\u0435\u0437 \u0432\u0445\u043e\u0434\u0430","text":"<pre><code>ssh -F .ssh/config hassio \"\u041a\u041e\u041c\u0410\u041d\u0414\u0410\"\n</code></pre>"},{"location":"reference/COMMANDS/#ha","title":"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b HA","text":"<p>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0435:</p> <pre><code>ssh -F .ssh/config hassio \"ha core info\"\nssh -F .ssh/config hassio \"ha host info\"\nssh -F .ssh/config hassio \"ha os info\"\n</code></pre> <p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435:</p> <pre><code>ssh -F .ssh/config hassio \"ha core restart\"\nssh -F .ssh/config hassio \"ha core check\"\nssh -F .ssh/config hassio \"ha core update\"\nssh -F .ssh/config hassio \"ha core rebuild\"\n</code></pre> <p>Add-ons:</p> <pre><code>ssh -F .ssh/config hassio \"ha addons list\"\nssh -F .ssh/config hassio \"ha addons info ADDON\"\nssh -F .ssh/config hassio \"ha addons restart ADDON\"\n</code></pre> <p>\u041b\u043e\u0433\u0438:</p> <pre><code>ssh -F .ssh/config hassio \"tail -f /config/home-assistant.log\"\nssh -F .ssh/config hassio \"grep ERROR /config/home-assistant.log\"\nssh -F .ssh/config hassio \"ha core logs\"\n</code></pre> <p>\u0421\u043d\u0430\u043f\u0448\u043e\u0442\u044b:</p> <pre><code>ssh -F .ssh/config hassio \"ha backups list\"\nssh -F .ssh/config hassio \"ha backups new --name='manual'\"\nssh -F .ssh/config hassio \"ha backups restore SLUG\"\n</code></pre>"},{"location":"reference/COMMANDS/#samba","title":"\ud83d\udcc1 SAMBA \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":""},{"location":"reference/COMMANDS/#_6","title":"\u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>./mount.sh                          # \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\nsudo umount /mnt/hassio             # \u0420\u0430\u0437\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\nmountpoint /mnt/hassio              # \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\n</code></pre>"},{"location":"reference/COMMANDS/#_7","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438","text":"<pre><code>ls config/                          # \u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432\ncat config/configuration.yaml       # \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0444\u0430\u0439\u043b\u0430\ncode config/                        # \u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432 Cursor\nnano config/automations.yaml        # \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 nano\n</code></pre>"},{"location":"reference/COMMANDS/#_8","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<pre><code>df -h | grep hassio                 # \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438\nmount | grep hassio                 # \u0414\u0435\u0442\u0430\u043b\u0438 \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n</code></pre>"},{"location":"reference/COMMANDS/#yaml","title":"\ud83d\udcdd YAML \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f","text":""},{"location":"reference/COMMANDS/#yaml_1","title":"\u0411\u044b\u0441\u0442\u0440\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u0441\u0435\u0445 YAML","text":"<pre><code>./scripts/validate_yaml.sh  # \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0432\u0441\u0435 YAML \u0444\u0430\u0439\u043b\u044b \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0435\n</code></pre> <p>\u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e:</p> <pre><code>./ha\n# \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435: 9) \ud83d\udcdd \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c YAML\n</code></pre>"},{"location":"reference/COMMANDS/#_9","title":"\ud83d\udcda \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438","text":""},{"location":"reference/COMMANDS/#markdown","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430 Markdown \u0444\u0430\u0439\u043b\u043e\u0432","text":"<pre><code>python3 scripts/validate_docs.py  # \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0432\u0441\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e\n</code></pre> <p>\u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e:</p> <pre><code>./ha\n# \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435: 10) \ud83d\udcda \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e\n</code></pre> <p>\u0427\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442\u0441\u044f:</p> <ul> <li>\u2705 \u0421\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u043a\u043e\u0434\u0430 (\u0437\u0430\u043a\u0440\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0438 \u0441\u0440\u0430\u0437\u0443 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u044e\u0449\u0438\u0439 fence)</li> <li>\u2705 \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u043c\u0435\u0436\u0434\u0443 \u0431\u043b\u043e\u043a\u0430\u043c\u0438</li> <li>\u2705 Trailing spaces \u043f\u043e\u0441\u043b\u0435 fence markers</li> <li>\u2705 \u041f\u0443\u0441\u0442\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u043a\u043e\u0434\u0430</li> <li>\u2705 \u041d\u0435\u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0435 fence markers</li> <li>\u2705 Hardcoded \u043f\u0443\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 (~/path \u0432\u043c\u0435\u0441\u0442\u043e /home/username/path)</li> </ul> <p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430:</p> <p>\u0412\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440 \u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0432 pre-commit hooks \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u043c \u043a\u043e\u043c\u043c\u0438\u0442\u0435!</p>"},{"location":"reference/COMMANDS/#_10","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430","text":"<pre><code>yamllint config.yml                 # \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\nyamllint -d relaxed config.yml      # \u041c\u044f\u0433\u043a\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\nyamllint --print-config             # \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\n</code></pre>"},{"location":"reference/COMMANDS/#home-assistant","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 Home Assistant","text":"<pre><code>yamllint config/configuration.yaml\nyamllint config/*.yaml\nyamllint config/automations.yaml    # \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b\n</code></pre>"},{"location":"reference/COMMANDS/#home-assistant_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 Home Assistant","text":"<pre><code>ssh -F .ssh/config hassio \"ha core check\"\n</code></pre>"},{"location":"reference/COMMANDS/#_11","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u0430\u0432\u0438\u043b","text":"<p>\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 <code>.yamllint</code>:</p> <pre><code># \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\n- \u041e\u0442\u0441\u0442\u0443\u043f\u044b: 2 \u043f\u0440\u043e\u0431\u0435\u043b\u0430\n- \u0414\u043b\u0438\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0438: 120 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 (warning)\n- \u041a\u0430\u0432\u044b\u0447\u043a\u0438: \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\n- \u0411\u0443\u043b\u0435\u0432\u044b \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: on/off, yes/no, true/false\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u0430:</p> <pre><code>yamllint --print-config\n</code></pre>"},{"location":"reference/COMMANDS/#git","title":"\ud83d\uddc2\ufe0f Git \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"reference/COMMANDS/#_12","title":"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f (\u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438)","text":"<pre><code>cd config/\ngit init\ngit config user.name \"Your Name\"\ngit config user.email \"your@email.com\"\n</code></pre>"},{"location":"reference/COMMANDS/#_13","title":"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>cd config/\n\ngit status                          # \u0427\u0442\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c\ngit diff                            # \u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\ngit diff configuration.yaml         # \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0444\u0430\u0439\u043b\u0435\n\ngit add configuration.yaml          # \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b\ngit add .                           # \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0441\u0451\n\ngit commit -m \"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\"  # \u0417\u0430\u043a\u043e\u043c\u043c\u0438\u0442\u0438\u0442\u044c\n\ngit log --oneline                   # \u0418\u0441\u0442\u043e\u0440\u0438\u044f\ngit log --oneline --graph           # \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0441 \u0433\u0440\u0430\u0444\u043e\u043c\n</code></pre>"},{"location":"reference/COMMANDS/#_14","title":"\u041e\u0442\u043a\u0430\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":"<pre><code>git checkout -- configuration.yaml  # \u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c \u0444\u0430\u0439\u043b\ngit revert HEAD                     # \u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043a\u043e\u043c\u043c\u0438\u0442\ngit reset --hard HEAD~1             # \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043a\u043e\u043c\u043c\u0438\u0442 (\u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u043e!)\n</code></pre>"},{"location":"reference/COMMANDS/#mcp-ai-cursor","title":"\ud83e\udd16 MCP \u043a\u043e\u043c\u0430\u043d\u0434\u044b (\u0447\u0435\u0440\u0435\u0437 AI \u0432 Cursor)","text":"<p>\u041f\u0440\u043e\u0441\u0442\u043e \u0441\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0439\u0442\u0435 AI \u0432 Cursor:</p> <p>\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433:</p> <p>\"\u041a\u0430\u043a\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0432 \u0434\u043e\u043c\u0435?\" \"\u041f\u043e\u043a\u0430\u0436\u0438 \u0432\u0441\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\" \"\u041a\u0430\u043a\u0430\u044f \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c?\" \"\u041f\u043e\u043a\u0430\u0436\u0438 \u0432\u0441\u0435 \u0442\u0435\u0440\u043c\u043e\u0441\u0442\u0430\u0442\u044b\"</p> <p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435:</p> <p>\"\u0412\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 SONOFF\" \"\u0412\u044b\u043a\u043b\u044e\u0447\u0438 \u0441\u0432\u0435\u0442 \u043d\u0430 \u043a\u0443\u0445\u043d\u0435\" \"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443 22 \u0433\u0440\u0430\u0434\u0443\u0441\u0430 \u0432 \u0441\u043f\u0430\u043b\u044c\u043d\u0435\" \"\u0412\u043a\u043b\u044e\u0447\u0438 \u043e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435\"</p> <p>\u041a\u0430\u043c\u0435\u0440\u044b:</p> <p>\"\u041f\u043e\u043a\u0430\u0436\u0438 \u0441\u043d\u0438\u043c\u043e\u043a \u0441 \u0432\u0445\u043e\u0434\u043d\u043e\u0439 \u043a\u0430\u043c\u0435\u0440\u044b\" \"\u0421\u0434\u0435\u043b\u0430\u0439 \u0441\u043d\u0430\u043f\u0448\u043e\u0442 \u0441 \u043a\u0430\u043c\u0435\u0440\u044b \u0432 \u0441\u0430\u0434\u0443\"</p>"},{"location":"reference/COMMANDS/#_15","title":"\ud83d\udee0\ufe0f \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0430\u043b\u0438\u0430\u0441\u044b","text":"<p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 <code>~/.bashrc</code>:</p> <pre><code># Home Assistant\nalias ha='ssh -F ~/HASSio/.ssh/config hassio'\nalias halog='ssh -F ~/HASSio/.ssh/config hassio \"tail -f /config/home-assistant.log\"'\nalias harestart='ssh -F ~/HASSio/.ssh/config hassio \"ha core restart\"'\nalias hacheck='ssh -F ~/HASSio/.ssh/config hassio \"ha core check\"'\nalias hamount='cd ~/HASSio &amp;&amp; ./mount.sh'\nalias haedit='code ~/HASSio/config/'\nalias hadeploy='cd ~/HASSio &amp;&amp; ./scripts/deploy.sh'\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c:</p> <pre><code>source ~/.bashrc\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:</p> <pre><code>ha              # = ssh hassio\nhalog           # = \u043b\u043e\u0433\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438\nhacheck         # = \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\nharestart       # = \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\nhamount         # = \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\nhaedit          # = \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0432 Cursor\nhadeploy        # = \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\n</code></pre>"},{"location":"reference/COMMANDS/#_16","title":"\ud83d\udcca \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430","text":""},{"location":"reference/COMMANDS/#_17","title":"\u0411\u044b\u0441\u0442\u0440\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<pre><code>./check.sh\n</code></pre>"},{"location":"reference/COMMANDS/#_18","title":"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<pre><code># SSH\nssh -F .ssh/config hassio \"ha core info\"\n\n# SAMBA\nmountpoint /mnt/hassio &amp;&amp; echo \"\u2705\" || echo \"\u274c\"\n\n# \u041c\u0435\u0441\u0442\u043e \u043d\u0430 \u0434\u0438\u0441\u043a\u0435\nssh -F .ssh/config hassio \"df -h /config\"\n\n# \u0412\u0435\u0440\u0441\u0438\u044f HA\nssh -F .ssh/config hassio \"ha core info\" | grep version\n</code></pre>"},{"location":"reference/COMMANDS/#_19","title":"\ud83d\udd04 \u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432","text":""},{"location":"reference/COMMANDS/#_20","title":"\u0421 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439","text":"<pre><code>scp -F .ssh/config hassio:/config/secrets.yaml ./backup/\n</code></pre>"},{"location":"reference/COMMANDS/#_21","title":"\u0421 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440","text":"<pre><code>scp -F .ssh/config ./new_automation.yaml hassio:/config/\n</code></pre> <p>\u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 SAMBA (\u043f\u0440\u043e\u0449\u0435):</p> <pre><code>cp new_file.yaml config/\n</code></pre>"},{"location":"reference/COMMANDS/#_22","title":"\ud83d\udcc8 \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433","text":""},{"location":"reference/COMMANDS/#_23","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438","text":"<pre><code>curl -sf https://your-domain.com &amp;&amp; echo \"\u2705 \u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d\" || echo \"\u274c \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d\"\n</code></pre>"},{"location":"reference/COMMANDS/#_24","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432","text":"<pre><code>ssh -F .ssh/config hassio \"top -bn1 | head -20\"\nssh -F .ssh/config hassio \"free -h\"\nssh -F .ssh/config hassio \"df -h\"\n</code></pre>"},{"location":"reference/COMMANDS/#_25","title":"\u041b\u043e\u0433\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438","text":"<pre><code>./scripts/view_logs.sh\n# \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0443\u043d\u043a\u0442 5\n</code></pre>"},{"location":"reference/COMMANDS/#_26","title":"\ud83c\udfaf \u0411\u044b\u0441\u0442\u0440\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430","text":"<pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 (1 \u0440\u0430\u0437)\n./setup.sh\n\n# \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n./mount.sh\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\n./check.sh\n\n# \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\ncode config/\n\n# \u0420\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435\n./scripts/deploy.sh\n\n# \u041b\u043e\u0433\u0438\n./scripts/view_logs.sh\n\n# \u0411\u044d\u043a\u0430\u043f\n./scripts/backup.sh\n\n# \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\n./scripts/restore.sh\n</code></pre>"},{"location":"reference/WORKFLOW/","title":"\ud83d\udd04 \u0420\u0430\u0431\u043e\u0447\u0438\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441","text":"<p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 Home Assistant.</p>"},{"location":"reference/WORKFLOW/#_2","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\ud83c\udfaf \u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430</li> <li>\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)</li> <li>\ud83d\udee1\ufe0f \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u041f\u0435\u0440\u0435\u0434 \u043d\u0430\u0447\u0430\u043b\u043e\u043c</li> <li>\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u0420\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435</li> <li>\ud83c\udd98 \u0415\u0441\u043b\u0438 \u0447\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c</li> <li>\u0423\u0440\u043e\u0432\u0435\u043d\u044c 1: Git \u043e\u0442\u043a\u0430\u0442 (\u0431\u044b\u0441\u0442\u0440\u043e)</li> <li>\u0423\u0440\u043e\u0432\u0435\u043d\u044c 2: \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f</li> <li>\u0423\u0440\u043e\u0432\u0435\u043d\u044c 3: \u0421\u043d\u0430\u043f\u0448\u043e\u0442 HA (\u043f\u043e\u043b\u043d\u043e\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435)</li> <li>\ud83d\udccb \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438</li> <li>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438</li> <li>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432</li> <li>\u041c\u0430\u0441\u0441\u043e\u0432\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</li> <li>\ud83d\udd0d \u041e\u0442\u043b\u0430\u0434\u043a\u0430</li> <li>\u041f\u043e\u0438\u0441\u043a \u043e\u0448\u0438\u0431\u043e\u043a</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438</li> <li>\ud83d\udcca Git workflow</li> <li>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 feature branch</li> <li>\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438</li> <li>\ud83d\udca1 Best Practices</li> <li>\u041f\u0435\u0440\u0435\u0434 \u043a\u0430\u0436\u0434\u044b\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c</li> <li>\u041f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438</li> <li>\u041f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</li> <li>\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e</li> <li>\u26a1 \u0411\u044b\u0441\u0442\u0440\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430</li> </ul>"},{"location":"reference/WORKFLOW/#_3","title":"\ud83c\udfaf \u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430","text":""},{"location":"reference/WORKFLOW/#_4","title":"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":"<pre><code># 1. \u0421\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c (\u0435\u0441\u043b\u0438 \u0435\u0449\u0451 \u043d\u0435 \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e)\n./scripts/mount.sh\n\n# 2. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 Cursor\ncode config/configuration.yaml\n\n# 3. \u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c (\u0432\u0441\u0451 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438!)\n./scripts/deploy.sh\n</code></pre> <p>\u0421\u043a\u0440\u0438\u043f\u0442 deploy.sh \u0434\u0435\u043b\u0430\u0435\u0442:</p> <ul> <li>\ud83d\udcbe \u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0431\u044d\u043a\u0430\u043f</li> <li>\ud83d\udd0d \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 YAML</li> <li>\u2705 \u0412\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 HA</li> <li>\ud83d\udcdd \u041a\u043e\u043c\u043c\u0438\u0442\u0438\u0442 \u0432 Git</li> <li>\ud83d\udd04 \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 HA</li> <li>\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0437\u0430\u043f\u0443\u0441\u043a</li> </ul>"},{"location":"reference/WORKFLOW/#_5","title":"\ud83d\udee1\ufe0f \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"reference/WORKFLOW/#_6","title":"\u041f\u0435\u0440\u0435\u0434 \u043d\u0430\u0447\u0430\u043b\u043e\u043c","text":"<pre><code># \u0423\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u0441\u0432\u0435\u0436\u0438\u0439 \u0441\u043d\u0430\u043f\u0448\u043e\u0442 HA\nssh -F .ssh/config hassio \"ha backups list\"\n\n# \u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0441\u0442\u0430\u0440\u044b\u0439 - \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439\nssh -F .ssh/config hassio \"ha backups new --name='before-changes'\"\n</code></pre>"},{"location":"reference/WORKFLOW/#_7","title":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code># \u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432 Cursor\ncode config/\n\n# \u0418\u043b\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b\ncode config/configuration.yaml\n</code></pre>"},{"location":"reference/WORKFLOW/#_8","title":"\u0420\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u0435","text":"<p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f):</p> <pre><code>./scripts/deploy.sh\n</code></pre> <p>\u0420\u0443\u0447\u043d\u043e\u0439 (\u0435\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c):</p> <pre><code># 1. \u0411\u044d\u043a\u0430\u043f\n./scripts/backup.sh\n\n# 2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 YAML\nyamllint config/*.yaml\n\n# 3. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 HA\nssh -F .ssh/config hassio \"ha core check\"\n\n# 4. Git \u043a\u043e\u043c\u043c\u0438\u0442\ncd config/\ngit add .\ngit commit -m \"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\"\n\n# 5. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\nssh -F .ssh/config hassio \"ha core restart\"\n\n# 6. \u041b\u043e\u0433\u0438\n./scripts/view_logs.sh\n</code></pre>"},{"location":"reference/WORKFLOW/#-","title":"\ud83c\udd98 \u0415\u0441\u043b\u0438 \u0447\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c","text":""},{"location":"reference/WORKFLOW/#1-git","title":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c 1: Git \u043e\u0442\u043a\u0430\u0442 (\u0431\u044b\u0441\u0442\u0440\u043e)","text":"<pre><code>cd config/\ngit log --oneline              # \u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u043a\u043e\u043c\u043c\u0438\u0442\ngit revert HEAD                # \u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\n./scripts/deploy.sh            # \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u0442\u043a\u0430\u0442\n</code></pre>"},{"location":"reference/WORKFLOW/#2","title":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c 2: \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f","text":"<pre><code>./scripts/restore.sh\n# \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u0431\u044d\u043a\u0430\u043f\n# \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c HA\n</code></pre>"},{"location":"reference/WORKFLOW/#3-ha","title":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c 3: \u0421\u043d\u0430\u043f\u0448\u043e\u0442 HA (\u043f\u043e\u043b\u043d\u043e\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435)","text":"<pre><code># \u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043d\u0430\u043f\u0448\u043e\u0442\u043e\u0432\nssh -F .ssh/config hassio \"ha backups list\"\n\n# \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\nssh -F .ssh/config hassio \"ha backups restore SLUG\"\n</code></pre>"},{"location":"reference/WORKFLOW/#_9","title":"\ud83d\udccb \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438","text":""},{"location":"reference/WORKFLOW/#_10","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438","text":"<pre><code># 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043d\u0430\u043f\u0448\u043e\u0442 HA (\u043d\u0430 \u0432\u0441\u044f\u043a\u0438\u0439 \u0441\u043b\u0443\u0447\u0430\u0439)\nssh -F .ssh/config hassio \"ha backups new --name='before-integration'\"\n\n# 2. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f\n./scripts/backup.sh\n\n# 3. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c configuration.yaml\ncode config/configuration.yaml\n\n# 4. \u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c\n./scripts/deploy.sh\n\n# 5. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043b\u043e\u0433\u0438\n./scripts/view_logs.sh\n</code></pre>"},{"location":"reference/WORKFLOW/#_11","title":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438","text":"<pre><code># 1. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\ncode config/automations.yaml\n\n# 2. \u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c (\u0431\u044d\u043a\u0430\u043f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438)\n./scripts/deploy.sh\n\n# 3. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\n# (\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0432 HA)\n</code></pre>"},{"location":"reference/WORKFLOW/#_12","title":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432","text":"<pre><code># 1. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\nnano config/secrets.yaml\n\n# 2. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\nyamllint config/secrets.yaml\n\n# 3. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c (secrets \u043d\u0435 \u0432 Git!)\nssh -F .ssh/config hassio \"ha core restart\"\n</code></pre>"},{"location":"reference/WORKFLOW/#_13","title":"\u041c\u0430\u0441\u0441\u043e\u0432\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f","text":"<pre><code># 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041f\u041e\u041b\u041d\u042b\u0419 \u0441\u043d\u0430\u043f\u0448\u043e\u0442 HA\nssh -F .ssh/config hassio \"ha backups new --name='before-major-changes'\"\n\n# 2. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u0435\u0442\u043a\u0443 \u0432 Git\ncd config/\ngit checkout -b experimental\n\n# 3. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\ncode .\n\n# 4. \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\n./scripts/deploy.sh\n\n# 5. \u0415\u0441\u043b\u0438 \u0432\u0441\u0451 \u041e\u041a - \u0441\u043c\u0435\u0440\u0436\u0438\u0442\u044c\ngit checkout main\ngit merge experimental\n\n# 6. \u0415\u0441\u043b\u0438 \u043d\u0435 \u041e\u041a - \u043e\u0442\u043a\u0430\u0442\u0438\u0442\u044c\ngit checkout main\ngit branch -D experimental\n</code></pre>"},{"location":"reference/WORKFLOW/#_14","title":"\ud83d\udd0d \u041e\u0442\u043b\u0430\u0434\u043a\u0430","text":""},{"location":"reference/WORKFLOW/#_15","title":"\u041f\u043e\u0438\u0441\u043a \u043e\u0448\u0438\u0431\u043e\u043a","text":"<pre><code># \u0412 \u043b\u043e\u0433\u0430\u0445 HA\nssh -F .ssh/config hassio \"grep ERROR /config/home-assistant.log | tail -20\"\n\n# \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\nssh -F .ssh/config hassio \"grep 'homeassistant.components.mqtt' /config/home-assistant.log\"\n\n# \u0417\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0447\u0430\u0441\nssh -F .ssh/config hassio \"tail -1000 /config/home-assistant.log | grep ERROR\"\n</code></pre>"},{"location":"reference/WORKFLOW/#_16","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<pre><code># YAML \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\nyamllint config/configuration.yaml\n\n# \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f HA (\u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e)\nssh -F .ssh/config hassio \"ha core check\"\n\n# \u0417\u0430\u043f\u0443\u0441\u043a \u0432 debug \u0440\u0435\u0436\u0438\u043c\u0435\n# \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c configuration.yaml:\nlogger:\n  default: info\n  logs:\n    homeassistant.core: debug\n</code></pre>"},{"location":"reference/WORKFLOW/#git-workflow","title":"\ud83d\udcca Git workflow","text":""},{"location":"reference/WORKFLOW/#feature-branch","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 feature branch","text":"<pre><code>cd config/\n\n# \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u0435\u0442\u043a\u0443\ngit checkout -b new-feature\n\n# \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\ncode .\n\n# \u041a\u043e\u043c\u043c\u0438\u0442\u0438\u0442\u044c\ngit add .\ngit commit -m \"Add new feature\"\n\n# \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\ncd ~/HASSio\n./scripts/deploy.sh\n\n# \u0415\u0441\u043b\u0438 OK - \u0441\u043c\u0435\u0440\u0436\u0438\u0442\u044c\ncd config/\ngit checkout main\ngit merge new-feature\ngit branch -d new-feature\n\n# \u0415\u0441\u043b\u0438 \u043d\u0435 OK - \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0435\u0442\u043a\u0443\ngit checkout main\ngit branch -D new-feature\n</code></pre>"},{"location":"reference/WORKFLOW/#_17","title":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438","text":"<pre><code>cd config/\n\n# \u041b\u043e\u0433\ngit log --oneline --graph --decorate\n\n# \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0444\u0430\u0439\u043b\u0435\ngit log --follow configuration.yaml\n\n# \u041a\u0442\u043e \u043c\u0435\u043d\u044f\u043b \u0441\u0442\u0440\u043e\u043a\u0443\ngit blame configuration.yaml\n\n# \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043c\u043c\u0438\u0442\u0430\u043c\u0438\ngit diff HEAD~1 HEAD\n</code></pre>"},{"location":"reference/WORKFLOW/#best-practices","title":"\ud83d\udca1 Best Practices","text":""},{"location":"reference/WORKFLOW/#_18","title":"\u041f\u0435\u0440\u0435\u0434 \u043a\u0430\u0436\u0434\u044b\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c","text":"<ol> <li>\u2705 \u0423\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u0441\u0432\u0435\u0436\u0438\u0439 \u0441\u043d\u0430\u043f\u0448\u043e\u0442 HA (\u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e)</li> <li>\u2705 \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f \u0441\u043e\u0437\u0434\u0430\u0441\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0447\u0435\u0440\u0435\u0437 deploy.sh</li> </ol>"},{"location":"reference/WORKFLOW/#_19","title":"\u041f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438","text":"<ol> <li>\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c YAML \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441</li> <li>\u2705 \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 dev \u0432\u0435\u0442\u043a\u0435 (\u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439)</li> <li>\u2705 \u0427\u0438\u0442\u0430\u0442\u044c \u043b\u043e\u0433\u0438 \u043f\u043e\u0441\u043b\u0435 \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044b\u0432\u0430\u043d\u0438\u044f</li> </ol>"},{"location":"reference/WORKFLOW/#_20","title":"\u041f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f","text":"<ol> <li>\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e HA \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b\u0441\u044f</li> <li>\u2705 \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442</li> <li>\u2705 \u0417\u0430\u043a\u043e\u043c\u043c\u0438\u0442\u0438\u0442\u044c \u0432 Git</li> </ol>"},{"location":"reference/WORKFLOW/#_21","title":"\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e","text":"<ol> <li>\u2705 \u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u044b\u0435 \u0441\u043d\u0430\u043f\u0448\u043e\u0442\u044b HA (\u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e)</li> <li>\u2705 \u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438 \u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0438</li> <li>\u2705 \u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c Home Assistant</li> </ol>"},{"location":"reference/WORKFLOW/#_22","title":"\u26a1 \u0411\u044b\u0441\u0442\u0440\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430","text":"<pre><code>./scripts/mount.sh      # \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\ncode config/            # \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\n./scripts/deploy.sh     # \u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c\n./scripts/view_logs.sh  # \u041b\u043e\u0433\u0438\n./scripts/restore.sh    # \u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c\n./scripts/check.sh      # \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\n</code></pre>"},{"location":"setup/SETUP/","title":"\ud83d\udd27 \u041f\u043e\u0448\u0430\u0433\u043e\u0432\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<p>\u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 MCP, SSH \u0438 SAMBA \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 Home Assistant \u0447\u0435\u0440\u0435\u0437 Cursor AI.</p>"},{"location":"setup/SETUP/#_2","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>\ud83d\udce6 \u0428\u0430\u0433 1: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 (WSL)</li> <li>\ud83d\udd10 \u0428\u0430\u0433 2: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 SSH add-on \u0432 Home Assistant</li> <li>2.1. \u041e\u0442\u043a\u0440\u044b\u0442\u044c Home Assistant</li> <li>2.2. \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 Add-ons</li> <li>2.3. \u041d\u0430\u0439\u0442\u0438 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Terminal &amp; SSH</li> <li>2.4. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c SSH add-on</li> <li>2.5. \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c SSH add-on</li> <li>\ud83d\udcc1 \u0428\u0430\u0433 3: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Samba add-on \u0432 Home Assistant</li> <li>3.1. \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 Add-on Store</li> <li>3.2. \u041d\u0430\u0439\u0442\u0438 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Samba share</li> <li>3.3. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c Samba</li> <li>3.4. \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Samba</li> <li>\ud83c\udf10 \u0428\u0430\u0433 4: \u0423\u0437\u043d\u0430\u0442\u044c IP \u0430\u0434\u0440\u0435\u0441 Home Assistant</li> <li>\u0412 Home Assistant</li> <li>\ud83d\udcbb \u0428\u0430\u0433 5: \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 (WSL)</li> <li>5.1. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c SAMBA credentials</li> <li>5.2. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c SSH config \u0441 \u0432\u0430\u0448\u0438\u043c IP</li> <li>\ud83c\udf0d \u0428\u0430\u0433 6: \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 \u043d\u0430 \u0440\u043e\u0443\u0442\u0435\u0440\u0435</li> <li>6.1. \u0412\u043e\u0439\u0442\u0438 \u0432 \u0440\u043e\u0443\u0442\u0435\u0440</li> <li>6.2. \u041d\u0430\u0439\u0442\u0438 \u0440\u0430\u0437\u0434\u0435\u043b Port Forwarding</li> <li>6.3. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0434\u043b\u044f SSH</li> <li>6.4. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f SAMBA</li> <li>6.5. \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438</li> <li>\u2705 \u0428\u0430\u0433 7: \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 SSH \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>7.1. \u041f\u0435\u0440\u0432\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435</li> <li>7.2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b</li> <li>7.3. \u0412\u044b\u0445\u043e\u0434</li> <li>\ud83d\udcc1 \u0428\u0430\u0433 8: \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 SAMBA</li> <li>8.1. \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>8.2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430</li> <li>\u2705 \u0428\u0430\u0433 9: \u0424\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430</li> <li>\ud83c\udfaf \u041d\u0430\u0447\u0430\u043b\u043e \u0440\u0430\u0431\u043e\u0442\u044b</li> <li>\ud83c\udd98 \u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c</li> <li>SSH \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f</li> <li>SAMBA \u043d\u0435 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f</li> <li>MCP \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>\ud83d\udcdd \u0412\u0430\u0436\u043d\u044b\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438</li> <li>\u041e SAMBA \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438</li> <li>\u041e SSH \u043a\u043b\u044e\u0447\u0430\u0445</li> <li>\u041e \u043f\u0430\u0440\u043e\u043b\u044f\u0445</li> <li>\u2705 \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438</li> <li>\ud83c\udf93 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f</li> </ul>"},{"location":"setup/SETUP/#_3","title":"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ul> <li>\u2705 Home Assistant \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432 \u0432\u0430\u0448\u0435\u0439 \u0441\u0435\u0442\u0438 (\u0434\u043e\u043c\u0435\u043d \u0438\u043b\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 IP)</li> <li>\u2705 \u0415\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0440\u043e\u0443\u0442\u0435\u0440\u0443 \u0434\u043b\u044f \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430 \u043f\u043e\u0440\u0442\u043e\u0432</li> <li>\u2705 WSL2/Linux \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435</li> </ul>"},{"location":"setup/SETUP/#1-wsl","title":"\ud83d\udce6 \u0428\u0430\u0433 1: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 (WSL)","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>cd ~/HASSio\nchmod +x scripts/*.sh\n./scripts/setup.sh\n</code></pre> <p>\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442:</p> <ul> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0442\u0441\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b (ssh, cifs-utils, git)</li> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0442\u0441\u044f Python \u043f\u0430\u043a\u0435\u0442\u044b (yamllint, pyyaml, requests)</li> <li>\u0421\u043e\u0437\u0434\u0430\u0441\u0442\u0441\u044f SSH \u043a\u043b\u044e\u0447 \u0432 <code>.ssh/id_hassio</code></li> <li>\u041f\u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447 \u0434\u043b\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> </ul> <p>\u0412 \u043a\u043e\u043d\u0446\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 SSH \u043a\u043b\u044e\u0447! \u041e\u043d \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0442\u0430\u043a:</p> <p>ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBsd... hassio-20251007</p>"},{"location":"setup/SETUP/#2-ssh-add-on-home-assistant","title":"\ud83d\udd10 \u0428\u0430\u0433 2: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 SSH add-on \u0432 Home Assistant","text":""},{"location":"setup/SETUP/#21-home-assistant","title":"2.1. \u041e\u0442\u043a\u0440\u044b\u0442\u044c Home Assistant","text":"<p>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435: \u0432\u0430\u0448_\u0434\u043e\u043c\u0435\u043d_\u0438\u043b\u0438_IP</p>"},{"location":"setup/SETUP/#22-add-ons","title":"2.2. \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 Add-ons","text":"<ol> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u2699\ufe0f Settings (\u0441\u043b\u0435\u0432\u0430 \u0432\u043d\u0438\u0437\u0443 \u0432 \u043c\u0435\u043d\u044e)</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Add-ons</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0441\u0438\u043d\u044e\u044e \u043a\u043d\u043e\u043f\u043a\u0443 ADD-ON STORE (\u0441\u043f\u0440\u0430\u0432\u0430 \u0432\u043d\u0438\u0437\u0443)</li> </ol>"},{"location":"setup/SETUP/#23-terminal-ssh","title":"2.3. \u041d\u0430\u0439\u0442\u0438 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Terminal &amp; SSH","text":"<ol> <li>\u0412 \u043f\u043e\u043b\u0435 \u043f\u043e\u0438\u0441\u043a\u0430 \u0432\u0432\u0435\u0440\u0445\u0443 \u043d\u0430\u0431\u0435\u0440\u0438\u0442\u0435: <code>ssh</code></li> <li>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 Terminal &amp; SSH (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 add-on \u043e\u0442 Home Assistant)</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043d\u0435\u0433\u043e</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0441\u0438\u043d\u044e\u044e \u043a\u043d\u043e\u043f\u043a\u0443 INSTALL</li> <li>\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 (2-5 \u043c\u0438\u043d\u0443\u0442, \u0432\u043d\u0438\u0437\u0443 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0433\u0440\u0435\u0441\u0441)</li> </ol>"},{"location":"setup/SETUP/#24-ssh-add-on","title":"2.4. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c SSH add-on","text":"<ol> <li>\u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0432\u043a\u043b\u0430\u0434\u043a\u0443 Configuration (\u0432\u0432\u0435\u0440\u0445\u0443)</li> <li>\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e:</li> </ol> <pre><code>authorized_keys:\n  - \"ssh-ed25519 \u0412\u0410\u0410\u0410\u0428_\u041a\u041b\u042e\u0427_\u0418\u0417_\u0428\u0410\u0413\u0410_1 hassio-20251007\"\npassword: \"\u0432\u0430\u0448_\u043d\u0430\u0434\u0451\u0436\u043d\u044b\u0439_\u043f\u0430\u0440\u043e\u043b\u044c_123\"\napks: []\nserver:\n  tcp_forwarding: false\n</code></pre> <p>\u0412\u0410\u0416\u041d\u041e:</p> <ul> <li>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435 <code>ssh-ed25519 \u0412\u0410\u0410\u0410\u0428_\u041a\u041b\u042e\u0427...</code> \u043d\u0430 \u0412\u0410\u0428 \u043a\u043b\u044e\u0447 \u0438\u0437 \u0448\u0430\u0433\u0430 1.1 (\u0432\u0441\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0446\u0435\u043b\u0438\u043a\u043e\u043c!)</li> <li>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435 <code>\u0432\u0430\u0448_\u043d\u0430\u0434\u0451\u0436\u043d\u044b\u0439_\u043f\u0430\u0440\u043e\u043b\u044c_123</code> \u043d\u0430 \u0441\u0432\u043e\u0439 \u043f\u0430\u0440\u043e\u043b\u044c</li> <li> <p>\u041a\u043b\u044e\u0447 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439 (Home Assistant \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u0431\u0438\u0442\u044c \u0435\u0433\u043e \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 - \u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e!)</p> </li> <li> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 SAVE (\u0441\u043f\u0440\u0430\u0432\u0430 \u0432\u0432\u0435\u0440\u0445\u0443)</p> </li> </ul>"},{"location":"setup/SETUP/#25-ssh-add-on","title":"2.5. \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c SSH add-on","text":"<ol> <li>\u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0432\u043a\u043b\u0430\u0434\u043a\u0443 Info</li> <li>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0446\u0438\u0438:</li> <li>\u2611\ufe0f Start on boot (\u0430\u0432\u0442\u043e\u0437\u0430\u043f\u0443\u0441\u043a)</li> <li>\u2611\ufe0f Watchdog (\u0430\u0432\u0442\u043e\u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u0438 \u0441\u0431\u043e\u0435)</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0441\u0438\u043d\u044e\u044e \u043a\u043d\u043e\u043f\u043a\u0443 START</li> <li>\u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0432\u043a\u043b\u0430\u0434\u043a\u0443 Log</li> <li>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443: <code>Server listening on :: port 22</code></li> <li>\u2705 \u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c - SSH \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!</li> <li>\u274c \u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0438 - \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0438\u0445 \u0438 \u0441\u043f\u0440\u043e\u0441\u0438\u0442\u0435 AI \u0432 Cursor</li> </ol>"},{"location":"setup/SETUP/#3-samba-add-on-home-assistant","title":"\ud83d\udcc1 \u0428\u0430\u0433 3: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Samba add-on \u0432 Home Assistant","text":""},{"location":"setup/SETUP/#31-add-on-store","title":"3.1. \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 Add-on Store","text":"<ol> <li>Settings \u2192 Add-ons \u2192 ADD-ON STORE</li> </ol>"},{"location":"setup/SETUP/#32-samba-share","title":"3.2. \u041d\u0430\u0439\u0442\u0438 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Samba share","text":"<ol> <li>\u041f\u043e\u0438\u0441\u043a: <code>samba</code></li> <li>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 Samba share (\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439)</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043d\u0435\u0433\u043e</li> <li>INSTALL</li> <li>\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438</li> </ol>"},{"location":"setup/SETUP/#33-samba","title":"3.3. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c Samba","text":"<ol> <li>\u0412\u043a\u043b\u0430\u0434\u043a\u0430 Configuration</li> <li>\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435:</li> </ol> <pre><code>username: homeassistant\npassword: your_secure_password\nworkgroup: WORKGROUP\nlocal_master: false\nenabled_shares:\n  - config\n  - backup\ncompatibility_mode: false\napple_compatibility_mode: false\nveto_files:\n  - ._*\n  - .DS_Store\n  - Thumbs.db\nallow_hosts:\n  - 10.0.0.0/8\n  - 172.16.0.0/12\n  - 192.168.0.0/16\n  - fe80::/10\ninterface: \"\"\n</code></pre> <p>\u041f\u043e\u044f\u0441\u043d\u0435\u043d\u0438\u044f:</p> <ul> <li><code>username</code> - \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li><code>password</code> - \u043f\u0430\u0440\u043e\u043b\u044c (\u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430 \u0441\u0432\u043e\u0439!)</li> <li> <p><code>enabled_shares</code> - \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e config \u0438 backup (\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e)</p> </li> <li> <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 SAVE</p> </li> </ul>"},{"location":"setup/SETUP/#34-samba","title":"3.4. \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Samba","text":"<ol> <li>\u0412\u043a\u043b\u0430\u0434\u043a\u0430 Info</li> <li>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435: \u2611\ufe0f Start on boot, \u2611\ufe0f Watchdog</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 START</li> <li>\u0412\u043a\u043b\u0430\u0434\u043a\u0430 Log \u2192 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435: <code>smbd version ... started</code> \u2705</li> </ol>"},{"location":"setup/SETUP/#4-ip-home-assistant","title":"\ud83c\udf10 \u0428\u0430\u0433 4: \u0423\u0437\u043d\u0430\u0442\u044c IP \u0430\u0434\u0440\u0435\u0441 Home Assistant","text":""},{"location":"setup/SETUP/#home-assistant","title":"\u0412 Home Assistant","text":"<ol> <li>Settings (\u2699\ufe0f)</li> <li>System</li> <li>Network</li> <li>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 IP \u0430\u0434\u0440\u0435\u0441 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435</li> </ol> <p>\u041f\u0440\u0438\u043c\u0435\u0440: <code>192.168.1.50</code></p> <p>\u0417\u0410\u041f\u0418\u0428\u0418\u0422\u0415 \u0415\u0413\u041e - \u043e\u043d \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0434\u0430\u043b\u044c\u0448\u0435!</p>"},{"location":"setup/SETUP/#5-wsl","title":"\ud83d\udcbb \u0428\u0430\u0433 5: \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 (WSL)","text":""},{"location":"setup/SETUP/#51-samba-credentials","title":"5.1. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c SAMBA credentials","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>cd ~/HASSio\nchmod +x scripts/*.sh\n./scripts/setup_samba.sh\n</code></pre> <p>\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442:</p> <ul> <li>\u0421\u043e\u0437\u0434\u0430\u0441\u0442\u0441\u044f \u0444\u0430\u0439\u043b <code>.samba-credentials</code> \u0441 \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0438 \u043f\u0430\u0440\u043e\u043b\u0435\u043c</li> <li>\u041f\u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438</li> </ul>"},{"location":"setup/SETUP/#52-ssh-config-ip","title":"5.2. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c SSH config \u0441 \u0432\u0430\u0448\u0438\u043c IP","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>nano .ssh/config\n</code></pre> <p>\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443:</p> <p>HostName 192.168.1.50</p> <p>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435 <code>192.168.1.50</code> \u043d\u0430 \u0412\u0410\u0428 IP \u0438\u0437 \u0448\u0430\u0433\u0430 4!</p> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c:</p> <ul> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 <code>Ctrl+O</code></li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 <code>Enter</code></li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 <code>Ctrl+X</code></li> </ul>"},{"location":"setup/SETUP/#6","title":"\ud83c\udf0d \u0428\u0430\u0433 6: \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 \u043d\u0430 \u0440\u043e\u0443\u0442\u0435\u0440\u0435","text":"<p>\ud83d\udcd6 \u0414\u043b\u044f MikroTik: \u0421\u043c. \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0434\u043b\u044f MikroTik \u0441 Reverse Proxy</p>"},{"location":"setup/SETUP/#61","title":"6.1. \u0412\u043e\u0439\u0442\u0438 \u0432 \u0440\u043e\u0443\u0442\u0435\u0440","text":"<p>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0430\u0434\u0440\u0435\u0441 \u0440\u043e\u0443\u0442\u0435\u0440\u0430:</p> <ul> <li>\u041e\u0431\u044b\u0447\u043d\u043e: <code>192.168.1.1</code> \u0438\u043b\u0438 <code>192.168.0.1</code> \u0438\u043b\u0438 <code>192.168.88.1</code></li> <li>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0440\u043e\u0443\u0442\u0435\u0440\u0430</li> </ul>"},{"location":"setup/SETUP/#62-port-forwarding","title":"6.2. \u041d\u0430\u0439\u0442\u0438 \u0440\u0430\u0437\u0434\u0435\u043b Port Forwarding","text":"<p>\u0418\u0449\u0438\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0440\u0430\u0437\u0434\u0435\u043b\u043e\u0432 (\u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u043e\u0443\u0442\u0435\u0440\u0430):</p> <ul> <li>Port Forwarding</li> <li>Virtual Server</li> <li>NAT Forwarding</li> <li>Firewall \u2192 NAT (Mikrotik)</li> </ul>"},{"location":"setup/SETUP/#63-ssh","title":"6.3. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0434\u043b\u044f SSH","text":"<p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u043e:</p> <p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435/Name: HA-SSH \u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u043f\u043e\u0440\u0442/External Port: 2222 \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 IP/Internal IP: 192.168.X.X  \u2190 \u0412\u0410\u0428 IP \u0438\u0437 \u0448\u0430\u0433\u0430 4! \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043f\u043e\u0440\u0442/Internal Port: 22 \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b/Protocol: TCP \u0421\u0442\u0430\u0442\u0443\u0441/Status: \u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e/Enabled</p>"},{"location":"setup/SETUP/#64-samba","title":"6.4. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f SAMBA","text":"<p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c 4 \u043f\u0440\u0430\u0432\u0438\u043b\u0430:</p> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u043e 1:</p> <p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: HA-SAMBA-445 \u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 445 \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 IP: 192.168.X.X  \u2190 \u0412\u0410\u0428 IP! \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 445 \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b: TCP</p> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u043e 2:</p> <p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: HA-SAMBA-139 \u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 139 \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 IP: 192.168.X.X \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 139 \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b: TCP</p> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u043e 3:</p> <p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: HA-SAMBA-137 \u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 137 \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 IP: 192.168.X.X \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 137 \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b: UDP</p> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u043e 4:</p> <p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: HA-SAMBA-138 \u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 138 \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 IP: 192.168.X.X \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043f\u043e\u0440\u0442: 138 \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b: UDP</p>"},{"location":"setup/SETUP/#65","title":"6.5. \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","text":"<p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Save / Apply / OK (\u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u043e\u0443\u0442\u0435\u0440\u0430)</p>"},{"location":"setup/SETUP/#7-ssh","title":"\u2705 \u0428\u0430\u0433 7: \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 SSH \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":""},{"location":"setup/SETUP/#71","title":"7.1. \u041f\u0435\u0440\u0432\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>cd ~/HASSio\nssh -F .ssh/config hassio\n</code></pre> <p>\u0427\u0442\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438:</p> <ol> <li>\u041f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0432\u043e\u043f\u0440\u043e\u0441: <code>Are you sure you want to continue connecting (yes/no)?</code></li> <li>\u041d\u0430\u043f\u0435\u0447\u0430\u0442\u0430\u0439\u0442\u0435: <code>yes</code></li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 <code>Enter</code></li> <li>\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u043e\u043f\u0430\u0441\u0442\u044c \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c Home Assistant</li> <li>\u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435: <code>Welcome to the Home Assistant command line.</code></li> </ol>"},{"location":"setup/SETUP/#72","title":"7.2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 HA:</p> <pre><code>ha core info\n</code></pre> <p>\u0414\u043e\u043b\u0436\u043d\u0430 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u0435\u0440\u0441\u0438\u0438 Home Assistant.</p>"},{"location":"setup/SETUP/#73","title":"7.3. \u0412\u044b\u0445\u043e\u0434","text":"<pre><code>exit\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c:</p> <ul> <li><code>Connection refused</code> \u2192 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 (\u0448\u0430\u0433 6)</li> <li><code>Permission denied</code> \u2192 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 SSH \u043a\u043b\u044e\u0447 \u0432 add-on (\u0448\u0430\u0433 2.4)</li> <li><code>Connection timed out</code> \u2192 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e add-on \u0437\u0430\u043f\u0443\u0449\u0435\u043d</li> </ul>"},{"location":"setup/SETUP/#8-samba","title":"\ud83d\udcc1 \u0428\u0430\u0433 8: \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 SAMBA","text":""},{"location":"setup/SETUP/#81","title":"8.1. \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>cd ~/HASSio\n./mount.sh\n</code></pre> <p>\u0427\u0442\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438:</p> <p>\ud83d\udd0c \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0440\u044b 'config'... \u2705 \u0421\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e! \u2705 \u0421\u043e\u0437\u0434\u0430\u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0430: ~/HASSio/config \u2192 /mnt/hassio</p> <p>\ud83d\udcc2 \u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 /mnt/hassio (\u043f\u0430\u043f\u043a\u0430 config \u0438\u0437 HA): configuration.yaml automations.yaml scripts.yaml ...</p>"},{"location":"setup/SETUP/#82","title":"8.2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>ls config/\n</code></pre> <p>\u0414\u043e\u043b\u0436\u043d\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 Home Assistant:</p> <ul> <li>configuration.yaml</li> <li>automations.yaml</li> <li>scripts.yaml</li> <li>\u0438 \u0442.\u0434.</li> </ul> <p>\u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430:</p> <ul> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e Samba add-on \u0437\u0430\u043f\u0443\u0449\u0435\u043d (\u0448\u0430\u0433 3.4)</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 <code>.samba-credentials</code></li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 SAMBA (\u0448\u0430\u0433 6.4)</li> </ul>"},{"location":"setup/SETUP/#9","title":"\u2705 \u0428\u0430\u0433 9: \u0424\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>./check.sh\n</code></pre> <p>\u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c:</p> <p>\u2705 SSH \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u2705 SAMBA \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u2705 \u0414\u043e\u0441\u0442\u0443\u043f \u043a configuration.yaml \u2705 MCP \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d</p> <p>\u0415\u0441\u043b\u0438 \u0432\u0441\u0451 \u2705 - \u043f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u044e, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430! \ud83c\udf89</p>"},{"location":"setup/SETUP/#_4","title":"\ud83c\udfaf \u041d\u0430\u0447\u0430\u043b\u043e \u0440\u0430\u0431\u043e\u0442\u044b","text":"<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u0442\u0435:</p> <pre><code># \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0438\ncode config/configuration.yaml\n\n# \u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\n./scripts/deploy.sh\n\n# \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043b\u043e\u0433\u043e\u0432\n./scripts/view_logs.sh\n</code></pre>"},{"location":"setup/SETUP/#_5","title":"\ud83c\udd98 \u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c","text":""},{"location":"setup/SETUP/#ssh","title":"SSH \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f","text":""},{"location":"setup/SETUP/#1-add-on","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 1: Add-on \u0437\u0430\u043f\u0443\u0449\u0435\u043d?","text":"<p>Home Assistant \u2192 Add-ons \u2192 Terminal &amp; SSH \u2192 \u0432\u043a\u043b\u0430\u0434\u043a\u0430 Info \u0421\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c: \"Started\"</p>"},{"location":"setup/SETUP/#2","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 2: \u041f\u043e\u0440\u0442 \u043e\u0442\u043a\u0440\u044b\u0442?","text":"<pre><code>nc -zv your-domain.com 2222\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: succeeded!\n</code></pre>"},{"location":"setup/SETUP/#3","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 3: \u041a\u043b\u044e\u0447 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d?","text":"<pre><code>cat .ssh/id_hassio.pub\n# \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e \u044d\u0442\u043e\u0442 \u043a\u043b\u044e\u0447 \u0432 Configuration add-on\n</code></pre>"},{"location":"setup/SETUP/#4","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 4: \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441 \u043f\u0430\u0440\u043e\u043b\u0435\u043c","text":"<pre><code>ssh -F .ssh/config -o PreferredAuthentications=password hassio\n# \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u0437 configuration add-on\n</code></pre>"},{"location":"setup/SETUP/#samba","title":"SAMBA \u043d\u0435 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f","text":""},{"location":"setup/SETUP/#1-add-on_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 1: Add-on \u0437\u0430\u043f\u0443\u0449\u0435\u043d?","text":"<p>Home Assistant \u2192 Add-ons \u2192 Samba share \u2192 Info \u0421\u0442\u0430\u0442\u0443\u0441: \"Started\"</p>"},{"location":"setup/SETUP/#2-credentials","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 2: Credentials \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435?","text":"<pre><code>cat .samba-credentials\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 Configuration add-on\n</code></pre>"},{"location":"setup/SETUP/#3_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 3: \u041f\u043e\u0440\u0442 \u043e\u0442\u043a\u0440\u044b\u0442?","text":"<pre><code>nc -zv your-domain.com 445\n# \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c: succeeded!\n</code></pre>"},{"location":"setup/SETUP/#4_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 4: \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0440\u0443\u0447\u043d\u0443\u044e","text":"<pre><code>sudo mount -t cifs //your-domain.com/config /mnt/hassio \\\n  -o username=homeassistant,password=your_password,uid=1000,gid=1000\n</code></pre>"},{"location":"setup/SETUP/#mcp","title":"MCP \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442","text":""},{"location":"setup/SETUP/#_6","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430: \u0424\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<pre><code>cat .cursor/mcp.json\n</code></pre> <p>\u0414\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c:</p> <pre><code>{\n  \"mcpServers\": {\n    \"home-assistant\": {\n      \"command\": \"mcp-proxy\",\n      \"args\": [\"https://your-domain.com/mcp_server/sse\"],\n      \"env\": {\n        \"API_ACCESS_TOKEN\": \"...\"\n      }\n    },\n    \"HASSio_Cursor Docs\": {\n      \"url\": \"https://gitmcp.io/Gfermoto/HASSio_Cursor\"\n    }\n  }\n}\n</code></pre> <p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 Cursor \u0435\u0441\u043b\u0438 MCP \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442.</p>"},{"location":"setup/SETUP/#_7","title":"\ud83d\udcdd \u0412\u0430\u0436\u043d\u044b\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438","text":""},{"location":"setup/SETUP/#samba_1","title":"\u041e SAMBA \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438","text":"<ul> <li><code>/mnt/hassio</code> - \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li><code>~/HASSio/config/</code> - \u0441\u0438\u043c\u0432\u043e\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 <code>/mnt/hassio</code></li> <li>\u041e\u0431\u0430 \u043f\u0443\u0442\u0438 \u0432\u0435\u0434\u0443\u0442 \u043a \u043e\u0434\u043d\u0438\u043c \u0438 \u0442\u0435\u043c \u0436\u0435 \u0444\u0430\u0439\u043b\u0430\u043c!</li> </ul>"},{"location":"setup/SETUP/#ssh_1","title":"\u041e SSH \u043a\u043b\u044e\u0447\u0430\u0445","text":"<ul> <li>\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439 \u043a\u043b\u044e\u0447: <code>.ssh/id_hassio</code> (\u043d\u0438\u043a\u043e\u043c\u0443 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435!)</li> <li>\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447: <code>.ssh/id_hassio.pub</code> (\u043c\u043e\u0436\u043d\u043e \u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f)</li> <li>\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 Home Assistant</li> </ul>"},{"location":"setup/SETUP/#_8","title":"\u041e \u043f\u0430\u0440\u043e\u043b\u044f\u0445","text":"<ul> <li>SSH \u043f\u0430\u0440\u043e\u043b\u044c - \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0435\u0441\u043b\u0438 \u043a\u043b\u044e\u0447 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>SAMBA \u043f\u0430\u0440\u043e\u043b\u044c - \u0434\u043b\u044f \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u043e\u0432</li> <li>\u041e\u0431\u0430 \u043f\u0430\u0440\u043e\u043b\u044f \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u0439 \u043c\u043e\u043c\u0435\u043d\u0442</li> </ul>"},{"location":"setup/SETUP/#-","title":"\u2705 \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","text":"<p>\u041e\u0442\u043c\u0435\u0442\u044c\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b:</p> <ul> <li>[ ] \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d <code>./setup.sh</code></li> <li>[ ] SSH \u043a\u043b\u044e\u0447 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d</li> <li>[ ] SSH add-on \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0432 HA</li> <li>[ ] SSH \u043a\u043b\u044e\u0447 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 Configuration</li> <li>[ ] SSH add-on \u0437\u0430\u043f\u0443\u0449\u0435\u043d</li> <li>[ ] Samba add-on \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0432 HA</li> <li>[ ] Samba add-on \u0437\u0430\u043f\u0443\u0449\u0435\u043d</li> <li>[ ] IP \u0430\u0434\u0440\u0435\u0441 Home Assistant \u0443\u0437\u043d\u0430\u043d</li> <li>[ ] \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 SSH \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d</li> <li>[ ] \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 SAMBA \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d</li> <li>[ ] <code>.samba-credentials</code> \u0441\u043e\u0437\u0434\u0430\u043d</li> <li>[ ] SSH config \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d \u0441 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c IP</li> <li>[ ] SSH \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>[ ] SAMBA \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f</li> <li>[ ] <code>./check.sh</code> \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0432\u0441\u0435 \u2705</li> </ul>"},{"location":"setup/SETUP/#_9","title":"\ud83c\udf93 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","text":"<ul> <li>COMMANDS.md - \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0432\u0441\u0435\u0445 \u043a\u043e\u043c\u0430\u043d\u0434</li> <li>WORKFLOW.md - \u0420\u0430\u0431\u043e\u0447\u0438\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438</li> <li>README.md - \u041e\u0431\u0437\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u0430</li> </ul>"},{"location":"setup/portforward-mikrotik/","title":"\ud83c\udf10 \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 \u043d\u0430 MikroTik \u0441 Reverse Proxy","text":"<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0434\u043b\u044f \u0431\u0435\u043b\u043e\u0433\u043e IP, \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043c\u0435\u043d\u0438 \u0438 Reverse Proxy</p>"},{"location":"setup/portforward-mikrotik/#_1","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\ud83c\udfaf \u0412\u0430\u0448\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f</li> <li>\ud83d\udccb \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u0430\u044f \u0441\u0445\u0435\u043c\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>\ud83d\udd27 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 1: \u0421 Reverse Proxy (\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)</li> <li>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430</li> <li>\u041f\u043e\u0440\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430</li> <li>\u041a\u043e\u043c\u0430\u043d\u0434\u044b MikroTik</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Reverse Proxy (Nginx)</li> <li>\ud83d\udd27 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 2: \u041f\u0440\u044f\u043c\u043e\u0439 \u0434\u043e\u0441\u0442\u0443\u043f (\u0431\u0435\u0437 Reverse Proxy)</li> <li>\u041f\u043e\u0440\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430</li> <li>\u041a\u043e\u043c\u0430\u043d\u0434\u044b MikroTik</li> <li>\ud83d\udd12 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c MikroTik</li> <li>1. \u0417\u0430\u0449\u0438\u0442\u0430 SSH \u043e\u0442 \u0431\u0440\u0443\u0442\u0444\u043e\u0440\u0441\u0430</li> <li>2. Rate limiting \u0434\u043b\u044f \u0432\u0435\u0431-\u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>3. \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u0430\u043d (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)</li> <li>\ud83d\udcdd \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 DNS</li> <li>\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u0435 \u0438\u043c\u044f</li> <li>\ud83d\udd27 \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 config.yml</li> <li>\ud83e\uddea \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0440\u0442\u043e\u0432</li> <li>2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>3. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430</li> <li>\ud83c\udd98 \u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c</li> <li>\u041f\u043e\u0440\u0442\u044b \u043d\u0435 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u044e\u0442\u0441\u044f</li> <li>SSL \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>Home Assistant \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0447\u0435\u0440\u0435\u0437 Reverse Proxy</li> <li>\ud83d\udcca \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433</li> <li>\u041b\u043e\u0433\u0438 MikroTik</li> <li>\u041b\u043e\u0433\u0438 Nginx</li> <li>\ud83d\udd17 \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438</li> <li>\ud83d\udccb \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438</li> <li>\u26a0\ufe0f \u0412\u0430\u0436\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438</li> </ul>"},{"location":"setup/portforward-mikrotik/#_2","title":"\ud83c\udfaf \u0412\u0430\u0448\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<p>\u2705 \u0411\u0435\u043b\u044b\u0439 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 IP - \u043f\u0440\u044f\u043c\u043e\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u0438\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430 \u2705 \u0414\u043e\u043c\u0435\u043d\u043d\u043e\u0435 \u0438\u043c\u044f - \u0443\u0434\u043e\u0431\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u0432\u043c\u0435\u0441\u0442\u043e IP \u2705 Reverse Proxy - \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0445\u043e\u0434 \u0447\u0435\u0440\u0435\u0437 HTTPS</p>"},{"location":"setup/portforward-mikrotik/#_3","title":"\ud83d\udccb \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u0430\u044f \u0441\u0445\u0435\u043c\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<p>\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442     \u2193 [\u0411\u0435\u043b\u044b\u0439 IP / \u0414\u043e\u043c\u0435\u043d]     \u2193 MikroTik Router (\u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432)     \u2193 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  Reverse Proxy (Nginx/Traefik)  \u2502  \u2190 \u0415\u0434\u0438\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u2502  - SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b               \u2502 \u2502  - \u041c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u0434\u043e\u043c\u0435\u043d\u0430\u043c      \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2193 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  Home Assistant                  \u2502 \u2502  192.168.1.XXX:8123              \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</p>"},{"location":"setup/portforward-mikrotik/#1-reverse-proxy","title":"\ud83d\udd27 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 1: \u0421 Reverse Proxy (\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":""},{"location":"setup/portforward-mikrotik/#_4","title":"\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430","text":"<p>\u2705 \u041e\u0434\u0438\u043d SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 Let's Encrypt \u2705 \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 DDoS \u2705 \u0426\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u043e\u0433\u0438 \u2705 \u041f\u0440\u043e\u0449\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c\u044e</p>"},{"location":"setup/portforward-mikrotik/#_5","title":"\u041f\u043e\u0440\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430","text":"\u0421\u0435\u0440\u0432\u0438\u0441 \u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u043f\u043e\u0440\u0442 \u2192 \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043f\u043e\u0440\u0442 IP \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 HTTPS 443 \u2192 443 Reverse Proxy \u0412\u0435\u0441\u044c HTTPS \u0442\u0440\u0430\u0444\u0438\u043a HTTP 80 \u2192 80 Reverse Proxy Redirect \u043d\u0430 HTTPS SSH 22 \u2192 22 Home Assistant \u041f\u0440\u044f\u043c\u043e\u0439 SSH \u0434\u043e\u0441\u0442\u0443\u043f"},{"location":"setup/portforward-mikrotik/#mikrotik","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b MikroTik","text":"<pre><code># \u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435:\n# - ether1 \u043d\u0430 \u0432\u0430\u0448 WAN \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\n# - 192.168.1.5 \u043d\u0430 IP \u0432\u0430\u0448\u0435\u0433\u043e Reverse Proxy\n# - 192.168.1.20 \u043d\u0430 IP \u0432\u0430\u0448\u0435\u0433\u043e Home Assistant\n\n# 1. HTTPS \u043d\u0430 Reverse Proxy\n/ip firewall nat add \\\n  chain=dstnat \\\n  action=dst-nat \\\n  protocol=tcp \\\n  dst-port=443 \\\n  in-interface=ether1 \\\n  to-addresses=192.168.1.5 \\\n  to-ports=443 \\\n  comment=\"HTTPS to Reverse Proxy\"\n\n# 2. HTTP \u043d\u0430 Reverse Proxy (\u0434\u043b\u044f \u0440\u0435\u0434\u0438\u0440\u0435\u043a\u0442\u0430)\n/ip firewall nat add \\\n  chain=dstnat \\\n  action=dst-nat \\\n  protocol=tcp \\\n  dst-port=80 \\\n  in-interface=ether1 \\\n  to-addresses=192.168.1.5 \\\n  to-ports=80 \\\n  comment=\"HTTP to Reverse Proxy\"\n\n# 3. SSH \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u043a Home Assistant\n/ip firewall nat add \\\n  chain=dstnat \\\n  action=dst-nat \\\n  protocol=tcp \\\n  dst-port=22 \\\n  in-interface=ether1 \\\n  to-addresses=192.168.1.20 \\\n  to-ports=22 \\\n  comment=\"SSH to Home Assistant\"\n</code></pre>"},{"location":"setup/portforward-mikrotik/#reverse-proxy-nginx","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Reverse Proxy (Nginx)","text":""},{"location":"setup/portforward-mikrotik/#etcnginxsites-availablehomeassistant","title":"/etc/nginx/sites-available/homeassistant","text":"<pre><code># Redirect HTTP to HTTPS\nserver {\n    listen 80;\n    server_name hassio.yourdomain.com;\n    return 301 https://$server_name$request_uri;\n}\n\n# Home Assistant\nserver {\n    listen 443 ssl http2;\n    server_name hassio.yourdomain.com;\n\n    # SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b (Let's Encrypt)\n    ssl_certificate /etc/letsencrypt/live/hassio.yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/hassio.yourdomain.com/privkey.pem;\n\n    # \u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 SSL \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n\n    # \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n\n    # Proxy \u043a Home Assistant\n    location / {\n        proxy_pass http://192.168.1.20:8123;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # WebSocket \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n</code></pre>"},{"location":"setup/portforward-mikrotik/#ssl","title":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430","text":"<pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c certbot\nsudo apt install certbot python3-certbot-nginx\n\n# \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\nsudo certbot --nginx -d hassio.yourdomain.com\n\n# \u0410\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 (\u0443\u0436\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e)\nsudo certbot renew --dry-run\n</code></pre>"},{"location":"setup/portforward-mikrotik/#2-reverse-proxy","title":"\ud83d\udd27 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 2: \u041f\u0440\u044f\u043c\u043e\u0439 \u0434\u043e\u0441\u0442\u0443\u043f (\u0431\u0435\u0437 Reverse Proxy)","text":"<p>\u0415\u0441\u043b\u0438 Reverse Proxy \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f, \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u044c\u0442\u0435 \u043f\u043e\u0440\u0442\u044b \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e:</p>"},{"location":"setup/portforward-mikrotik/#_6","title":"\u041f\u043e\u0440\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430","text":"\u0421\u0435\u0440\u0432\u0438\u0441 \u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u043f\u043e\u0440\u0442 \u2192 \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043f\u043e\u0440\u0442 IP \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 Home Assistant 8123 \u2192 8123 Home Assistant \u0412\u0435\u0431-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 SSH 22 \u2192 22 Home Assistant SSH \u0434\u043e\u0441\u0442\u0443\u043f SAMBA 445 \u2192 445 Home Assistant \u0424\u0430\u0439\u043b\u044b (\u043e\u043f\u0430\u0441\u043d\u043e!) <p>\u26a0\ufe0f \u041d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f! SAMBA \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043d\u0435\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u0435\u043d!</p>"},{"location":"setup/portforward-mikrotik/#mikrotik_1","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b MikroTik","text":"<pre><code># 1. Home Assistant\n/ip firewall nat add \\\n  chain=dstnat \\\n  action=dst-nat \\\n  protocol=tcp \\\n  dst-port=8123 \\\n  in-interface=ether1 \\\n  to-addresses=192.168.1.20 \\\n  to-ports=8123 \\\n  comment=\"HA Web Direct\"\n\n# 2. SSH\n/ip firewall nat add \\\n  chain=dstnat \\\n  action=dst-nat \\\n  protocol=tcp \\\n  dst-port=22 \\\n  in-interface=ether1 \\\n  to-addresses=192.168.1.20 \\\n  to-ports=22 \\\n  comment=\"SSH Direct\"\n</code></pre>"},{"location":"setup/portforward-mikrotik/#mikrotik_2","title":"\ud83d\udd12 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c MikroTik","text":""},{"location":"setup/portforward-mikrotik/#1-ssh","title":"1. \u0417\u0430\u0449\u0438\u0442\u0430 SSH \u043e\u0442 \u0431\u0440\u0443\u0442\u0444\u043e\u0440\u0441\u0430","text":"<pre><code># \u0421\u043e\u0437\u0434\u0430\u0442\u044c address list \u0434\u043b\u044f \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438\n/ip firewall filter add \\\n  chain=input \\\n  protocol=tcp \\\n  dst-port=22 \\\n  src-address-list=ssh_blacklist \\\n  action=drop \\\n  comment=\"Block SSH attackers\"\n\n# \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0432 blacklist \u043f\u0440\u0438 3+ \u043f\u043e\u043f\u044b\u0442\u043a\u0430\u0445\n/ip firewall filter add \\\n  chain=input \\\n  protocol=tcp \\\n  dst-port=22 \\\n  connection-state=new \\\n  src-address-list=ssh_stage3 \\\n  action=add-src-to-address-list \\\n  address-list=ssh_blacklist \\\n  address-list-timeout=1d\n\n/ip firewall filter add \\\n  chain=input \\\n  protocol=tcp \\\n  dst-port=22 \\\n  connection-state=new \\\n  src-address-list=ssh_stage2 \\\n  action=add-src-to-address-list \\\n  address-list=ssh_stage3 \\\n  address-list-timeout=1m\n\n/ip firewall filter add \\\n  chain=input \\\n  protocol=tcp \\\n  dst-port=22 \\\n  connection-state=new \\\n  src-address-list=ssh_stage1 \\\n  action=add-src-to-address-list \\\n  address-list=ssh_stage2 \\\n  address-list-timeout=1m\n\n/ip firewall filter add \\\n  chain=input \\\n  protocol=tcp \\\n  dst-port=22 \\\n  connection-state=new \\\n  action=add-src-to-address-list \\\n  address-list=ssh_stage1 \\\n  address-list-timeout=1m\n</code></pre>"},{"location":"setup/portforward-mikrotik/#2-rate-limiting-","title":"2. Rate limiting \u0434\u043b\u044f \u0432\u0435\u0431-\u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<pre><code># \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0441 \u043e\u0434\u043d\u043e\u0433\u043e IP\n/ip firewall filter add \\\n  chain=forward \\\n  protocol=tcp \\\n  dst-port=443 \\\n  connection-limit=50,32 \\\n  action=drop \\\n  comment=\"Limit HTTPS connections per IP\"\n</code></pre>"},{"location":"setup/portforward-mikrotik/#3","title":"3. \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u0430\u043d (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)","text":"<pre><code># \u0421\u043a\u0430\u0447\u0430\u0442\u044c GeoIP \u0431\u0430\u0437\u0443\n/tool fetch url=\"https://download.mikrotik.com/routeros/geoip.dat\"\n\n# \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0420\u043e\u0441\u0441\u0438\u0438\n/ip firewall address-list add list=allowed_countries address=0.0.0.0/0 comment=\"Russia\" address-list=geoip-c-ru\n\n# \u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0451 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435\n/ip firewall filter add \\\n  chain=forward \\\n  protocol=tcp \\\n  dst-port=443 \\\n  src-address-list=!allowed_countries \\\n  action=drop \\\n  comment=\"Block non-RU\"\n</code></pre>"},{"location":"setup/portforward-mikrotik/#dns","title":"\ud83d\udcdd \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 DNS","text":""},{"location":"setup/portforward-mikrotik/#_7","title":"\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u0435 \u0438\u043c\u044f","text":""},{"location":"setup/portforward-mikrotik/#a-","title":"A-\u0437\u0430\u043f\u0438\u0441\u044c \u0434\u043b\u044f \u0434\u043e\u043c\u0435\u043d\u0430","text":"<p>\u0412 \u043f\u0430\u043d\u0435\u043b\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u043c\u0435\u043d\u043e\u043c (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, CloudFlare, Reg.ru):</p> <p>\u0422\u0438\u043f: A \u0418\u043c\u044f: hassio \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435: \u0412\u0410\u0428_\u0411\u0415\u041b\u042b\u0419_IP TTL: 300</p> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: <code>hassio.yourdomain.com</code> \u2192 <code>\u0412\u0410\u0428_\u0411\u0415\u041b\u042b\u0419_IP</code></p>"},{"location":"setup/portforward-mikrotik/#dns_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 DNS","text":"<pre><code># Linux/Mac\ndig hassio.yourdomain.com\n\n# Windows\nnslookup hassio.yourdomain.com\n</code></pre>"},{"location":"setup/portforward-mikrotik/#configyml","title":"\ud83d\udd27 \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 config.yml","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 <code>config.yml</code>:</p> <pre><code>home_assistant:\n  # \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\n  local_ip: \"192.168.1.20\"\n  local_port: 8123\n\n  # \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\n  hostname: \"hassio.yourdomain.com\"  # \u0412\u0430\u0448 \u0434\u043e\u043c\u0435\u043d\n  global_ip: \"\u0412\u0410\u0428_\u0411\u0415\u041b\u042b\u0419_IP\"          # \u0412\u0430\u0448 \u0431\u0435\u043b\u044b\u0439 IP\n  global_port: 443                    # \u0427\u0435\u0440\u0435\u0437 Reverse Proxy (HTTPS)\n  use_ssl: true                       # \u0415\u0441\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 Reverse Proxy\n\nssh:\n  username: \"root\"\n  port: 22\n  local_ip: \"192.168.1.20\"\n  global_ip: \"\u0412\u0410\u0428_\u0411\u0415\u041b\u042b\u0419_IP\"\n\nsamba:\n  # SAMBA \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e! \u041d\u0435 \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442!\n  username: \"homeassistant\"\n  password: \"your_password\"\n  local_ip: \"192.168.1.20\"\n</code></pre>"},{"location":"setup/portforward-mikrotik/#_8","title":"\ud83e\uddea \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"setup/portforward-mikrotik/#1","title":"1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0440\u0442\u043e\u0432","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u043f\u043e\u0440\u0442\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044b\nnmap -p 443,80,22 \u0412\u0410\u0428_\u0411\u0415\u041b\u042b\u0419_IP\n\n# \u0418\u043b\u0438 \u043e\u043d\u043b\u0430\u0439\u043d\n# https://www.yougetsignal.com/tools/open-ports/\n</code></pre>"},{"location":"setup/portforward-mikrotik/#2","title":"2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<pre><code># HTTPS\ncurl -I https://hassio.yourdomain.com\n\n# SSH\nssh root@\u0412\u0410\u0428_\u0411\u0415\u041b\u042b\u0419_IP\n\n# \u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u0434\u043e\u043c\u0435\u043d\nssh root@hassio.yourdomain.com\n</code></pre>"},{"location":"setup/portforward-mikrotik/#3-ssl","title":"3. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\nopenssl s_client -connect hassio.yourdomain.com:443 -servername hassio.yourdomain.com\n\n# \u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\n# https://www.ssllabs.com/ssltest/\n</code></pre>"},{"location":"setup/portforward-mikrotik/#_9","title":"\ud83c\udd98 \u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c","text":""},{"location":"setup/portforward-mikrotik/#_10","title":"\u041f\u043e\u0440\u0442\u044b \u043d\u0435 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u044e\u0442\u0441\u044f","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c NAT \u043f\u0440\u0430\u0432\u0438\u043b\u0430\n/ip firewall nat print\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c firewall filter\n/ip firewall filter print\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c WAN \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\n/interface print\n</code></pre>"},{"location":"setup/portforward-mikrotik/#ssl_1","title":"SSL \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442","text":"<ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0447\u0442\u043e DNS \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 Nginx \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e: <code>sudo nginx -t</code></li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442: <code>sudo certbot certificates</code></li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043b\u043e\u0433\u0438: <code>sudo tail -f /var/log/nginx/error.log</code></li> </ol>"},{"location":"setup/portforward-mikrotik/#home-assistant-reverse-proxy","title":"Home Assistant \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0447\u0435\u0440\u0435\u0437 Reverse Proxy","text":"<ol> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 <code>configuration.yaml</code>:</li> </ol> <pre><code>http:\n  use_x_forwarded_for: true\n  trusted_proxies:\n    - 192.168.1.5  # IP \u0432\u0430\u0448\u0435\u0433\u043e Reverse Proxy\n</code></pre> <ol> <li>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 Home Assistant</li> </ol>"},{"location":"setup/portforward-mikrotik/#_11","title":"\ud83d\udcca \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433","text":""},{"location":"setup/portforward-mikrotik/#mikrotik_3","title":"\u041b\u043e\u0433\u0438 MikroTik","text":"<pre><code># \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043b\u043e\u0433\u0438\n/log print\n\n# \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\n/ip firewall connection print where dst-port=443\n</code></pre>"},{"location":"setup/portforward-mikrotik/#nginx","title":"\u041b\u043e\u0433\u0438 Nginx","text":"<pre><code># Access log\nsudo tail -f /var/log/nginx/access.log\n\n# Error log\nsudo tail -f /var/log/nginx/error.log\n\n# \u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0448\u0438\u0431\u043a\u0438 HA\nsudo tail -f /var/log/nginx/error.log | grep hassio\n</code></pre>"},{"location":"setup/portforward-mikrotik/#_12","title":"\ud83d\udd17 \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<ul> <li>MikroTik NAT Documentation</li> <li>Nginx Reverse Proxy</li> <li>Let's Encrypt</li> <li>Home Assistant Reverse Proxy</li> </ul>"},{"location":"setup/portforward-mikrotik/#-","title":"\ud83d\udccb \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","text":"<ul> <li>[ ] DNS A-\u0437\u0430\u043f\u0438\u0441\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0430 \u2192 <code>hassio.yourdomain.com</code></li> <li>[ ] MikroTik: \u041f\u043e\u0440\u0442\u044b 80, 443, 22 \u043f\u0440\u043e\u0431\u0440\u043e\u0448\u0435\u043d\u044b</li> <li>[ ] Reverse Proxy: Nginx \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d</li> <li>[ ] SSL: \u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 Let's Encrypt \u043f\u043e\u043b\u0443\u0447\u0435\u043d</li> <li>[ ] Home Assistant: <code>trusted_proxies</code> \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d</li> <li>[ ] \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c: SSH \u0431\u0440\u0443\u0442\u0444\u043e\u0440\u0441 \u0437\u0430\u0449\u0438\u0442\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430</li> <li>[ ] \u0422\u0435\u0441\u0442\u044b: \u0414\u043e\u0441\u0442\u0443\u043f \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 \u0434\u043e\u043c\u0435\u043d</li> <li>[ ] config.yml \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d \u0441 \u0434\u043e\u043c\u0435\u043d\u043e\u043c</li> </ul>"},{"location":"setup/portforward-mikrotik/#_13","title":"\u26a0\ufe0f \u0412\u0430\u0436\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ol> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 Reverse Proxy!</li> <li>\u041e\u0434\u0438\u043d SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442</li> <li>\u041b\u0443\u0447\u0448\u0430\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</li> <li> <p>\u041f\u0440\u043e\u0449\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435</p> </li> <li> <p>\u041d\u0415 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0439\u0442\u0435 SAMBA \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442!</p> </li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e</li> <li> <p>\u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 VPN</p> </li> <li> <p>\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0439\u0442\u0435:</p> </li> <li>Home Assistant</li> <li>Nginx</li> <li>MikroTik RouterOS</li> <li> <p>SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b (\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438)</p> </li> <li> <p>\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u044c\u0442\u0435 \u043b\u043e\u0433\u0438:</p> </li> <li>Nginx access/error logs</li> <li>Home Assistant logs</li> <li>MikroTik logs</li> </ol> <p>\u0413\u043e\u0442\u043e\u0432\u043e! \u0422\u0435\u043f\u0435\u0440\u044c \u0443 \u0432\u0430\u0441 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a Home Assistant \u0447\u0435\u0440\u0435\u0437 \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u0435 \u0438\u043c\u044f \u0441 SSL! \ud83d\udd12</p>"},{"location":"setup/post-setup/","title":"\ud83d\ude80 \u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 setup.sh","text":"<p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0434\u0430\u043b\u044c\u0448\u0435 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 <code>./scripts/setup.sh</code></p>"},{"location":"setup/post-setup/#_1","title":"\u2705 \u0427\u0442\u043e \u0443\u0436\u0435 \u0433\u043e\u0442\u043e\u0432\u043e","text":"<p>\u041f\u043e\u0441\u043b\u0435 <code>setup.sh</code> \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c:</p> <ul> <li>\u2705 SSH \u043a\u043b\u044e\u0447 \u0432 <code>.ssh/id_hassio.pub</code></li> <li>\u2705 Pre-commit \u0445\u0443\u043a\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b</li> <li>\u2705 \u0412\u0441\u0435 \u0441\u043a\u0440\u0438\u043f\u0442\u044b \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0435</li> <li>\u2705 \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b</li> </ul>"},{"location":"setup/post-setup/#1-ssh-samba","title":"\ud83d\udccb \u0428\u0430\u0433 1: \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c SSH \u0438 SAMBA","text":"<p>\u0421\u043b\u0435\u0434\u0443\u0439\u0442\u0435 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u0448\u0430\u0433\u0430 2.</p> <p>\u041a\u0440\u0430\u0442\u043a\u043e:</p> <ol> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0432 HA add-on: Terminal &amp; SSH</li> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432\u0430\u0448 SSH \u043a\u043b\u044e\u0447 (\u043f\u043e\u043a\u0430\u0437\u0430\u043d \u043f\u043e\u0441\u043b\u0435 setup.sh)</li> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0432 HA add-on: Samba share</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u043f\u043e\u0440\u0442\u044b \u043d\u0430 \u0440\u043e\u0443\u0442\u0435\u0440\u0435 (\u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f \u0438\u0437\u0432\u043d\u0435)</li> </ol>"},{"location":"setup/post-setup/#2-mcp-ai","title":"\ud83e\udd16 \u0428\u0430\u0433 2: \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c MCP \u0434\u043b\u044f AI","text":"<pre><code># 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e\ncp .cursor/mcp.json.example .cursor/mcp.json\n\n# 2. \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d Home Assistant\n# \u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435: http://YOUR_HA_IP:8123/profile/security\n# \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 Long-Lived Access Token\n\n# 3. \u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\nnano .cursor/mcp.json\n</code></pre> <p>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435:</p> <ul> <li><code>YOUR_HA_TOKEN</code> \u2192 \u0432\u0430\u0448 \u0442\u043e\u043a\u0435\u043d</li> <li><code>YOUR_HA_URL</code> \u2192 <code>http://192.168.1.XXX:8123</code> \u0438\u043b\u0438 \u0432\u043d\u0435\u0448\u043d\u0438\u0439 URL</li> </ul> <p>\ud83d\udca1 \u0421\u043e\u0432\u0435\u0442: \u0412 <code>.cursor/mcp.json</code> \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c MCP \u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438:</p> <pre><code>\"HASSio_Cursor Docs\": {\n  \"url\": \"https://gitmcp.io/Gfermoto/HASSio_Cursor\"\n}\n</code></pre> <p>\u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u0442 AI \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u043a \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e!</p>"},{"location":"setup/post-setup/#3-configyml","title":"\ud83d\udd27 \u0428\u0430\u0433 3: \u0421\u043e\u0437\u0434\u0430\u0442\u044c config.yml","text":"<pre><code># 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0437 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\ncp config.yml.example config.yml\n\n# 2. \u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\nnano config.yml\n</code></pre> <p>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <pre><code>home_assistant:\n  local_ip: \"192.168.1.XXX\"     # IP \u0432\u0430\u0448\u0435\u0433\u043e HA\n  local_port: 8123\n  hostname: \"your-domain.com\"   # \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c\n  global_port: 8123\n\nssh:\n  username: \"root\"\n  port: 22\n  local_ip: \"192.168.1.XXX\"     # \u0442\u043e\u0442 \u0436\u0435 IP\n\nsamba:\n  username: \"homeassistant\"     # \u0438\u0437 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a Samba add-on\n  password: \"your_password\"     # \u0438\u0437 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a Samba add-on\n</code></pre>"},{"location":"setup/post-setup/#4","title":"\ud83c\udfaf \u0428\u0430\u0433 4: \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<pre><code>./scripts/check.sh\n</code></pre> <p>\u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c:</p> <ul> <li>\u2705 SSH \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>\u2705 SAMBA \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430</li> <li>\u2705 Home Assistant \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442</li> </ul>"},{"location":"setup/post-setup/#5","title":"\ud83d\udd0c \u0428\u0430\u0433 5: \u0421\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443","text":"<pre><code># \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e\n./ha\n\n# \u0412\u044b\u0431\u0440\u0430\u0442\u044c:\n# 2) \u0421\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0438\n# 3) \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 Cursor!</p>"},{"location":"setup/post-setup/#-","title":"\ud83c\udd98 \u0415\u0441\u043b\u0438 \u0447\u0442\u043e-\u0442\u043e \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442","text":"<ul> <li>SSH \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u2192 \u0441\u043c. SETUP.md</li> <li>SAMBA \u043d\u0435 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u2192 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 username/password</li> <li>MCP \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u2192 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0442\u043e\u043a\u0435\u043d \u0438 URL</li> </ul>"},{"location":"setup/post-setup/#_2","title":"\ud83d\udcda \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<ul> <li>\ud83d\udcd6 \u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f</li> <li>\ud83c\udf10 \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 MikroTik</li> <li>\ud83d\udd10 ZeroTier + \u0421\u043c\u0435\u0448\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c</li> <li>\ud83d\udd2c \u041f\u0435\u0440\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u0442</li> <li>\ud83d\udd12 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</li> <li>\ud83d\udccb \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u043a\u043e\u043c\u0430\u043d\u0434</li> </ul>"},{"location":"setup/quickstart/","title":"\u26a1 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":"<p>\u0417\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0437\u0430 5 \u043c\u0438\u043d\u0443\u0442</p>"},{"location":"setup/quickstart/#1","title":"1. \u041a\u043b\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430","text":"<pre><code>git clone https://github.com/Gfermoto/HASSio_Cursor.git\ncd HASSio_Cursor\n</code></pre>"},{"location":"setup/quickstart/#2","title":"2. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<pre><code># \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440\ncp config.yml.example config.yml\n\n# \u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\n./scripts/configure.sh\n</code></pre> <p>\u0412\u0430\u043c \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0440\u0435\u0436\u0438\u043c:</p> <ul> <li>Local - \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c</li> <li>Global - \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442</li> <li>Mixed - \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)</li> </ul>"},{"location":"setup/quickstart/#3","title":"3. \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<pre><code>sudo ./scripts/mount.sh\n</code></pre> <p>\u041f\u0430\u043f\u043a\u0430 <code>config/</code> \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0432\u0430\u0448\u0435\u0433\u043e Home Assistant.</p>"},{"location":"setup/quickstart/#4","title":"4. \u0413\u043e\u0442\u043e\u0432\u043e","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e:</p> <pre><code>./ha\n</code></pre> <p>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0434\u0430\u043b\u044c\u0448\u0435:</p> <ul> <li>\ud83d\udcd6 \u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f</li> <li>\ud83d\udccb \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u043a\u043e\u043c\u0430\u043d\u0434</li> <li>\ud83d\udd2c \u041f\u0435\u0440\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u0442</li> </ul>"},{"location":"setup/ssh-tunnel-samba/","title":"\ud83d\udd12 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0434\u043b\u044f SAMBA (\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f)","text":"<p>\u041a\u0430\u043a \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c Home Assistant config \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430 SAMBA \u043f\u043e\u0440\u0442\u043e\u0432.</p>"},{"location":"setup/ssh-tunnel-samba/#_1","title":"\ud83c\udfaf \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430","text":"<p>\u041f\u0440\u043e\u0431\u0440\u043e\u0441 SAMBA (\u043f\u043e\u0440\u0442\u044b 139, 445) \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e = \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0443\u044f\u0437\u0432\u0438\u043c\u043e\u0441\u0442\u044c!</p> <p>\u0420\u0438\u0441\u043a\u0438:</p> <ul> <li>\u274c SMB \u044d\u043a\u0441\u043f\u043b\u043e\u0439\u0442\u044b (WannaCry, EternalBlue)</li> <li>\u274c \u041d\u0435\u0442 \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0440\u0430\u0444\u0438\u043a\u0430</li> <li>\u274c \u041b\u0435\u0433\u043a\u043e \u0432\u0437\u043b\u043e\u043c\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c</li> <li>\u274c DDoS \u0430\u0442\u0430\u043a\u0438</li> </ul> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0434\u043b\u044f SAMBA!</p>"},{"location":"setup/ssh-tunnel-samba/#ssh","title":"\u2705 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c: \u041a\u0430\u043a \u044d\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                                              \u2502\n\u2502  Cursor (WSL) \u2500\u2500\u2510                                            \u2502\n\u2502                 \u2502                                            \u2502\n\u2502                 \u2193 SSH (\u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043e) \u2705                       \u2502\n\u2502                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                              \u2502\n\u2502  \u2502   SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c (port 2222)  \u2502                              \u2502\n\u2502  \u2502   localhost:8445 \u2500\u2500\u2192 HA:445\u2502                              \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                              \u2502\n\u2502                 \u2502                                            \u2502\n\u2502                 \u2193 SAMBA (\u0432\u043d\u0443\u0442\u0440\u0438 \u0442\u0443\u043d\u043d\u0435\u043b\u044f) \ud83d\udd12                 \u2502\n\u2502                                                              \u2502\n\u2502  Home Assistant (192.168.1.20:445)                           \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <ul> <li>\u2705 SAMBA \u0442\u0440\u0430\u0444\u0438\u043a \u0448\u0438\u0444\u0440\u0443\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 SSH</li> <li>\u2705 \u041f\u043e\u0440\u0442 445 \u041d\u0415 \u043e\u0442\u043a\u0440\u044b\u0442 \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442</li> <li>\u2705 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f SSH \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f (\u043a\u043b\u044e\u0447\u0438)</li> <li>\u2705 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u043a\u0430\u043a SSH</li> </ul>"},{"location":"setup/ssh-tunnel-samba/#5","title":"\ud83d\ude80 \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442 (5 \u043c\u0438\u043d\u0443\u0442)","text":""},{"location":"setup/ssh-tunnel-samba/#1-ssh-mikrotik","title":"\u0428\u0430\u0433 1: \u041f\u0440\u043e\u0431\u0440\u043e\u0441 SSH \u043d\u0430 MikroTik","text":"<p>\u041d\u0430 \u0440\u043e\u0443\u0442\u0435\u0440\u0435 MikroTik:</p> <pre><code>/ip firewall nat\nadd action=netmap chain=dstnat \\\n    comment=\"SSH to HA (non-standard port)\" \\\n    dst-address=YOUR_WHITE_IP \\\n    dst-port=2222 \\\n    protocol=tcp \\\n    to-addresses=192.168.1.20 \\\n    to-ports=22\n</code></pre> <p>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435:</p> <ul> <li><code>YOUR_WHITE_IP</code> \u2192 \u0432\u0430\u0448 \u0431\u0435\u043b\u044b\u0439 IP (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <code>203.0.113.10</code>)</li> </ul>"},{"location":"setup/ssh-tunnel-samba/#2-brute-force","title":"\u0428\u0430\u0433 2: \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 brute-force","text":"<pre><code>/ip firewall filter\nadd action=add-src-to-address-list address-list=ssh_stage1 \\\n    address-list-timeout=1m chain=forward connection-state=new \\\n    dst-address=192.168.1.20 dst-port=22 protocol=tcp\n\nadd action=add-src-to-address-list address-list=ssh_stage2 \\\n    address-list-timeout=5m chain=forward connection-state=new \\\n    dst-address=192.168.1.20 dst-port=22 protocol=tcp \\\n    src-address-list=ssh_stage1\n\nadd action=add-src-to-address-list address-list=ssh_blacklist \\\n    address-list-timeout=1d chain=forward connection-state=new \\\n    dst-address=192.168.1.20 dst-port=22 protocol=tcp \\\n    src-address-list=ssh_stage2\n\nadd action=drop chain=forward dst-address=192.168.1.20 \\\n    dst-port=22 protocol=tcp src-address-list=ssh_blacklist\n</code></pre> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: 3 \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u044b\u0445 \u043f\u043e\u043f\u044b\u0442\u043a\u0438 \u0437\u0430 \u043c\u0438\u043d\u0443\u0442\u0443 = \u0431\u0430\u043d \u043d\u0430 \u0441\u0443\u0442\u043a\u0438</p>"},{"location":"setup/ssh-tunnel-samba/#3-ssh-cursor","title":"\u0428\u0430\u0433 3: \u0421\u043e\u0437\u0434\u0430\u0442\u044c SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0432 Cursor","text":"<p>\u0412 Cursor (WSL):</p> <pre><code># \u0421\u043e\u0437\u0434\u0430\u0442\u044c SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0434\u043b\u044f SAMBA\nssh -p 2222 -L 8445:192.168.1.20:445 root@YOUR_WHITE_IP -N -f\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\nps aux | grep \"ssh.*8445\"\n# \u0414\u043e\u043b\u0436\u0435\u043d \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044f\n</code></pre> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:</p> <ul> <li><code>-p 2222</code> - \u043f\u043e\u0440\u0442 SSH</li> <li><code>-L 8445:192.168.1.20:445</code> - \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 8445 \u2192 HA \u043f\u043e\u0440\u0442 445</li> <li><code>-N</code> - \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0443\u043d\u043d\u0435\u043b\u044c</li> <li><code>-f</code> - \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432 \u0444\u043e\u043d\u0435</li> </ul>"},{"location":"setup/ssh-tunnel-samba/#4-samba","title":"\u0428\u0430\u0433 4: \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c SAMBA \u0447\u0435\u0440\u0435\u0437 \u0442\u0443\u043d\u043d\u0435\u043b\u044c","text":"<pre><code># \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c config \u0447\u0435\u0440\u0435\u0437 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c\nsudo mount -t cifs //localhost:8445/config ~/HASSio/config \\\n  -o username=homeassistant,password=YOUR_SAMBA_PASSWORD,port=8445\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c\nls ~/HASSio/config/\n# \u0414\u043e\u043b\u0436\u043d\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c configuration.yaml, automations.yaml, \u0438 \u0442.\u0434.\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#scriptsmountsh","title":"\ud83d\udd27 \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 scripts/mount.sh","text":""},{"location":"setup/ssh-tunnel-samba/#mountsh-ssh","title":"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c mount.sh \u0434\u043b\u044f SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044f","text":"<p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 <code>scripts/mount.sh</code>:</p> <pre><code>#!/bin/bash\n\n# \u0420\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b (local \u0438\u043b\u0438 remote)\nMODE=${MODE:-\"local\"}\n\nif [ \"$MODE\" = \"remote\" ]; then\n    # \u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u0447\u0435\u0440\u0435\u0437 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c\n\n    echo \"\ud83c\udf10 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044f...\"\n\n    # \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b (\u0437\u0430\u043c\u0435\u043d\u0438\u0442\u0435 \u043d\u0430 \u0441\u0432\u043e\u0438!)\n    REMOTE_HOST=\"YOUR_WHITE_IP\"\n    SSH_PORT=\"2222\"\n    LOCAL_TUNNEL_PORT=\"8445\"\n    HA_IP=\"192.168.1.20\"\n    HA_SAMBA_PORT=\"445\"\n\n    # \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\n    if pgrep -f \"ssh.*${LOCAL_TUNNEL_PORT}:${HA_IP}:${HA_SAMBA_PORT}\" &gt; /dev/null; then\n        echo \"\u2705 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\"\n    else\n        # \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0443\u043d\u043d\u0435\u043b\u044c\n        ssh -p \"${SSH_PORT}\" \\\n            -L \"${LOCAL_TUNNEL_PORT}:${HA_IP}:${HA_SAMBA_PORT}\" \\\n            -o ConnectTimeout=10 \\\n            -o ServerAliveInterval=60 \\\n            -o ServerAliveCountMax=3 \\\n            root@\"${REMOTE_HOST}\" \\\n            -N -f\n\n        if [ $? -eq 0 ]; then\n            echo \"\u2705 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d\"\n        else\n            echo \"\u274c \u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044f\"\n            exit 1\n        fi\n    fi\n\n    # \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0442\u0443\u043d\u043d\u0435\u043b\u044c\n    SAMBA_HOST=\"localhost\"\n    SAMBA_PORT=\"${LOCAL_TUNNEL_PORT}\"\nelse\n    # \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f (\u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e)\n    SAMBA_HOST=\"192.168.1.20\"\n    SAMBA_PORT=\"445\"\nfi\n\n# \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\necho \"\ud83d\udcc1 \u041c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 config...\"\n\nsudo mount -t cifs \"//${SAMBA_HOST}:${SAMBA_PORT}/config\" ~/HASSio/config \\\n    -o username=homeassistant,password=\"${SAMBA_PASSWORD}\",port=\"${SAMBA_PORT}\"\n\nif [ $? -eq 0 ]; then\n    echo \"\u2705 Config \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\"\nelse\n    echo \"\u274c \u041e\u0448\u0438\u0431\u043a\u0430 \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\"\n    exit 1\nfi\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:</p> <pre><code># \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e (\u0434\u043e\u043c\u0430)\n./scripts/mount.sh\n\n# \u0423\u0434\u0430\u043b\u0435\u043d\u043d\u043e (\u0447\u0435\u0440\u0435\u0437 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c)\nMODE=remote ./scripts/mount.sh\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#_2","title":"\ud83d\udd12 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":""},{"location":"setup/ssh-tunnel-samba/#mikrotik","title":"\u041d\u0430 MikroTik:","text":"<p>\u2705 \u0427\u0442\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e:</p> <ol> <li>SSH \u043d\u0430 \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u043c \u043f\u043e\u0440\u0442\u0443 (2222, \u043d\u0435 22)</li> <li>Fail2ban: 3 \u043f\u043e\u043f\u044b\u0442\u043a\u0438 = \u0431\u0430\u043d \u043d\u0430 \u0441\u0443\u0442\u043a\u0438</li> <li>SAMBA \u043f\u043e\u0440\u0442 445 \u041d\u0415 \u043f\u0440\u043e\u0431\u0440\u043e\u0448\u0435\u043d (\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e!)</li> </ol>"},{"location":"setup/ssh-tunnel-samba/#home-assistant","title":"\u041d\u0430 Home Assistant:","text":"<p>\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c:</p> <pre><code># SSH \u0432 HA\nnano /etc/ssh/sshd_config\n\n# \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c:\nPasswordAuthentication no  # \u0422\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0438!\nPubkeyAuthentication yes\nPermitRootLogin prohibit-password\n\n# \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c\nsystemctl restart ssh\n\n# Fail2ban (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)\napt install fail2ban\nsystemctl enable fail2ban\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"setup/ssh-tunnel-samba/#_3","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0422\u0443\u043d\u043d\u0435\u043b\u044c \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430:</p> <pre><code># \u0422\u0435\u0441\u0442 SSH \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\nssh -p 2222 root@YOUR_WHITE_IP\n\n# \u0415\u0441\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 - \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0442\u043e\u0436\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c\n</code></pre> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <pre><code># \u0423\u0431\u0438\u0442\u044c \u0441\u0442\u0430\u0440\u044b\u0439 \u0442\u0443\u043d\u043d\u0435\u043b\u044c\npkill -f \"ssh.*8445\"\n\n# \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e\nssh -p 2222 -L 8445:192.168.1.20:445 root@YOUR_WHITE_IP -N -f\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#samba","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: SAMBA \u043d\u0435 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430:</p> <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u0442\u043e \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\nnetstat -tlnp | grep 8445\n# \u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c: tcp 0 0 127.0.0.1:8445 ... LISTEN\n\n# \u0422\u0435\u0441\u0442 SAMBA \u0447\u0435\u0440\u0435\u0437 \u0442\u0443\u043d\u043d\u0435\u043b\u044c\nsmbclient -p 8445 -L //localhost -U homeassistant\n</code></pre> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435:</p> <pre><code># \u041f\u0435\u0440\u0435\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0443\u043d\u043d\u0435\u043b\u044c\npkill -f \"ssh.*8445\"\nssh -p 2222 -L 8445:192.168.1.20:445 root@YOUR_WHITE_IP -N -f\n\n# \u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\nsudo mount -t cifs //localhost:8445/config ~/HASSio/config \\\n  -o username=homeassistant,password=YOUR_PASSWORD,port=8445\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#_4","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0422\u0443\u043d\u043d\u0435\u043b\u044c \u043f\u0430\u0434\u0430\u0435\u0442","text":"<p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435:</p> <pre><code># \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 crontab\ncrontab -e\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043a\u0430\u0436\u0434\u044b\u0435 5 \u043c\u0438\u043d\u0443\u0442\n*/5 * * * * pgrep -f \"ssh.*8445\" || ssh -p 2222 -L 8445:192.168.1.20:445 root@YOUR_WHITE_IP -N -f\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#_5","title":"\ud83d\udcca \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"\u041c\u0435\u0442\u043e\u0434 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0420\u0424 ZeroTier \u2b50\u2b50\u2b50\u2b50\u2b50 \u0411\u044b\u0441\u0442\u0440\u043e \u041f\u0440\u043e\u0441\u0442\u0430\u044f \u274c \u041d\u0435 \u0432 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c \u2b50\u2b50\u2b50\u2b50 \u0411\u044b\u0441\u0442\u0440\u043e \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u2705 \u0412\u0435\u0437\u0434\u0435 \u041f\u0440\u044f\u043c\u043e\u0439 SAMBA \u2b50 \u0411\u044b\u0441\u0442\u0440\u043e \u041f\u0440\u043e\u0441\u0442\u0430\u044f \u274c \u041e\u041f\u0410\u0421\u041d\u041e! VPN (WireGuard) \u2b50\u2b50\u2b50\u2b50\u2b50 \u0411\u044b\u0441\u0442\u0440\u043e \u0421\u043b\u043e\u0436\u043d\u0430\u044f \u2705 \u0412\u0435\u0437\u0434\u0435"},{"location":"setup/ssh-tunnel-samba/#_6","title":"\ud83d\udca1 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":""},{"location":"setup/ssh-tunnel-samba/#wifi","title":"\u0414\u043e\u043c\u0430 (WiFi):","text":"<pre><code># ZeroTier \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442!\nssh root@192.168.1.20\nsudo mount -t cifs //192.168.1.20/config ~/HASSio/config\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#_7","title":"\u0412 \u0434\u043e\u0440\u043e\u0433\u0435 (\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0420\u0424):","text":"<pre><code># SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c (ZeroTier \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d)\nssh -p 2222 -L 8445:192.168.1.20:445 root@YOUR_WHITE_IP -N -f\nsudo mount -t cifs //localhost:8445/config ~/HASSio/config -o port=8445\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#_8","title":"\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442:","text":"<p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0433\u0434\u0435 \u0432\u044b:</p> <pre><code># scripts/smart_mount.sh\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c ZeroTier\nif ping -c 1 -W 2 192.168.1.20 &amp;&gt;/dev/null; then\n    # ZeroTier \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 (\u0438\u043b\u0438 \u0434\u043e\u043c\u0430)\n    echo \"\u2705 \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f / ZeroTier\"\n    MODE=local ./scripts/mount.sh\nelse\n    # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c\n    echo \"\ud83c\udf10 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c\"\n    MODE=remote ./scripts/mount.sh\nfi\n</code></pre>"},{"location":"setup/ssh-tunnel-samba/#_9","title":"\ud83d\udd10 \u0412\u0430\u0436\u043d\u044b\u0435 \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f","text":""},{"location":"setup/ssh-tunnel-samba/#_10","title":"\u26a0\ufe0f \u041d\u0418\u041a\u041e\u0413\u0414\u0410 \u043d\u0435 \u0434\u0435\u043b\u0430\u0439\u0442\u0435:","text":"<ul> <li>\u274c \u041f\u0440\u043e\u0431\u0440\u043e\u0441 SAMBA \u043f\u043e\u0440\u0442\u043e\u0432 139, 445 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e</li> <li>\u274c \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043b\u0430\u0431\u044b\u0445 \u043f\u0430\u0440\u043e\u043b\u0435\u0439 \u0434\u043b\u044f SAMBA</li> <li>\u274c SSH \u043d\u0430 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u043c \u043f\u043e\u0440\u0442\u0443 22</li> </ul>"},{"location":"setup/ssh-tunnel-samba/#_11","title":"\u2705 \u0412\u0421\u0415\u0413\u0414\u0410 \u0434\u0435\u043b\u0430\u0439\u0442\u0435:","text":"<ul> <li>\u2705 SSH \u043d\u0430 \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u043c \u043f\u043e\u0440\u0442\u0443 (2222, 2233, \u0438 \u0442.\u0434.)</li> <li>\u2705 \u0422\u043e\u043b\u044c\u043a\u043e SSH \u043a\u043b\u044e\u0447\u0438 (\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u0438)</li> <li>\u2705 SAMBA \u0447\u0435\u0440\u0435\u0437 SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c</li> <li>\u2705 Fail2ban \u0437\u0430\u0449\u0438\u0442\u0430</li> </ul>"},{"location":"setup/ssh-tunnel-samba/#_12","title":"\ud83d\udcda \u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 SSH \u0432 HA - \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 SAMBA - \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f addon</li> <li>\u0421\u043c\u0435\u0448\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c ZeroTier - \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u0430 \u0442\u0443\u043d\u043d\u0435\u043b\u044e</li> </ul> <p>SSH \u0442\u0443\u043d\u043d\u0435\u043b\u044c = \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 SAMBA \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442! \ud83d\udd12\u2728</p>"},{"location":"setup/zerotier-mixed-mode/","title":"\ud83c\udf10 ZeroTier + \u0421\u043c\u0435\u0448\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c","text":"<p>\u0413\u0438\u0431\u0440\u0438\u0434\u043d\u0430\u044f \u0441\u0435\u0442\u044c: \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f + ZeroTier VPN \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b</p>"},{"location":"setup/zerotier-mixed-mode/#_1","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\ud83c\udfaf \u0412\u0430\u0448\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f</li> <li>\ud83d\udd27 \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430</li> <li>\u0422\u0440\u0438 \u0440\u0435\u0436\u0438\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432</li> <li>\ud83d\ude80 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 ZeroTier</li> <li>\u0428\u0430\u0433 1: \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0435\u0442\u044c ZeroTier</li> <li>\u0428\u0430\u0433 2: \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ZeroTier \u043d\u0430 MikroTik</li> <li>\u0428\u0430\u0433 3: \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ZeroTier \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 (Linux)</li> <li>\u0428\u0430\u0433 4: \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0432 \u043f\u0430\u043d\u0435\u043b\u0438 ZeroTier</li> <li>\ud83d\udcdd \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 config.yml \u0434\u043b\u044f \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430</li> <li>\ud83d\udd27 \u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u0432\u0442\u043e\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435</li> <li>1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438</li> <li>2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 ZeroTier</li> <li>3. Fallback \u043d\u0430 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439</li> <li>\ud83e\uddea \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 ZeroTier \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>\ud83d\udcca \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>\ud83d\udd27 \u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>\u041f\u0440\u0438\u043c\u0435\u0440 1: \u0412\u044b \u0434\u043e\u043c\u0430</li> <li>\u041f\u0440\u0438\u043c\u0435\u0440 2: \u0412\u044b \u0432 \u043a\u0430\u0444\u0435 \u0441 \u043d\u043e\u0443\u0442\u0431\u0443\u043a\u043e\u043c</li> <li>\u041f\u0440\u0438\u043c\u0435\u0440 3: \u0412\u044b \u043d\u0430 \u0447\u0443\u0436\u043e\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 (\u0431\u0435\u0437 ZeroTier)</li> <li>\ud83d\udee0\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 configure.sh</li> <li>\ud83d\udcdd SSH config \u0434\u043b\u044f \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430</li> <li>\ud83d\udd12 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c ZeroTier</li> <li>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430</li> <li>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438</li> <li>\ud83c\udd98 \u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c</li> <li>ZeroTier \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f</li> <li>\u041c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 ZeroTier</li> <li>MikroTik \u043d\u0435 \u0432\u0438\u0434\u0438\u0442 ZeroTier \u0441\u0435\u0442\u044c</li> <li>\ud83d\udcca \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u0441\u0435\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>\ud83d\udcda \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438</li> <li>\ud83d\udccb \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438</li> <li>\ud83c\udfaf \u0418\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u0441\u0445\u0435\u043c\u0430 \u0432\u0430\u0448\u0435\u0439 \u0441\u0435\u0442\u0438</li> </ul>"},{"location":"setup/zerotier-mixed-mode/#_2","title":"\ud83c\udfaf \u0412\u0430\u0448\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<p>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                      ZeroTier Network                        \u2502 \u2502                    (\u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c)                        \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2193                    \u2193                    \u2193     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502 \u041b\u043e\u043a\u0430\u0446\u0438\u044f\u2502          \u2502 \u041b\u043e\u043a\u0430\u0446\u0438\u044f\u2502          \u2502 \u041d\u043e\u0443\u0442\u0431\u0443\u043a\u2502     \u2502   #1   \u2502          \u2502   #2   \u2502          \u2502(\u0432 \u043f\u0443\u0442\u0438)\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2193                    \u2193                    \u2193     MikroTik            MikroTik         \u041f\u0440\u044f\u043c\u043e\u0439 \u0434\u043e\u0441\u0442\u0443\u043f     + ZeroTier          + ZeroTier        \u043a ZeroTier          \u2193                    \u2193   Home Assistant     Home Assistant    192.168.1.X         192.168.2.X</p> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430:</p> <p>\u2705 \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e - \u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u0447\u0435\u0440\u0435\u0437 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u0441\u0435\u0442\u044c (SSH/SAMBA) \u2705 \u0423\u0434\u0430\u043b\u0451\u043d\u043d\u043e - \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u0447\u0435\u0440\u0435\u0437 ZeroTier VPN \u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 - \u0441\u043a\u0440\u0438\u043f\u0442\u044b \u0441\u0430\u043c\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442 \u0433\u0434\u0435 \u0432\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u2705 \u0411\u0435\u0437 \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0430 \u043f\u043e\u0440\u0442\u043e\u0432 - ZeroTier \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043f\u0440\u044f\u043c\u043e\u0435 P2P \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435</p>"},{"location":"setup/zerotier-mixed-mode/#_3","title":"\ud83d\udd27 \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430","text":""},{"location":"setup/zerotier-mixed-mode/#_4","title":"\u0422\u0440\u0438 \u0440\u0435\u0436\u0438\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432","text":""},{"location":"setup/zerotier-mixed-mode/#1-local","title":"1. Local (\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439)","text":"<p>\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u2500\u2500[SSH/SAMBA]\u2500\u2500&gt; Home Assistant   (\u0434\u043e\u043c\u0430)     192.168.1.X      (\u043f\u0440\u044f\u043c\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435)</p>"},{"location":"setup/zerotier-mixed-mode/#2-global","title":"2. Global (\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439)","text":"<p>\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u2500\u2500[Internet]\u2500\u2500&gt; \u0411\u0435\u043b\u044b\u0439 IP \u2500\u2500&gt; MikroTik \u2500\u2500&gt; Home Assistant  (\u0432 \u043f\u0443\u0442\u0438)    \u041f\u043e\u0440\u0442\u044b 22/443                  192.168.1.X</p>"},{"location":"setup/zerotier-mixed-mode/#3-mixed","title":"3. Mixed (\u0421\u043c\u0435\u0448\u0430\u043d\u043d\u044b\u0439) \u2190 \u0412\u0430\u0448 \u0441\u043b\u0443\u0447\u0430\u0439","text":"<p>\u0415\u0441\u043b\u0438 \u0434\u043e\u043c\u0430:   \u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u2500\u2500[SSH/SAMBA]\u2500\u2500&gt; 192.168.1.X (\u0431\u044b\u0441\u0442\u0440\u043e, \u043f\u0440\u044f\u043c\u043e)</p> <p>\u0415\u0441\u043b\u0438 \u043d\u0435 \u0434\u043e\u043c\u0430:   \u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u2500\u2500[ZeroTier]\u2500\u2500&gt; 10.147.X.X \u2500\u2500&gt; Home Assistant               (VPN \u0442\u0443\u043d\u043d\u0435\u043b\u044c)  (ZeroTier IP)</p>"},{"location":"setup/zerotier-mixed-mode/#zerotier_1","title":"\ud83d\ude80 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 ZeroTier","text":""},{"location":"setup/zerotier-mixed-mode/#1-zerotier","title":"\u0428\u0430\u0433 1: \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0435\u0442\u044c ZeroTier","text":"<ol> <li>\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f: https://my.zerotier.com</li> <li>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0441\u0435\u0442\u044c: Create A Network</li> <li>\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c Network ID: <code>abcdef1234567890</code></li> </ol>"},{"location":"setup/zerotier-mixed-mode/#2-zerotier-mikrotik","title":"\u0428\u0430\u0433 2: \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ZeroTier \u043d\u0430 MikroTik","text":""},{"location":"setup/zerotier-mixed-mode/#zerotier-routeros-v7","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 ZeroTier \u043d\u0430 RouterOS v7+","text":"<pre><code># \u0427\u0435\u0440\u0435\u0437 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b MikroTik\n/system package print\n# \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e \u0432\u0435\u0440\u0441\u0438\u044f 7.0+\n\n# \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c ZeroTier\n/zerotier enable\n\n# \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u0435\u0442\u0438\n/zerotier join network=abcdef1234567890\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#static-routes","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 static routes","text":"<pre><code># \u0423\u0437\u043d\u0430\u0442\u044c ZeroTier \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\n/interface print\n# \u041d\u0430\u0439\u0434\u0438\u0442\u0435 zt-abcdef (ZeroTier \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441)\n\n# \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0447\u0435\u0440\u0435\u0437 ZeroTier\n# \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0440\u0430\u0442\u044c\u0441\u044f \u0434\u043e \u043b\u043e\u043a\u0430\u0446\u0438\u0438 #2\n/ip route add \\\n  dst-address=192.168.2.0/24 \\\n  gateway=10.147.X.X \\\n  comment=\"Route to Location #2 via ZeroTier\"\n\n# \u0413\u0434\u0435 10.147.X.X - ZeroTier IP \u0440\u043e\u0443\u0442\u0435\u0440\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 #2\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#zerotier_2","title":"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a \u0447\u0435\u0440\u0435\u0437 ZeroTier","text":"<pre><code># Firewall: \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c ZeroTier\n/ip firewall filter add \\\n  chain=input \\\n  in-interface=zt-abcdef \\\n  action=accept \\\n  comment=\"Allow ZeroTier\"\n\n/ip firewall filter add \\\n  chain=forward \\\n  in-interface=zt-abcdef \\\n  action=accept \\\n  comment=\"Forward ZeroTier\"\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#3-zerotier-linux","title":"\u0428\u0430\u0433 3: \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ZeroTier \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 (Linux)","text":"<pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c ZeroTier\ncurl -s https://install.zerotier.com | sudo bash\n\n# \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u0435\u0442\u0438\nsudo zerotier-cli join abcdef1234567890\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\nsudo zerotier-cli listnetworks\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#4-zerotier","title":"\u0428\u0430\u0433 4: \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0432 \u043f\u0430\u043d\u0435\u043b\u0438 ZeroTier","text":"<ol> <li>\u041f\u0435\u0440\u0435\u0439\u0442\u0438: https://my.zerotier.com</li> <li>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432\u0430\u0448\u0443 \u0441\u0435\u0442\u044c</li> <li>\u041f\u0440\u043e\u043a\u0440\u0443\u0442\u0438\u0442\u044c \u0434\u043e Members</li> <li>\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u2705 Auth \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430</li> <li>\u041f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 (MikroTik-Home, MikroTik-Office, Laptop)</li> </ol>"},{"location":"setup/zerotier-mixed-mode/#configyml","title":"\ud83d\udcdd \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 config.yml \u0434\u043b\u044f \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430","text":"<pre><code># ~/HASSio/config.yml\n\nmode: \"mixed\"  # \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435\n\nhome_assistant:\n  # \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f (\u043a\u043e\u0433\u0434\u0430 \u0434\u043e\u043c\u0430)\n  local_ip: \"192.168.1.20\"\n  local_port: 8123\n\n  # ZeroTier \u0434\u043e\u0441\u0442\u0443\u043f (\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0434\u043e\u043c\u0430)\n  zerotier_ip: \"10.147.20.100\"  # ZeroTier IP \u0432\u0430\u0448\u0435\u0433\u043e HA\n  zerotier_port: 8123\n\n  # \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f (\u0447\u0435\u0440\u0435\u0437 \u0431\u0435\u043b\u044b\u0439 IP)\n  hostname: \"hassio.yourdomain.com\"\n  global_ip: \"YOUR_WHITE_IP\"\n  global_port: 443\n\nssh:\n  username: \"root\"\n  port: 22\n\n  # \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\n  local_ip: \"192.168.1.20\"\n\n  # \u0427\u0435\u0440\u0435\u0437 ZeroTier\n  zerotier_ip: \"10.147.20.100\"\n\n  # \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\n  global_ip: \"YOUR_WHITE_IP\"\n  global_port: 22\n\nsamba:\n  username: \"homeassistant\"\n  password: \"your_password\"\n\n  # \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\n  local_ip: \"192.168.1.20\"\n\n  # \u0427\u0435\u0440\u0435\u0437 ZeroTier\n  zerotier_ip: \"10.147.20.100\"\n\n# \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0440\u0435\u0436\u0438\u043c\u0430\ndetection:\n  # IP \u0430\u0434\u0440\u0435\u0441 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438\n  local_gateway: \"192.168.1.1\"\n\n  # ZeroTier \u0441\u0435\u0442\u044c\n  zerotier_network: \"abcdef1234567890\"\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#_5","title":"\ud83d\udd27 \u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u0432\u0442\u043e\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435","text":"<p>\u0421\u043a\u0440\u0438\u043f\u0442\u044b \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435:</p>"},{"location":"setup/zerotier-mixed-mode/#1","title":"1. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438","text":"<pre><code># \u041f\u0438\u043d\u0433\u0443\u0435\u043c \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0448\u043b\u044e\u0437\nping -c 1 -W 1 192.168.1.1 &gt;/dev/null 2&gt;&amp;1\nif [ $? -eq 0 ]; then\n    echo \"\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u2192 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c LOCAL\"\nfi\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#2-zerotier","title":"2. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 ZeroTier","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c ZeroTier \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\nif zerotier-cli listnetworks | grep -q \"OK\"; then\n    echo \"ZeroTier \u0430\u043a\u0442\u0438\u0432\u0435\u043d \u2192 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c ZEROTIER\"\nfi\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#3-fallback","title":"3. Fallback \u043d\u0430 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439","text":"<pre><code># \u0415\u0441\u043b\u0438 \u043d\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f, \u043d\u0438 ZeroTier \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\necho \"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u2192 GLOBAL\"\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#_6","title":"\ud83e\uddea \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430","text":""},{"location":"setup/zerotier-mixed-mode/#_7","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<pre><code># \u041f\u0438\u043d\u0433 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e HA\nping 192.168.1.20\n\n# SSH \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\nssh root@192.168.1.20\n\n# SAMBA \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\nmount | grep hassio\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#zerotier_3","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 ZeroTier \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 ZeroTier\nsudo zerotier-cli listnetworks\n# \u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c: OK PRIVATE abcdef1234567890\n\n# \u0423\u0437\u043d\u0430\u0442\u044c \u0432\u0430\u0448 ZeroTier IP\nip addr show zt0\n# \u0418\u043b\u0438\nsudo zerotier-cli listnetworks | grep \"10.147\"\n\n# \u041f\u0438\u043d\u0433 HA \u0447\u0435\u0440\u0435\u0437 ZeroTier\nping 10.147.20.100\n\n# SSH \u0447\u0435\u0440\u0435\u0437 ZeroTier\nssh root@10.147.20.100\n\n# Home Assistant \u0447\u0435\u0440\u0435\u0437 ZeroTier\ncurl http://10.147.20.100:8123\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#_8","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<pre><code># \u0427\u0435\u0440\u0435\u0437 \u0434\u043e\u043c\u0435\u043d\ncurl https://hassio.yourdomain.com\n\n# SSH \u0447\u0435\u0440\u0435\u0437 \u0431\u0435\u043b\u044b\u0439 IP\nssh root@YOUR_WHITE_IP\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#_9","title":"\ud83d\udcca \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 ZeroTier \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u26a1\u26a1\u26a1 \u0411\u044b\u0441\u0442\u0440\u043e \u26a1\u26a1 \u0421\u0440\u0435\u0434\u043d\u0435 \u26a1 \u041c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \ud83d\udd12 \u0421\u0435\u0442\u044c \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u0430 \u0440\u043e\u0443\u0442\u0435\u0440\u043e\u043c \ud83d\udd12\ud83d\udd12 VPN \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \ud83d\udd12 \u0417\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u274c \u041d\u0435\u0442 \u2705 \u0414\u0430 \u2705 \u0414\u0430 \u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 \u274c \u041d\u0435 \u043d\u0443\u0436\u0435\u043d \u274c \u041d\u0435 \u043d\u0443\u0436\u0435\u043d \u2705 \u041d\u0443\u0436\u0435\u043d \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432\u0435\u0437\u0434\u0435 \u274c \u0422\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043c\u0430 \u2705 \u0412\u0435\u0437\u0434\u0435 \u2705 \u0412\u0435\u0437\u0434\u0435 NAT traversal - \u2705 P2P \u274c \u041d\u0443\u0436\u0435\u043d \u0431\u0435\u043b\u044b\u0439 IP"},{"location":"setup/zerotier-mixed-mode/#_10","title":"\ud83d\udd27 \u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"setup/zerotier-mixed-mode/#1_1","title":"\u041f\u0440\u0438\u043c\u0435\u0440 1: \u0412\u044b \u0434\u043e\u043c\u0430","text":"<pre><code>./ha\n# \u0421\u043a\u0440\u0438\u043f\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442: \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430\n# \u2192 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 SSH/SAMBA \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u043a 192.168.1.20\n# \u2192 \u0411\u044b\u0441\u0442\u0440\u043e, \u0431\u0435\u0437 \u0437\u0430\u0434\u0435\u0440\u0436\u0435\u043a\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#2","title":"\u041f\u0440\u0438\u043c\u0435\u0440 2: \u0412\u044b \u0432 \u043a\u0430\u0444\u0435 \u0441 \u043d\u043e\u0443\u0442\u0431\u0443\u043a\u043e\u043c","text":"<pre><code># ZeroTier \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043d\u0430 \u043d\u043e\u0443\u0442\u0431\u0443\u043a\u0435\n./ha\n# \u0421\u043a\u0440\u0438\u043f\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442: \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438 \u043d\u0435\u0442, \u043d\u043e ZeroTier \u0430\u043a\u0442\u0438\u0432\u0435\u043d\n# \u2192 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 ZeroTier IP: 10.147.20.100\n# \u2192 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u0447\u0435\u0440\u0435\u0437 VPN \u0442\u0443\u043d\u043d\u0435\u043b\u044c\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#3-zerotier","title":"\u041f\u0440\u0438\u043c\u0435\u0440 3: \u0412\u044b \u043d\u0430 \u0447\u0443\u0436\u043e\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 (\u0431\u0435\u0437 ZeroTier)","text":"<pre><code># \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\nhttps://hassio.yourdomain.com\n# \u2192 \u0418\u0434\u0451\u0442 \u0447\u0435\u0440\u0435\u0437 \u0431\u0435\u043b\u044b\u0439 IP \u0438 Reverse Proxy\n# \u2192 \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432\u0435\u0437\u0434\u0435, \u043d\u043e \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#configuresh","title":"\ud83d\udee0\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 configure.sh","text":"<p>\u0421\u043a\u0440\u0438\u043f\u0442 <code>configure.sh</code> \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e:</p> <pre><code>./scripts/configure.sh\n\n# \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0436\u0438\u043c:\n# 1) Local  - \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c\n# 2) Global - \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\n# 3) Mixed  - \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)\n</code></pre> <p>Mixed \u0440\u0435\u0436\u0438\u043c \u0441\u043e\u0437\u0434\u0430\u0441\u0442:</p> <ul> <li>SSH config \u0441 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0445\u043e\u0441\u0442\u0430\u043c\u0438</li> <li>\u0421\u043a\u0440\u0438\u043f\u0442\u044b \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435</li> </ul>"},{"location":"setup/zerotier-mixed-mode/#ssh-config","title":"\ud83d\udcdd SSH config \u0434\u043b\u044f \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430","text":"<p>\u0424\u0430\u0439\u043b <code>.ssh/config</code> \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c:</p> <pre><code># \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f (\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 1)\nHost hassio-local\n    HostName 192.168.1.20\n    User root\n    Port 22\n    IdentityFile ~/.ssh/id_hassio\n    ConnectTimeout 2\n\n# ZeroTier \u0434\u043e\u0441\u0442\u0443\u043f (\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 2)\nHost hassio-zt\n    HostName 10.147.20.100\n    User root\n    Port 22\n    IdentityFile ~/.ssh/id_hassio\n    ConnectTimeout 5\n\n# \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f (\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 3)\nHost hassio-global\n    HostName YOUR_WHITE_IP\n    User root\n    Port 22\n    IdentityFile ~/.ssh/id_hassio\n\n# \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0432\u044b\u0431\u043e\u0440\nHost hassio\n    HostName 192.168.1.20\n    User root\n    Port 22\n    IdentityFile ~/.ssh/id_hassio\n    # \u0421\u043a\u0440\u0438\u043f\u0442\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0437\u043c\u0435\u043d\u044f\u0442 HostName\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#zerotier_4","title":"\ud83d\udd12 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c ZeroTier","text":""},{"location":"setup/zerotier-mixed-mode/#_11","title":"\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430","text":"<p>\u2705 End-to-End \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 - \u0442\u0440\u0430\u0444\u0438\u043a \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d \u2705 P2P \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f - \u043f\u0440\u044f\u043c\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u2705 \u0426\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 - \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u043f\u0430\u043d\u0435\u043b\u0438 \u2705 NAT traversal - \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0437\u0430 \u043b\u044e\u0431\u044b\u043c NAT/Firewall</p>"},{"location":"setup/zerotier-mixed-mode/#_12","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ol> <li>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c Flow Rules:</li> </ol> <p>\u0412 \u043f\u0430\u043d\u0435\u043b\u0438 ZeroTier \u2192 Networks \u2192 Flow Rules:</p> <pre><code># \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\ntag trusted\n  id YOUR_LAPTOP_ID\n  id YOUR_MIKROTIK_ID\n;\n\n# \u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0451 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435\ndrop not tag trusted;\n</code></pre> <ol> <li>\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c Members:</li> <li>\u0423\u0434\u0430\u043b\u044f\u0442\u044c \u0441\u0442\u0430\u0440\u044b\u0435/\u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430</li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c</p> </li> <li> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u0443\u044e \u0441\u0435\u0442\u044c:</p> </li> <li>Network Access Control: Private</li> <li>\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430</li> </ol>"},{"location":"setup/zerotier-mixed-mode/#_13","title":"\ud83c\udd98 \u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c","text":""},{"location":"setup/zerotier-mixed-mode/#zerotier_5","title":"ZeroTier \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\nsudo zerotier-cli info\n# \u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c: 200 info [node_id] [version] ONLINE\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0435\u0442\u0438\nsudo zerotier-cli listnetworks\n# \u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c: OK PRIVATE [network_id]\n\n# \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c ZeroTier\nsudo systemctl restart zerotier-one\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#zerotier_6","title":"\u041c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 ZeroTier","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0442\u0438\u043f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\nsudo zerotier-cli peers\n# \u0418\u0449\u0438\u0442\u0435 DIRECT (\u043f\u0440\u044f\u043c\u043e\u0435 P2P) \u0438\u043b\u0438 RELAY (\u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0440\u0432\u0435\u0440)\n\n# \u0415\u0441\u043b\u0438 RELAY - \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 firewall\n# ZeroTier \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 UDP \u043f\u043e\u0440\u0442\u044b 9993\nsudo ufw allow 9993/udp\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#mikrotik-zerotier","title":"MikroTik \u043d\u0435 \u0432\u0438\u0434\u0438\u0442 ZeroTier \u0441\u0435\u0442\u044c","text":"<pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\n/interface print\n# \u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c zt-[network_id]\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\n/zerotier print\n# Status: enabled\n\n# \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c ZeroTier\n/zerotier leave network=abcdef1234567890\n/zerotier join network=abcdef1234567890\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#_14","title":"\ud83d\udcca \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433","text":""},{"location":"setup/zerotier-mixed-mode/#_15","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u0441\u0435\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u043a\u0440\u0438\u043f\u0442 <code>check_connectivity.sh</code>:</p> <pre><code>#!/bin/bash\n\necho \"\ud83d\udd0d \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f...\"\necho \"\"\n\n# 1. \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c\necho \"1\ufe0f\u20e3 \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c (192.168.1.20):\"\nif ping -c 1 -W 1 192.168.1.20 &gt;/dev/null 2&gt;&amp;1; then\n    echo \"   \u2705 \u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430\"\nelse\n    echo \"   \u274c \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430\"\nfi\n\n# 2. ZeroTier\necho \"2\ufe0f\u20e3 ZeroTier (10.147.20.100):\"\nif ping -c 1 -W 2 10.147.20.100 &gt;/dev/null 2&gt;&amp;1; then\n    echo \"   \u2705 \u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d\"\n    zerotier-cli peers | grep -A1 \"10.147.20.100\" | grep \"DIRECT\\|RELAY\"\nelse\n    echo \"   \u274c \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d\"\nfi\n\n# 3. \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\necho \"3\ufe0f\u20e3 \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 (hassio.yourdomain.com):\"\nif curl -s -I https://hassio.yourdomain.com &gt;/dev/null 2&gt;&amp;1; then\n    echo \"   \u2705 \u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d\"\nelse\n    echo \"   \u274c \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d\"\nfi\n</code></pre>"},{"location":"setup/zerotier-mixed-mode/#_16","title":"\ud83d\udcda \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<ul> <li>ZeroTier Documentation</li> <li>ZeroTier MikroTik Setup</li> <li>ZeroTier Network Rules</li> <li>\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f</li> <li>\u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432 MikroTik</li> </ul>"},{"location":"setup/zerotier-mixed-mode/#-","title":"\ud83d\udccb \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","text":"<ul> <li>[ ] ZeroTier \u0441\u0435\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0430</li> <li>[ ] ZeroTier \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043d\u0430 \u0432\u0441\u0435\u0445 MikroTik</li> <li>[ ] ZeroTier \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435</li> <li>[ ] \u0412\u0441\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0432 \u043f\u0430\u043d\u0435\u043b\u0438 ZeroTier</li> <li>[ ] \u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u043d\u0430 MikroTik (via ZeroTier)</li> <li>[ ] config.yml \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u0441 ZeroTier IP</li> <li>[ ] \u0422\u0435\u0441\u0442: ping \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 ZeroTier</li> <li>[ ] \u0422\u0435\u0441\u0442: SSH \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 ZeroTier</li> <li>[ ] \u0422\u0435\u0441\u0442: Home Assistant \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0447\u0435\u0440\u0435\u0437 ZeroTier</li> <li>[ ] \u0421\u043a\u0440\u0438\u043f\u0442\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442 \u0440\u0435\u0436\u0438\u043c</li> </ul>"},{"location":"setup/zerotier-mixed-mode/#_17","title":"\ud83c\udfaf \u0418\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u0441\u0445\u0435\u043c\u0430 \u0432\u0430\u0448\u0435\u0439 \u0441\u0435\u0442\u0438","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               \u0412\u0430\u0448\u0430 \u0433\u0438\u0431\u0440\u0438\u0434\u043d\u0430\u044f \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  ZeroTier    \u2502\n                    \u2502   Network    \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2193\n         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u2193                 \u2193                 \u2193\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502\u041b\u043e\u043a\u0430\u0446\u0438\u044f 1\u2502       \u2502\u041b\u043e\u043a\u0430\u0446\u0438\u044f 2\u2502      \u2502 \u041d\u043e\u0443\u0442\u0431\u0443\u043a \u2502\n    \u2502  (\u0434\u043e\u043c)  \u2502       \u2502 (\u043e\u0444\u0438\u0441)  \u2502      \u2502 (\u0432 \u043f\u0443\u0442\u0438)\u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2193                 \u2193                 \u2193\n    MikroTik          MikroTik         ZeroTier\n    - ZeroTier        - ZeroTier        \u043a\u043b\u0438\u0435\u043d\u0442\n         \u2193                 \u2193\n    192.168.1.0       192.168.2.0\n         \u2193                 \u2193\n  Home Assistant    Home Assistant\n   - SSH/SAMBA      - SSH/SAMBA\n</code></pre> <p>\u0420\u0435\u0436\u0438\u043c\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f: \u2501\u2501\u2501\u2501\u2501 \u041b\u043e\u043a\u0430\u043b\u044c\u043d\u043e (\u0434\u043e\u043c\u0430): 192.168.1.20 (\u0431\u044b\u0441\u0442\u0440\u043e) \u2500 \u2500 \u2500 ZeroTier: 10.147.20.100 (\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e, \u0432\u0435\u0437\u0434\u0435) \u2508\u2508\u2508\u2508\u2508 \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e: hassio.yourdomain.com (fallback)</p> <p>\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u043b\u0443\u0447\u0448\u0435\u0435 \u0438\u0437 \u0432\u0441\u0435\u0445 \u043c\u0438\u0440\u043e\u0432:</p> <ul> <li>\ud83c\udfe0 \u0411\u044b\u0441\u0442\u0440\u043e \u0434\u043e\u043c\u0430</li> <li>\ud83c\udf10 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u0447\u0435\u0440\u0435\u0437 ZeroTier \u0432 \u043b\u044e\u0431\u043e\u0439 \u0442\u043e\u0447\u043a\u0435</li> <li>\ud83d\udd13 Fallback \u0447\u0435\u0440\u0435\u0437 \u0431\u0435\u043b\u044b\u0439 IP \u0435\u0441\u043b\u0438 ZeroTier \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d</li> </ul> <p>\u0413\u043e\u0442\u043e\u0432\u043e! \u0422\u0435\u043f\u0435\u0440\u044c \u0443 \u0432\u0430\u0441 \u043f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u0430\u044f \u0433\u0438\u0431\u0440\u0438\u0434\u043d\u0430\u044f \u0441\u0435\u0442\u044c \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0432\u044b\u0431\u043e\u0440\u043e\u043c \u043b\u0443\u0447\u0448\u0435\u0433\u043e \u043c\u0435\u0442\u043e\u0434\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f! \ud83c\udfaf</p>"}]}