# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —É–º–Ω–æ–≥–æ –¥–æ–º–∞

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

–ò–∑ –∞—É–¥–∏—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è:

- üìπ **–ö–∞–º–µ—Ä—ã** (Hikvision, Dahua, —Ç–µ–ø–ª–æ–≤–∏–∑–æ—Ä—ã)
- üö® **–î–∞—Ç—á–∏–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è** (PIR, thermal)
- üö™ **–î–∞—Ç—á–∏–∫–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è** (–¥–≤–µ—Ä–∏, –æ–∫–Ω–∞)
- üîî **–í–∏–¥–µ–æ–¥–æ–º–æ—Ñ–æ–Ω—ã**
- üîí **–ó–∞–º–∫–∏** (—É–º–Ω—ã–µ –∑–∞–º–∫–∏)

---

## 1. –£–º–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –æ–±—ä–µ–∫—Ç–∞

```yaml
automation:
  - alias: "–¢—Ä–µ–≤–æ–≥–∞: –ß–µ–ª–æ–≤–µ–∫ –Ω–æ—á—å—é"
    trigger:
      - platform: state
        entity_id: binary_sensor.street_ptz_smart_motion_human
        to: "on"
    condition:
      - condition: time
        after: "22:00:00"
        before: "06:00:00"
      # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ –¥–æ–º–∞
      - condition: state
        entity_id: alarm_control_panel.home
        state: "armed_away"
    action:
      - service: notify.telegram
        data:
          message: "‚ö†Ô∏è –ß–µ–ª–æ–≤–µ–∫ –≤–æ–∑–ª–µ –¥–æ–º–∞!"
          data:
            photo:
              - url: "http://YOUR_HA_IP:8123/api/camera_proxy/camera.street_ptz"
      - service: light.turn_on
        entity_id: light.street_lights
        data:
          brightness: 255
```text

### –ú–∞—à–∏–Ω–∞ –≤–æ –¥–≤–æ—Ä–µ

```yaml
automation:
  - alias: "–¢—Ä–µ–≤–æ–≥–∞: –ú–∞—à–∏–Ω–∞ —É –≤–æ—Ä–æ—Ç"
    trigger:
      - platform: state
        entity_id: binary_sensor.street_ptz_smart_motion_vehicle
        to: "on"
    condition:
      - condition: state
        entity_id: binary_sensor.gate_lock
        state: "off"  # –í–æ—Ä–æ—Ç–∞ –∑–∞–∫—Ä—ã—Ç—ã
    action:
      - service: notify.telegram
        data:
          message: "üöó –ú–∞—à–∏–Ω–∞ —É –≤–æ—Ä–æ—Ç!"
          data:
            inline_keyboard:
              - "–û—Ç–∫—Ä—ã—Ç—å –≤–æ—Ä–æ—Ç–∞:/open_gate"
              - "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å:/ignore"
```text

---

## 2. –ó–æ–Ω—ã –¥–µ—Ç–µ–∫—Ü–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–æ–Ω

–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:

- ‚ùå –í—Å—è –∫–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞ ‚Üí –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ –¥–µ—Ä–µ–≤—å—è
- ‚ùå –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞ –Ω–∞ —É–ª–∏—Ü–µ

–ü—Ä–∞–≤–∏–ª—å–Ω–æ:

- ‚úÖ –ó–æ–Ω–∞ —É –∫–∞–ª–∏—Ç–∫–∏
- ‚úÖ –ó–æ–Ω–∞ —É –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏
- ‚úÖ –ü–µ—Ä–∏–º–µ—Ç—Ä –∑–∞–±–æ—Ä–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ Hikvision:**

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã ‚Üí –î–µ—Ç–µ–∫—Ü–∏—è ‚Üí Smart Event
2. –í—ã–±—Ä–∞—Ç—å "Intrusion Detection" (–≤—Ç–æ—Ä–∂–µ–Ω–∏–µ)
3. –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –∑–æ–Ω—É –∏–Ω—Ç–µ—Ä–µ—Å–∞
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 60-70%

---

## 3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ—Å–≤–µ—â–µ–Ω–∏—è

```yaml
automation:
  - alias: "–°–≤–µ—Ç –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –Ω–æ—á—å—é"
    trigger:
      - platform: state
        entity_id:
          - binary_sensor.doorbell_pir
          - binary_sensor.garden_thermal_motion_alarm
        to: "on"
    condition:
      - condition: sun
        after: sunset
        before: sunrise
    action:
      - service: light.turn_on
        entity_id:
          - light.entrance
          - light.garden_thermal_infrared
        data:
          brightness: 200
      - delay: "00:03:00"
      - service: light.turn_off
        entity_id:
          - light.entrance
          - light.garden_thermal_infrared
```text

---

## 4. –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

### –í–∏–¥–µ–æ–¥–æ–º–æ—Ñ–æ–Ω —Å —É–º–Ω—ã–º –æ—Ç–∫—Ä—ã—Ç–∏–µ–º

```yaml
automation:
  - alias: "–î–æ–º–æ—Ñ–æ–Ω: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"
    trigger:
      - platform: state
        entity_id: binary_sensor.vto2111_invite
        to: "on"
    action:
      - service: notify.telegram
        data:
          message: "üîî –ó–≤–æ–Ω–æ–∫ –≤ –¥–æ–º–æ—Ñ–æ–Ω!"
          data:
            photo:
              - url: "http://YOUR_HA_IP:8123/api/camera_proxy/camera.vto2111"
            inline_keyboard:
              - "–û—Ç–∫—Ä—ã—Ç—å:/open_door"
              - "–ì–æ–≤–æ—Ä–∏—Ç—å:/talk"
```text

### –£–º–Ω—ã–µ –∑–∞–º–∫–∏

```yaml
automation:
  - alias: "–ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ –¥–≤–µ—Ä–∏"
    trigger:
      - platform: state
        entity_id: binary_sensor.door_sensor
        to: "off"  # –î–≤–µ—Ä—å –∑–∞–∫—Ä—ã—Ç–∞
        for: "00:00:30"
    condition:
      - condition: state
        entity_id: lock.door_lock
        state: "unlocked"
    action:
      - service: lock.lock
        entity_id: lock.door_lock
```text

---

## 5. –†–µ–∂–∏–º—ã –æ—Ö—Ä–∞–Ω—ã

```yaml
# –í input_select.yaml
input_select:
  security_mode:
    name: –†–µ–∂–∏–º –æ—Ö—Ä–∞–Ω—ã
    options:
      - "–î–æ–º–∞"
      - "–£—à–ª–∏"
      - "–û—Ç–ø—É—Å–∫"
      - "–°–æ–Ω"
    initial: "–î–æ–º–∞"
    icon: mdi:shield-home

# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤
automation:
  - alias: "–†–µ–∂–∏–º: –£—à–ª–∏"
    trigger:
      - platform: state
        entity_id: group.family
        to: "not_home"
        for: "00:05:00"
    action:
      - service: input_select.select_option
        target:
          entity_id: input_select.security_mode
        data:
          option: "–£—à–ª–∏"
      - service: alarm_control_panel.alarm_arm_away
        entity_id: alarm_control_panel.home
      - service: climate.set_temperature
        data:
          entity_id: all
          temperature: 18
      - service: light.turn_off
        entity_id: all

  - alias: "–†–µ–∂–∏–º: –í–µ—Ä–Ω—É–ª–∏—Å—å"
    trigger:
      - platform: state
        entity_id: group.family
        to: "home"
    action:
      - service: input_select.select_option
        target:
          entity_id: input_select.security_mode
        data:
          option: "–î–æ–º–∞"
      - service: alarm_control_panel.alarm_disarm
        entity_id: alarm_control_panel.home
```text

---

## 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π

### Dashboard –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```yaml
type: vertical-stack
cards:
  - type: picture-entity
    entity: camera.street_ptz
    camera_image: camera.street_ptz
    show_state: false

  - type: horizontal-stack
    cards:
      - type: entity
        entity: binary_sensor.street_ptz_smart_motion_human
        name: –ß–µ–ª–æ–≤–µ–∫
      - type: entity
        entity: binary_sensor.street_ptz_smart_motion_vehicle
        name: –ú–∞—à–∏–Ω–∞

  - type: history-graph
    entities:
      - binary_sensor.doorbell_pir
      - binary_sensor.garden_thermal_motion_alarm
      - binary_sensor.gate_lock
    hours_to_show: 24

  - type: logbook
    entities:
      - binary_sensor.street_ptz_smart_motion_human
      - binary_sensor.vto2111_invite
    hours_to_show: 24
```text

---

## 7. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```yaml
automation:
  - alias: "–¢–µ—Å—Ç –∫–∞–º–µ—Ä –∫–∞–∂–¥—É—é –Ω–æ—á—å"
    trigger:
      - platform: time
        at: "03:00:00"
    action:
      - service: script.check_all_cameras

script:
  check_all_cameras:
    sequence:
      - repeat:
          for_each:
            - camera.street_ptz
            - camera.garden_thermal
            - camera.vto2111
          sequence:
            - service: camera.snapshot
              target:
                entity_id: "{{ repeat.item }}"
              data:
                filename: "/config/www/snapshots/{{ repeat.item }}_test.jpg"
            - delay: 1
      - service: notify.telegram
        data:
          message: "‚úÖ –í—Å–µ –∫–∞–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç"
```text

---

## –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∑–æ–Ω—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –Ω–∞ –∫–∞–º–µ—Ä–∞—Ö
- [ ] –û—Ç–∫–ª—é—á–µ–Ω—ã –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- [ ] –£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
- [ ] –†–µ–∂–∏–º—ã –æ—Ö—Ä–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ï—Å—Ç—å —Å–Ω–∏–º–∫–∏ —Å –∫–∞–º–µ—Ä –ø—Ä–∏ —Ç—Ä–µ–≤–æ–≥–µ
- [ ] –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- [ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

---

!!! warning "–í–∞–∂–Ω–æ"
    –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–∞–º–µ—Ä—ã –∏ –¥–∞—Ç—á–∏–∫–∏ —Ä–∞–∑ –≤ –º–µ—Å—è—Ü! –ù–µ—Ä–∞–±–æ—Ç–∞—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ö—É–∂–µ –µ—ë –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è.
