# ๐ ZeroTier + ะกะผะตัะฐะฝะฝัะน ัะตะถะธะผ

ะะธะฑัะธะดะฝะฐั ัะตัั: ะปะพะบะฐะปัะฝัะน ะดะพัััะฟ + ZeroTier VPN ะดะปั ัะดะฐะปัะฝะฝะพะน ัะฐะฑะพัั

---

## ๐ฏ ะะฐัะฐ ะบะพะฝัะธะณััะฐัะธั

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      ZeroTier Network                        โ
โ                    (ะฒะธัััะฐะปัะฝะฐั ัะตัั)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ                    โ                    โ
    โโโโโโโโโโ          โโโโโโโโโโ          โโโโโโโโโโ
    โ ะะพะบะฐัะธัโ          โ ะะพะบะฐัะธัโ          โ ะะพััะฑัะบโ
    โ   #1   โ          โ   #2   โ          โ(ะฒ ะฟััะธ)โ
    โโโโโโโโโโ          โโโโโโโโโโ          โโโโโโโโโโ
         โ                    โ                    โ
    MikroTik            MikroTik         ะััะผะพะน ะดะพัััะฟ
    + ZeroTier          + ZeroTier        ะบ ZeroTier
         โ                    โ
  Home Assistant     Home Assistant
   192.168.1.X         192.168.2.X
```

**ะัะตะธะผััะตััะฒะฐ:**

โ **ะะพะบะฐะปัะฝะพ** - ะฑัััััะน ะดะพัััะฟ ัะตัะตะท ะปะพะบะฐะปัะฝัั ัะตัั (SSH/SAMBA)
โ **ะฃะดะฐะปัะฝะฝะพ** - ะฑะตะทะพะฟะฐัะฝัะน ะดะพัััะฟ ัะตัะตะท ZeroTier VPN
โ **ะะฒัะพะผะฐัะธัะตัะบะพะต** - ัะบัะธะฟัั ัะฐะผะธ ะพะฟัะตะดะตะปััั ะณะดะต ะฒั ะฝะฐัะพะดะธัะตัั
โ **ะะตะท ะฟัะพะฑัะพัะฐ ะฟะพััะพะฒ** - ZeroTier ัะพะทะดะฐัั ะฟััะผะพะต P2P ัะพะตะดะธะฝะตะฝะธะต

---

## ๐ง ะััะธัะตะบัััะฐ ัะผะตัะฐะฝะฝะพะณะพ ัะตะถะธะผะฐ

### ะขัะธ ัะตะถะธะผะฐ ัะฐะฑะพัั ัะบัะธะฟัะพะฒ

**1. Local (ะะพะบะฐะปัะฝัะน)**

```text
ะะพะผะฟัััะตั โโ[SSH/SAMBA]โโ> Home Assistant
  (ะดะพะผะฐ)     192.168.1.X      (ะฟััะผะพะต ะฟะพะดะบะปััะตะฝะธะต)
```

**2. Global (ะะปะพะฑะฐะปัะฝัะน)**

```text
ะะพะผะฟัััะตั โโ[Internet]โโ> ะะตะปัะน IP โโ> MikroTik โโ> Home Assistant
 (ะฒ ะฟััะธ)    ะะพััั 22/443                  192.168.1.X
```

**3. Mixed (ะกะผะตัะฐะฝะฝัะน) โ ะะฐั ัะปััะฐะน!**

```text
ะัะปะธ ะดะพะผะฐ:
  ะะพะผะฟัััะตั โโ[SSH/SAMBA]โโ> 192.168.1.X (ะฑััััะพ, ะฟััะผะพ)

ะัะปะธ ะฝะต ะดะพะผะฐ:
  ะะพะผะฟัััะตั โโ[ZeroTier]โโ> 10.147.X.X โโ> Home Assistant
              (VPN ััะฝะฝะตะปั)  (ZeroTier IP)
```

---

## ๐ ะะฐัััะพะนะบะฐ ZeroTier

### ะจะฐะณ 1: ะกะพะทะดะฐัั ัะตัั ZeroTier

1. ะะฐัะตะณะธัััะธัะพะฒะฐัััั: <https://my.zerotier.com>
2. ะกะพะทะดะฐัั ะฝะพะฒัั ัะตัั: **Create A Network**
3. ะะฐะฟะธัะฐัั **Network ID**: `abcdef1234567890`

### ะจะฐะณ 2: ะะฐัััะพะธัั ZeroTier ะฝะฐ MikroTik

#### ะฃััะฐะฝะพะฒะบะฐ ZeroTier ะฝะฐ RouterOS v7+

```bash
# ะงะตัะตะท ัะตัะผะธะฝะฐะป MikroTik
/system package print
# ะฃะฑะตะดะธัะตัั ััะพ ะฒะตััะธั 7.0+

# ะะบะปััะธัั ZeroTier
/zerotier enable

# ะะพะดะบะปััะธัััั ะบ ัะตัะธ
/zerotier join network=abcdef1234567890
```

#### ะะฐัััะพะนะบะฐ ะผะฐัััััะธะทะฐัะธะธ ัะตัะตะท static routes

```bash
# ะฃะทะฝะฐัั ZeroTier ะธะฝัะตััะตะนั
/interface print
# ะะฐะนะดะธัะต zt-abcdef (ZeroTier ะธะฝัะตััะตะนั)

# ะะพะฑะฐะฒะธัั ะผะฐััััั ัะตัะตะท ZeroTier
# ะะฐะฟัะธะผะตั, ััะพะฑั ะดะพะฑัะฐัััั ะดะพ ะปะพะบะฐัะธะธ #2
/ip route add \
  dst-address=192.168.2.0/24 \
  gateway=10.147.X.X \
  comment="Route to Location #2 via ZeroTier"

# ะะดะต 10.147.X.X - ZeroTier IP ัะพััะตัะฐ ะปะพะบะฐัะธะธ #2
```

#### ะะฐะทัะตัะธัั ััะฐัะธะบ ัะตัะตะท ZeroTier

```bash
# Firewall: ัะฐะทัะตัะธัั ZeroTier
/ip firewall filter add \
  chain=input \
  in-interface=zt-abcdef \
  action=accept \
  comment="Allow ZeroTier"

/ip firewall filter add \
  chain=forward \
  in-interface=zt-abcdef \
  action=accept \
  comment="Forward ZeroTier"
```

### ะจะฐะณ 3: ะะฐัััะพะธัั ZeroTier ะฝะฐ ะบะพะผะฟัััะตัะต (Linux)

```bash
# ะฃััะฐะฝะพะฒะธัั ZeroTier
curl -s https://install.zerotier.com | sudo bash

# ะะพะดะบะปััะธัััั ะบ ัะตัะธ
sudo zerotier-cli join abcdef1234567890

# ะัะพะฒะตัะธัั ััะฐััั
sudo zerotier-cli listnetworks
```

### ะจะฐะณ 4: ะะฒัะพัะธะทะพะฒะฐัั ััััะพะนััะฒะฐ ะฒ ะฟะฐะฝะตะปะธ ZeroTier

1. ะะตัะตะนัะธ: <https://my.zerotier.com>
2. ะัะบัััั ะฒะฐัั ัะตัั
3. ะัะพะบัััะธัั ะดะพ **Members**
4. ะะพััะฐะฒะธัั โ **Auth** ะดะปั ะบะฐะถะดะพะณะพ ััััะพะนััะฒะฐ
5. ะัะธัะฒะพะธัั ะฟะพะฝััะฝัะต ะธะผะตะฝะฐ (MikroTik-Home, MikroTik-Office, Laptop)

---

## ๐ ะะฐัััะพะนะบะฐ config.yml ะดะปั ัะผะตัะฐะฝะฝะพะณะพ ัะตะถะธะผะฐ

```yaml
# /home/gfer/HASSio/config.yml

mode: "mixed"  # ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต

home_assistant:
  # ะะพะบะฐะปัะฝัะน ะดะพัััะฟ (ะบะพะณะดะฐ ะดะพะผะฐ)
  local_ip: "192.168.1.20"
  local_port: 8123

  # ZeroTier ะดะพัััะฟ (ะบะพะณะดะฐ ะฝะต ะดะพะผะฐ)
  zerotier_ip: "10.147.20.100"  # ZeroTier IP ะฒะฐัะตะณะพ HA
  zerotier_port: 8123

  # ะะปะพะฑะฐะปัะฝัะน ะดะพัััะฟ (ัะตัะตะท ะฑะตะปัะน IP)
  hostname: "hassio.yourdomain.com"
  global_ip: "YOUR_WHITE_IP"
  global_port: 443

ssh:
  username: "root"
  port: 22

  # ะะพะบะฐะปัะฝะพ
  local_ip: "192.168.1.20"

  # ะงะตัะตะท ZeroTier
  zerotier_ip: "10.147.20.100"

  # ะะปะพะฑะฐะปัะฝะพ
  global_ip: "YOUR_WHITE_IP"
  global_port: 22

samba:
  username: "homeassistant"
  password: "your_password"

  # ะะพะบะฐะปัะฝะพ
  local_ip: "192.168.1.20"

  # ะงะตัะตะท ZeroTier
  zerotier_ip: "10.147.20.100"

# ะะฐัััะพะนะบะธ ะพะฟัะตะดะตะปะตะฝะธั ัะตะถะธะผะฐ
detection:
  # IP ะฐะดัะตั ะดะปั ะฟัะพะฒะตัะบะธ ะปะพะบะฐะปัะฝะพะน ัะตัะธ
  local_gateway: "192.168.1.1"

  # ZeroTier ัะตัั
  zerotier_network: "abcdef1234567890"
```

---

## ๐ง ะะฐะบ ัะฐะฑะพัะฐะตั ะฐะฒัะพะพะฟัะตะดะตะปะตะฝะธะต

ะกะบัะธะฟัั ะฟัะพะฒะตัััั ะฟะพะดะบะปััะตะฝะธะต ะฒ ัะปะตะดัััะตะผ ะฟะพััะดะบะต:

### 1. ะัะพะฒะตัะบะฐ ะปะพะบะฐะปัะฝะพะน ัะตัะธ

```bash
# ะะธะฝะณัะตะผ ะปะพะบะฐะปัะฝัะน ัะปัะท
ping -c 1 -W 1 192.168.1.1 >/dev/null 2>&1
if [ $? -eq 0 ]; then
    echo "ะะพะบะฐะปัะฝะฐั ัะตัั ะดะพัััะฟะฝะฐ โ ะธัะฟะพะปัะทัะตะผ LOCAL"
fi
```

### 2. ะัะพะฒะตัะบะฐ ZeroTier

```bash
# ะัะพะฒะตััะตะผ ZeroTier ะธะฝัะตััะตะนั
if zerotier-cli listnetworks | grep -q "OK"; then
    echo "ZeroTier ะฐะบัะธะฒะตะฝ โ ะธัะฟะพะปัะทัะตะผ ZEROTIER"
fi
```

### 3. Fallback ะฝะฐ ะณะปะพะฑะฐะปัะฝัะน

```bash
# ะัะปะธ ะฝะธ ะปะพะบะฐะปัะฝะฐั, ะฝะธ ZeroTier ะฝะตะดะพัััะฟะฝั
echo "ะัะฟะพะปัะทัะตะผ ะณะปะพะฑะฐะปัะฝัะน ะดะพัััะฟ โ GLOBAL"
```

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต ัะผะตัะฐะฝะฝะพะณะพ ัะตะถะธะผะฐ

### ะัะพะฒะตัะบะฐ ะปะพะบะฐะปัะฝะพะณะพ ะดะพัััะฟะฐ

```bash
# ะะธะฝะณ ะปะพะบะฐะปัะฝะพะณะพ HA
ping 192.168.1.20

# SSH ะปะพะบะฐะปัะฝะพ
ssh root@192.168.1.20

# SAMBA ะปะพะบะฐะปัะฝะพ
mount | grep hassio
```

### ะัะพะฒะตัะบะฐ ZeroTier ะดะพัััะฟะฐ

```bash
# ะัะพะฒะตัะธัั ััะฐััั ZeroTier
sudo zerotier-cli listnetworks
# ะะพะปะถะฝะพ ะฟะพะบะฐะทะฐัั: OK PRIVATE abcdef1234567890

# ะฃะทะฝะฐัั ะฒะฐั ZeroTier IP
ip addr show zt0
# ะะปะธ
sudo zerotier-cli listnetworks | grep "10.147"

# ะะธะฝะณ HA ัะตัะตะท ZeroTier
ping 10.147.20.100

# SSH ัะตัะตะท ZeroTier
ssh root@10.147.20.100

# Home Assistant ัะตัะตะท ZeroTier
curl http://10.147.20.100:8123
```

### ะัะพะฒะตัะบะฐ ะณะปะพะฑะฐะปัะฝะพะณะพ ะดะพัััะฟะฐ

```bash
# ะงะตัะตะท ะดะพะผะตะฝ
curl https://hassio.yourdomain.com

# SSH ัะตัะตะท ะฑะตะปัะน IP
ssh root@YOUR_WHITE_IP
```

---

## ๐ ะกัะฐะฒะฝะตะฝะธะต ะผะตัะพะดะพะฒ ะฟะพะดะบะปััะตะฝะธั

| ะะฐัะฐะผะตัั | ะะพะบะฐะปัะฝัะน | ZeroTier | ะะปะพะฑะฐะปัะฝัะน |
|----------|-----------|----------|------------|
| **ะกะบะพัะพััั** | โกโกโก ะััััะพ | โกโก ะกัะตะดะฝะต | โก ะะตะดะปะตะฝะฝะพ |
| **ะะตะทะพะฟะฐัะฝะพััั** | ๐ ะกะตัั ะทะฐัะธัะตะฝะฐ ัะพััะตัะพะผ | ๐๐ VPN ัะธััะพะฒะฐะฝะธะต | ๐ ะะฐะฒะธัะธั ะพั ะฝะฐัััะพะนะบะธ |
| **ะขัะตะฑัะตั ะธะฝัะตัะฝะตั** | โ ะะตั | โ ะะฐ | โ ะะฐ |
| **ะัะพะฑัะพั ะฟะพััะพะฒ** | โ ะะต ะฝัะถะตะฝ | โ ะะต ะฝัะถะตะฝ | โ ะัะถะตะฝ |
| **ะะฐะฑะพัะฐะตั ะฒะตะทะดะต** | โ ะขะพะปัะบะพ ะดะพะผะฐ | โ ะะตะทะดะต | โ ะะตะทะดะต |
| **NAT traversal** | - | โ P2P | โ ะัะถะตะฝ ะฑะตะปัะน IP |

---

## ๐ง ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะธะผะตั 1: ะั ะดะพะผะฐ

```bash
./ha
# ะกะบัะธะฟั ะพะฟัะตะดะตะปะธั: ะะพะบะฐะปัะฝะฐั ัะตัั ะดะพัััะฟะฝะฐ
# โ ะัะฟะพะปัะทัะตั SSH/SAMBA ะฝะฐะฟััะผัั ะบ 192.168.1.20
# โ ะััััะพ, ะฑะตะท ะทะฐะดะตัะถะตะบ
```

### ะัะธะผะตั 2: ะั ะฒ ะบะฐัะต ั ะฝะพััะฑัะบะพะผ

```bash
# ZeroTier ะทะฐะฟััะตะฝ ะฝะฐ ะฝะพััะฑัะบะต
./ha
# ะกะบัะธะฟั ะพะฟัะตะดะตะปะธั: ะะพะบะฐะปัะฝะพะน ัะตัะธ ะฝะตั, ะฝะพ ZeroTier ะฐะบัะธะฒะตะฝ
# โ ะัะฟะพะปัะทัะตั ZeroTier IP: 10.147.20.100
# โ ะะตะทะพะฟะฐัะฝะพ ัะตัะตะท VPN ััะฝะฝะตะปั
```

### ะัะธะผะตั 3: ะั ะฝะฐ ััะถะพะผ ะบะพะผะฟัััะตัะต (ะฑะตะท ZeroTier)

```bash
# ะะพะดะบะปััะตะฝะธะต ัะตัะตะท ะฑัะฐัะทะตั
https://hassio.yourdomain.com
# โ ะะดัั ัะตัะตะท ะฑะตะปัะน IP ะธ Reverse Proxy
# โ ะะฐะฑะพัะฐะตั ะฒะตะทะดะต, ะฝะพ ะผะตะดะปะตะฝะฝะตะต
```

---

## ๐๏ธ ะะฐัััะพะนะบะฐ ัะบัะธะฟัะฐ configure.sh

ะกะบัะธะฟั `configure.sh` ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ะฟัะฐะฒะธะปัะฝัั ะบะพะฝัะธะณััะฐัะธั:

```bash
./scripts/configure.sh

# ะัะฑะตัะธัะต ัะตะถะธะผ:
# 1) Local  - ัะพะปัะบะพ ะปะพะบะฐะปัะฝะฐั ัะตัั
# 2) Global - ัะพะปัะบะพ ัะตัะตะท ะธะฝัะตัะฝะตั
# 3) Mixed  - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต (ัะตะบะพะผะตะฝะดัะตััั)
```

**Mixed ัะตะถะธะผ ัะพะทะดะฐัั:**
- SSH config ั ะฝะตัะบะพะปัะบะธะผะธ ัะพััะฐะผะธ
- ะกะบัะธะฟัั ะฟัะพะฒะตัะบะธ ะดะพัััะฟะฝะพััะธ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะบะปััะตะฝะธะต

---

## ๐ SSH config ะดะปั ัะผะตัะฐะฝะฝะพะณะพ ัะตะถะธะผะฐ

ะคะฐะนะป `.ssh/config` ะฑัะดะตั ัะพะดะตัะถะฐัั:

```text
# ะะพะบะฐะปัะฝัะน ะดะพัััะฟ (ะฟัะธะพัะธัะตั 1)
Host hassio-local
    HostName 192.168.1.20
    User root
    Port 22
    IdentityFile /home/gfer/HASSio/.ssh/id_hassio
    ConnectTimeout 2

# ZeroTier ะดะพัััะฟ (ะฟัะธะพัะธัะตั 2)
Host hassio-zt
    HostName 10.147.20.100
    User root
    Port 22
    IdentityFile /home/gfer/HASSio/.ssh/id_hassio
    ConnectTimeout 5

# ะะปะพะฑะฐะปัะฝัะน ะดะพัััะฟ (ะฟัะธะพัะธัะตั 3)
Host hassio-global
    HostName YOUR_WHITE_IP
    User root
    Port 22
    IdentityFile /home/gfer/HASSio/.ssh/id_hassio

# ะะฒัะพะผะฐัะธัะตัะบะธะน ะฒัะฑะพั
Host hassio
    HostName 192.168.1.20
    User root
    Port 22
    IdentityFile /home/gfer/HASSio/.ssh/id_hassio
    # ะกะบัะธะฟัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธะทะผะตะฝัั HostName
```

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั ZeroTier

### ะัะตะธะผััะตััะฒะฐ

โ **End-to-End ัะธััะพะฒะฐะฝะธะต** - ััะฐัะธะบ ะทะฐัะธััะพะฒะฐะฝ
โ **P2P ัะพะตะดะธะฝะตะฝะธั** - ะฟััะผะพะต ะฟะพะดะบะปััะตะฝะธะต ะผะตะถะดั ััััะพะนััะฒะฐะผะธ
โ **ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต** - ะบะพะฝััะพะปั ะดะพัััะฟะฐ ะฒ ะฟะฐะฝะตะปะธ
โ **NAT traversal** - ัะฐะฑะพัะฐะตั ะทะฐ ะปัะฑัะผ NAT/Firewall

### ะะตะบะพะผะตะฝะดะฐัะธะธ

1. **ะะบะปััะธัั Flow Rules:**

   ะ ะฟะฐะฝะตะปะธ ZeroTier โ Networks โ Flow Rules:


   ```text
   # ะะฐะทัะตัะธัั ัะพะปัะบะพ ะธะทะฒะตััะฝัะต ััััะพะนััะฒะฐ
   tag trusted
     id YOUR_LAPTOP_ID
     id YOUR_MIKROTIK_ID
   ;

   # ะะปะพะบะธัะพะฒะฐัั ะฒัั ะพััะฐะปัะฝะพะต
   drop not tag trusted;
   ```

2. **ะะตะณัะปััะฝะพ ะฟัะพะฒะตัััั Members:**
   - ะฃะดะฐะปััั ััะฐััะต/ะฝะตะธัะฟะพะปัะทัะตะผัะต ััััะพะนััะฒะฐ
   - ะัะพะฒะตัััั ะฟะพัะปะตะดะฝัั ะฐะบัะธะฒะฝะพััั

3. **ะัะฟะพะปัะทะพะฒะฐัั ะฟัะธะฒะฐัะฝัั ัะตัั:**
   - Network Access Control: **Private**
   - ะขัะตะฑัะตั ะฐะฒัะพัะธะทะฐัะธะธ ะดะปั ะบะฐะถะดะพะณะพ ััััะพะนััะฒะฐ

---

## ๐ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### ZeroTier ะฝะต ะฟะพะดะบะปััะฐะตััั

```bash
# ะัะพะฒะตัะธัั ััะฐััั
sudo zerotier-cli info
# ะะพะปะถะฝะพ ะฟะพะบะฐะทะฐัั: 200 info [node_id] [version] ONLINE

# ะัะพะฒะตัะธัั ัะตัะธ
sudo zerotier-cli listnetworks
# ะะพะปะถะฝะพ ะฟะพะบะฐะทะฐัั: OK PRIVATE [network_id]

# ะะตัะตะทะฐะฟัััะธัั ZeroTier
sudo systemctl restart zerotier-one
```

### ะะตะดะปะตะฝะฝะพะต ัะพะตะดะธะฝะตะฝะธะต ัะตัะตะท ZeroTier

```bash
# ะัะพะฒะตัะธัั ัะธะฟ ัะพะตะดะธะฝะตะฝะธั
sudo zerotier-cli peers
# ะัะธัะต DIRECT (ะฟััะผะพะต P2P) ะธะปะธ RELAY (ัะตัะตะท ัะตัะฒะตั)

# ะัะปะธ RELAY - ะฟัะพะฒะตัััะต firewall
# ZeroTier ะธัะฟะพะปัะทัะตั UDP ะฟะพััั 9993
sudo ufw allow 9993/udp
```

### MikroTik ะฝะต ะฒะธะดะธั ZeroTier ัะตัั

```bash
# ะัะพะฒะตัะธัั ะธะฝัะตััะตะนั
/interface print
# ะะพะปะถะตะฝ ะฑััั zt-[network_id]

# ะัะพะฒะตัะธัั ััะฐััั
/zerotier print
# Status: enabled

# ะะตัะตะทะฐะฟัััะธัั ZeroTier
/zerotier leave network=abcdef1234567890
/zerotier join network=abcdef1234567890
```

---

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะัะพะฒะตัะบะฐ ะฒัะตั ะผะตัะพะดะพะฒ ะฟะพะดะบะปััะตะฝะธั

ะกะพะทะดะฐะนัะต ัะบัะธะฟั `check_connectivity.sh`:

```bash
#!/bin/bash

echo "๐ ะัะพะฒะตัะบะฐ ะผะตัะพะดะพะฒ ะฟะพะดะบะปััะตะฝะธั..."
echo ""

# 1. ะะพะบะฐะปัะฝะฐั ัะตัั
echo "1๏ธโฃ ะะพะบะฐะปัะฝะฐั ัะตัั (192.168.1.20):"
if ping -c 1 -W 1 192.168.1.20 >/dev/null 2>&1; then
    echo "   โ ะะพัััะฟะฝะฐ"
else
    echo "   โ ะะตะดะพัััะฟะฝะฐ"
fi

# 2. ZeroTier
echo "2๏ธโฃ ZeroTier (10.147.20.100):"
if ping -c 1 -W 2 10.147.20.100 >/dev/null 2>&1; then
    echo "   โ ะะพัััะฟะตะฝ"
    zerotier-cli peers | grep -A1 "10.147.20.100" | grep "DIRECT\|RELAY"
else
    echo "   โ ะะตะดะพัััะฟะตะฝ"
fi

# 3. ะะปะพะฑะฐะปัะฝัะน
echo "3๏ธโฃ ะะปะพะฑะฐะปัะฝัะน (hassio.yourdomain.com):"
if curl -s -I https://hassio.yourdomain.com >/dev/null 2>&1; then
    echo "   โ ะะพัััะฟะตะฝ"
else
    echo "   โ ะะตะดะพัััะฟะตะฝ"
fi
```

---

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

- [ZeroTier Documentation](https://docs.zerotier.com/)
- [ZeroTier MikroTik Setup](https://wiki.mikrotik.com/wiki/Manual:ZeroTier)
- [ZeroTier Network Rules](https://docs.zerotier.com/rules/)
- [ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั](SETUP.md)
- [ะัะพะฑัะพั ะฟะพััะพะฒ MikroTik](portforward-mikrotik.md)

---

## ๐ ะงะตะบ-ะปะธัั ะฝะฐัััะพะนะบะธ

- [ ] ZeroTier ัะตัั ัะพะทะดะฐะฝะฐ
- [ ] ZeroTier ัััะฐะฝะพะฒะปะตะฝ ะฝะฐ ะฒัะตั MikroTik
- [ ] ZeroTier ัััะฐะฝะพะฒะปะตะฝ ะฝะฐ ะบะพะผะฟัััะตัะต
- [ ] ะัะต ััััะพะนััะฒะฐ ะฐะฒัะพัะธะทะพะฒะฐะฝั ะฒ ะฟะฐะฝะตะปะธ ZeroTier
- [ ] ะะฐัััััั ะฝะฐัััะพะตะฝั ะฝะฐ MikroTik (via ZeroTier)
- [ ] config.yml ะฝะฐัััะพะตะฝ ั ZeroTier IP
- [ ] ะขะตัั: ping ัะฐะฑะพัะฐะตั ัะตัะตะท ZeroTier
- [ ] ะขะตัั: SSH ัะฐะฑะพัะฐะตั ัะตัะตะท ZeroTier
- [ ] ะขะตัั: Home Assistant ะดะพัััะฟะตะฝ ัะตัะตะท ZeroTier
- [ ] ะกะบัะธะฟัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฟัะตะดะตะปััั ัะตะถะธะผ

---

## ๐ฏ ะัะพะณะพะฒะฐั ััะตะผะฐ ะฒะฐัะตะน ัะตัะธ

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ               ะะฐัะฐ ะณะธะฑัะธะดะฝะฐั ะธะฝััะฐััััะบัััะฐ             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                    โโโโโโโโโโโโโโโโ
                    โ  ZeroTier    โ
                    โ   Network    โ
                    โโโโโโโโโโโโโโโโ
                           โ
         โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโ
         โ                 โ                 โ
    โโโโโโโโโโโ       โโโโโโโโโโโ      โโโโโโโโโโโ
    โะะพะบะฐัะธั 1โ       โะะพะบะฐัะธั 2โ      โ ะะพััะฑัะบ โ
    โ  (ะดะพะผ)  โ       โ (ะพัะธั)  โ      โ (ะฒ ะฟััะธ)โ
    โโโโโโโโโโโ       โโโโโโโโโโโ      โโโโโโโโโโโ
         โ                 โ                 โ
    MikroTik          MikroTik         ZeroTier
    + ZeroTier        + ZeroTier        ะบะปะธะตะฝั
         โ                 โ
    192.168.1.0       192.168.2.0
         โ                 โ
  Home Assistant    Home Assistant
   + SSH/SAMBA      + SSH/SAMBA

ะะตะถะธะผั ะฟะพะดะบะปััะตะฝะธั:
โโโโโ ะะพะบะฐะปัะฝะพ (ะดะพะผะฐ): 192.168.1.20 (ะฑััััะพ)
โ โ โ ZeroTier: 10.147.20.100 (ะฑะตะทะพะฟะฐัะฝะพ, ะฒะตะทะดะต)
โโโโโ ะะปะพะฑะฐะปัะฝะพ: hassio.yourdomain.com (fallback)
```

**ะั ะฟะพะปััะฐะตัะต ะปัััะตะต ะธะท ะฒัะตั ะผะธัะพะฒ:**
- ๐ ะััััะพ ะดะพะผะฐ
- ๐ ะะตะทะพะฟะฐัะฝะพ ัะตัะตะท ZeroTier ะฒ ะปัะฑะพะน ัะพัะบะต
- ๐ Fallback ัะตัะตะท ะฑะตะปัะน IP ะตัะปะธ ZeroTier ะฝะตะดะพัััะฟะตะฝ

---

**ะะพัะพะฒะพ!** ะขะตะฟะตัั ั ะฒะฐั ะฟัะพะดะฒะธะฝััะฐั ะณะธะฑัะธะดะฝะฐั ัะตัั ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะฒัะฑะพัะพะผ ะปัััะตะณะพ ะผะตัะพะดะฐ ะฟะพะดะบะปััะตะฝะธั! ๐ฏ
