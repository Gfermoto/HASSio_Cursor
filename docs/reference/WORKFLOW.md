# üîÑ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Home Assistant.

---

## üéØ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –°–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ)
./scripts/mount.sh

# 2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Cursor
code config/configuration.yaml

# 3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å (–≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
./scripts/deploy.sh
```

**–°–∫—Ä–∏–ø—Ç deploy.sh –¥–µ–ª–∞–µ—Ç:**

- üíæ –°–æ–∑–¥–∞—ë—Ç –±—ç–∫–∞–ø
- üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç YAML
- ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ HA
- üìù –ö–æ–º–º–∏—Ç–∏—Ç –≤ Git
- üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç HA
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø—É—Å–∫

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

```bash
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å —Å–≤–µ–∂–∏–π —Å–Ω–∞–ø—à–æ—Ç HA
ssh -F .ssh/config hassio "ha backups list"

# –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç–∞—Ä—ã–π - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
ssh -F .ssh/config hassio "ha backups new --name='before-changes'"
```

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ Cursor
code config/

# –ò–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
code config/configuration.yaml
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

```bash
./scripts/deploy.sh
```

**–†—É—á–Ω–æ–π (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—å):**

```bash
# 1. –ë—ç–∫–∞–ø
./scripts/backup.sh

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ YAML
yamllint config/*.yaml

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ HA
ssh -F .ssh/config hassio "ha core check"

# 4. Git –∫–æ–º–º–∏—Ç
cd config/
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# 5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
ssh -F .ssh/config hassio "ha core restart"

# 6. –õ–æ–≥–∏
./scripts/view_logs.sh
```

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å

### –£—Ä–æ–≤–µ–Ω—å 1: Git –æ—Ç–∫–∞—Ç (–±—ã—Å—Ç—Ä–æ)

```bash
cd config/
git log --oneline              # –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –∫–æ–º–º–∏—Ç
git revert HEAD                # –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
./scripts/deploy.sh            # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ç–∫–∞—Ç
```

### –£—Ä–æ–≤–µ–Ω—å 2: –õ–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø

```bash
./scripts/restore.sh
# –í—ã–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –±—ç–∫–∞–ø
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å HA
```

### –£—Ä–æ–≤–µ–Ω—å 3: –°–Ω–∞–ø—à–æ—Ç HA (–ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)

```bash
# –°–ø–∏—Å–æ–∫ —Å–Ω–∞–ø—à–æ—Ç–æ–≤
ssh -F .ssh/config hassio "ha backups list"

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
ssh -F .ssh/config hassio "ha backups restore SLUG"
```

---

## üìã –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Å–Ω–∞–ø—à–æ—Ç HA (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
ssh -F .ssh/config hassio "ha backups new --name='before-integration'"

# 2. –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø
./scripts/backup.sh

# 3. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å configuration.yaml
code config/configuration.yaml

# 4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å
./scripts/deploy.sh

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
./scripts/view_logs.sh
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

```bash
# 1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
code config/automations.yaml

# 2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å (–±—ç–∫–∞–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
./scripts/deploy.sh

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
# (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤—Ä—É—á–Ω—É—é –≤ HA)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

```bash
# 1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
nano config/secrets.yaml

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
yamllint config/secrets.yaml

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å (secrets –Ω–µ –≤ Git!)
ssh -F .ssh/config hassio "ha core restart"
```

### –ú–∞—Å—Å–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –ü–û–õ–ù–´–ô —Å–Ω–∞–ø—à–æ—Ç HA
ssh -F .ssh/config hassio "ha backups new --name='before-major-changes'"

# 2. –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É –≤ Git
cd config/
git checkout -b experimental

# 3. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
code .

# 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
./scripts/deploy.sh

# 5. –ï—Å–ª–∏ –≤—Å—ë –û–ö - —Å–º–µ—Ä–∂–∏—Ç—å
git checkout main
git merge experimental

# 6. –ï—Å–ª–∏ –Ω–µ –û–ö - –æ—Ç–∫–∞—Ç–∏—Ç—å
git checkout main
git branch -D experimental
```

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫

```bash
# –í –ª–æ–≥–∞—Ö HA
ssh -F .ssh/config hassio "grep ERROR /config/home-assistant.log | tail -20"

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
ssh -F .ssh/config hassio "grep 'homeassistant.components.mqtt' /config/home-assistant.log"

# –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
ssh -F .ssh/config hassio "tail -1000 /config/home-assistant.log | grep ERROR"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
yamllint config/configuration.yaml

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HA (–¥–µ—Ç–∞–ª—å–Ω–æ)
ssh -F .ssh/config hassio "ha core check"

# –ó–∞–ø—É—Å–∫ –≤ debug —Ä–µ–∂–∏–º–µ
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å configuration.yaml:
logger:
  default: info
  logs:
    homeassistant.core: debug
```

---

## üìä Git workflow

### –°–æ–∑–¥–∞–Ω–∏–µ feature branch

```bash
cd config/

# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É
git checkout -b new-feature

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
code .

# –ö–æ–º–º–∏—Ç–∏—Ç—å
git add .
git commit -m "Add new feature"

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
cd ~/HASSio
./scripts/deploy.sh

# –ï—Å–ª–∏ OK - —Å–º–µ—Ä–∂–∏—Ç—å
cd config/
git checkout main
git merge new-feature
git branch -d new-feature

# –ï—Å–ª–∏ –Ω–µ OK - —É–¥–∞–ª–∏—Ç—å –≤–µ—Ç–∫—É
git checkout main
git branch -D new-feature
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏

```bash
cd config/

# –õ–æ–≥
git log --oneline --graph --decorate

# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ
git log --follow configuration.yaml

# –ö—Ç–æ –º–µ–Ω—è–ª —Å—Ç—Ä–æ–∫—É
git blame configuration.yaml

# –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –∫–æ–º–º–∏—Ç–∞–º–∏
git diff HEAD~1 HEAD
```

---

## üí° Best Practices

### –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º

1. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å —Å–≤–µ–∂–∏–π —Å–Ω–∞–ø—à–æ—Ç HA (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)
2. ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ deploy.sh

### –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
2. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ dev –≤–µ—Ç–∫–µ (–¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
3. ‚úÖ –ß–∏—Ç–∞—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ HA –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –≤ Git

### –†–µ–≥—É–ª—è—Ä–Ω–æ

1. ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª–Ω—ã–µ —Å–Ω–∞–ø—à–æ—Ç—ã HA (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)
2. ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
3. ‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å Home Assistant

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

```bash
./scripts/mount.sh      # –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
code config/            # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
./scripts/deploy.sh     # –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å
./scripts/view_logs.sh  # –õ–æ–≥–∏
./scripts/restore.sh    # –û—Ç–∫–∞—Ç–∏—Ç—å
./scripts/check.sh      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```
