# üìä –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Home Assistant

–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Home Assistant.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üï∏Ô∏è –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`dependency.py`)

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –≤ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- üîç –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- üîó –°—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- üóëÔ∏è –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (orphaned)
- ‚ö†Ô∏è –î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- üí• –û—Ü–µ–Ω–∏–≤–∞–µ—Ç impact —É–¥–∞–ª–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ß–µ—Ä–µ–∑ –º–µ–Ω—é
./ha ‚Üí 12) üï∏Ô∏è –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

# –ù–∞–ø—Ä—è–º—É—é
python3 scripts/analyzers/dependency.py config
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```text
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –í—Å–µ–≥–æ —Å—É—â–Ω–æ—Å—Ç–µ–π:   245
   –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π:     42
   –°–∫—Ä–∏–ø—Ç–æ–≤:          18

üî¥ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (15):
   ‚Ä¢ sensor.unused_temperature
   ‚Ä¢ binary_sensor.old_motion
   ...

üîù –¢–æ–ø-10 —Å–∞–º—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö:
   12x ‚Ä¢ sensor.outdoor_temperature
    8x ‚Ä¢ person.home
    7x ‚Ä¢ sun.sun
```

---

### üìà –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (`complexity.py`)

–û—Ü–µ–Ω–∏–≤–∞–µ—Ç maintainability –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞.

**–ú–µ—Ç—Ä–∏–∫–∏:**

- üî¢ Cyclomatic complexity –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π
- üìè –î–ª–∏–Ω–∞ —à–∞–±–ª–æ–Ω–æ–≤
- üå≤ –ì–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —É—Å–ª–æ–≤–∏–π
- üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π/—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- üîÅ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ choose/repeat

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ß–µ—Ä–µ–∑ –º–µ–Ω—é
./ha ‚Üí 13) üìà –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

# –ù–∞–ø—Ä—è–º—É—é
python3 scripts/analyzers/complexity.py config
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```text
üìä –ú–µ—Ç—Ä–∏–∫–∏:
   –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π:     42
   –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: 12.3
   –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: 5

üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ø—Ä–æ–±–ª–µ–º—ã (2):
   automation.complex_heating (complexity: 45)
      - –ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å —É—Å–ª–æ–≤–∏–π (7)
      - –î–ª–∏–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω (350 —Å–∏–º–≤–æ–ª–æ–≤)
      - –ú–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏–π (12)

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
   ‚Ä¢ –†–∞–∑–±–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ –ø–æ–¥—Å–∫—Ä–∏–ø—Ç—ã
   ‚Ä¢ –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –≤ template sensors
   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å scripts –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–µ–π—Å—Ç–≤–∏–π
```

---

### üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (`diff.py`)

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- üî¥ –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (—Å –æ—Ü–µ–Ω–∫–æ–π —Ä–∏—Å–∫–∞!)
- üîÑ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- ‚ö†Ô∏è Impact analysis
- üéØ –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ß–µ—Ä–µ–∑ –º–µ–Ω—é (—Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç HEAD~1 —Å HEAD)
./ha ‚Üí 14) üîÑ –°—Ä–∞–≤–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

# –ù–∞–ø—Ä—è–º—É—é (—É–∫–∞–∑–∞—Ç—å –∫–æ–º–º–∏—Ç—ã)
python3 scripts/analyzers/diff.py config abc123 xyz789
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```text
üìä –í—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π: 12
üéØ –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: HIGH (score: 35)

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π: 3
üî¥ –£–¥–∞–ª–µ–Ω–æ —Å–µ–Ω—Å–æ—Ä–æ–≤: 2
   ‚Ä¢ sensor.old_temperature
   ‚Ä¢ sensor.unused_motion

‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø:
   ‚ö†Ô∏è –£–¥–∞–ª–µ–Ω–æ 2 —Å–µ–Ω—Å–æ—Ä–æ–≤ - –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏!
   ‚ö†Ô∏è –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π (12)

üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
   ‚Ä¢ –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º
   ‚Ä¢ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ dev-–æ–∫—Ä—É–∂–µ–Ω–∏–∏
   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±:

```bash
./ha
```

–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä:

- **12** - –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **13** - –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **14** - –°—Ä–∞–≤–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫

```bash
# –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
python3 scripts/analyzers/dependency.py config

# –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
python3 scripts/analyzers/complexity.py config

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π
python3 scripts/analyzers/diff.py config HEAD~1 HEAD
```

---

## üìö –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏

```python
from scripts.analyzers.dependency import DependencyAnalyzer

analyzer = DependencyAnalyzer('config/')
analyzer.analyze()

# Impact analysis –¥–ª—è —Å–µ–Ω—Å–æ—Ä–∞
impact = analyzer.analyze_impact('sensor.living_room_temp')
print(f"Severity: {impact['severity']}")
print(f"Used in {impact['direct_usage']} places")
```

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã

```python
# –ì—Ä–∞—Ñ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
mermaid = analyzer.generate_mermaid_graph('sensor.temperature', depth=2)
print(mermaid)

# –¢–æ–ø-10 —Å–∞–º—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö
mermaid = analyzer.generate_mermaid_graph()
print(mermaid)
```

---

### –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

#### –ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

- **0-10**: ‚úÖ –ù–∏–∑–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å - —Ö–æ—Ä–æ—à–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- **10-20**: üü° –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å - –ø—Ä–∏–µ–º–ª–µ–º–æ
- **20-30**: üü† –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å - —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- **30+**: üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å - —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–ø—Ä–æ—â–µ–Ω–∏–µ

#### –ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤** (>3) - –∫–∞–∂–¥—ã–π +2
2. **–ì–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏** —É—Å–ª–æ–≤–∏–π (>3) - –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å +5
3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π** (>5) - –∫–∞–∂–¥–æ–µ +2
4. **–î–ª–∏–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã** (>200 —Å–∏–º–≤–æ–ª–æ–≤) - +5
5. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è** –≤ —à–∞–±–ª–æ–Ω–∞—Ö (>2) - –∫–∞–∂–¥–æ–µ +2
6. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ choose** - –∫–∞–∂–¥–æ–µ +5
7. **–ë–æ–ª—å—à–æ–π –æ–±—ä–µ–º –∫–æ–¥–∞** (>100 —Å—Ç—Ä–æ–∫) - +1 –∑–∞ –∫–∞–∂–¥—ã–µ 10 —Å—Ç—Ä–æ–∫

---

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–∏—Å–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- **–£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–Ω—Å–æ—Ä–æ–≤**: +10 –∑–∞ –∫–∞–∂–¥—ã–π (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫!)
- **–£–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π**: +5 –∑–∞ –∫–∞–∂–¥—É—é
- **–ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π** (>20): +10

**–£—Ä–æ–≤–Ω–∏ —Ä–∏—Å–∫–∞:**

- **low** (0-5): ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
- **medium** (5-20): üü° –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- **high** (20-50): üü† –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±—ç–∫–∞–ø
- **critical** (50+): üî¥ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –±—ç–∫–∞–ø –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ workflow

### Pre-deploy –ø—Ä–æ–≤–µ—Ä–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `scripts/deploy.sh`:

```bash
# –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
python3 scripts/analyzers/complexity.py config

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
python3 scripts/analyzers/diff.py config HEAD~1 HEAD

read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ? (y/n) " -n 1 -r
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    exit 1
fi
```

### Git pre-commit hook

```bash
# .git/hooks/pre-commit
#!/bin/bash

# –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
python3 scripts/analyzers/diff.py config HEAD HEAD 2>&1 | grep -q "CRITICAL"

if [ $? -eq 0 ]; then
    echo "üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã!"
    echo "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è review –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º"
    exit 1
fi
```

---

## üéØ Best Practices

### 1. –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑

–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã:

- ‚úÖ –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º
- ‚úÖ –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### 2. –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

–°—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫:

- üìä –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å < 15
- üîù –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π —Å complexity > 30
- üóëÔ∏è –ù–µ—Ç orphaned entities
- ‚ö†Ô∏è –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

–ï—Å–ª–∏ complexity > 20:

1. –†–∞–∑–±–∏—Ç—å –Ω–∞ –ø–æ–¥—Å–∫—Ä–∏–ø—Ç—ã
2. –í—ã–Ω–µ—Å—Ç–∏ —à–∞–±–ª–æ–Ω—ã –≤ sensors
3. –£–ø—Ä–æ—Å—Ç–∏—Ç—å —É—Å–ª–æ–≤–∏—è
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å helpers (input_*)

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ö–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:

```yaml
# –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏—è —Å –ø–æ–≥–æ–¥–Ω–æ–π –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–µ–π
# Complexity: 25 (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ TODO)
automation:
  - alias: "Advanced Heating Control"
    description: |
      –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–ø–ª–µ–Ω–∏–µ–º —Å —É—á–µ—Ç–æ–º:
      - –ü—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã
      - –í—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏—Ö–æ–¥–∞ –¥–æ–º–æ–π
      - –¢–µ–∫—É—â–µ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
    ...
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "File not found"

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ config/ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
./ha ‚Üí 2) –°–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏

# –ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
python3 scripts/analyzers/dependency.py /mnt/hassio
```

### –ü—Ä–æ–±–ª–µ–º–∞: "YAML parse error"

```bash
# –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ YAML
./ha ‚Üí 9) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å YAML

# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Git not found" (–¥–ª—è diff)

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä `diff.py` —Ç—Ä–µ–±—É–µ—Ç git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
cd config/
git init
git add .
git commit -m "Initial commit"
```

---

## üìù TODO / Roadmap

–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- [ ] ü§ñ AI-powered —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- [ ] üìä –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –≤ Grafana
- [ ] üß™ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π
- [ ] üîç –î–µ—Ç–µ–∫—Ü–∏—è code smells
- [ ] üìà –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–Ω–¥—ã —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- [ ] üîó Integration —Å Home Assistant API
- [ ] üìö –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ –∫–æ–¥–∞

---

## ü§ù Contributing

–ù–∞—à–ª–∏ –±–∞–≥? –ï—Å—Ç—å –∏–¥–µ—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è?

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. Push –≤ branch
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ!

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∞—Å–∏–±–æ community Home Assistant –∑–∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –∏ –∏–¥–µ–∏!

---

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [https://gfermoto.github.io/HASSio_Cursor](https://gfermoto.github.io/HASSio_Cursor)
