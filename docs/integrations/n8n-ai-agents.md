# ü§ñ AI –ê–≥–µ–Ω—Ç—ã n8n –¥–ª—è Home Assistant

–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö AI –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –†–§).

---

## üéØ –ó–∞—á–µ–º n8n –µ—Å–ª–∏ –µ—Å—Ç—å NodeRED –∏ HA?

### –í–∞—à–∞ —Ç–µ–∫—É—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- ‚úÖ **Home Assistant** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –±–∞–∑–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ **NodeRED** - —Å–ª–æ–∂–Ω—ã–µ flow –∏ –ª–æ–≥–∏–∫–∞
- ‚úÖ **HA Addons** - –±—ç–∫–∞–ø—ã, Telegram, Samba
- ‚úÖ **MCP (Cursor)** - AI –ø–æ–º–æ—â—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–ß—Ç–æ –ù–ï –£–ú–ï–Æ–¢ HA/NodeRED:**

- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- ‚ùå Computer Vision (–∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- ‚ùå RAG (–ø–æ–∏—Å–∫ –ø–æ –≤–∞—à–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º)
- ‚ùå –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ AI –∞–≥–µ–Ω—Ç—ã —Å –ø–∞–º—è—Ç—å—é
- ‚ùå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏–π
- ‚ùå –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å AI

### ü§ñ n8n = –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤

**–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:**

```text
NodeRED: IF-THEN –ª–æ–≥–∏–∫–∞
n8n + AI: –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
```

**–ü—Ä–∏–º–µ—Ä:**

```text
NodeRED:
  IF —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ < 18 THEN –≤–∫–ª—é—á–∏—Ç—å –æ—Ç–æ–ø–ª–µ–Ω–∏–µ

n8n AI Agent:
  "–î–æ–º–∞ —Ö–æ–ª–æ–¥–Ω–æ" ‚Üí AI –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç:
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤—Å–µ—Ö 15 –∑–æ–Ω
    - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥—É
    - –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
    - –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
    - –û–±—ä—è—Å–Ω—è–µ—Ç WHY
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ LLM (–±–µ—Å–ø–ª–∞—Ç–Ω–æ + –†–§)

### –í–∞—à–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Proxmox Server (–ª–æ–∫–∞–ª—å–Ω–æ)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ  Home Assistant ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ      n8n         ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  VM/Container   ‚îÇ         ‚îÇ   (Container)    ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  192.168.1.20   ‚îÇ         ‚îÇ  192.168.1.50    ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ         ‚Üë                            ‚Üë                           ‚îÇ
‚îÇ         ‚îÇ                            ‚îÇ                           ‚îÇ
‚îÇ         ‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                ‚îÇ                 ‚îÇ
‚îÇ         ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ  Ollama   ‚îÇ   ‚îÇ  LM Studio  ‚îÇ          ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ (LLM API) ‚îÇ   ‚îÇ  (optional) ‚îÇ          ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ :11434    ‚îÇ   ‚îÇ   :1234     ‚îÇ          ‚îÇ
‚îÇ         ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ         ‚îÇ                    ‚Üë                                  ‚îÇ
‚îÇ         ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ  –ú–æ–¥–µ–ª–∏:   ‚îÇ                           ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ  - Llama 3  ‚îÇ                           ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ  - Mistral ‚îÇ                           ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ  - LLaVA   ‚îÇ ‚Üê Vision!                ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ  - DeepSeek‚îÇ                           ‚îÇ
‚îÇ         ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ
‚îÇ         ‚Üì                                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                            ‚îÇ
‚îÇ  ‚îÇ  Cursor (WSL)   ‚îÇ                                            ‚îÇ
‚îÇ  ‚îÇ  + mcp-proxy    ‚îÇ                                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                            ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–∏–∫–∞–∫–∏—Ö API –∫–ª—é—á–µ–π
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –≤ –†–§** - –±–µ–∑ VPN
- ‚úÖ **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Ö–æ–¥—è—Ç –∏–∑ –¥–æ–º–∞
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ** - –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å
- ‚úÖ **–ù–µ –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–æ** - —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama –Ω–∞ Proxmox (15 –º–∏–Ω—É—Ç)

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker –≤ n8n –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–ï—Å–ª–∏ n8n —É–∂–µ –≤ Docker:

```bash
# docker-compose.yml –¥–ª—è n8n + Ollama
version: '3.8'
services:
  n8n:
    image: n8nio/n8n:latest
    ports:
      - "5678:5678"
    environment:
      - N8N_HOST=192.168.1.50
    networks:
      - ai-network

  ollama:
    image: ollama/ollama:latest
    ports:
      - "11434:11434"
    volumes:
      - ollama_data:/root/.ollama
    networks:
      - ai-network

networks:
  ai-network:

volumes:
  ollama_data:
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ Proxmox

```bash
# –ù–∞ Proxmox —Å–æ–∑–¥–∞—Ç—å LXC Ubuntu
pct create 201 local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst \
  --hostname ollama \
  --cores 4 \
  --memory 8192 \
  --net0 name=eth0,bridge=vmbr0,ip=192.168.1.51/24,gw=192.168.1.1

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
pct start 201

# –í–æ–π—Ç–∏
pct enter 201

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama
curl -fsSL https://ollama.com/install.sh | sh

# –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª–∏
ollama pull llama3         # –û–±—â–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (4.7GB)
ollama pull llava          # Vision –º–æ–¥–µ–ª—å (4.7GB)
ollama pull mistral        # –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å (4.1GB)
ollama pull deepseek-coder # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ (6.7GB)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
curl http://192.168.1.51:11434/api/tags
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
```

---

## ü§ñ AI –ê–≥–µ–Ω—Ç #1: –£–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —É–º–Ω–æ–≥–æ –¥–æ–º–∞

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

**Telegram –±–æ—Ç —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**

```text
üë§: "–î–æ–º–∞ —Ö–æ–ª–æ–¥–Ω–æ"

ü§ñ AI Agent (Llama 3):
  1. –ü–æ–ª—É—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö 15 –∑–æ–Ω –∏–∑ HA
  2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –Ω–∞ —É–ª–∏—Ü–µ
  3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é
  4. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ
  5. –í—ã–ø–æ–ª–Ω—è–µ—Ç —á–µ—Ä–µ–∑ HA API
  6. –û–±—ä—è—Å–Ω—è–µ—Ç —á—Ç–æ —Å–¥–µ–ª–∞–ª

ü§ñ: "–°–µ–π—á–∞—Å –≤ –¥–æ–º–µ —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 19.2¬∞C (–Ω–æ—Ä–º–∞ 21¬∞C).
     –ù–∞ —É–ª–∏—Ü–µ -5¬∞C, –ø–æ—ç—Ç–æ–º—É —É–≤–µ–ª–∏—á–∏–≤–∞—é —Ü–µ–ª–µ–≤—É—é –¥–æ 22¬∞C
     –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–æ–Ω–∞—Ö (–≥–æ—Å—Ç–∏–Ω–∞—è, –∫—É—Ö–Ω—è, —Å–ø–∞–ª—å–Ω—è).

     –í—Ä–µ–º—è –ø—Ä–æ–≥—Ä–µ–≤–∞: ~25 –º–∏–Ω—É—Ç.
     –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ~15 —Ä—É–±.

     ‚úÖ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã."
```

### n8n Workflow

**–ù–æ–¥—ã:**

1. **Telegram Trigger** - —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. **AI Agent** (Advanced AI node)
   - **LLM:** Ollama
   - **Model:** llama3
   - **Base URL:** `http://192.168.1.51:11434`
   - **System Prompt:**

```text
–¢—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —É–º–Ω–æ–≥–æ –¥–æ–º–∞ –Ω–∞ Home Assistant.

–¢–≤–æ–π –¥–æ–º:
- 15 –∑–æ–Ω –æ—Ç–æ–ø–ª–µ–Ω–∏—è —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- 5 –∫–∞–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ú–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—è
- 150+ —É–º–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (tools):
- get_zone_temperature(zone_name) - —Ç–µ–∫—É—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∑–æ–Ω—ã
- set_zone_temperature(zone_name, temperature) - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
- get_outdoor_temperature() - —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞ —É–ª–∏—Ü–µ
- get_all_zones_status() - —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∑–æ–Ω
- calculate_heating_cost(temp_change) - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏

–í—Å–µ–≥–¥–∞:
1. –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
2. –û–±—ä—è—Å–Ω–∏ —Å–≤–æ–π –∞–Ω–∞–ª–∏–∑
3. –ü–æ–∫–∞–∂–∏ —Ä–∞—Å—á–µ—Ç—ã (—Å—Ç–æ–∏–º–æ—Å—Ç—å, –≤—Ä–µ–º—è)
4. –°–ø—Ä–æ—Å–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. –ü–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è - –ø–æ–¥—Ç–≤–µ—Ä–¥–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É.
```

   - **Tools (Functions):**

```json
[
  {
    "name": "get_all_zones_status",
    "description": "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö 15 –∑–æ–Ω –æ—Ç–æ–ø–ª–µ–Ω–∏—è",
    "parameters": {
      "type": "object",
      "properties": {}
    }
  },
  {
    "name": "set_zone_temperature",
    "description": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤ –∑–æ–Ω–µ",
    "parameters": {
      "type": "object",
      "properties": {
        "zone_name": {
          "type": "string",
          "description": "–ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã (living_room, bedroom, etc)"
        },
        "temperature": {
          "type": "number",
          "description": "–¶–µ–ª–µ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (16-26¬∞C)"
        }
      },
      "required": ["zone_name", "temperature"]
    }
  }
]
```

3. **Code** - Tool executor (–≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π AI)

```javascript
const toolCall = $json.tool_calls?.[0];

if (!toolCall) {
  return $input.item.json; // No tool call
}

const toolName = toolCall.function.name;
const args = JSON.parse(toolCall.function.arguments);

// –í—ã–ø–æ–ª–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é
if (toolName === 'get_all_zones_status') {
  // –ü–æ–ª—É—á–∏—Ç—å –∏–∑ HA –≤—Å–µ climate entities
  return {
    json: {
      tool_result: {
        zones: [
          { name: 'living_room', current: 21, target: 22 },
          { name: 'bedroom', current: 19, target: 20 },
          // ... –≤—Å–µ 15 –∑–æ–Ω
        ]
      }
    }
  };
} else if (toolName === 'set_zone_temperature') {
  // –í—ã–∑–≤–∞—Ç—å HA API
  return {
    json: {
      tool_result: {
        success: true,
        message: `–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${args.temperature}¬∞C –¥–ª—è ${args.zone_name}`
      }
    }
  };
}
```

4. **Loop back to AI** - –∞–≥–µ–Ω—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ

5. **Telegram** - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

---

## ü§ñ AI –ê–≥–µ–Ω—Ç #2: Vision –∞–Ω–∞–ª–∏–∑ –∫–∞–º–µ—Ä (LLaVA)

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–≤–∏–∂–µ–Ω–∏—è:**

```text
HA: Motion detected ‚Üí snapshot ‚Üí n8n

n8n AI Vision:
  1. –ü–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  2. LLaVA –∞–Ω–∞–ª–∏–∑: "–ß—Ç–æ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏?"
  3. AI —Ä–µ—à–µ–Ω–∏–µ: –≤–∞–∂–Ω–æ –∏–ª–∏ –Ω–µ—Ç?
  4. –î–µ–π—Å—Ç–≤–∏–µ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
```

### n8n Workflow

**–ù–æ–¥—ã:**

1. **Webhook** –æ—Ç HA - motion detected + snapshot URL

2. **HTTP Request** - –ø–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```json
{
  "method": "GET",
  "url": "http://192.168.1.20:8123{{ $json.snapshot_path }}",
  "headers": {
    "Authorization": "Bearer YOUR_HA_TOKEN"
  },
  "responseType": "arraybuffer"
}
```

3. **Ollama Vision** (LLaVA –º–æ–¥–µ–ª—å)

```json
{
  "model": "llava",
  "prompt": "–û–ø–∏—à–∏ —á—Ç–æ –≤–∏–¥–∏—à—å –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏. –≠—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∂–∏–≤–æ—Ç–Ω–æ–µ, –∏–ª–∏ –ª–æ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ (—Ç–µ–Ω—å, —Å–≤–µ—Ç)? –í—Ä–µ–º—è: {{ $json.time }}. –ö–∞–º–µ—Ä–∞: {{ $json.camera_name }}.",
  "images": ["{{ $binary.data }}"]
}
```

4. **Code** - –ê–Ω–∞–ª–∏–∑ –æ—Ç–≤–µ—Ç–∞ AI

```javascript
const aiResponse = $json.response.toLowerCase();
const hour = new Date().getHours();
const isNight = hour < 6 || hour > 22;

let priority = 'low';
let action = 'ignore';

// AI —Å–∫–∞–∑–∞–ª "—á–µ–ª–æ–≤–µ–∫"
if (aiResponse.includes('—á–µ–ª–æ–≤–µ–∫') || aiResponse.includes('person')) {
  if (isNight) {
    priority = 'critical';
    action = 'alert_security';
  } else {
    priority = 'medium';
    action = 'log_and_notify';
  }
}
// AI —Å–∫–∞–∑–∞–ª "–∂–∏–≤–æ—Ç–Ω–æ–µ"
else if (aiResponse.includes('–∫–æ—à–∫–∞') || aiResponse.includes('—Å–æ–±–∞–∫–∞') ||
         aiResponse.includes('–∂–∏–≤–æ—Ç–Ω–æ–µ')) {
  priority = 'low';
  action = 'log_only';
}
// –õ–æ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ
else {
  priority = 'ignore';
  action = 'ignore';
}

return {
  json: {
    ai_analysis: aiResponse,
    priority,
    action,
    timestamp: new Date().toISOString()
  }
};
```

5. **Switch** - –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É

   **Critical:**
   - Telegram: "üö® –ß–ï–õ–û–í–ï–ö –Ω–∞ –∫–∞–º–µ—Ä–µ (–Ω–æ—á—å)!"
   - HA: –≤–∫–ª—é—á–∏—Ç—å alarm
   - –ó–∞–ø–∏—Å—å –≤–∏–¥–µ–æ

   **Medium:**
   - Telegram: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
   - –õ–æ–≥ –≤ –±–∞–∑—É

   **Low/Ignore:**
   - –¢–æ–ª—å–∫–æ –ª–æ–≥

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 90% —Ç–æ—á–Ω–æ—Å—Ç—å, 0 –ª–æ–∂–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤ –Ω–æ—á—å—é!

---

## üß† AI –ê–≥–µ–Ω—Ç #3: RAG –ø–æ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

**AI –∑–Ω–∞–µ—Ç –í–°–Æ –≤–∞—à—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é HA:**

```text
üë§: "–ü–æ—á–µ–º—É –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Å–≤–µ—Ç –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ –≤–µ—á–µ—Ä–æ–º?"

ü§ñ AI RAG:
  1. –ò—â–µ—Ç –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ "—Å–≤–µ—Ç" + "–∫–æ—Ä–∏–¥–æ—Ä"
  2. –ù–∞—Ö–æ–¥–∏—Ç automation.corridor_light
  3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —É—Å–ª–æ–≤–∏—è
  4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  5. –û–±—ä—è—Å–Ω—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É

ü§ñ: "–ü—Ä–æ–≤–µ—Ä–∏–ª automation.corridor_light:

     –¢—Ä–∏–≥–≥–µ—Ä: binary_sensor.corridor_motion ‚úÖ (—Ä–∞–±–æ—Ç–∞–µ—Ç)
     –£—Å–ª–æ–≤–∏–µ 1: time after 18:00 ‚úÖ (—Å–µ–π—á–∞—Å 19:30)
     –£—Å–ª–æ–≤–∏–µ 2: sun.state == 'below_horizon' ‚ùå (–ü–†–û–ë–õ–ï–ú–ê!)

     –°–µ–π—á–∞—Å sun.state = 'above_horizon' (—Å–≤–µ—Ç–ª–æ).
     –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç.–∫. –µ—â–µ –¥–µ–Ω—å.

     –†–µ—à–µ–Ω–∏—è:
     1. –£–±—Ä–∞—Ç—å —É—Å–ª–æ–≤–∏–µ sun.state
     2. –î–æ–±–∞–≤–∏—Ç—å sensor.illuminance < 100 (–µ—Å–ª–∏ –µ—Å—Ç—å lux sensor)
     3. –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ after: '20:00:00'

     –ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å?"
```

### n8n Workflow (Setup - –æ–¥–∏–Ω —Ä–∞–∑)

**–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã:**

1. **Manual Trigger** (–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é)

2. **Home Assistant** - —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
   - Get –≤—Å–µ automations
   - Get –≤—Å–µ scripts
   - Get –≤—Å–µ sensors

3. **Code** - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```javascript
// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ —Ç–µ–∫—Å—Ç –¥–ª—è embeddings
const automations = $json.automations.map(auto => {
  return {
    type: 'automation',
    id: auto.id,
    alias: auto.alias,
    text: `–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: ${auto.alias}
           ID: ${auto.id}
           –¢—Ä–∏–≥–≥–µ—Ä: ${JSON.stringify(auto.trigger)}
           –£—Å–ª–æ–≤–∏—è: ${JSON.stringify(auto.condition)}
           –î–µ–π—Å—Ç–≤–∏—è: ${JSON.stringify(auto.action)}`,
    metadata: auto
  };
});

return automations;
```

4. **Embeddings** (n8n AI node)
   - Model: Ollama embeddings
   - Model name: `nomic-embed-text` (–ª–æ–∫–∞–ª—å–Ω–∞—è!)

5. **Vector Store** - Qdrant / Weaviate / –ø—Ä–æ—Å—Ç–æ–π JSON
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ embeddings

### n8n Workflow (Query - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ)

**–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:**

1. **Telegram Trigger** - –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. **Embeddings** - –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞

3. **Vector Search** - –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

4. **AI Agent** (Ollama Llama 3)
   - System prompt: "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ Home Assistant. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã."
   - Context: –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (RAG!)
   - Question: –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

5. **Telegram** - –æ—Ç–≤–µ—Ç —Å –∫–æ–¥–æ–º –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

**Use cases:**

- "–ö–∞–∫–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç sensor.outdoor_temp?"
- "–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç X?"
- "–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –¥–∞—Ç—á–∏–∫?"
- "–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –º–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –æ—Ç–æ–ø–ª–µ–Ω–∏—è"

---

## üé® AI –ê–≥–µ–Ω—Ç #4: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä NodeRED flows

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

**–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º ‚Üí –≥–æ—Ç–æ–≤—ã–π NodeRED flow:**

```text
üë§: "–•–æ—á—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é: –µ—Å–ª–∏ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤ –≤–∞–Ω–Ω–æ–π > 70%, –≤–∫–ª—é—á–∏—Ç—å –≤—ã—Ç—è–∂–∫—É –Ω–∞ 30 –º–∏–Ω—É—Ç"

ü§ñ AI Agent:
  1. –ü–æ–Ω–∏–º–∞–µ—Ç intent
  2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ entity_id (—É –≤–∞—Å –µ—Å—Ç—å sensor.bathroom_humidity?)
  3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç NodeRED flow JSON
  4. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
  5. –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏–º–ø–æ—Ä—Ç

ü§ñ: "–°–æ–∑–¥–∞–Ω flow –¥–ª—è NodeRED:

[JSON –∫–æ–¥ flow]

–¢—Ä–µ–±—É–µ—Ç—Å—è:
  ‚úÖ sensor.bathroom_humidity (—É –≤–∞—Å –µ—Å—Ç—å)
  ‚ö†Ô∏è  switch.bathroom_fan (–Ω–µ –Ω–∞–π–¥–µ–Ω!)

  –°–æ–∑–¥–∞—Ç—å switch.bathroom_fan? [–î–∞/–ù–µ—Ç]

  –ï—Å–ª–∏ –¥–∞, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å flow? [–ò–º–ø–æ—Ä—Ç] [–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å] [–û—Ç–º–µ–Ω–∞]"
```

### n8n Workflow

1. **Telegram** - –æ–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

2. **AI Agent** (DeepSeek-Coder)
   - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–¥–∞
   - System prompt: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è NodeRED flows
   - Tools: –ø—Ä–æ–≤–µ—Ä–∫–∞ entity_id –≤ HA

3. **Home Assistant** - –≤–∞–ª–∏–¥–∞—Ü–∏—è entities

4. **Code** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è NodeRED JSON

```javascript
// DeepSeek-Coder –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
const flow = {
  id: generateId(),
  type: "tab",
  label: "AI Generated: Bathroom Fan",
  nodes: [
    {
      id: generateId(),
      type: "server-state-changed",
      name: "Humidity > 70%",
      server: "home-assistant",
      entityid: "sensor.bathroom_humidity",
      property: "state",
      comparator: "gt",
      value: "70"
    },
    {
      id: generateId(),
      type: "api-call-service",
      name: "Turn on fan",
      server: "home-assistant",
      service_domain: "switch",
      service: "turn_on",
      data: { entity_id: "switch.bathroom_fan" }
    },
    {
      id: generateId(),
      type: "delay",
      name: "Wait 30 min",
      pauseType: "delay",
      timeout: "30",
      timeoutUnits: "minutes"
    },
    {
      id: generateId(),
      type: "api-call-service",
      name: "Turn off fan",
      server: "home-assistant",
      service_domain: "switch",
      service: "turn_off",
      data: { entity_id: "switch.bathroom_fan" }
    }
  ]
};

return { json: { flow } };
```

5. **Telegram** - preview + –∫–Ω–æ–ø–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

---

## üìä AI –ê–≥–µ–Ω—Ç #5: –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

**AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç 3 –º–µ—Å—è—Ü–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–∞–µ—Ç –∏–Ω—Å–∞–π—Ç—ã:**

```text
ü§ñ AI –ê–Ω–∞–ª–∏–∑ (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π):

üìä –û–±–Ω–∞—Ä—É–∂–∏–ª –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

1. –û—Ç–æ–ø–ª–µ–Ω–∏–µ vs –ü–æ–≥–æ–¥–∞
   ‚Ä¢ –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è: 0.87 (–æ—á–µ–Ω—å —Å–∏–ª—å–Ω–∞—è)
   ‚Ä¢ –ü—Ä–∏ -10¬∞C –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ = 4.2 –∫–í—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
   ‚Ä¢ –ü—Ä–∏ +10¬∞C –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ = 0.8 –∫–í—Ç

   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
      –¢–µ–∫—É—â–∞—è –∫—Ä–∏–≤–∞—è: target = 25 - (outdoor * 0.5)
      –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è: target = 24 - (outdoor * 0.6)
      –≠–∫–æ–Ω–æ–º–∏—è: ~180 —Ä—É–±/–º–µ—Å—è—Ü

2. –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∫–∞–º–µ—Ä—ã "–í—ä–µ–∑–¥"
   ‚Ä¢ –ü–∞—Ç—Ç–µ—Ä–Ω: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å 14:00-15:00
   ‚Ä¢ –ü—Ä–∏—á–∏–Ω–∞: —Å–æ–ª–Ω—Ü–µ —Å–≤–µ—Ç–∏—Ç –ø—Ä—è–º–æ –≤ –∫–∞–º–µ—Ä—É
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: 15-20 —Ä–∞–∑/—á–∞—Å

   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
      –û—Ç–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è 14:00-15:00
      –ò–ª–∏ –ø–æ–≤–µ—Ä–Ω—É—Ç—å –∫–∞–º–µ—Ä—É –Ω–∞ 15¬∞ –≤–ª–µ–≤–æ

3. –ê–Ω–æ–º–∞–ª–∏—è: –≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–æ —Å—Ä–µ–¥–∞–º
   ‚Ä¢ –ö–∞–∂–¥—É—é —Å—Ä–µ–¥—É +35% –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
   ‚Ä¢ –í—Ä–µ–º—è: 10:00-14:00
   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞: —Å—Ç–∏—Ä–∫–∞ + —É–±–æ—Ä–∫–∞ + –≥–æ—Ç–æ–≤–∫–∞

   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
      –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å—Ç–∏—Ä–∫—É –Ω–∞ –Ω–æ—á–Ω–æ–π —Ç–∞—Ä–∏—Ñ (22:00-06:00)
      –≠–∫–æ–Ω–æ–º–∏—è: ~200 —Ä—É–±/–º–µ—Å—è—Ü
```

### n8n Workflow

1. **Cron** - —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 20:00)

2. **Home Assistant** - –∏—Å—Ç–æ—Ä–∏—è –∑–∞ 90 –¥–Ω–µ–π
   - –í—Å–µ climate entities
   - –í—Å–µ power sensors
   - –í—Å–µ camera events

3. **Code** - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è AI

```javascript
// –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
const data = {
  heating_history: groupByDay($json.climate_data),
  power_history: groupByDay($json.power_data),
  camera_events: groupByHour($json.camera_data),
  outdoor_temp: $json.weather_data
};

// –†–∞—Å—á–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π
const correlation = calculateCorrelation(
  data.outdoor_temp,
  data.heating_history
);

return { json: { data, correlation } };
```

4. **AI Agent** (Llama 3 –∏–ª–∏ DeepSeek)
   - System prompt:

```text
–¢—ã data scientist –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π —É–º–Ω—ã–π –¥–æ–º.

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –∑–∞ 90 –¥–Ω–µ–π:
- –û—Ç–æ–ø–ª–µ–Ω–∏–µ (15 –∑–æ–Ω)
- –≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
- –°–æ–±—ã—Ç–∏—è –∫–∞–º–µ—Ä
- –ü–æ–≥–æ–¥–∞

–ù–∞–π–¥–∏:
1. –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
2. –ê–Ω–æ–º–∞–ª–∏–∏ –∏ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–î–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å —Ä–∞—Å—á–µ—Ç–æ–º —ç–∫–æ–Ω–æ–º–∏–∏ –≤ —Ä—É–±–ª—è—Ö.
```

5. **Google Sheets** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ insights

6. **Telegram** - –æ—Ç—á–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

**–¶–µ–Ω–Ω–æ—Å—Ç—å:** –ù–∞—Ö–æ–¥–∏—Ç –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —ç–∫–æ–Ω–æ–º–∏—Ç –¥–µ–Ω—å–≥–∏!

---

## üîç AI –ê–≥–µ–Ω—Ç #6: –û—Ç–ª–∞–¥—á–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

**AI –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–π—Ç–∏ –±–∞–≥–∏ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è—Ö:**

```text
üë§: "automation.heating_night –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç"

ü§ñ AI Debugger:
  1. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–∑ HA
  2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É
  3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö entities
  4. –°–∏–º—É–ª–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
  5. –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É

ü§ñ: "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª automation.heating_night:

trigger:
  - platform: time
    at: '22:00:00'

condition:
  - condition: state
    entity_id: person.home  ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
    state: 'home'

üî¥ –ù–ê–ô–î–ï–ù–û:
  –°–µ–π—á–∞—Å person.home = 'not_home'
  –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –≤–∞—Å –Ω–µ—Ç –¥–æ–º–∞ –≤ 22:00

‚ùì –í–û–ü–†–û–°:
  –≠—Ç–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ? (–Ω–µ –≥—Ä–µ—Ç—å –∫–æ–≥–¥–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç)
  –ò–ª–∏ –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å —É—Å–ª–æ–≤–∏–µ person.home?

  –¢–∞–∫–∂–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ:
  ‚ö†Ô∏è  –ù–µ—Ç fallback –µ—Å–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–æ–ø—É—â–µ–Ω
     –†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π —Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ person.home ‚Üí home"
```

### n8n Workflow

1. **Telegram** - –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

2. **Home Assistant** - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   - Get automation YAML
   - Get —Ç–µ–∫—É—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö entity_id
   - Get execution history (–µ—Å–ª–∏ –µ—Å—Ç—å)

3. **AI Agent** (DeepSeek-Coder)
   - –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ HA YAML
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É
   - –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—ã
   - –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è

4. **Telegram** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ + fix

---

## üéØ AI –ê–≥–µ–Ω—Ç #7: –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä 15 –∑–æ–Ω –æ—Ç–æ–ø–ª–µ–Ω–∏—è

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

**AI —É—á–∏—Ç—Å—è –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç:**

```text
AI —Å–æ–±–∏—Ä–∞–µ—Ç 30 –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö:
  ‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–π –∑–æ–Ω—ã (–ø–æ —á–∞—Å–∞–º)
  ‚Ä¢ Outdoor temperature
  ‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å –æ—Ç–æ–ø–ª–µ–Ω–∏—è
  ‚Ä¢ –ö–æ–º—Ñ–æ—Ä—Ç (–∫–æ–≥–¥–∞ –∂–∞—Ä–∫–æ/—Ö–æ–ª–æ–¥–Ω–æ –ø–æ –æ—Ç–∑—ã–≤–∞–º)

AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:
  ‚Ä¢ –ö–∞–∫–∏–µ –∑–æ–Ω—ã –ø–µ—Ä–µ–æ—Ç–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
  ‚Ä¢ –ö–∞–∫–∏–µ –Ω–µ–¥–æ—Ç–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
  ‚Ä¢ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏
  ‚Ä¢ –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∞—Ç—å –∑–æ–Ω—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

AI –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç:
  ‚Ä¢ –ù–æ–≤—ã–µ —Ü–µ–ª–µ–≤—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
  ‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –∑–æ–Ω–∞–º
  ‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑ —ç–∫–æ–Ω–æ–º–∏–∏
```

### n8n Workflow

1. **Cron** - —Ä–∞–∑ –≤ –º–µ—Å—è—Ü

2. **Home Assistant** - –∏—Å—Ç–æ—Ä–∏—è 30 –¥–Ω–µ–π
   - –í—Å–µ climate entities (15 –∑–æ–Ω)
   - Outdoor temperature
   - Power consumption
   - (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "–∂–∞—Ä–∫–æ/—Ö–æ–ª–æ–¥–Ω–æ"

3. **Code** - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```javascript
const zones = [
  'living_room', 'bedroom', 'kitchen', 'bathroom',
  // ... –≤—Å–µ 15 –∑–æ–Ω
];

const analysis = zones.map(zone => {
  const history = getZoneHistory(zone, 30); // 30 –¥–Ω–µ–π

  return {
    zone,
    avg_temp: calculateAverage(history.temperatures),
    avg_target: calculateAverage(history.targets),
    time_above_target: calculatePercentage(history.above_target),
    time_below_target: calculatePercentage(history.below_target),
    estimated_cost: calculateCost(history.runtime, zone_size)
  };
});

return { json: { zones: analysis } };
```

4. **AI Agent** (Llama 3 –∏–ª–∏ Mistral)
   - System prompt:

```text
–¢—ã –∏–Ω–∂–µ–Ω–µ—Ä-—Ç–µ–ø–ª–æ—Ç–µ—Ö–Ω–∏–∫ —Å AI.

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–ø–ª–µ–Ω–∏—è –∑–∞ 30 –¥–Ω–µ–π (15 –∑–æ–Ω).

–î–ª—è –∫–∞–∂–¥–æ–π –∑–æ–Ω—ã –æ—Ü–µ–Ω–∏:
1. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–Ω–µ –ø–µ—Ä–µ–≥—Ä–µ–≤/–Ω–µ–¥–æ–≥—Ä–µ–≤?)
2. –°—Ç–æ–∏–º–æ—Å—Ç—å (—Ä—É–±/–º–µ—Å—è—Ü –Ω–∞ –∑–æ–Ω—É)
3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–º–æ–∂–Ω–æ –ª–∏ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å?)

–î–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ù–æ–≤—ã–µ —Ü–µ–ª–µ–≤—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- –†–∞—Å–ø–∏—Å–∞–Ω–∏—è (–∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å–Ω–∏–∂–∞—Ç—å)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–æ–Ω
- –ü—Ä–æ–≥–Ω–æ–∑ —ç–∫–æ–Ω–æ–º–∏–∏ –≤ —Ä—É–±–ª—è—Ö

–¢–∞—Ä–∏—Ñ: 5 —Ä—É–±/–∫–í—Ç*—á
```

5. **Telegram** - –æ—Ç—á–µ—Ç + –∫–Ω–æ–ø–∫–∏

```text
ü§ñ AI –ê–Ω–∞–ª–∏–∑ –æ—Ç–æ–ø–ª–µ–Ω–∏—è (30 –¥–Ω–µ–π)

üí∞ –¢–µ–∫—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: 4500 —Ä—É–±/–º–µ—Å—è—Ü

üî¥ –ü–µ—Ä–µ–æ—Ç–∞–ø–ª–∏–≤–∞–µ–º—ã–µ –∑–æ–Ω—ã:
  1. –ì–æ—Å—Ç–µ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞: 22¬∞C (–Ω–∏–∫–æ–≥–æ –Ω–µ—Ç 90% –≤—Ä–µ–º–µ–Ω–∏)
     –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —Å–Ω–∏–∑–∏—Ç—å –¥–æ 18¬∞C
     –≠–∫–æ–Ω–æ–º–∏—è: ~350 —Ä—É–±/–º–µ—Å—è—Ü

  2. –ö—É—Ö–Ω—è: 21¬∞C (–¥–Ω–µ–º –∂–∞—Ä–∫–æ –æ—Ç –≥–æ—Ç–æ–≤–∫–∏)
     –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: 19¬∞C –¥–Ω–µ–º, 21¬∞C –≤–µ—á–µ—Ä–æ–º
     –≠–∫–æ–Ω–æ–º–∏—è: ~180 —Ä—É–±/–º–µ—Å—è—Ü

üü° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:
  –ù–æ—á—å (00:00-06:00): —Å–Ω–∏–∑–∏—Ç—å –Ω–∞ 2¬∞C –≤–µ–∑–¥–µ
  –≠–∫–æ–Ω–æ–º–∏—è: ~400 —Ä—É–±/–º–µ—Å—è—Ü

‚úÖ –ò–¢–û–ì–û –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª: ~930 —Ä—É–±/–º–µ—Å—è—Ü (20%)

[üìä –î–µ—Ç–∞–ª–∏] [‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å—ë] [‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å]
```

6. **Home Assistant** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º!)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ AI –º–æ–¥–µ–ª–∏ –¥–ª—è Ollama

### –î–ª—è –≤–∞—à–µ–≥–æ —É–º–Ω–æ–≥–æ –¥–æ–º–∞

**1. Llama 3 (8B)** - –æ—Å–Ω–æ–≤–Ω–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
- **–†–∞–∑–º–µ—Ä:** 4.7 GB
- **RAM:** 8 GB
- **–°–∫–æ—Ä–æ—Å—Ç—å:** ~20 tokens/sec
- **–î–ª—è:** –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –∞–Ω–∞–ª–∏–∑, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

```bash
ollama pull llama3
```

**2. LLaVA** - –∞–Ω–∞–ª–∏–∑ –∫–∞–º–µ—Ä
- **–†–∞–∑–º–µ—Ä:** 4.7 GB
- **RAM:** 8 GB
- **–î–ª—è:** —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö

```bash
ollama pull llava
```

**3. DeepSeek-Coder (6.7B)** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
- **–†–∞–∑–º–µ—Ä:** 3.8 GB
- **RAM:** 8 GB
- **–î–ª—è:** –≥–µ–Ω–µ—Ä–∞—Ü–∏—è YAML, NodeRED flows

```bash
ollama pull deepseek-coder
```

**4. Nomic Embed Text** - embeddings –¥–ª—è RAG
- **–†–∞–∑–º–µ—Ä:** 274 MB
- **RAM:** 1 GB
- **–î–ª—è:** –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

```bash
ollama pull nomic-embed-text
```

**–ò—Ç–æ–≥–æ:** ~14 GB –º–µ—Å—Ç–∞, 8-16 GB RAM

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ Proxmox VM

**–ú–∏–Ω–∏–º—É–º –¥–ª—è Ollama:**
- CPU: 4 cores
- RAM: 16 GB (–¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –º–æ–¥–µ–ª–µ–π)
- Disk: 30 GB
- GPU: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 5-10x)

**–ú–æ–∂–Ω–æ –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ —á—Ç–æ n8n:**

```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å RAM –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ n8n
pct set <n8n_container_id> -memory 16384

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π LXC –¥–ª—è Ollama
```

---

## üöÄ –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (3 –Ω–µ–¥–µ–ª–∏)

### –ù–µ–¥–µ–ª—è 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–µ–Ω—å 1-2: Ollama**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama –Ω–∞ Proxmox
- ‚úÖ –°–∫–∞—á–∞—Ç—å 4 –º–æ–¥–µ–ª–∏
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ curl

**–î–µ–Ω—å 3: n8n + Ollama**
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å credential Ollama –≤ n8n
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π workflow (–ø—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç)

**–î–µ–Ω—å 4-5: –ü–µ—Ä–≤—ã–π AI –∞–≥–µ–Ω—Ç**
- ‚úÖ AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —É–º–Ω–æ–≥–æ –¥–æ–º–∞ (–°—Ü–µ–Ω–∞—Ä–∏–π #1)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö

### –ù–µ–¥–µ–ª—è 2: AI Vision –∏ RAG

**–î–µ–Ω—å 1-3: Vision –¥–ª—è –∫–∞–º–µ—Ä**
- ‚úÖ LLaVA –º–æ–¥–µ–ª—å
- ‚úÖ Workflow –∞–Ω–∞–ª–∏–∑–∞ –¥–≤–∏–∂–µ–Ω–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å HA

**–î–µ–Ω—å 4-5: RAG —Å–∏—Å—Ç–µ–º–∞**
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤

### –ù–µ–¥–µ–ª—è 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

**–î–µ–Ω—å 1-2: AI –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –æ—Ç–æ–ø–ª–µ–Ω–∏—è**
- ‚úÖ –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö 30 –¥–Ω–µ–π
- ‚úÖ AI –∞–Ω–∞–ª–∏–∑
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–î–µ–Ω—å 3-4: AI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä**
- ‚úÖ DeepSeek-Coder setup
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è NodeRED flows
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç

**–î–µ–Ω—å 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- ‚úÖ Dashboard n8n workflows
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ AI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤

---

## üéØ –¢–û–ü-3 AI –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –í–ê–®–ï–ì–û –¥–æ–º–∞

### 1. üå°Ô∏è AI –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –æ—Ç–æ–ø–ª–µ–Ω–∏—è (–ê–≥–µ–Ω—Ç #7)

**–ó–∞—á–µ–º:**
- 15 –∑–æ–Ω - —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- AI –Ω–∞–π–¥–µ—Ç –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –†–µ–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è 15-25%

**–û–∫—É–ø–∞–µ–º–æ—Å—Ç—å:** –ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü!

---

### 2. üìπ AI Vision –¥–ª—è –∫–∞–º–µ—Ä (–ê–≥–µ–Ω—Ç #2)

**–ó–∞—á–µ–º:**
- –ú–Ω–æ–≥–æ –∫–∞–º–µ—Ä = –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- LLaVA —Ä–∞–∑–ª–∏—á–∏—Ç —á–µ–ª–æ–≤–µ–∫–∞/–∂–∏–≤–æ—Ç–Ω–æ–µ
- 0 –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

**–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ:** –ë–µ—Å—Ü–µ–Ω–Ω–æ!

---

### 3. üß† AI RAG –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (–ê–≥–µ–Ω—Ç #3)

**–ó–∞—á–µ–º:**
- 150+ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —Å–ª–æ–∂–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ó–∞–±—ã–≤–∞–µ—Ç–µ –≥–¥–µ —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- AI –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –Ω–∞–π–¥–µ—Ç –∏ –æ–±—ä—è—Å–Ω–∏—Ç

**–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:** –ß–∞—Å—ã ‚Üí –º–∏–Ω—É—Ç—ã!

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `config.yml`:

```yaml
# n8n + AI Integration
n8n:
  enabled: true
  # n8n –Ω–∞ Proxmox
  url: "http://192.168.1.50:5678"
  api_key: ""  # –ü–æ–ª—É—á–∏—Ç–µ –≤ n8n

  # Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π LLM)
  ollama:
    enabled: true
    url: "http://192.168.1.51:11434"  # –ò–ª–∏ —Ç–æ—Ç –∂–µ —Ö–æ—Å—Ç —á—Ç–æ n8n
    models:
      assistant: "llama3"        # –û—Å–Ω–æ–≤–Ω–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
      vision: "llava"            # –ê–Ω–∞–ª–∏–∑ –∫–∞–º–µ—Ä
      coder: "deepseek-coder"    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
      embeddings: "nomic-embed-text"  # RAG
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ!)

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

```text
OpenAI GPT-4 (–æ–±–ª–∞—á–Ω—ã–π, –ø—Ä–æ–±–ª–µ–º—ã –≤ –†–§):
  ‚Ä¢ 300 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü = ~$15-20
  ‚Ä¢ –ù—É–∂–µ–Ω VPN
  ‚Ä¢ –î–∞–Ω–Ω—ã–µ —É—Ö–æ–¥—è—Ç –≤ –æ–±–ª–∞–∫–æ

Ollama –ª–æ–∫–∞–ª—å–Ω–æ (–≤–∞—à –≤–∞—Ä–∏–∞–Ω—Ç):
  ‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤ = $0
  ‚Ä¢ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –†–§ –±–µ–∑ VPN
  ‚Ä¢ –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ–º–∞
  ‚Ä¢ –ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ: ~$0 (—É–∂–µ –µ—Å—Ç—å Proxmox)
```

**ROI:** –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å! üöÄ

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Ollama –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç](https://ollama.com/)
- [n8n AI Agents](https://docs.n8n.io/advanced-ai/)
- [LLaVA Vision –º–æ–¥–µ–ª—å](https://ollama.com/library/llava)
- [Langchain –≤ n8n](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/)

---

**–ù–∞—á–Ω–∏—Ç–µ —Å AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (#1), –∑–∞—Ç–µ–º –¥–æ–±–∞–≤—å—Ç–µ Vision (#2) –∏ RAG (#3)!**
