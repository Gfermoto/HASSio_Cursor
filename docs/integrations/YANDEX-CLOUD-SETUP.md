# üîë –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π Yandex Cloud

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ Yandex Cloud –∏ –ø–æ–ª—É—á–µ–Ω–∏—é API –∫–ª—é—á–µ–π –¥–ª—è YandexGPT –∏ SpeechKit.

---

## üìã –ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

- **–Ø–Ω–¥–µ–∫—Å –∞–∫–∫–∞—É–Ω—Ç** (Yandex ID)
- **–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞** –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Å–ø–∏—Å–∞–Ω–∏–π –Ω–µ –±—É–¥–µ—Ç, –µ—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–≤–æ—Ç–∞)
- **10-15 –º–∏–Ω—É—Ç** –≤—Ä–µ–º–µ–Ω–∏

---

## üöÄ –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Yandex Cloud

### 1.1 –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ [console.cloud.yandex.ru](https://console.cloud.yandex.ru/)

### 1.2 –í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç

–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ –≤–∞—à –Ø–Ω–¥–µ–∫—Å –∞–∫–∫–∞—É–Ω—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π)

### 1.3 –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –≤–∞–º –ø—Ä–µ–¥–ª–æ–∂–∞—Ç:
- ‚úÖ **60 –¥–Ω–µ–π –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞**
- ‚úÖ **~‚ÇΩ4000 –≥—Ä–∞–Ω—Ç–æ–≤—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤**
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–≤–æ—Ç–∞ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≥—Ä–∞–Ω—Ç–∞**

**–í–∞–∂–Ω–æ:** –ü—Ä–∏–≤—è–∂–∏—Ç–µ –±–∞–Ω–∫–æ–≤—Å–∫—É—é –∫–∞—Ä—Ç—É –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ê–≤—Ç–æ—Å–ø–∏—Å–∞–Ω–∏–π –Ω–µ –±—É–¥–µ—Ç!

---

## üìÅ –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ (Folder)

### 2.1 –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥

1. –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥"**
2. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: `homeassistant` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

### 2.2 –ó–∞–ø–∏—à–∏—Ç–µ Folder ID

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∫–∞—Ç–∞–ª–æ–≥–∞ –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
# https://console.cloud.yandex.ru/folders/b1gXXXXXXXXXXXXXXXXX
#                                      ^^^^^^^^^^^^^^^^^^^^
# –≠—Ç–æ –≤–∞—à FOLDER_ID
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** `b1gXXXXXXXXXXXXXXXXX`

---

## üîê –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–∞

### 3.1 –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª IAM

1. –û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é (‚ò∞) ‚Üí **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º"** ‚Üí **"–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã"**
2. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç"**

### 3.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

- **–ò–º—è:** `n8n-voice-assistant`
- **–†–æ–ª–∏:**
  - `ai.languageModels.user` (–¥–ª—è YandexGPT)
  - `ai.speechkit-stt.user` (–¥–ª—è SpeechKit STT)

–ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

### 3.3 –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"API –∫–ª—é—á–∏"**
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –∫–ª—é—á"** ‚Üí **"API –∫–ª—é—á"**
4. **–í–ê–ñ–ù–û:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –°–†–ê–ó–£! –û–Ω –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω.

```bash
# –ü—Ä–∏–º–µ—Ä API –∫–ª—é—á–∞:
AQVN1HHJRkqfvJXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** `AQVN1HHJRkqf...`

---

## üí∞ –®–∞–≥ 4: –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–≤–æ—Ç–∞ (–≤–∞–∂–Ω–æ!)

### 4.1 –ö–≤–æ—Ç—ã YandexGPT

**YandexGPT Lite** (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å):
- ‚úÖ **–ü–µ—Ä–≤—ã–µ 2 –º–µ—Å—è—Ü–∞:** –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ
- ‚úÖ **–ü–æ—Å–ª–µ –≥—Ä–∞–Ω—Ç–∞:** 10,000 —Ç–æ–∫–µ–Ω–æ–≤/–¥–µ–Ω—å (‚âà200-300 –∑–∞–ø—Ä–æ—Å–æ–≤)

**YandexGPT** (–ø–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å):
- üíé –ü–ª–∞—Ç–Ω–∞—è –ø–æ—Å–ª–µ –≥—Ä–∞–Ω—Ç–∞ (~‚ÇΩ0.3 –∑–∞ 1000 —Ç–æ–∫–µ–Ω–æ–≤)

### 4.2 –ö–≤–æ—Ç—ã SpeechKit

**–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (STT):**
- ‚úÖ **–ü–µ—Ä–≤—ã–µ 2 –º–µ—Å—è—Ü–∞:** 3,000 –º–∏–Ω—É—Ç
- ‚úÖ **–ü–æ—Å–ª–µ –≥—Ä–∞–Ω—Ç–∞:** 180 –º–∏–Ω—É—Ç/–º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ

---

## üß™ –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### 5.1 –¢–µ—Å—Ç YandexGPT

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è
export FOLDER_ID="b1gXXXXXXXXXXXXXXXXX"
export API_KEY="AQVN1HHJRkqf..."

curl -X POST \
  https://llm.api.cloud.yandex.net/foundationModels/v1/completion \
  -H "Authorization: Api-Key ${API_KEY}" \
  -H "Content-Type: application/json" \
  -d '{
    "modelUri": "gpt://'"${FOLDER_ID}"'/yandexgpt-lite",
    "completionOptions": {
      "stream": false,
      "temperature": 0.6,
      "maxTokens": 100
    },
    "messages": [
      {
        "role": "system",
        "text": "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ —É–º–Ω–æ–≥–æ –¥–æ–º–∞"
      },
      {
        "role": "user",
        "text": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
      }
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "result": {
    "alternatives": [
      {
        "message": {
          "role": "assistant",
          "text": "–ü—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ..."
        }
      }
    ]
  }
}
```

### 5.2 –¢–µ—Å—Ç SpeechKit (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è —Ç–µ—Å—Ç–∞ –Ω—É–∂–µ–Ω –∞—É–¥–∏–æ—Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ OGG/OPUS:

```bash
curl -X POST \
  https://stt.api.cloud.yandex.net/speech/v1/stt:recognize \
  -H "Authorization: Api-Key ${API_KEY}" \
  -F "audio=@test.ogg" \
  -F "lang=ru-RU" \
  -F "folderId=${FOLDER_ID}"
```

---

## ‚úÖ –ò—Ç–æ–≥–æ: –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å

–ó–∞–ø–∏—à–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è n8n:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|----------|----------------|------------------|
| **Folder ID** | `b1gXXXXXXXXXXXXXXXXX` | –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã |
| **API Key** | `AQVN1HHJRkqf...` | Authorization –∑–∞–≥–æ–ª–æ–≤–æ–∫ |

---

## üìö –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ n8n

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–π –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ workflow:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `n8n-voice-assistant.json`
2. –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_YANDEX_FOLDER_ID` –Ω–∞ –≤–∞—à Folder ID
3. –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_YANDEX_CLOUD_API_KEY` –Ω–∞ –≤–∞—à API Key
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow

---

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞: "Invalid API key"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á –∏–ª–∏ –æ–Ω –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –Ω—É–∂–Ω–æ–º—É –∫–∞—Ç–∞–ª–æ–≥—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –∫–ª—é—á —Ü–µ–ª–∏–∫–æ–º
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ä–æ–ª–∏ `ai.languageModels.user` –∏ `ai.speechkit-stt.user`

### –û—à–∏–±–∫–∞: "Folder not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π Folder ID

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–Ω—Å–æ–ª–∏
2. –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `b1g`

### –û—à–∏–±–∫–∞: "Quota exceeded"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–µ–≤—ã—à–µ–Ω –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è (–∫–≤–æ—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ 00:00 UTC+3)
2. –ò–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ

---

## üí° –°–æ–≤–µ—Ç—ã –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏ –∫–≤–æ—Ç—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ YandexGPT Lite** –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏
2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ maxTokens** –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö (100-200 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∫–æ–º–∞–Ω–¥)
3. **–î–æ–±–∞–≤—å—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ n8n
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GigaChat –∫–∞–∫ fallback** –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ YandexGPT

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è YandexGPT](https://cloud.yandex.ru/docs/yandexgpt/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è SpeechKit](https://cloud.yandex.ru/docs/speechkit/)
- [–¢–∞—Ä–∏—Ñ—ã –∏ –∫–≤–æ—Ç—ã](https://cloud.yandex.ru/docs/yandexgpt/pricing)
- [–ü—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤](https://cloud.yandex.ru/docs/yandexgpt/quickstart)

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ n8n workflow üöÄ
