# ü§ñ –¢–µ–∫—Å—Ç–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è Home Assistant (100% –±–µ—Å–ø–ª–∞—Ç–Ω–æ)

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Home Assistant —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ –≤ Telegram. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã - GigaChat + Telegram.

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º:** –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ, —è—Ä–∫–æ—Å—Ç—å
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–º–∞—Ç–æ–º:** —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- ‚úÖ **–ó–∞–ø—É—Å–∫ —Å—Ü–µ–Ω:** –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π
- ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å –¥–∞—Ç—á–∏–∫–æ–≤
- ‚úÖ **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫:** –ø–∏—à–∏—Ç–µ –∫–∞–∫ —É–¥–æ–±–Ω–æ
- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ø–æ–º–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

| –°–µ—Ä–≤–∏—Å | –¶–µ–Ω–∞ |
|--------|------|
| **GigaChat** | ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞–≤—Å–µ–≥–¥–∞** |
| **Telegram** | ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| **Home Assistant** | ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |

**–ò—Ç–æ–≥–æ: ‚ÇΩ0/–º–µ—Å—è—Ü** üéâ

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```text
Telegram (—Ç–µ–∫—Å—Ç)
   ‚Üì
GigaChat + HA Tools
   ‚Üì
Home Assistant
   ‚Üì
Telegram (–æ—Ç–≤–µ—Ç)
```

**–í—Å–µ–≥–æ 16 —É–∑–ª–æ–≤** - –ø—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π workflow

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç workflow

```bash
n8n ‚Üí Import from File ‚Üí n8n-voice-assistant-free.local.json
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials

Workflow —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –≤–∞—à–∏–º–∏ –∫–ª—é—á–∞–º–∏:
- ‚úÖ GigaChat Authorization
- ‚úÖ Telegram Bot
- ‚úÖ Home Assistant

### –®–∞–≥ 3: –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ

```bash
n8n ‚Üí Active: ON
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –≤ Telegram:

```text
/help
```

---

## üí¨ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º

```text
–í–∫–ª—é—á–∏ —Å–≤–µ—Ç –Ω–∞ –∫—É—Ö–Ω–µ
–í—ã–∫–ª—é—á–∏ —Å–≤–µ—Ç –≤ —Å–ø–∞–ª—å–Ω–µ
–°–¥–µ–ª–∞–π —è—Ä—á–µ –≤ –≥–æ—Å—Ç–∏–Ω–æ–π
–£—Å—Ç–∞–Ω–æ–≤–∏ —è—Ä–∫–æ—Å—Ç—å 50% –Ω–∞ –∫—É—Ö–Ω–µ
–í—ã–∫–ª—é—á–∏ –≤—Å–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∏
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–º–∞—Ç–æ–º

```text
–°–¥–µ–ª–∞–π —Ç–µ–ø–ª–µ–µ –≤ —Å–ø–∞–ª—å–Ω–µ
–£—Å—Ç–∞–Ω–æ–≤–∏ 22 –≥—Ä–∞–¥—É—Å–∞ –≤ –¥–µ—Ç—Å–∫–æ–π
–ö–∞–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –≥–æ—Å—Ç–∏–Ω–æ–π?
```

### –°—Ü–µ–Ω—ã

```text
–ó–∞–ø—É—Å—Ç–∏ —Å—Ü–µ–Ω—É –í–µ—á–µ—Ä
–í–∫–ª—é—á–∏ –≤–µ—á–µ—Ä–Ω–∏–π —Ä–µ–∂–∏–º
–ê–∫—Ç–∏–≤–∏—Ä—É–π —Ä–µ–∂–∏–º –∫–∏–Ω–æ
```

### –°—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤

```text
–í–∫–ª—é—á–µ–Ω –ª–∏ —Å–≤–µ—Ç –≤ –≥–∞—Ä–∞–∂–µ?
–ö–∞–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞ —É–ª–∏—Ü–µ?
–ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç—É—Å –∫–ª–∏–º–∞—Ç–∞
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```text
/help - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
/clear - –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞
```

---

## üîß Home Assistant Tools

Workflow —Ä–µ–∞–ª–∏–∑—É–µ—Ç 5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

### 1. turn_on_light

–í–∫–ª—é—á–∞–µ—Ç —Å–≤–µ—Ç —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —è—Ä–∫–æ—Å—Ç—å—é

```javascript
{
  entity_id: "light.kitchen",
  brightness: 200  // 0-255, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

### 2. turn_off_light

–í—ã–∫–ª—é—á–∞–µ—Ç —Å–≤–µ—Ç

```javascript
{
  entity_id: "light.kitchen"
}
```

### 3. set_temperature

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É

```javascript
{
  entity_id: "climate.bedroom",
  temperature: 22
}
```

### 4. activate_scene

–ó–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ü–µ–Ω—É

```javascript
{
  entity_id: "scene.evening"
}
```

### 5. get_state

–ü–æ–ª—É—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

```javascript
{
  entity_id: "sensor.temperature"
}
```

---

## üß† –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–º–Ω–∏—Ç **–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ –¥–∏–∞–ª–æ–≥–µ.

**–ü—Ä–∏–º–µ—Ä:**

```text
–í—ã: –í–∫–ª—é—á–∏ —Å–≤–µ—Ç –Ω–∞ –∫—É—Ö–Ω–µ
–ë–æ—Ç: ‚úÖ –°–≤–µ—Ç –Ω–∞ –∫—É—Ö–Ω–µ –≤–∫–ª—é—á–µ–Ω

–í—ã: –ê —Ç–µ–ø–µ—Ä—å —Å–¥–µ–ª–∞–π —è—Ä—á–µ
–ë–æ—Ç: ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏–ª —è—Ä–∫–æ—Å—Ç—å 100% –Ω–∞ –∫—É—Ö–Ω–µ

–í—ã: –í—ã–∫–ª—é—á–∏
–ë–æ—Ç: ‚úÖ –°–≤–µ—Ç –Ω–∞ –∫—É—Ö–Ω–µ –≤—ã–∫–ª—é—á–µ–Ω
```

**–û—á–∏—Å—Ç–∫–∞:**

```bash
/clear
```

---

## üÜò Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** Workflow –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**

```bash
n8n ‚Üí Workflows ‚Üí –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow
```

### "–ù–µ –ø–æ–Ω—è–ª –∫–æ–º–∞–Ω–¥—É"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `entity_id` –≤ HA ‚Üí Developer Tools ‚Üí States
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è: "—Å–≤–µ—Ç –Ω–∞ –∫—É—Ö–Ω–µ", –∞ –Ω–µ "–∫—É—Ö–Ω—è"
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç: `/clear`

### –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—Ä–∞–≤ —É —Ç–æ–∫–µ–Ω–∞ HA

**–†–µ—à–µ–Ω–∏–µ:**

```yaml
# –í Home Assistant:
# Profile ‚Üí Long-Lived Access Tokens ‚Üí Create Token
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ n8n credentials
```

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é

–û—Ç–∫—Ä–æ–π—Ç–µ —É–∑–µ–ª **"GigaChat: Prepare Request"** –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –º–∞—Å—Å–∏–≤ `functions`:

```javascript
{
  name: "open_cover",
  description: "–û—Ç–∫—Ä—ã—Ç—å —à—Ç–æ—Ä—É",
  parameters: {
    type: "object",
    properties: {
      entity_id: {
        type: "string",
        description: "ID —à—Ç–æ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: cover.bedroom)"
      }
    },
    required: ["entity_id"]
  }
}
```

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É

–í —É–∑–ª–µ **"Execute: HA Command"** –¥–æ–±–∞–≤—å—Ç–µ case:

```javascript
case 'open_cover':
  domain = 'cover';
  service = 'open_cover';
  serviceData = { entity_id: args.entity_id };
  break;
```

---

## üó∫Ô∏è Roadmap

**–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è:** [VOICE-ASSISTANT-ROADMAP.md](./VOICE-ASSISTANT-ROADMAP.md)

### –ü–æ–∫–æ–ª–µ–Ω–∏–µ 2 (—Å OLLAMA)

- [ ] **–ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã** - Whisper (HA add-on)
- [ ] **OLLAMA** - –ª–æ–∫–∞–ª—å–Ω—ã–π LLM (llama3, mistral)
- [ ] **–ì–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã** - Piper TTS
- [ ] **–ë–æ–ª—å—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** - —à—Ç–æ—Ä—ã, –∑–∞–º–∫–∏, –º–µ–¥–∏–∞ (8 tools)

### –ü–æ–∫–æ–ª–µ–Ω–∏–µ 3 (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ)

- [ ] **Google Assistant** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–ª–æ–Ω–∫—É
- [ ] **–ì—Ä—É–ø–ø–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã** - "–≤—ã–∫–ª—é—á–∏ –≤–µ—Å—å —Å–≤–µ—Ç"
- [ ] **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫** - –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- [ ] **–ê–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ü–æ–∫–æ–ª–µ–Ω–∏–µ 4 (–∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ)

- [ ] **–ü—Ä–µ–¥–≤–∏–¥–µ–Ω–∏–µ** - –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- [ ] **–û–±—É—á–µ–Ω–∏–µ** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –ø—Ä–∏–≤—ã—á–∫–∞–º
- [ ] **Computer Vision** - –∞–Ω–∞–ª–∏–∑ –∫–∞–º–µ—Ä
- [ ] **100% offline** - –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å

**–í—Å—ë –±–µ—Å–ø–ª–∞—Ç–Ω–æ!** –î–µ—Ç–∞–ª–∏ –≤ [VOICE-ASSISTANT-ROADMAP.md](./VOICE-ASSISTANT-ROADMAP.md)

---

## üìö –§–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `n8n-voice-assistant-free.json` | –®–∞–±–ª–æ–Ω (—Å –∑–∞–≥–ª—É—à–∫–∞–º–∏) |
| `n8n-voice-assistant-free.local.json` | –†–∞–±–æ—á–∏–π (—Å –∫–ª—é—á–∞–º–∏, –Ω–µ –≤ git) |
| `README-voice-assistant.md` | –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [GigaChat Docs](https://developers.sber.ru/docs/ru/gigachat/api/overview)
- [n8n Home Assistant](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.homeassistant/)
- [HA REST API](https://developers.home-assistant.io/docs/api/rest/)
- [Telegram Bot API](https://core.telegram.org/bots/api)

---

## üìù Changelog

### v2.0 (2025-10-09) - 100% –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è

- ‚úÖ –£–±—Ä–∞–Ω Yandex Cloud (–ø–ª–∞—Ç–Ω—ã–π)
- ‚úÖ –¢–æ–ª—å–∫–æ GigaChat (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
- ‚úÖ –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç (–≥–æ–ª–æ—Å –¥–æ–±–∞–≤–∏–º —Å OLLAMA)
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π workflow (16 —É–∑–ª–æ–≤ –≤–º–µ—Å—Ç–æ 20+)
- ‚úÖ 5 Home Assistant tools
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `n8n-voice-assistant-free.local.json` –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –¥–æ–º–æ–º —á–µ—Ä–µ–∑ Telegram! üí¨
